(function(rOb,Jj){function l(a,b){a=Object.create(a);for(var c in b)a[c
		]=b[c
		];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a
	}function eRb(){null==Kka&&(Kka=new sHb(!0));var a=jn.current;null!=a&&null!=a.renderer&&(Kka.addCollector(new uZ("WebGL Performance Caveat",function(){return fa.string(a.renderer.hasMajorPerformanceCaveat)
		})),Kka.addCollector(new uZ("Window Size",function(){return""+a.renderer.window.width+"x"+a.renderer.window.height
		})),Kka.addCollector(new uZ("Window Scale",
function(){return fa.string(a.renderer.window.scale)
		})),Kka.addCollector(new uZ("Canvas Size",function(){var b=a.renderer.window.backend.canvas;return""+b.width+"x"+b.height
		})),Kka.addCollector(new uZ("Drawing Buffer Size",function(){var b=a.renderer.context;return null!=b?""+b.drawingBufferWidth+"x"+b.drawingBufferHeight: "NO GL CONTEXT"
		})));return Kka
	}function HSb(a,b){var c=new lcb,d=function(k){k=K.__cast(c.content,B).get_bitmapData();b(Ha.Success(k))
		},e=function(k){b(Ha.Failure(new fi(null,
			"Error loading `"+
a.url+"`: "+k.text,
			{fileName: "src/de/innogames/common/assets/AssetLoadFunctions.hx",lineNumber: 29,className: "de.innogames.common.assets._AssetLoadFunctions.AssetLoadFunctions_Fields_",methodName: "loadBitmapData"
			})))
		};c.contentLoaderInfo.addEventListener("complete",d);c.contentLoaderInfo.addEventListener("ioError",e);var g=new tHb;g.checkPolicyFile=!0;c.load(a,g);return new ng(function(){c.contentLoaderInfo.removeEventListener("complete",d);c.contentLoaderInfo.removeEventListener("ioError",e);if(null==
c.content)try{c.close()
			}catch(k){}
		})
	}function ISb(a,b){return fRb(a,
		0,b)
	}function JSb(a,b){return fRb(a,
		1,b)
	}function fRb(a,b,c){var d=new vZ;d.dataFormat=b;var e=function(k){c(Ha.Success(d.data))
		},g=function(k){c(Ha.Failure(new fi(null,
			"Error loading `"+a.url+"`: "+k.text,
			{fileName: "src/de/innogames/common/assets/AssetLoadFunctions.hx",lineNumber: 73,className: "de.innogames.common.assets._AssetLoadFunctions.AssetLoadFunctions_Fields_",methodName: "createURLLoader"
			})))
		};d.addEventListener("complete",
e);d.addEventListener("ioError",g);d.load(a);return new ng(function(){d.removeEventListener("complete",e);d.removeEventListener("ioError",g);if(null==d.data)try{d.close()
			}catch(k){}
		})
	}function gRb(a,b){if(null!=a){a=a.frames;for(var c=0;c<a.length;){var d=a[c
				];++c;var e=d.length,g=d[e-1
				],k=null;6<e&&(k=new Z(d[
					5
				],d[
					6
				],d[
					7
				],d[
					8
				]));b(d[
					0
				],new Z(d[
					1
				],d[
					2
				],d[
					3
				],d[
					4
				]),k,
				"boolean"==typeof g&&g)
			}
		}
	}function KSb(a){var b=new Rc,c=!1,d=!1;window.showIframe({url:a,width: 920,height: 620,isNewShop:!0
		});var e=null;
e=function(g){if(gb.isObject(g.data))switch(g.data.name){case "Cashshop/close":window.removeEventListener("message",e);window.hideIframe();b.trigger(c?eF.Failed:d?eF.Purchased:eF.Canceled);break;case "Purchase/failed":c=!0;break;case "Purchase/success":d=!0
			}
		};window.addEventListener("message",e);return b
	}function sOb(a,b,c,d){b=P.createArialTextfield(16446953,b,c,
		0);b.set_width(d);b.set_text(a);b.set_filters(ma.getThinTextOutlineFilterArray());return b
	}function uHb(a){return"street"==a.type?a.requirements.street_connection_level: 0
	}function hRb(a){return a+"\n\n"+Ya.addWarningHintFormatting(r.gettext("CONFIRM|You will lose any unlocked unit slot and military units attached to this building."))
	}function LSb(a,b){return a.stateName==b.stateName?(a=a.animation,b=b.animation,a!=b?null!=a&&null!=b&&a.visible==b.visible?a.playing==b.playing:!1:!0):!1
	}function vHb(){return new Ya({title:r.gettext("GVG|Insufficient Rights"),closeable:hb.Yes,content:Ma.Text(r.gettext("GVG|You need to have the 'trusted' guild right in order to perform this action.")),
buttons:eb.SingleButton({kind:Ia.Orange,text:r.gettext("OK")
			})
		})
	}function MSb(a,b,c){switch(F.get_value(a._state)){case "blocked":return Iz.Undecided;case "finished":switch(F.get_value(c._state)){case "blocked":return Iz.NotChosen;case "finished":case "open":return Iz.Chosen
			}break;case "open":switch(F.get_value(b)._hx_index){case 0:return Iz.Undecided;case 1:return Iz.AwaitingChoice
			}
		}
	}function iRb(a,b){a=F.get_value(a._state);b=F.get_value(b._state);switch(a){case "blocked":return 0;case "open":switch(b){case "blocked":return 0;
case "open":return 0;default:return 3
			}default:return"blocked"==b?0: 3
		}
	}function NSb(a,b,c){a=F.get_value(a._state);c=F.get_value(c._state);switch(a){case "blocked":return 1;case "finished":switch(c){case "blocked":return 2;case "finished":case "open":return 3
			}break;case "open":switch(F.get_value(b)._hx_index){case 0:return 1;case 1:return 4
			}
		}
	}function OSb(a,b){return function(c,d){var e=b.hasImage(c.iconName)?b.getImage(c.iconName):a.getImage(c.iconName);return new mcb(c.bodyImageName,e,c.iconPosition,
d,a)
		}
	}function zQb(a,b,c){switch(a._hx_index){case 0:throw new ba("Start node is special and should always use the flag asset");case 1:c=AQb;var d=BQb;return{bodyLarge:!1,bodyImageName: "guild_raids_node_body_compact_donation",bodyPivot:c,iconName: "guild_raids_nodes_icon_choice",iconPosition:d,nodeId:b
			};case 2:d=a.armyType;var e=!1;switch(a.fightType){case "final-boss":e=!0;var g="final_boss_"+c;break;case "garrison":g="garrison";break;case "mini-boss":g="lieutnant_"+c;break;case "regular":g="fight";
break;case "stronghold":g="stronghold"
			}switch(d){case "attacking":var k="attacking";break;case "defending":k="defending"
			}e?(a="guild_raids_node_body_large_"+k,c=PSb,d=QSb):(a="guild_raids_node_body_compact_"+k,c=AQb,d=BQb);return{bodyLarge:e,bodyImageName:a,bodyPivot:c,iconName: "guild_raids_nodes_icon_"+g,iconPosition:d,nodeId:b
			};case 3:switch(a.type){case "goods":g="donation_goods";break;case "resources":g="donation";break;case "units":g="donation_units"
			}c=AQb;d=BQb;return{bodyLarge:!1,bodyImageName: "guild_raids_node_body_compact_donation",
bodyPivot:c,iconName: "guild_raids_nodes_icon_"+g,iconPosition:d,nodeId:b
			}
		}
	}function jRb(a){a=new va(a);a.set_textFormat(new Mb("_sans",
		13,
		4203536));a.get_textFormat().set_align(0);a.set_layoutData(xd.fillHorizontal());a.set_verticalAlign(ta.MIDDLE);a.set_wordWrap(!0);return a
	}function fJ(a,b,c){c.x=(a+b)*kRb;c.y=.5*(-a+b)*kRb
	}function lRb(a,b,c,d){a=F.get_value(a)|0;for(var e=[],g=0;g<d.length;){var k=d[g
			];++g;if(c.isEntityAvailable(k))switch(k.getExpansionType()){case "raidMedals":case "tileset_victory":e.push(k);
break;case "tileset_premium":Hh.isSameOrLater(F.get_value(b),k.getRequiredEra())&&e.push(k);break;case "tileset_reward": 0<a&&(e.push(k),--a)
			}
		}return e
	}function CQb(a,b,c){var d=new Fe;d.set_textColor(16446953);d.addIcon(c);d.set_text(a);d.setBackgroundSize(b-12,
		30);return d
	}function mRb(a,b,c,d){a.clearBoard();var e=RSb.h[b
		];if(null==e)throw ba.thrown("Layout data not found for layout: "+b);for(var g=0,k=0,t=e.length;k<t;){var u=k++;if(u>=tb.BOARD_LAYERS)break;for(var A=e[u
			],z=0;z<A.length;)0<A[z++
			]&&
++g
		}for(;0!=g%3;)--g;var J=[];z=tb.LEVEL_PIECES_DISTRIBUTION.h[b
		];if(null==z)throw ba.thrown("Configuration missing! No pieces available for layout: "+b);t=g/tb.SET_SIZE|0;switch(d){case "Iterative":for(k=A=0;k<t;)++k,u=z[A
			],J.push(u),J.push(u),J.push(u),A=(A+1)%z.length;break;case "Iterative Bingo":for(k=A=0;k<t;)++k,u=z[A
			],J.push(u),J.push(u),J.push(u),A=(A+1)%z.length;break;case "Random":for(k=0;k<t;)++k,u=z[fa.random(z.length)
			],J.push(u),J.push(u),J.push(u);break;case "Weighted":A=new wc;for(k=
b=0;k<z.length;)u=z[k
			],++k,d=wHb.WEIGHTS.exists(u)?wHb.WEIGHTS.get(u): 0,
			0<d&&(A.set(u,d),b+=d);if(100!=b)for(u=A.keys();u.hasNext();)d=u.next(),A.set(d,A.get(d)/b*100);z=new wc;k=0;for(u=A.keys();u.hasNext();)d=u.next(),b=Math.floor(A.get(d)/100*t),z.set(d,b|0),k+=b|0;if(k<t){b=[];for(u=A.keys();u.hasNext();)d=u.next(),g=A.get(d)/100*t,b.push({type:d,fraction:g-Math.floor(g)
				});b.sort(function(na,wa){return wa.fraction>na.fraction?1: -1
				});t-=k;for(k=0;k<t;)u=k++,u<b.length&&(u=b[u
				].type,z.set(u,z.get(u)+
1))
			}for(u=z.keys();u.hasNext();)for(d=u.next(),b=z.get(d),k=0;k<b;)++k,J.push(d),J.push(d),J.push(d)
		}for(k=J.length;1<k;)t=fa.random(k--),u=J[k
		],J[k
		]=J[t
		],J[t
		]=u;k=d=0;for(t=e.length;k<t;){u=k++;if(u>tb.BOARD_LAYERS)break;A=e[u
			];z=0;for(b=tb.BOARD_HEIGHT;z<b;){g=z++;for(var T=0,W=tb.BOARD_WIDTH;T<W;){var X=T++,da=g*tb.BOARD_WIDTH+X;if(da<A.length&&0<A[da
					]&&d<J.length){da=A[da
						];if(5==da){da=1;var pa=new j7(tb.BINGO_TYPES[fa.random(tb.BINGO_TYPES.length)
							],c,!0)
						}else pa=new j7(J[d
						],c,!1);pa=new xHb(X,
g,u,pa);pa.offsetType=da;a.placeTile(X,g,u,pa);++d
					}
				}
			}
		}a.updateSelectableTiles();return a
	}function DQb(a,b,c,d){a*=tb.TILE_WIDTH;b*=tb.TILE_HEIGHT;switch(d){case 1:a=a+c*tb.X_OFFSET|0;b=b+c*tb.Y_OFFSET|0;break;case 2:a=a+c*tb.X_OFFSET|0;break;case 3:b=b+c*tb.Y_OFFSET|0
		}return{x:a,y:b
		}
	}function nRb(a){for(var b=[],c=Object.create(null),d=[],e=0;e<a.length;){var g=a[e
			];++e;var k=fa.string(g.type);Object.prototype.hasOwnProperty.call(c,k)||(c[k
			]=[],d.push(k));c[k
			].push(g)
		}for(e=0;e<d.length;)for(a=c[d[e++
			]
		],
g=0;g<a.length;)b.push(a[g++
		]);return b
	}function oRb(a){return wZ._new(a,
		"age_transition_chest_explosion_",
		11,.5)
	}function pRb(a,b){return new Ya({title:r.gettext("Goods Donated"),closeable:hb.Yes,content:Ma.Multiple([Ma.TextAndImage(r.gettext("Your donation has been added to your guild's treasury."),Dc.Bitmap(Qe.next(Va.instance.loadImageLibrary("clanbattle/gui/general_ui/general_ui",
				null,null),function(c){return new cd(new dd(Ha.Success(c.getImage("icon_donate_goods"))))
				}))),Ma.Resources(r.gettext("Put into the guild treasury: "),
				[
					{resourceId:a,amount:b,kind:$n.Gain
					}
				])
			]),buttons:eb.SingleButton({kind:Ia.Orange,text:r.gettext("Ok")
			})
		})
	}function qRb(a){switch(a){case "buildings":return[Xj.LimitedBuildings,Xj.SetBuildings,Xj.ChainBuilding
			];case "packages":return[Xj.UpgradeKits,Xj.SelectionKits,Xj.MilitaryBoosts,Xj.Rewards,Xj.BuildingProductionBoosts,Xj.Other
			];default:return null
		}
	}function SSb(a){switch(a._hx_index){case 0:return null;case 1:return r.gettext("II24|Limited Buildings");case 2:return r.gettext("II24|Set Buildings");
case 3:return r.gettext("II24|Chain Buildings");case 4:return r.gettext("II24|Upgrade Kits");case 5:return r.gettext("II24|Selection Kits");case 6:return r.gettext("II24|Military Boosts");case 7:return r.gettext("II24|Rewards");case 8:return r.gettext("II24|Building Production Boosts");case 9:return r.gettext("II24|All other Consumables")
		}
	}function rRb(a,b,c){var d=160;a=(a-160)/(b.length+1)|0;c||(d=160+a);var e=[new Xc(new Yc(r.gettext("COP|Advancements"),
			null,!1,!1),d,
			0,null)
		];c&&(e.push(new Xc(new Yc("",
		null,!1,!1),a,d,null)),d+=a);for(c=0;c<b.length;){var g=b[c
			];++c;e.push(new Xc(new Yc(g,
			null,!1,!1),a,d,
			null,
			null,g));d+=a
		}return e
	}function sRb(){null==EQb&&(EQb=new pb(1,
		1,!0,
		1724427135));return EQb
	}function tRb(a,b){var c=r.gettext("Revenge"),d=new ZM;return new yu(F.bind(b,function(e){var g=d.link;null!=g&&g.cancel();d.link=null;switch(e._hx_index){case 0:a.set_enabled(!0);a.setText(c,
				16767426);break;case 1:a.set_enabled(!1);a.setText(c,
				16777215);break;case 2:a.set_enabled(!1),e=F.bind(e.timeLeft,
function(k){a.setText(xb.remainingEventHistoryButtonTime(k),
					16777215)
				}),g=d.link,null!=g&&g.cancel(),d.link=e
			}
		}),d)
	}function uRb(a){return new Ya({title:r.gettext("Save Your City!"),closeable:hb.Yes,content:Ma.TextAndImage(a,Dc.Portrait("righthand")),buttons:eb.SingleButton({kind:Ia.Orange,text:r.gettext("Close")
			})
		})
	}function vRb(a){return new Ya({title:r.gettext("Save Your City!"),closeable:hb.Yes,content:Ma.TextAndImage(r.gettext("We noticed that you've not confirmed your e-mail address. Do you want us to resend the confirmation mail?\nRemember, validating your e-mail will earn you an extra 50 Diamonds!"),
Dc.Portrait("righthand")),buttons:eb.TwoButtons({kind:Ia.Orange,text:r.gettext("Close")
			},
			{kind:Ia.Orange,text:r.gettext("Resend"),callback:Rb.fromSimple(function(){a.dispatchEvent(new Jz("EmailSignupEvent/PROVIDE_MAIL",
					"",!1,!1))
				})
			})
		})
	}function jC(a){return a instanceof Array?new Lv(a):a.iterator()
	}function m(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Jj.$haxeUID++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__
		];null==c&&(c=b.bind(a),a.hx__closures__[b.__id__
		]=
c);return c
	}var h={},N=function(){return K.__string_rec(this,
		"")
	},Ea=Ea||{},H,k7=function(){};h.ASCompat=k7;k7.__name__="ASCompat";k7.dynamicAs=function(a,b){return qb.as(a,b)
	};k7.toFixed=function(a,b){return a.toFixed(b)
	};k7.stringAsBool=function(a){return!!a
	};var kC=function(){};h.AppMain=kC;kC.__name__="AppMain";kC.start=rOb.startFoe=function(a,b){Wh=b;tOb.setUp();sa._init(uOb.parse(a.featureFlags,a.unlockedFeatures));b=kC._createLimeApplication(a);null==b.renderer.context?(ao.getInstance().track("hw_acc_not_supported"),
window.killPreloader(),window.handleContextError()):(b.exec(),b.renderer.hasMajorPerformanceCaveat&&(a=a.viewportSize,ao.getInstance().track("hw_acc_major_performance_caveat"),window.initLowerPerformanceMode((H=lC.initialize(a),m(H,H.requestChange)))),uS.__active=!0,a=b.stage,b=new Ir,a.addChild(b),b.init())
	};kC._createLimeApplication=function(a){var b=new jn;b.create({fps: 35,windows: [
				{element:window.document.getElementById(a.domElementName),background:a.backgroundColor,allowHighDPI:!0,resizable:!0,
depthBuffer:!1,stencilBuffer:!0,failIfMajorPerformanceCaveat:!1
				}
			]
		});return b
	};kC.getBuildConfiguration=rOb.getBuildConfiguration=function(){return"release"
	};kC._launch=function(a){var b=new Ir;a.addChild(b);b.init()
	};kC._notifyGLContextCreationError=function(){ao.getInstance().track("hw_acc_not_supported");window.killPreloader();window.handleContextError()
	};kC._notifyMajorPerformanceCaveat=function(a){ao.getInstance().track("hw_acc_major_performance_caveat");window.initLowerPerformanceMode((H=lC.initialize(a),
m(H,H.requestChange)))
	};kC.reloadGame=function(){qb.getURL(new kn("/game/index"),
		"_self")
	};var Yj=function(){};h[
		"openfl.events.IEventDispatcher"
	]=Yj;Yj.__name__="openfl.events.IEventDispatcher";Yj.__isInterface__=!0;Yj.prototype={__class__:Yj
	};var Jb=function(a){null!=a&&(this.__targetDispatcher=a)
	};h[
		"openfl.events.EventDispatcher"
	]=Jb;Jb.__name__="openfl.events.EventDispatcher";Jb.__interfaces__=[Yj
	];Jb.prototype={addEventListener:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=!1);if(null!=b)if(null==
this.__eventMap&&(this.__eventMap=new x,this.__iterators=new x),Object.prototype.hasOwnProperty.call(this.__eventMap.h,a)){k=this.__eventMap.h[a
				];e=0;for(var g=k.length;e<g;)if(k[e++
				].match(b,c))return;a=this.__iterators.h[a
				];for(e=0;e<a.length;)g=a[e
				],++e,g.active&&g.copy();this.__addListenerByPriority(k,new ncb(b,c,d))
			}else{var k=[];k.push(new ncb(b,c,d));g=new ocb(k);this.__eventMap.h[a
				]=k;this.__iterators.h[a
				]=[g
				]
			}
		},dispatchEvent:function(a){a.target=null!=this.__targetDispatcher?this.__targetDispatcher:
this;return this.__dispatchEvent(a)
		},hasEventListener:function(a){return null==this.__eventMap?!1:Object.prototype.hasOwnProperty.call(this.__eventMap.h,a)
		},removeEventListener:function(a,b,c){null==c&&(c=!1);if(null!=this.__eventMap&&null!=b){var d=this.__eventMap.h[a
				];if(null!=d){for(var e=this.__iterators.h[a
					],g=0,k=d.length;g<k;){var t=g++;if(d[t
						].match(b,c)){for(b=0;b<e.length;)e[b++
							].remove(d[t
							],t);d.splice(t,
							1);break
						}
					}0==d.length&&(d=this.__eventMap,e=a,Object.prototype.hasOwnProperty.call(d.h,
e)&&delete d.h[e
					],d=this.__iterators,e=a,Object.prototype.hasOwnProperty.call(d.h,e)&&delete d.h[e
					]);0>=Object.keys(this.__eventMap.h).length&&(this.__iterators=this.__eventMap=null)
				}
			}
		},toString:function(){return"[object "+K.getClass(this).__name__.split(".").pop()+"]"
		},willTrigger:function(a){return this.hasEventListener(a)
		},__dispatchEvent:function(a){if(null==this.__eventMap||null==a)return!0;var b=a.type,c=this.__eventMap.h[b
			];if(null==c)return!0;null==a.target&&(a.target=null!=this.__targetDispatcher?
this.__targetDispatcher:this);a.currentTarget=this;var d=1==a.eventPhase;b=this.__iterators.h[b
			];var e=b[
				0
			];e.active&&(e=new ocb(c),b.push(e));e.reset(c);for(c=e;c.hasNext();){var g=c.next();if(null!=g&&g.useCapture==d&&(g.callback(a),a.__isCanceledNow))break
			}e!=b[
				0
			]&&Wa.remove(b,e);return!0
		},__addListenerByPriority:function(a,b){for(var c=a.length,d=c,e=0;e<c;){var g=e++;if(a[g
				].priority<b.priority){d=g;break
				}
			}a.splice(d,
			0,b)
		},__class__:Jb
	};var AWa=function(){};h[
		"openfl.display.IBitmapDrawable"
	]=
AWa;AWa.__name__="openfl.display.IBitmapDrawable";AWa.__isInterface__=!0;AWa.prototype={__class__:AWa
	};var am=function(a,b,c){null!=a&&(this.create=a);null!=b&&(this.clean=b);null!=c&&this.set_size(c);this.__pool=new $d;this.inactiveObjects=this.activeObjects=0;this.__inactiveObject1=this.__inactiveObject0=null;this.__inactiveObjectList=new mC
	};h[
		"lime.utils.ObjectPool"
	]=am;am.__name__="lime.utils.ObjectPool";am.prototype={add:function(a){this.__pool.exists(a)||(this.__pool.set(a,!1),this.clean(a),
null==this.__inactiveObject0?this.__inactiveObject0=a:null==this.__inactiveObject1?this.__inactiveObject1=a:this.__inactiveObjectList.add(a),this.inactiveObjects++)
		},clean:function(a){},clear:function(){this.__pool=new $d;this.inactiveObjects=this.activeObjects=0;this.__inactiveObject1=this.__inactiveObject0=null;this.__inactiveObjectList.clear()
		},create:function(){return null
		},get:function(){var a=null;if(0<this.inactiveObjects)null!=this.__inactiveObject0?(a=this.__inactiveObject0,this.__inactiveObject0=
null):null!=this.__inactiveObject1?(a=this.__inactiveObject1,this.__inactiveObject1=null):(a=this.__inactiveObjectList.pop(),
			0<this.__inactiveObjectList.length&&(this.__inactiveObject0=this.__inactiveObjectList.pop()),
			0<this.__inactiveObjectList.length&&(this.__inactiveObject1=this.__inactiveObjectList.pop())),this.inactiveObjects--,this.activeObjects++;else if(null==this.__size||this.activeObjects<this.__size)a=this.create(),null!=a&&(this.__pool.set(a,!0),this.activeObjects++);return a
		},release:function(a){this.activeObjects--;
null==this.__size||this.activeObjects+this.inactiveObjects<this.__size?(this.clean(a),null==this.__inactiveObject0?this.__inactiveObject0=a:null==this.__inactiveObject1?this.__inactiveObject1=a:this.__inactiveObjectList.add(a),this.inactiveObjects++):this.__pool.remove(a)
		},__addInactive:function(a){null==this.__inactiveObject0?this.__inactiveObject0=a:null==this.__inactiveObject1?this.__inactiveObject1=a:this.__inactiveObjectList.add(a);this.inactiveObjects++
		},__getInactive:function(){if(null!=this.__inactiveObject0){var a=
this.__inactiveObject0;this.__inactiveObject0=null
			}else null!=this.__inactiveObject1?(a=this.__inactiveObject1,this.__inactiveObject1=null):(a=this.__inactiveObjectList.pop(),
			0<this.__inactiveObjectList.length&&(this.__inactiveObject0=this.__inactiveObjectList.pop()),
			0<this.__inactiveObjectList.length&&(this.__inactiveObject1=this.__inactiveObjectList.pop()));this.inactiveObjects--;this.activeObjects++;return a
		},__removeInactive:function(a){if(!(0>=a||0==this.inactiveObjects)&&(null!=this.__inactiveObject0&&
(this.__pool.remove(this.__inactiveObject0),this.__inactiveObject0=null,this.inactiveObjects--,--a),
			0!=a&&0!=this.inactiveObjects&&(null!=this.__inactiveObject1&&(this.__pool.remove(this.__inactiveObject1),this.__inactiveObject1=null,this.inactiveObjects--,--a),
			0!=a&&0!=this.inactiveObjects)))for(var b=this.__inactiveObjectList.h;null!=b;){var c=b.item;b=b.next;this.__pool.remove(c);this.__inactiveObjectList.remove(c);this.inactiveObjects--;--a;if(0==a||0==this.inactiveObjects)break
			}
		},get_size:function(){return this.__size
		},
set_size:function(a){if(null==a)this.__size=null;else{var b=this.inactiveObjects+this.activeObjects;this.__size=a;if(b>a)this.__removeInactive(b-a);else if(a>b)for(var c=0,d=a-b;c<d;)if(++c,b=this.create(),null!=b)this.__pool.set(b,!1),this.__inactiveObjectList.add(b),this.inactiveObjects++;else break
			}return a
		},__class__:am,__properties__: {set_size: "set_size",get_size: "get_size"
		}
	};var nC=function(){};h[
		"haxe.IMap"
	]=nC;nC.__name__="haxe.IMap";nC.__isInterface__=!0;nC.prototype={__class__:nC
	};var $d=
function(){this.h={__keys__: {}
		}
	};h[
		"haxe.ds.ObjectMap"
	]=$d;$d.__name__="haxe.ds.ObjectMap";$d.__interfaces__=[nC
	];$d.prototype={set:function(a,b){var c=a.__id__;null==c&&(c=a.__id__=Jj.$haxeUID++);this.h[c
			]=b;this.h.__keys__[c
			]=a
		},get:function(a){return this.h[a.__id__
			]
		},exists:function(a){return null!=this.h.__keys__[a.__id__
			]
		},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a
			])return!1;delete this.h[a
			];delete this.h.__keys__[a
			];return!0
		},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&
a.push(this.h.__keys__[b
			]);return new Lv(a)
		},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()
				},next:function(){var a=this.it.next();return this.ref[a.__id__
					]
				}
			}
		},keyValueIterator:function(){return new vS(this)
		},copy:function(){for(var a=new $d,b=this.keys();b.hasNext();){var c=b.next();a.set(c,this.h[c.__id__
				])
			}return a
		},toString:function(){var a="[";for(var b=this.keys();b.hasNext();){var c=b.next();a+=fa.string(fa.string(c));a+=" => ";a+=fa.string(fa.string(this.h[c.__id__
				]));
b.hasNext()&&(a+=", ")
			}return a+"]"
		},clear:function(){this.h={__keys__: {}
			}
		},__class__:$d
	};var mC=function(){this.length=0
	};h[
		"haxe.ds.List"
	]=mC;mC.__name__="haxe.ds.List";mC.prototype={add:function(a){a=new yHb(a,null);null==this.h?this.h=a:this.q.next=a;this.q=a;this.length++
		},pop:function(){if(null==this.h)return null;var a=this.h.item;this.h=this.h.next;null==this.h&&(this.q=null);this.length--;return a
		},clear:function(){this.q=this.h=null;this.length=0
		},remove:function(a){for(var b=null,c=this.h;null!=
c;){if(c.item==a)return null==b?this.h=c.next:b.next=c.next,this.q==c&&(this.q=b),this.length--,!0;b=c;c=c.next
			}return!1
		},iterator:function(){return new zHb(this.h)
		},__class__:mC
	};var Z=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d
	};h[
		"openfl.geom.Rectangle"
	]=Z;Z.__name__="openfl.geom.Rectangle";Z.prototype={clone:function(){return new Z(this.x,this.y,this.width,this.height)
		},contains:function(a,b){return a>=this.x&&b>=this.y&&
a<this.get_right()?b<this.get_bottom():!1
		},containsPoint:function(a){return this.contains(a.x,a.y)
		},containsRect:function(a){return 0>=a.width||0>=a.height?a.x>this.x&&a.y>this.y&&a.get_right()<this.get_right()?a.get_bottom()<this.get_bottom():!1:a.x>=this.x&&a.y>=this.y&&a.get_right()<=this.get_right()?a.get_bottom()<=this.get_bottom():!1
		},copyFrom:function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height
		},equals:function(a){return a==this?!0:null!=a&&this.x==a.x&&this.y==a.y&&this.width==
a.width?this.height==a.height:!1
		},inflate:function(a,b){this.x-=a;this.width+=2*a;this.y-=b;this.height+=2*b
		},inflatePoint:function(a){this.inflate(a.x,a.y)
		},intersection:function(a){var b=this.x<a.x?a.x:this.x,c=this.get_right()>a.get_right()?a.get_right():this.get_right();if(c<=b)return new Z;var d=this.y<a.y?a.y:this.y;a=this.get_bottom()>a.get_bottom()?a.get_bottom():this.get_bottom();return a<=d?new Z:new Z(b,d,c-b,a-d)
		},intersects:function(a){var b=this.x<a.x?a.x:this.x;if((this.get_right()>
a.get_right()?a.get_right():this.get_right())<=b)return!1;b=this.y<a.y?a.y:this.y;return(this.get_bottom()>a.get_bottom()?a.get_bottom():this.get_bottom())>b
		},isEmpty:function(){return 0>=this.width?!0: 0>=this.height
		},offset:function(a,b){this.x+=a;this.y+=b
		},offsetPoint:function(a){this.x+=a.x;this.y+=a.y
		},setEmpty:function(){this.x=this.y=this.width=this.height=0
		},setTo:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d
		},toString:function(){return"(x="+this.x+", y="+this.y+", width="+
this.width+", height="+this.height+")"
		},union:function(a){if(0==this.width||0==this.height)return a.clone();if(0==a.width||0==a.height)return this.clone();var b=this.x>a.x?a.x:this.x,c=this.get_right()<a.get_right()?a.get_right():this.get_right(),d=this.y>a.y?a.y:this.y;return new Z(b,d,c-b,(this.get_bottom()<a.get_bottom()?a.get_bottom():this.get_bottom())-d)
		},__contract:function(a,b,c,d){if(0!=this.width||0!=this.height){var e=0,g=0,k=0,t=0;this.x<a&&(e=a-this.x);this.y<b&&(g=b-this.y);this.get_right()>
a+c&&(k=a+c-this.get_right());this.get_bottom()>b+d&&(t=b+d-this.get_bottom());this.x+=e;this.y+=g;this.width+=k-e;this.height+=t-g
			}
		},__expand:function(a,b,c,d){if(0==this.width&&0==this.height)this.x=a,this.y=b,this.width=c,this.height=d;else{var e=this.get_right(),g=this.get_bottom();this.x>a&&(this.x=a,this.width=e-a);this.y>b&&(this.y=b,this.height=g-b);e<a+c&&(this.width=a+c-this.x);g<b+d&&(this.height=b+d-this.y)
			}
		},__toLimeRectangle:function(){null==Z.__limeRectangle&&(Z.__limeRectangle=new Dp);
Z.__limeRectangle.setTo(this.x,this.y,this.width,this.height);return Z.__limeRectangle
		},__transform:function(a,b){var c=b.a*this.x+b.c*this.y,d=c,e=b.b*this.x+b.d*this.y,g=e,k=b.a*(this.x+this.width)+b.c*this.y,t=b.b*(this.x+this.width)+b.d*this.y;k<c&&(c=k);t<e&&(e=t);k>d&&(d=k);t>g&&(g=t);k=b.a*(this.x+this.width)+b.c*(this.y+this.height);t=b.b*(this.x+this.width)+b.d*(this.y+this.height);k<c&&(c=k);t<e&&(e=t);k>d&&(d=k);t>g&&(g=t);k=b.a*this.x+b.c*(this.y+this.height);t=b.b*this.x+b.d*(this.y+
this.height);k<c&&(c=k);t<e&&(e=t);k>d&&(d=k);t>g&&(g=t);a.setTo(c+b.tx,e+b.ty,d-c,g-e)
		},get_bottom:function(){return this.y+this.height
		},set_bottom:function(a){this.height=a-this.y;return a
		},get_bottomRight:function(){return new p(this.x+this.width,this.y+this.height)
		},set_bottomRight:function(a){this.width=a.x-this.x;this.height=a.y-this.y;return a.clone()
		},get_left:function(){return this.x
		},set_left:function(a){this.width-=a-this.x;return this.x=a
		},get_right:function(){return this.x+this.width
		},
set_right:function(a){this.width=a-this.x;return a
		},get_size:function(){return new p(this.width,this.height)
		},set_size:function(a){this.width=a.x;this.height=a.y;return a.clone()
		},get_top:function(){return this.y
		},set_top:function(a){this.height-=a-this.y;return this.y=a
		},get_topLeft:function(){return new p(this.x,this.y)
		},set_topLeft:function(a){this.x=a.x;this.y=a.y;return a.clone()
		},__class__:Z,__properties__: {set_topLeft: "set_topLeft",get_topLeft: "get_topLeft",set_top: "set_top",get_top: "get_top",
set_size: "set_size",get_size: "get_size",set_right: "set_right",get_right: "get_right",set_left: "set_left",get_left: "get_left",set_bottomRight: "set_bottomRight",get_bottomRight: "get_bottomRight",set_bottom: "set_bottom",get_bottom: "get_bottom"
		}
	};var jc=function(){Jb.call(this);null!=jc.__initStage&&(this.stage=jc.__initStage,jc.__initStage=null);this.__alpha=1;this.__blendMode=10;this.__cacheAsBitmap=!1;this.__transform=new Eb;this.__visible=!0;this.__rotationSine=this.__rotation=0;this.__worldAlpha=
this.__scaleY=this.__scaleX=this.__rotationCosine=1;this.__worldBlendMode=10;this.__worldTransform=new Eb;this.__worldColorTransform=new ah;this.__renderTransform=new Eb;this.set_name("instance"+ ++jc.__instanceCount)
	};h[
		"openfl.display.DisplayObject"
	]=jc;jc.__name__="openfl.display.DisplayObject";jc.__interfaces__=[AWa
	];jc.__calculateAbsoluteTransform=function(a,b,c){c.a=a.a*b.a+a.b*b.c;c.b=a.a*b.b+a.b*b.d;c.c=a.c*b.a+a.d*b.c;c.d=a.c*b.b+a.d*b.d;c.tx=a.tx*b.a+a.ty*b.c+b.tx;c.ty=a.tx*b.b+a.ty*b.d+
b.ty
	};jc.__normalizeAngle=function(a){a%=360;180<a?a-=360: -180>a&&(a+=360);return a
	};jc.__super__=Jb;jc.prototype=l(Jb.prototype,
	{addEventListener:function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=0);null==c&&(c=!1);switch(a){case "activate":case "deactivate":case "enterFrame":case "exitFrame":case "frameConstructed":case "render":Object.prototype.hasOwnProperty.call(jc.__broadcastEvents.h,a)||(jc.__broadcastEvents.h[a
				]=[]);var g=jc.__broadcastEvents.h[a
				];-1==g.indexOf(this)&&g.push(this)
			}Jb.prototype.addEventListener.call(this,
a,b,c,d,e)
		},dispatchEvent:function(a){if(a instanceof Cd){var b=this.__getRenderTransform();a.stageX=a.localX*b.a+a.localY*b.c+b.tx;b=this.__getRenderTransform();a.stageY=a.localX*b.b+a.localY*b.d+b.ty
			}else a instanceof Po&&(b=this.__getRenderTransform(),a.stageX=a.localX*b.a+a.localY*b.c+b.tx,b=this.__getRenderTransform(),a.stageY=a.localX*b.b+a.localY*b.d+b.ty);return this.__dispatchWithCapture(a)
		},getBounds:function(a){var b=Eb.__pool.get();if(null!=a&&a!=this){b.copyFrom(this.__getWorldTransform());
var c=Eb.__pool.get();c.copyFrom(a.__getWorldTransform());c.invert();b.concat(c);Eb.__pool.release(c)
			}else b.identity();a=new Z;this.__getBounds(a,b);Eb.__pool.release(b);return a
		},getRect:function(a){return this.getBounds(a)
		},globalToLocal:function(a){return this.__globalToLocal(a,new p)
		},hitTestObject:function(a){return null!=a&&null!=a.parent&&null!=this.parent?this.getBounds(this).intersects(a.getBounds(this)):!1
		},hitTestPoint:function(a,b,c){null==c&&(c=!1);return null!=this.stage?this.__hitTest(a,
b,c,
			null,!0,this):!1
		},localToGlobal:function(a){return this.__getRenderTransform().transformPoint(a)
		},removeEventListener:function(a,b,c){null==c&&(c=!1);Jb.prototype.removeEventListener.call(this,a,b,c);switch(a){case "activate":case "deactivate":case "enterFrame":case "exitFrame":case "frameConstructed":case "render":this.hasEventListener(a)||Object.prototype.hasOwnProperty.call(jc.__broadcastEvents.h,a)&&Wa.remove(jc.__broadcastEvents.h[a
				],this)
			}
		},__cleanup:function(){null!=this.__graphics&&this.__graphics.__cleanup();
null!=this.__cacheBitmap&&(this.__cacheBitmap.__cleanup(),this.__cacheBitmap=null);null!=this.__cacheBitmapData&&(this.__cacheBitmapData.dispose(),this.__cacheBitmapData=null)
		},__dispatch:function(a){if(null!=this.__eventMap&&this.hasEventListener(a.type)){var b=Jb.prototype.__dispatchEvent.call(this,a);return a.__isCanceled?!0:b
			}return!0
		},__dispatchChildren:function(a){},__dispatchEvent:function(a){var b=null;a.bubbles&&(b=this.parent);var c=Jb.prototype.__dispatchEvent.call(this,a);if(a.__isCanceled)return!0;
null!=b&&b!=this&&(a.eventPhase=3,null==a.target&&(a.target=this),b.__dispatchEvent(a));return c
		},__dispatchWithCapture:function(a){null==a.target&&(a.target=this);if(null!=this.parent)if(a.eventPhase=1,this.parent==this.stage){if(this.parent.__dispatch(a),a.__isCanceled)return!0
			}else{for(var b=jc.__tempStack.get(),c=this.parent,d=0;null!=c;)b[d
				]=c,c=c.parent,++d;c=!1;for(var e=0,g=d;e<g;)if(b[d-e++-1
				].__dispatch(a),a.__isCanceled){c=!0;break
				}jc.__tempStack.release(b);if(c)return!0
			}a.eventPhase=2;
return this.__dispatchEvent(a)
		},__forceRenderDirty:function(){this.__renderDirty=!0;null!=this.__graphics&&this.__graphics.set___dirty(!0);null!=this.__cacheBitmap&&this.__cacheBitmap.__forceRenderDirty()
		},__getBounds:function(a,b){null!=this.__graphics&&this.__graphics.__getBounds(a,b)
		},__getCursor:function(){return null
		},__getFilterBounds:function(a,b){this.__getBounds(a,b);if(null!=this.__filters&&0<this.__filters.length){b=jc.__tempBoundsRectangle;b.setEmpty();for(var c=0,d=this.__filters;c<d.length;){var e=
d[c
					];++c;b.__expand(-e.__leftExtension,-e.__topExtension,e.__leftExtension+e.__rightExtension,e.__topExtension+e.__bottomExtension)
				}a.width+=b.width;a.height+=b.height;a.x+=b.x;a.y+=b.y
			}
		},__getInteractive:function(a){return!1
		},__getLocalBounds:function(a){this.__getBounds(a,this.__transform);a.x-=this.__transform.tx;a.y-=this.__transform.ty
		},__getRenderBounds:function(a,b){if(null==this.__scrollRect)this.__getBounds(a,b);else{var c=jc.__tempBoundsRectangle;this.__scrollRect.__transform(c,b);a.__expand(b.tx,
b.ty,c.width,c.height)
			}
		},__getRenderTransform:function(){this.__getWorldTransform();return this.__renderTransform
		},__getWorldTransform:function(){if(this.__worldTransformInvalid)if(null==this.parent)this.__updateTransforms();else{var a=[],b=this;do a.push(b),b=b.parent;while(null!=b&&b.__worldTransformInvalid);for(var c=a.length;0<=--c;)b=a[c
				],b.__updateTransforms()
			}return this.__worldTransform
		},__globalToLocal:function(a,b){this.__getRenderTransform();if(a==b){var c=this.__renderTransform,d=c.a*
c.d-c.b*c.c;if(0==d)a.x=-c.tx,a.y=-c.ty;else{var e=1/d*(c.c*(c.ty-a.y)+c.d*(a.x-c.tx));a.y=1/d*(c.a*(a.y-c.ty)+c.b*(c.tx-a.x));a.x=e
				}
			}else c=this.__renderTransform,d=c.a*c.d-c.b*c.c,b.x=0==d?-c.tx: 1/d*(c.c*(c.ty-a.y)+c.d*(a.x-c.tx)),c=this.__renderTransform,d=c.a*c.d-c.b*c.c,b.y=0==d?-c.ty: 1/d*(c.a*(a.y-c.ty)+c.b*(c.tx-a.x));return b
		},__hasFilters:function(){return null!=this.__filters?0<this.__filters.length:!1
		},__hitTest:function(a,b,c,d,e,g,k){null==k&&(k=!1);if(null!=this.__graphics){if(!g.get_visible()||
null!=this.__maskTarget||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;if(this.__graphics.__hitTest(a,b,c,this.__getRenderTransform()))return null==d||e||k||d.push(g),!0
			}return!1
		},__hitTestMask:function(a,b){return null!=this.__graphics&&this.__graphics.__hitTest(a,b,!0,this.__getRenderTransform())?!0:!1
		},__mouseThroughAllowed:function(){return!1
		},__readGraphicsData:function(a,b){null!=this.__graphics&&this.__graphics.__readGraphicsData(a)
		},__renderGL:function(a){this.__updateCacheBitmap(a,
!1);if(null!=this.__cacheBitmap&&!this.__cacheBitmapRender)gJ.render(this.__cacheBitmap,a);else if(!(null==this.opaqueBackground&&null==this.__graphics||!this.__renderable||0>=this.__worldAlpha)){if(null!=this.opaqueBackground&&!this.__cacheBitmapRender&&0<this.get_width()&&0<this.get_height()){a.blendModeManager.setBlendMode(this.__worldBlendMode);a.maskManager.pushObject(this);var b=a.gl,c=Z.__pool.get();c.setTo(0,
					0,this.get_width(),this.get_height());a.maskManager.pushRect(c,this.__renderTransform);
var d=this.opaqueBackground;b.clearColor((d>>>16&255)/255,(d>>>8&255)/255,(d&255)/255,
					1);b.clear(16384);a.maskManager.popRect();a.maskManager.popObject(this);Z.__pool.release(c)
				}null!=this.__graphics&&xZ.render(this,a)
			}
		},__renderGLMask:function(a){this.__updateCacheBitmap(a,!1);if(null!=this.__cacheBitmap&&!this.__cacheBitmapRender)gJ.renderMask(this.__cacheBitmap,a);else if(null!=this.opaqueBackground||null!=this.__graphics)null!=this.opaqueBackground&&!this.__cacheBitmapRender&&0<this.get_width()&&
0<this.get_height(),null!=this.__graphics&&xZ.renderMask(this,a)
		},__setParentRenderDirty:function(){for(var a=this.parent;null!=a&&!a.__renderDirty;)a.__renderDirty=!0,a=a.parent
		},__setRenderDirty:function(){this.__renderDirty||(this.__renderDirty=!0,null!=this.__maskTarget?this.__maskTarget.__setRenderDirty():this.__setParentRenderDirty());this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
		},__setStageReference:function(a){this.stage=a
		},__setTransformDirty:function(){this.__setWorldTransformInvalid();
this.__setParentRenderDirty();this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
		},__setUpdateDirty:function(){this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
		},__setParentUpdateTraverse:function(){for(var a=this.parent;null!=a&&!a.__updateTraverse;)a.__updateTraverse=!0,a=a.parent
		},__setWorldTransformInvalid:function(){this.__worldTransformInvalid=!0
		},__stopAllMovieClips:function(){},__traverse:function(){this.__updateDirty&&this.__update(!0)
		},
__update:function(a){a&&(this.__updateDirty=!1);var b=this.parent;null!=this.__maskTarget&&null==b&&(b=this.__maskTarget);if(!this.get_visible()||0==this.__scaleX||0==this.__scaleY||null!=this.__maskTarget||null!=b&&null!=b.__maskTarget)var c=!1;else null!=this.__mask?(c=this.__mask,c=!(0==c.__scaleX||0==c.__scaleY)):c=!0;this.__renderable=c;this.__updateTransforms();this.__worldColorTransform.__equals(this.get_transform().get_colorTransform())||(this.__worldColorTransform=this.get_transform().get_colorTransform().__clone());
null!=b?(this.__worldAlpha=this.get_alpha()*b.__worldAlpha,this.__worldColorTransform.__combine(b.__worldColorTransform),this.__worldBlendMode=null==this.__blendMode||10==this.__blendMode?b.__blendMode:this.__blendMode):this.__worldAlpha=this.get_alpha();null!=this.get_mask()&&this.get_mask().__update(a)
		},__isScaledToZero:function(){return 0!=this.__scaleX?0==this.__scaleY:!0
		},__updateCacheBitmap:function(a,b){if(this.__cacheBitmapRender)return!1;if(b||this.get_cacheAsBitmap()){b=null;var c=null==
this.__cacheBitmap||this.__cacheBitmapNeedsRender(),d=c||!this.__cacheBitmap.__worldTransform.equals(this.__renderTransform),e=null!=this.__filters&&0<this.__filters.length;a=a.pixelRatio;if(e&&!c)for(var g=0,k=this.__filters;g<k.length;)if(k[g++
				].__renderDirty){c=!0;break
				}k=g=0;if(d||c)b=Z.__pool.get(),this.__getFilterBounds(b,this.__renderTransform),g=Math.ceil(Math.round(b.width*a*10)/10),k=Math.ceil(Math.round(b.height*a*10)/10),c||null==this.__cacheBitmap||g==this.__cacheBitmap.get_width()&&
k==this.__cacheBitmap.get_height()||(c=!0);if(c){this.__cacheBitmapBackground=this.opaqueBackground;var t=null!=this.opaqueBackground?-16777216|this.opaqueBackground: 0;if(.5<=b.width&&.5<=b.height)null==this.__cacheBitmap||g!=this.__cacheBitmap.get_width()||k!=this.__cacheBitmap.get_height()?(this.__cacheBitmapData=new pb(g,k,!0,t),this.__cacheBitmapData.__pixelRatio=a,null==this.__cacheBitmap&&(this.__cacheBitmap=new B),this.__cacheBitmap.__bitmapData=this.__cacheBitmapData):this.__cacheBitmapData.fillRect(this.__cacheBitmapData.rect,
t);else return this.__cacheBitmapData=this.__cacheBitmap=null,!0
				}if(d||c)this.__cacheBitmap.__worldTransform.copyFrom(this.__renderTransform),this.__cacheBitmap.__renderTransform.identity(),this.__cacheBitmap.__renderTransform.tx=b.x,this.__cacheBitmap.__renderTransform.ty=b.y,this.__cacheBitmap.__batchQuadDirty=!0;this.__cacheBitmap.smoothing=!1;this.__cacheBitmap.__renderable=this.__renderable;this.__cacheBitmap.__worldAlpha=this.__worldAlpha;this.__cacheBitmap.__worldBlendMode=this.__worldBlendMode;
this.__cacheBitmap.__scrollRect=this.__scrollRect;this.__cacheBitmap.set_mask(this.__mask);if(c){this.__cacheBitmapRender=!0;g=Eb.__pool.get();g.copyFrom(this.__renderTransform);g.tx-=Math.round(b.x);g.ty-=Math.round(b.y);this.__cacheBitmapData.__drawBitmapCache(this,g,e);Eb.__pool.release(g);if(e){var u=e=!1;g=0;for(k=this.__filters;g<k.length;){var A=k[g
							];++g;A.__needSecondBitmapData&&(e=!0);A.__preserveObject&&(u=!0)
						}t=this.__cacheBitmapData;if(e){var z=new pb(t.width,t.height,!0,
							0);z.__pixelRatio=
a
						}else z=t;var J=null;u&&(J=new pb(t.width,t.height,!0,
						0),J.__pixelRatio=a);a=t.rect;u=new p;g=0;for(k=this.__filters;g<k.length;)A=k[g
						],++g,A.__preserveObject&&J.copyPixels(t,t.rect,u),A.__applyFilter(z,t,a,u),A.__preserveObject&&z.draw(J,
						null,this.get_transform().get_colorTransform()),A.__renderDirty=!1,e&&(A=t,t=z,z=A);this.__cacheBitmapData=t;this.__cacheBitmap.set_bitmapData(t)
					}this.__cacheBitmapRender=!1;null==this.__cacheBitmapColorTransform&&(this.__cacheBitmapColorTransform=new ah);this.__cacheBitmapColorTransform.__copyFrom(this.__worldColorTransform);
this.__cacheBitmapColorTransform.__isDefault()||this.__cacheBitmapData.colorTransform(this.__cacheBitmapData.rect,this.__cacheBitmapColorTransform)
				}(d||c)&&Z.__pool.release(b);return d
			}return null!=this.__cacheBitmap?(this.__cacheBitmapColorTransform=this.__cacheBitmapData=this.__cacheBitmap=null,!0):!1
		},__cacheBitmapNeedsRender:function(){return this.__renderDirty&&(null!=this.__children&&0<this.__children.length||null!=this.__graphics&&this.__graphics.__dirty)||this.opaqueBackground!=this.__cacheBitmapBackground?
!0:!this.__cacheBitmapColorTransform.__equals(this.__worldColorTransform)
		},__renderToBitmap:function(a,b,c,d){var e=this.__maskTarget,g=this.__visible,k=this.__renderable,t=this.__worldAlpha,u=this.__worldBlendMode,A=this.__mask,z=Eb.__pool.get(),J=Eb.__pool.get();z.copyFrom(this.__worldTransform);J.copyFrom(this.__renderTransform);d||(this.__mask=null);this.__maskTarget=null;this.__renderable=this.__visible=!0;this.__worldAlpha=1;this.__worldBlendMode=c;this.__worldTransform.copyFrom(b);this.__renderTransform.copyFrom(b);
this.__adjustRenderTransform();this.__updateChildrenForRenderToBitmap();this.__renderGL(a);this.__mask=A;this.__maskTarget=e;this.__visible=g;this.__renderable=k;this.__worldAlpha=t;this.__worldBlendMode=u;this.__worldTransform.copyFrom(z);this.__renderTransform.copyFrom(J);Eb.__pool.release(z);Eb.__pool.release(J);this.__updateChildrenForRenderToBitmap()
		},__updateChildrenForRenderToBitmap:function(){},__updateTransforms:function(){if(null!=this.parent){var a=this.__transform,b=this.parent.__worldTransform,
c=this.__worldTransform;c.a=a.a*b.a+a.b*b.c;c.b=a.a*b.b+a.b*b.d;c.c=a.c*b.a+a.d*b.c;c.d=a.c*b.b+a.d*b.d;c.tx=a.tx*b.a+a.ty*b.c+b.tx;c.ty=a.tx*b.b+a.ty*b.d+b.ty;a=this.__transform;b=this.parent.__renderTransform;c=this.__renderTransform;c.a=a.a*b.a+a.b*b.c;c.b=a.a*b.b+a.b*b.d;c.c=a.c*b.a+a.d*b.c;c.d=a.c*b.b+a.d*b.d;c.tx=a.tx*b.a+a.ty*b.c+b.tx;c.ty=a.tx*b.b+a.ty*b.d+b.ty
			}else this.__worldTransform.copyFrom(this.__transform),this.__renderTransform.copyFrom(this.__transform);this.__adjustRenderTransform();
this.__worldTransformInvalid=!1
		},__adjustRenderTransform:function(){if(null!=this.__scrollRect){var a=this.__renderTransform,b=-this.__scrollRect.x,c=-this.__scrollRect.y;a.tx=b*a.a+c*a.c+a.tx;a.ty=b*a.b+c*a.d+a.ty
			}
		},__snapToPixel:function(){var a=this.__pixelSnapping;if(null==a)return!1;switch(a){case 0:return!0;case 1:return 1==Math.abs(this.__renderTransform.a)?1==Math.abs(this.__renderTransform.d):!1;case 2:return!1
			}
		},get_pixelSnapping:function(){return this.__pixelSnapping
		},set_pixelSnapping:function(a){if(this.__pixelSnapping!=
a){this.__pixelSnapping=a;if(!this.__renderDirty)if(this.__renderDirty=!0,null!=this.__maskTarget){var b=this.__maskTarget;b.__renderDirty||(b.__renderDirty=!0,null!=b.__maskTarget?b.__maskTarget.__setRenderDirty():b.__setParentRenderDirty());b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())
				}else this.__setParentRenderDirty();this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
			}return a
		},get_alpha:function(){return this.__alpha
		},set_alpha:function(a){
			1<a&&
(a=1);if(a!=this.__alpha){if(!this.__renderDirty)if(this.__renderDirty=!0,null!=this.__maskTarget){var b=this.__maskTarget;b.__renderDirty||(b.__renderDirty=!0,null!=b.__maskTarget?b.__maskTarget.__setRenderDirty():b.__setParentRenderDirty());b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())
				}else this.__setParentRenderDirty();this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
			}return this.__alpha=a
		},get_blendMode:function(){return this.__blendMode
		},set_blendMode:function(a){null==
a&&(a=10);if(a!=this.__blendMode){if(!this.__renderDirty)if(this.__renderDirty=!0,null!=this.__maskTarget){var b=this.__maskTarget;b.__renderDirty||(b.__renderDirty=!0,null!=b.__maskTarget?b.__maskTarget.__setRenderDirty():b.__setParentRenderDirty());b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())
				}else this.__setParentRenderDirty();this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
			}return this.__blendMode=a
		},get_cacheAsBitmap:function(){return null==this.__filters?
this.__cacheAsBitmap:!0
		},set_cacheAsBitmap:function(a){if(a!=this.__cacheAsBitmap){this.__cacheAsBitmap=a;if(!this.__renderDirty)if(this.__renderDirty=!0,null!=this.__maskTarget){var b=this.__maskTarget;b.__renderDirty||(b.__renderDirty=!0,null!=b.__maskTarget?b.__maskTarget.__setRenderDirty():b.__setParentRenderDirty());b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())
				}else this.__setParentRenderDirty();this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
			}return a
		},
get_filters:function(){return null==this.__filters?[]:this.__filters.slice()
		},set_filters:function(a){null!=a&&0==a.length&&(a=null);this.__filters=a;if(!this.__renderDirty)if(this.__renderDirty=!0,null!=this.__maskTarget){var b=this.__maskTarget;b.__renderDirty||(b.__renderDirty=!0,null!=b.__maskTarget?b.__maskTarget.__setRenderDirty():b.__setParentRenderDirty());b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())
			}else this.__setParentRenderDirty();this.__updateDirty||(this.__updateDirty=
!0,this.__setParentUpdateTraverse());return a
		},get_height:function(){var a=Z.__pool.get();this.__getLocalBounds(a);var b=a.height;Z.__pool.release(a);return b
		},set_height:function(a){var b=Z.__pool.get(),c=Eb.__pool.get();c.identity();this.__getBounds(b,c);a!=b.height?this.set_scaleY(a/b.height):this.set_scaleY(1);Z.__pool.release(b);Eb.__pool.release(c);return a
		},get_loaderInfo:function(){return null!=this.stage?pk.current.__loaderInfo: null
		},get_mask:function(){return this.__mask
		},set_mask:function(a){if(a==
this.__mask)return a;if(a!=this.__mask){this.__setTransformDirty();if(!this.__renderDirty)if(this.__renderDirty=!0,null!=this.__maskTarget){var b=this.__maskTarget;b.__renderDirty||(b.__renderDirty=!0,null!=b.__maskTarget?b.__maskTarget.__setRenderDirty():b.__setParentRenderDirty());b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())
				}else this.__setParentRenderDirty();this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
			}if(null!=this.__mask){this.__mask.__maskTarget=
null;this.__mask.__setTransformDirty();b=this.__mask;if(!b.__renderDirty)if(b.__renderDirty=!0,null!=b.__maskTarget){var c=b.__maskTarget;c.__renderDirty||(c.__renderDirty=!0,null!=c.__maskTarget?c.__maskTarget.__setRenderDirty():c.__setParentRenderDirty());c.__updateDirty||(c.__updateDirty=!0,c.__setParentUpdateTraverse())
				}else b.__setParentRenderDirty();b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())
			}null!=a&&(a.__maskTarget=this,a.__setWorldTransformInvalid());null!=this.__cacheBitmap&&
this.__cacheBitmap.get_mask()!=a&&this.__cacheBitmap.set_mask(a);return this.__mask=a
		},get_mouseX:function(){var a=null!=this.stage?this.stage.__mouseX:pk.current.stage.__mouseX,b=null!=this.stage?this.stage.__mouseY:pk.current.stage.__mouseY,c=this.__getRenderTransform(),d=c.a*c.d-c.b*c.c;return 0==d?-c.tx: 1/d*(c.c*(c.ty-b)+c.d*(a-c.tx))
		},get_mouseY:function(){var a=null!=this.stage?this.stage.__mouseX:pk.current.stage.__mouseX,b=null!=this.stage?this.stage.__mouseY:pk.current.stage.__mouseY,c=this.__getRenderTransform(),
d=c.a*c.d-c.b*c.c;return 0==d?-c.ty: 1/d*(c.a*(b-c.ty)+c.b*(c.tx-a))
		},get_name:function(){return this.__name
		},set_name:function(a){return this.__name=a
		},get_root:function(){return null!=this.stage?pk.current: null
		},get_rotation:function(){return this.__rotation
		},set_rotation:function(a){a%=360;180<a?a-=360: -180>a&&(a+=360);if(a!=this.__rotation){this.__rotation=a;var b=Math.PI/180*this.__rotation;this.__rotationSine=Math.sin(b);this.__rotationCosine=Math.cos(b);this.__transform.a=this.__rotationCosine*
this.__scaleX;this.__transform.b=this.__rotationSine*this.__scaleX;this.__transform.c=-this.__rotationSine*this.__scaleY;this.__transform.d=this.__rotationCosine*this.__scaleY;this.__setTransformDirty()
			}return a
		},get_scaleX:function(){return this.__scaleX
		},set_scaleX:function(a){if(a!=this.__scaleX)if(this.__scaleX=a,
			0==this.__transform.b)a!=this.__transform.a&&this.__setTransformDirty(),this.__transform.a=a;else{var b=this.__rotationCosine*a,c=this.__rotationSine*a;this.__transform.a==b&&this.__transform.b==
c||this.__setTransformDirty();this.__transform.a=b;this.__transform.b=c
			}return a
		},get_scaleY:function(){return this.__scaleY
		},set_scaleY:function(a){if(a!=this.__scaleY)if(this.__scaleY=a,
			0==this.__transform.c)a!=this.__transform.d&&this.__setTransformDirty(),this.__transform.d=a;else{var b=-this.__rotationSine*a,c=this.__rotationCosine*a;this.__transform.d==c&&this.__transform.c==b||this.__setTransformDirty();this.__transform.c=b;this.__transform.d=c
			}return a
		},get_scrollRect:function(){return null==
this.__scrollRect?null:this.__scrollRect.clone()
		},set_scrollRect:function(a){var b=!1;null==a?(b=null!=this.__scrollRect,this.__scrollRect=null):null==this.__scrollRect?(this.__scrollRect=a.clone(),b=!0):this.__scrollRect.equals(a)||(this.__scrollRect.copyFrom(a),b=!0);b&&this.__setTransformDirty();return this.__scrollRect
		},get_transform:function(){null==this.__objectTransform&&(this.__objectTransform=new pcb(this));return this.__objectTransform
		},set_transform:function(a){if(null==a)throw ba.thrown(new Mv("Parameter transform must be non-null."));
null==this.__objectTransform&&(this.__objectTransform=new pcb(this));this.__setTransformDirty();this.__objectTransform.set_matrix(a.get_matrix());this.__objectTransform.set_colorTransform(a.get_colorTransform().__clone());return this.__objectTransform
		},get_visible:function(){return this.__visible
		},set_visible:function(a){if(a!=this.__visible){if(!this.__renderDirty)if(this.__renderDirty=!0,null!=this.__maskTarget){var b=this.__maskTarget;b.__renderDirty||(b.__renderDirty=!0,null!=b.__maskTarget?b.__maskTarget.__setRenderDirty():
b.__setParentRenderDirty());b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())
				}else this.__setParentRenderDirty();this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
			}return this.__visible=a
		},get_width:function(){var a=Z.__pool.get();this.__getLocalBounds(a);var b=a.width;Z.__pool.release(a);return b
		},set_width:function(a){var b=Z.__pool.get(),c=Eb.__pool.get();c.identity();this.__getBounds(b,c);a!=b.width?this.set_scaleX(a/b.width):this.set_scaleX(1);Z.__pool.release(b);
Eb.__pool.release(c);return a
		},get_x:function(){return this.__transform.tx
		},set_x:function(a){a!=this.__transform.tx&&this.__setTransformDirty();return this.__transform.tx=a
		},get_y:function(){return this.__transform.ty
		},set_y:function(a){a!=this.__transform.ty&&this.__setTransformDirty();return this.__transform.ty=a
		},get_scale9Grid:function(){return null
		},set_scale9Grid:function(a){return a
		},__class__:jc,__properties__: {set_y: "set_y",get_y: "get_y",set_x: "set_x",get_x: "get_x",set_width: "set_width",
get_width: "get_width",set_visible: "set_visible",get_visible: "get_visible",set_transform: "set_transform",get_transform: "get_transform",set_scrollRect: "set_scrollRect",get_scrollRect: "get_scrollRect",set_scaleY: "set_scaleY",get_scaleY: "get_scaleY",set_scaleX: "set_scaleX",get_scaleX: "get_scaleX",set_scale9Grid: "set_scale9Grid",get_scale9Grid: "get_scale9Grid",set_rotation: "set_rotation",get_rotation: "get_rotation",get_root: "get_root",set_name: "set_name",get_name: "get_name",get_mouseY: "get_mouseY",get_mouseX: "get_mouseX",
set_mask: "set_mask",get_mask: "get_mask",get_loaderInfo: "get_loaderInfo",set_height: "set_height",get_height: "get_height",set_filters: "set_filters",get_filters: "get_filters",set_cacheAsBitmap: "set_cacheAsBitmap",get_cacheAsBitmap: "get_cacheAsBitmap",set_blendMode: "set_blendMode",get_blendMode: "get_blendMode",set_alpha: "set_alpha",get_alpha: "get_alpha"
		}
	});var Bf=function(){jc.call(this);this.doubleClickEnabled=!1;this.mouseEnabled=!0;this.needsSoftKeyboard=!1;this.__tabEnabled=null;this.__tabIndex=-1
	};
h[
		"openfl.display.InteractiveObject"
	]=Bf;Bf.__name__="openfl.display.InteractiveObject";Bf.__super__=jc;Bf.prototype=l(jc.prototype,
	{requestSoftKeyboard:function(){pk.notImplemented({fileName: "openfl/display/InteractiveObject.hx",lineNumber: 29,className: "openfl.display.InteractiveObject",methodName: "requestSoftKeyboard"
			});return!1
		},__allowMouseFocus:function(){return this.get_tabEnabled()
		},__getInteractive:function(a){null!=a&&(a.push(this),null!=this.parent&&this.parent.__getInteractive(a));return!0
		},
__hitTest:function(a,b,c,d,e,g,k){null==k&&(k=!1);return!g.get_visible()||null!=this.__maskTarget||!k&&e&&!this.mouseEnabled?!1:jc.prototype.__hitTest.call(this,a,b,c,d,e,g,k)
		},__mouseThroughAllowed:function(){return this.mouseEnabled
		},get_tabEnabled:function(){return 1==this.__tabEnabled?!0:!1
		},set_tabEnabled:function(a){return this.__tabEnabled=a
		},get_tabIndex:function(){return this.__tabIndex
		},set_tabIndex:function(a){return this.__tabIndex=a
		},__class__:Bf,__properties__:l(jc.prototype.__properties__,
		{set_tabIndex: "set_tabIndex",get_tabIndex: "get_tabIndex",set_tabEnabled: "set_tabEnabled",get_tabEnabled: "get_tabEnabled"
		})
	});var Re=function(){Bf.call(this);this.mouseChildren=!0;this.__children=[]
	};h[
		"openfl.display.DisplayObjectContainer"
	]=Re;Re.__name__="openfl.display.DisplayObjectContainer";Re.__super__=Bf;Re.prototype=l(Bf.prototype,
	{addChild:function(a){return this.addChildAt(a,this.get_numChildren())
		},addChildAt:function(a,b){if(null==a)throw a=new Mv("Error #2007: Parameter child must be non-null."),
a.errorID=2007,ba.thrown(a);if(a.stage==a)throw a=new oc("Error #3783: A Stage object cannot be added as the child of another object."),a.errorID=3783,ba.thrown(a);if(b>this.__children.length||0>b)throw ba.thrown("Invalid index position "+b);if(a.parent==this){if(this.__children[b
				]!=a){Wa.remove(this.__children,a);this.__children.splice(b,
					0,a);if(!this.__renderDirty)if(this.__renderDirty=!0,null!=this.__maskTarget){var c=this.__maskTarget;c.__renderDirty||(c.__renderDirty=!0,null!=c.__maskTarget?
c.__maskTarget.__setRenderDirty():c.__setParentRenderDirty());c.__updateDirty||(c.__updateDirty=!0,c.__setParentUpdateTraverse())
					}else this.__setParentRenderDirty();this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
				}
			}else null!=a.parent&&a.parent.removeChild(a),this.__children.splice(b,
			0,a),a.parent=this,(b=null!=this.stage&&null==a.stage)&&a.__setStageReference(this.stage),a.__setTransformDirty(),a.__renderDirty||(a.__renderDirty=!0,null!=a.__maskTarget?(c=a.__maskTarget,
c.__renderDirty||(c.__renderDirty=!0,null!=c.__maskTarget?c.__maskTarget.__setRenderDirty():c.__setParentRenderDirty()),c.__updateDirty||(c.__updateDirty=!0,c.__setParentUpdateTraverse())):a.__setParentRenderDirty()),a.__updateDirty||(a.__updateDirty=!0,a.__setParentUpdateTraverse()),this.__renderDirty||(this.__renderDirty=!0,null!=this.__maskTarget?(c=this.__maskTarget,c.__renderDirty||(c.__renderDirty=!0,null!=c.__maskTarget?c.__maskTarget.__setRenderDirty():c.__setParentRenderDirty()),c.__updateDirty||
(c.__updateDirty=!0,c.__setParentUpdateTraverse())):this.__setParentRenderDirty()),this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse()),c=new D("added",!0),c.target=a,a.__dispatchWithCapture(c),b&&(c=new D("addedToStage",!1,!1),a.__dispatchWithCapture(c),a.__dispatchChildren(c));return a
		},areInaccessibleObjectsUnderPoint:function(a){return!1
		},contains:function(a){for(;a!=this&&null!=a;)a=a.parent;return a==this
		},getChildAt:function(a){return 0<=a&&a<this.__children.length?
this.__children[a
			]: null
		},getChildByName:function(a){for(var b=0,c=this.__children;b<c.length;){var d=c[b
				];++b;if(d.get_name()==a)return d
			}return null
		},getChildIndex:function(a){for(var b=0,c=this.__children.length;b<c;){var d=b++;if(this.__children[d
				]==a)return d
			}return-1
		},getObjectsUnderPoint:function(a){var b=[];this.__hitTest(a.x,a.y,!1,b,!1,this);b.reverse();return b
		},removeChild:function(a){if(null==a)throw a=new Mv("Error #2007: Parameter child must be non-null."),a.errorID=2007,ba.thrown(a);
if(a.parent!=this)throw a=new oc("Error #2025: The supplied DisplayObject must be a child of the caller."),a.errorID=2025,ba.thrown(a);a.__setTransformDirty();if(!a.__renderDirty)if(a.__renderDirty=!0,null!=a.__maskTarget){var b=a.__maskTarget;b.__renderDirty||(b.__renderDirty=!0,null!=b.__maskTarget?b.__maskTarget.__setRenderDirty():b.__setParentRenderDirty());b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())
			}else a.__setParentRenderDirty();a.__updateDirty||(a.__updateDirty=!0,
a.__setParentUpdateTraverse());this.__renderDirty||(this.__renderDirty=!0,null!=this.__maskTarget?(b=this.__maskTarget,b.__renderDirty||(b.__renderDirty=!0,null!=b.__maskTarget?b.__maskTarget.__setRenderDirty():b.__setParentRenderDirty()),b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())):this.__setParentRenderDirty());this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse());a.__dispatchWithCapture(new D("removed",!0));null!=this.stage&&(null!=a.stage&&this.stage.get_focus()==
a&&this.stage.set_focus(null),b=new D("removedFromStage",!1,!1),a.__dispatchWithCapture(b),a.__dispatchChildren(b),a.__setStageReference(null));a.parent=null;Wa.remove(this.__children,a);null==this.__removedChildren?this.__removedChildren=[a
			]:this.__removedChildren.push(a);a.__setTransformDirty();return a
		},removeChildAt:function(a){return 0<=a&&a<this.__children.length?this.removeChild(this.__children[a
			]): null
		},removeChildren:function(a,b){null==b&&(b=2147483647);null==a&&(a=0);if(2147483647==b&&
(b=this.__children.length-1,
			0>b))return;if(!(a>this.__children.length-1)){if(b<a||0>a||b>this.__children.length)throw ba.thrown(new vq("The supplied index is out of bounds."));for(b-=a;0<=b;)this.removeChildAt(a),--b
			}
		},resolve:function(a){if(null==this.__children)return null;for(var b=0,c=this.__children;b<c.length;){var d=c[b
				];++b;if(d.get_name()==a)return d
			}return null
		},setChildIndex:function(a,b){
			0<=b&&b<=this.__children.length&&a.parent==this&&(Wa.remove(this.__children,a),this.__children.splice(b,
			0,a))
		},stopAllMovieClips:function(){this.__stopAllMovieClips()
		},swapChildren:function(a,b){if(a.parent==this&&b.parent==this){var c=this.__children.indexOf(b);this.__children[this.__children.indexOf(a)
				]=b;this.__children[c
				]=a;this.__renderDirty||(this.__renderDirty=!0,null!=this.__maskTarget?(a=this.__maskTarget,a.__renderDirty||(a.__renderDirty=!0,null!=a.__maskTarget?a.__maskTarget.__setRenderDirty():a.__setParentRenderDirty()),a.__updateDirty||(a.__updateDirty=!0,a.__setParentUpdateTraverse())):
this.__setParentRenderDirty());this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
			}
		},swapChildrenAt:function(a,b){var c=this.__children[a
			];this.__children[a
			]=this.__children[b
			];this.__children[b
			]=c;this.__renderDirty||(this.__renderDirty=!0,null!=this.__maskTarget?(a=this.__maskTarget,a.__renderDirty||(a.__renderDirty=!0,null!=a.__maskTarget?a.__maskTarget.__setRenderDirty():a.__setParentRenderDirty()),a.__updateDirty||(a.__updateDirty=!0,a.__setParentUpdateTraverse())):this.__setParentRenderDirty());
this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
		},__cleanupRemovedChildren:function(){if(null!=this.__removedChildren){for(var a=0,b=this.__removedChildren;a<b.length;){var c=b[a
					];++a;null==c.stage&&c.__cleanup()
				}this.__removedChildren=null
			}
		},__cleanup:function(){Bf.prototype.__cleanup.call(this);for(var a=0,b=this.__children;a<b.length;)b[a++
			].__cleanup();this.__cleanupRemovedChildren()
		},__dispatchChildren:function(a){if(null!=this.__children)for(var b=0,c=this.__children;b<
c.length;){var d=c[b
				];++b;a.target=d;if(!d.__dispatchWithCapture(a))break;d.__dispatchChildren(a)
			}
		},__forceRenderDirty:function(){Bf.prototype.__forceRenderDirty.call(this);for(var a=0,b=this.__children;a<b.length;)b[a++
			].__forceRenderDirty()
		},__getBounds:function(a,b){Bf.prototype.__getBounds.call(this,a,b);if(0!=this.__children.length){for(var c=Eb.__pool.get(),d=0,e=this.__children;d<e.length;){var g=e[d
					];++d;if(0!=g.__scaleX&&0!=g.__scaleY){var k=g.__transform;c.a=k.a*b.a+k.b*b.c;c.b=k.a*b.b+
k.b*b.d;c.c=k.c*b.a+k.d*b.c;c.d=k.c*b.b+k.d*b.d;c.tx=k.tx*b.a+k.ty*b.c+b.tx;c.ty=k.tx*b.b+k.ty*b.d+b.ty;g.__getBounds(a,c)
					}
				}Eb.__pool.release(c)
			}
		},__getFilterBounds:function(a,b){Bf.prototype.__getFilterBounds.call(this,a,b);if(0!=this.__children.length){for(var c=Eb.__pool.get(),d=0,e=this.__children;d<e.length;){var g=e[d
					];++d;if(0!=g.__scaleX&&0!=g.__scaleY&&null==g.__maskTarget){var k=g.__transform;c.a=k.a*b.a+k.b*b.c;c.b=k.a*b.b+k.b*b.d;c.c=k.c*b.a+k.d*b.c;c.d=k.c*b.b+k.d*b.d;c.tx=k.tx*b.a+k.ty*
b.c+b.tx;c.ty=k.tx*b.b+k.ty*b.d+b.ty;g.__getFilterBounds(a,c)
					}
				}Eb.__pool.release(c)
			}
		},__getRenderBounds:function(a,b){if(null!=this.__scrollRect)Bf.prototype.__getRenderBounds.call(this,a,b);else if(Bf.prototype.__getBounds.call(this,a,b),
			0!=this.__children.length){for(var c=Eb.__pool.get(),d=0,e=this.__children;d<e.length;){var g=e[d
					];++d;if(0!=g.__scaleX&&0!=g.__scaleY&&null==g.__maskTarget){var k=g.__transform;c.a=k.a*b.a+k.b*b.c;c.b=k.a*b.b+k.b*b.d;c.c=k.c*b.a+k.d*b.c;c.d=k.c*b.b+k.d*b.d;c.tx=
k.tx*b.a+k.ty*b.c+b.tx;c.ty=k.tx*b.b+k.ty*b.d+b.ty;g.__getRenderBounds(a,c)
					}
				}Eb.__pool.release(c)
			}
		},__hitTest:function(a,b,c,d,e,g,k){null==k&&(k=!1);if(!g.get_visible()||null!=this.__maskTarget||!k&&e&&!this.mouseEnabled&&!this.mouseChildren||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b)||!this.__isPointInScrollRect(a,b))return!1;var t=this.__children.length;if(e)if(null==d||!this.mouseChildren)for(;0<=--t;){if(this.__children[t
				].__hitTest(a,b,c,
				null,!0,this.__children[t
				],k))return null==
d||k||d.push(g),!0
			}else{if(null!=d){e=d.length;for(var u,A=!1;0<=--t;){u=this.__children[t
						].__getInteractive(null);var z=k||u&&!this.__children[t
						].__mouseThroughAllowed()||!u&&!this.mouseEnabled;if((u||this.mouseEnabled&&!A||z)&&this.__children[t
						].__hitTest(a,b,c,d,!0,this.__children[t
						],z)&&(A=!0,!z&&u&&0<d.length))break
					}if(A)return!k&&this.mouseEnabled&&d.splice(e,
					0,g),!0
				}
			}else for(;0<=--t;)this.__children[t
			].__hitTest(a,b,c,d,!1,this.__children[t
			]);return!1
		},__hitTestMask:function(a,b){for(var c=
this.__children.length;0<=--c;)if(this.__children[c
			].__hitTestMask(a,b))return!0;return!1
		},__mouseThroughAllowed:function(){return this.mouseEnabled?!0:this.mouseChildren
		},__isPointInScrollRect:function(a,b){if(null!=this.__scrollRect){var c=p.__pool.get();c.setTo(a,b);a=this.__getRenderTransform();b=a.a*a.d-a.b*a.c;if(0==b)c.x=-a.tx,c.y=-a.ty;else{var d=1/b*(a.c*(a.ty-c.y)+a.d*(c.x-a.tx));c.y=1/b*(a.a*(c.y-a.ty)+a.b*(a.tx-c.x));c.x=d
				}if(!this.__scrollRect.containsPoint(c))return p.__pool.release(c),
!1;p.__pool.release(c)
			}return!0
		},__readGraphicsData:function(a,b){Bf.prototype.__readGraphicsData.call(this,a,b);if(b)for(var c=0,d=this.__children;c<d.length;)d[c++
			].__readGraphicsData(a,b)
		},__renderGL:function(a){this.__cleanupRemovedChildren();if(this.__renderable&&!(0>=this.__worldAlpha)&&(Bf.prototype.__renderGL.call(this,a),null==this.__cacheBitmap||this.__cacheBitmapRender)){if(0<this.__children.length)if(a.maskManager.pushObject(this),a.clearRenderDirty){for(var b=0,c=this.__children;b<c.length;){var d=
c[b
						];++b;d.__renderGL(a);d.__renderDirty=!1
					}this.__renderDirty=!1
				}else for(b=0,c=this.__children;b<c.length;)c[b++
				].__renderGL(a);0<this.__children.length&&a.maskManager.popObject(this)
			}
		},__renderGLMask:function(a){this.__cleanupRemovedChildren();Bf.prototype.__renderGLMask.call(this,a);if(null==this.__cacheBitmap||this.__cacheBitmapRender)if(a.clearRenderDirty){for(var b=0,c=this.__children;b<c.length;){var d=c[b
					];++b;d.__renderGLMask(a);d.__renderDirty=!1
				}this.__renderDirty=!1
			}else for(b=0,c=this.__children;b<
c.length;)c[b++
			].__renderGLMask(a)
		},__setStageReference:function(a){Bf.prototype.__setStageReference.call(this,a);if(null!=this.__children)for(var b=0,c=this.__children;b<c.length;)c[b++
			].__setStageReference(a)
		},__setWorldTransformInvalid:function(){if(!this.__worldTransformInvalid&&(this.__worldTransformInvalid=!0,null!=this.__children))for(var a=0,b=this.__children;a<b.length;)b[a++
			].__setWorldTransformInvalid()
		},__stopAllMovieClips:function(){for(var a=0,b=this.__children;a<b.length;)b[a++
			].__stopAllMovieClips()
		},
__traverse:function(){if(this.__updateDirty)this.__update(!0);else if(this.__updateTraverse)for(var a=0,b=this.__children;a<b.length;)b[a++
			].__traverse();this.__updateTraverse=!1
		},__update:function(a){a&&(this.__updateTraverse=!1);Bf.prototype.__update.call(this,a);for(var b=0,c=this.__children;b<c.length;)c[b++
			].__update(a)
		},__updateChildrenForRenderToBitmap:function(){for(var a=0,b=this.__children;a<b.length;)b[a++
			].__update(!1)
		},get_numChildren:function(){return this.__children.length
		},__class__:Re,
__properties__:l(Bf.prototype.__properties__,
		{get_numChildren: "get_numChildren"
		})
	});var C=function(){Re.call(this);this.buttonMode=!1;this.useHandCursor=!0
	};h[
		"openfl.display.Sprite"
	]=C;C.__name__="openfl.display.Sprite";C.__super__=Re;C.prototype=l(Re.prototype,
	{startDrag:function(a,b){null==a&&(a=!1);null!=this.stage&&this.stage.__startDrag(this,a,b)
		},stopDrag:function(){null!=this.stage&&this.stage.__stopDrag(this)
		},__getCursor:function(){return this.buttonMode&&this.useHandCursor?Gg.POINTER: null
		},
__hitTest:function(a,b,c,d,e,g,k){null==k&&(k=!1);if(!g.get_visible()||null!=this.__maskTarget)return!1;if(e&&!this.mouseEnabled&&!this.mouseChildren){if(this.__hitTestHitArea(a,b,c,d,e,g,k))return!0;if(!k)return!1
			}return null==this.get_mask()||this.get_mask().__hitTestMask(a,b)?this.__isPointInScrollRect(a,b)?Re.prototype.__hitTest.call(this,a,b,c,d,e,g,k)?e:null==this.hitArea&&null!=this.__graphics&&this.__graphics.__hitTest(a,b,c,this.__getRenderTransform())?(null==d||k||e&&!this.mouseEnabled||
d.push(g),!0):this.__hitTestHitArea(a,b,c,d,e,g,k):this.__hitTestHitArea(a,b,c,d,!0,g,k):this.__hitTestHitArea(a,b,c,d,e,g,k)
		},__hitTestHitArea:function(a,b,c,d,e,g,k){null==k&&(k=!1);return null==this.hitArea||this.hitArea.mouseEnabled?!1:(this.hitArea.mouseEnabled=!0,a=this.hitArea.__hitTest(a,b,c,
			null,!0,g,k),this.hitArea.mouseEnabled=!1,null!=d&&a&&!k&&(d[d.length
			]=g),a)
		},__hitTestMask:function(a,b){return Re.prototype.__hitTestMask.call(this,a,b)||null!=this.__graphics&&this.__graphics.__hitTest(a,
b,!0,this.__getRenderTransform())?!0:!1
		},get_graphics:function(){null==this.__graphics&&(this.__graphics=new Kz(this));return this.__graphics
		},get_tabEnabled:function(){return null==this.__tabEnabled?this.buttonMode:this.__tabEnabled
		},__class__:C,__properties__:l(Re.prototype.__properties__,
		{get_graphics: "get_graphics"
		})
	});var Jr=function(){C.call(this)
	};h[
		"de.innogames.shared.mvcs.Module"
	]=Jr;Jr.__name__="de.innogames.shared.mvcs.Module";Jr.__super__=C;Jr.prototype=l(C.prototype,
	{setup:function(a){},
dispose:function(){this._removeAllChildren();this._context.dispose();this._context=null
		},_removeAllChildren:function(){for(var a=this.get_numChildren();0!=a--;)this.removeChildAt(a)
		},__class__:Jr
	});var qcb=function(){C.call(this)
	};h.Battle=qcb;qcb.__name__="Battle";qcb.__super__=Jr;qcb.prototype=l(Jr.prototype,
	{setup:function(a){this._context=new rcb(this,a)
		},__class__:qcb
	});var AHb=function(){};h.BuildConfiguration=AHb;AHb.__name__="BuildConfiguration";var scb=function(){C.call(this)
	};h.CampaignMap=
scb;scb.__name__="CampaignMap";scb.__super__=Jr;scb.prototype=l(Jr.prototype,
	{setup:function(a){this._context=new tcb(this,a)
		},__class__:scb
	});var ucb=function(){C.call(this)
	};h.ClanCampaignMap=ucb;ucb.__name__="ClanCampaignMap";ucb.__super__=Jr;ucb.prototype=l(Jr.prototype,
	{setup:function(a){this._mainView=new BWa;this._context=new vcb(this._mainView,a);this._gvgContainer=new lb;a=nb.get_current().get_root();(a instanceof lb?a:null).addChild(this._gvgContainer);this._gvgContainer.set_touchable(!0);
this._gvgContainer.addChild(this._mainView)
		},dispose:function(){Jr.prototype.dispose.call(this);this._gvgContainer.set_touchable(!1);this._gvgContainer.removeChild(this._mainView,!0);if(null!=this._gvgContainer.get_parent()){var a=nb.get_current().get_root();(a instanceof lb?a:null).removeChild(this._gvgContainer,!0)
			}this._gvgContainer=null;this._mainView.dispose();this._mainView=null
		},__class__:ucb
	});var $M=function(){};h[
		"de.innogames.diagnostics.collectors.IDiagnosticCollector"
	]=$M;$M.__name__=
"de.innogames.diagnostics.collectors.IDiagnosticCollector";$M.__isInterface__=!0;$M.prototype={__class__:$M,__properties__: {get_name: "get_name"
		}
	};var uZ=function(a,b){this._name=a;this._collect=b
	};h[
		"_Diagnostics.GenericCollector"
	]=uZ;uZ.__name__="_Diagnostics.GenericCollector";uZ.__interfaces__=[$M
	];uZ.prototype={collect:function(){return this._collect()
		},get_name:function(){return this._name
		},__class__:uZ,__properties__: {get_name: "get_name"
		}
	};var Kka=null;rOb.getDiagnosticTool=eRb;var Ge=function(a,
b){this.r=new RegExp(a,b.split("u").join(""))
	};h.EReg=Ge;Ge.__name__="EReg";Ge.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m
		},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a
			];throw ba.thrown("EReg::matched");
		},matchedPos:function(){if(null==this.r.m)throw ba.thrown("No string matched");return{pos:this.r.m.index,len:this.r.m[
					0
				].length
			}
		},matchSub:function(a,b,c){null==c&&(c=-1);if(this.r.global){if(this.r.lastIndex=
b,this.r.m=this.r.exec(0>c?a:Wa.substr(a,
				0,b+c)),c=null!=this.r.m)this.r.s=a
			}else if(c=this.match(0>c?Wa.substr(a,b,null):Wa.substr(a,b,c)))this.r.s=a,this.r.m.index+=b;return c
		},split:function(a){return a.replace(this.r,
			"#__delim__#").split("#__delim__#")
		},map:function(a,b){var c=0,d="";do{if(c>=a.length)break;else if(!this.matchSub(a,c)){d+=fa.string(Wa.substr(a,c,null));break
				}var e=this.matchedPos();d+=fa.string(Wa.substr(a,c,e.pos-c));d+=fa.string(b(this));0==e.len?(d+=fa.string(Wa.substr(a,e.pos,
				1)),c=e.pos+1):c=e.pos+e.len
			}while(this.r.global);!this.r.global&&0<c&&c<a.length&&(d+=fa.string(Wa.substr(a,c,null)));return d
		},__class__:Ge
	};var CWa=function(){C.call(this)
	};h.GuildBattleground=CWa;CWa.__name__="GuildBattleground";CWa.__super__=Jr;CWa.prototype=l(Jr.prototype,
	{setup:function(a){this._context=new wcb(this,a)
		},__class__:CWa
	});var xcb=function(){C.call(this)
	};h.GuildExpedition=xcb;xcb.__name__="GuildExpedition";xcb.__super__=Jr;xcb.prototype=l(Jr.prototype,
	{setup:function(a){this._mapGlobalDependencies(a);
this._parentInjector=a;this._mainView=new DWa;this._context=new EWa(this._mainView,a);this._mainView.set_touchable(!0);K.__cast(nb.get_current().get_root(),lb).addChild(this._mainView)
		},dispose:function(){this._mainView.set_touchable(!1);this._mainView.removeFromParent(!0);this._mainView=null;Jr.prototype.dispose.call(this);this._unmapGlobalDependencies(this._parentInjector);this._parentInjector=null
		},_mapGlobalDependencies:function(a){Lka.MODULE.mapConfig(a);a.hasMapping($s)||a.mapSingleton($s);
a.hasMapping(Ki)||a.mapSingleton(Ki)
		},_unmapGlobalDependencies:function(a){Lka.MODULE.unmapConfig(a);a.hasMapping(Ki)?a.unmap(Ki):this._parentInjector.hasMapping(Ki)&&this._parentInjector.unmap(Ki);a.hasMapping($s)?a.unmap($s):this._parentInjector.hasMapping($s)&&this._parentInjector.unmap($s)
		},__class__:xcb
	});var Wa=function(){};h.HxOverrides=Wa;Wa.__name__="HxOverrides";Wa.strDate=function(a){switch(a.length){case 8:a=a.split(":");var b=new Date;b.setTime(0);b.setUTCHours(a[
				0
			]);b.setUTCMinutes(a[
				1
			]);
b.setUTCSeconds(a[
				2
			]);return b;case 10:return a=a.split("-"),new Date(a[
				0
			],a[
				1
			]-1,a[
				2
			],
			0,
			0,
			0);case 19:return a=a.split(" "),b=a[
				0
			].split("-"),a=a[
				1
			].split(":"),new Date(b[
				0
			],b[
				1
			]-1,b[
				2
			],a[
				0
			],a[
				1
			],a[
				2
			]);default:throw ba.thrown("Invalid date format : "+a);
		}
	};Wa.cca=function(a,b){a=a.charCodeAt(b);if(a==a)return a
	};Wa.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,c)
	};Wa.remove=function(a,b){b=a.indexOf(b);if(-1==b)return!1;a.splice(b,
		1);
return!0
	};Wa.now=function(){return Date.now()
	};var ycb=function(a,b){this.min=a;this.max=b
	};h.IntIterator=ycb;ycb.__name__="IntIterator";ycb.prototype={hasNext:function(){return this.min<this.max
		},next:function(){return this.min++
		},__class__:ycb
	};var cf=function(){};h.Lambda=cf;cf.__name__="Lambda";cf.array=function(a){var b=[];for(a=jC(a);a.hasNext();)b.push(a.next());return b
	};cf.exists=function(a,b){for(a=jC(a);a.hasNext();)if(b(a.next()))return!0;return!1
	};cf.filter=function(a,b){var c=[];for(a=
jC(a);a.hasNext();){var d=a.next();b(d)&&c.push(d)
		}return c
	};cf.fold=function(a,b,c){for(a=jC(a);a.hasNext();)c=b(a.next(),c);return c
	};cf.count=function(a,b){var c=0;if(null==b)for(b=jC(a);b.hasNext();)b.next(),++c;else for(a=jC(a);a.hasNext();)b(a.next())&&++c;return c
	};cf.indexOf=function(a,b){var c=0;for(a=jC(a);a.hasNext();){if(b==a.next())return c;++c
		}return-1
	};cf.find=function(a,b){for(a=jC(a);a.hasNext();){var c=a.next();if(b(c))return c
		}return null
	};cf.findIndex=function(a,b){var c=0;for(a=
jC(a);a.hasNext();){if(b(a.next()))return c;++c
		}return-1
	};var gg=function(){this.tooltipContainer=new C;this.contextMenuContainer=new C;this.gameContainer=new C;this.hudContainer=new C;this.uiContainer=new zcb;C.call(this);if(null!=gg.instance)throw new ba("Trying to create multiple Game instances");gg.instance=this;this.addChild(this.gameContainer);this.addChild(this.hudContainer);this.addChild(this.uiContainer);this.addChild(this.contextMenuContainer);this.tooltipContainer.mouseEnabled=!1;this.tooltipContainer.mouseChildren=
!1;this.addChild(this.tooltipContainer);this.mouseEnabled=!1
	};h[
		"de.innogames.common.Game"
	]=gg;gg.__name__="de.innogames.common.Game";gg.__properties__={get_mainStage: "get_mainStage"
	};gg.get_mainStage=function(){return gg.instance.stage
	};gg.__super__=C;gg.prototype=l(C.prototype,
	{__class__:gg
	});var Ir=function(){gg.call(this);this.uiContainer.mouseEnabled=!1;this.set_name("Main")
	};h.Main=Ir;Ir.__name__="Main";Ir.__super__=gg;Ir.prototype=l(gg.prototype,
	{init:function(){ao.getInstance().track("game_launched");
this._initCustomContextMenu();this._initStarling(0);this._initGameInfo()
		},_initCustomContextMenu:function(){this.stage.set_showDefaultContextMenu(!1);this.stage.addEventListener("rightMouseDown",m(this,this._onRightClick))
		},_onRightClick:function(a){null!=this._context&&this._context.get_eventDispatcher().dispatchEvent(new Mka("RightClickContextMenuEvent/TRIGGER",a))
		},_sendKillSignal:function(){foe.gameTermination.setTerminateCallback(function(){qb.getURL(new kn("/game/index?action=terminate"),
				"_self")
			});
foe.gameTermination.killOtherInstances();foe.gameTermination.pollForInstanceChange()
		},_initStarling:function(a){nb.set_handleLostContext(!0);this.stage.stage3Ds.get(0).addEventListener("error",m(this,this._onContextCreationError));this._starling=new nb(lb,this.stage,
			null,
			null,a,
			[
				"baselineExtended",
				0
			]);this._starling.addEventListener("rootCreated",m(this,this._onRootCreated));this._starling.set_supportHighResolutions(!0);this._starling.start()
		},_onRootCreated:function(a){this._starling.removeEventListener("rootCreated",
m(this,this._onRootCreated));ao.getInstance().track("context3d_created");this._bootstrap()
		},_onContextCreationError:function(a){window.killPreloader();3702==a.errorID?(ao.getInstance().track("hw_acc_not_supported"),this._reportContext3DError(r.gettext("Unfortunately the game could not be loaded in your current browser. Please try using another browser to play Forge of Empires."))):(ao.getInstance().track("hw_acc_disabled"),this._reportContext3DError(U.printf("%s (%s)",r.gettext("This game requires 3D hardware acceleration to be activated within the browser settings, please make sure that it is enabled to play Forge of Empires"),
a.text)))
		},_reportContext3DError:function(a){window.handleContextError()
		},_bootstrap:function(){this._context=new Nka(this);sa.isFeatureEnabled("show_fps")&&aN.addStatsView();Ta.delayedCallBySeconds(3,m(this,this._sendKillSignal),null);yZ.addCallback("iFrameOpened",m(this,this._onIFrameOpened));yZ.addCallback("iFrameClosed",m(this,this._onIFrameClosed))
		},_initGameInfo:function(){yZ.call("exposeGameInfo",jh.get_version(),
			"1.320.3d4d5734c (27.10.2025 10:13)")
		},_onIFrameOpened:function(){this._context.get_eventDispatcher().dispatchEvent(new Lz("CityHudEvent/IFRAME_OPENED"))
		},
_onIFrameClosed:function(){this._context.get_eventDispatcher().dispatchEvent(new Lz("CityHudEvent/IFRAME_CLOSED"))
		},__class__:Ir
	});Math.__name__="Math";var Qo=Ea[
		"_Printf.Format"
	]={__ename__: "_Printf.Format",__constructs__: null,FormatEmpty: {_hx_name: "FormatEmpty",_hx_index: 0,__enum__: "_Printf.Format",toString:N
		},FormatPercentage: {_hx_name: "FormatPercentage",_hx_index: 1,__enum__: "_Printf.Format",toString:N
		},FormatString: {_hx_name: "FormatString",_hx_index: 2,__enum__: "_Printf.Format",toString:N
		},FormatInt:(H=
function(a){return{_hx_index: 3,padding:a,__enum__: "_Printf.Format",toString:N
			}
		},H._hx_name="FormatInt",H.__params__=[
			"padding"
		],H),FormatFloat:(H=function(a,b){return{_hx_index: 4,padding:a,precision:b,__enum__: "_Printf.Format",toString:N
			}
		},H._hx_name="FormatFloat",H.__params__=[
			"padding",
			"precision"
		],H),FormatOctal:(H=function(a){return{_hx_index: 5,padding:a,__enum__: "_Printf.Format",toString:N
			}
		},H._hx_name="FormatOctal",H.__params__=[
			"padding"
		],H),FormatHexa:(H=function(a){return{_hx_index: 6,padding:a,
__enum__: "_Printf.Format",toString:N
			}
		},H._hx_name="FormatHexa",H.__params__=[
			"padding"
		],H)
	};Qo.__constructs__=[Qo.FormatEmpty,Qo.FormatPercentage,Qo.FormatString,Qo.FormatInt,Qo.FormatFloat,Qo.FormatOctal,Qo.FormatHexa
	];Qo.__empty_constructs__=[Qo.FormatEmpty,Qo.FormatPercentage,Qo.FormatString
	];var U=function(){};h.Printf=U;U.__name__="Printf";U.printf=function(a){for(var b=arguments.length,c=Array(1<b?b-1: 0),d=1;d<b;++d)c[d-1
		]=arguments[d
		];if(null==a)return"";b="";for(var e=d=0,g=0,k=!1,t="",u=
Qo.FormatEmpty,A=!1,z=!1,J="",T=0,W=a.length;T<W;)if(t=a.charAt(T++),
		"%"==t)u!=Qo.FormatPercentage||A||(b+=t,A=!0),k=!0,u=Qo.FormatPercentage;else if(k)if("."==t)z=!0,
		0<J.length&&(g=fa.parseInt(J),J="");else if("s"==t||"d"==t||"i"==t||"f"==t||"o"==t||"x"==t){
			0<J.length&&(z?e=fa.parseInt(J):g=fa.parseInt(J));switch(t){case "f":u=Qo.FormatFloat(g,e);break;case "d":case "i":u=Qo.FormatInt(g);break;case "o":u=Qo.FormatOctal(g);break;case "s":u=Qo.FormatString;break;case "x":u=Qo.FormatHexa(g)
			}d<c.length&&
(b+=U._handlePattern(u,c[d
			]));++d;k=!1;u=Qo.FormatEmpty;z=!1;J="";A=!1
		}else"0"==t||"1"==t||"2"==t||"3"==t||"4"==t||"5"==t||"6"==t||"7"==t||"8"==t||"9"==t?J+=t:u==Qo.FormatPercentage&&(u=Qo.FormatEmpty,A||(b+="%"),z&&(b+="."),b+=t,k=!1);else b+=t;k&&u==Qo.FormatPercentage&&("%"!=t&&(b+="%"),b+=t);d>c.length&&U.reportParameterCountMismatch(a,d,c.length);return b
	};U.reportParameterCountMismatch=function(a,b,c){};U._handlePattern=function(a,b){if(null==b)return"";switch(a._hx_index){case 2:return"string"==
typeof b?b:fa.string(b);case 3:var c=a.padding;b=fa.string(b);0<c&&(b=rc.lpad(b,
			" ",c));return b;case 4:return c=a.padding,a=a.precision,
			0<a?"number"==typeof b||"number"==typeof b&&(b|0)===b?(a=Math.pow(10,a),b=(Math.round(b*a)|0)/a,b=null==b?"null": ""+b):b=fa.string(b):b=fa.string(b),
			0<c&&(b=rc.lpad(b,
			" ",c)),b;case 5:return c=a.padding,b="number"==typeof b&&(b|0)===b?U._intToOctalString(b):fa.string(b),
			0<c&&(b=rc.lpad(b,
			" ",c)),b;case 6:return c=a.padding,b=rc.hex(fa.parseInt(b)),
			0<c&&(b=rc.lpad(b,
			" ",c)),b;default:return fa.string(b)
		}
	};U._intToOctalString=function(a){for(var b,c="",d="01234567".split("");0<a;)b=a%8|0,c=d[b
		]+c,a/=8;return c
	};var gb=function(){};h.Reflect=gb;gb.__name__="Reflect";gb.field=function(a,b){try{return a[b
			]
		}catch(c){return He.lastError=c,
			null
		}
	};gb.getProperty=function(a,b){var c;if(null==a)return null;var d=a.__properties__?c=a.__properties__[
			"get_"+b
		]:!1;return d?a[c
		]():a[b
		]
	};gb.setProperty=function(a,b,c){var d;var e=a.__properties__?d=a.__properties__[
			"set_"+b
		]:
!1;if(e)a[d
		](c);else a[b
		]=c
	};gb.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)
		}return b
	};gb.isFunction=function(a){return"function"==typeof a?!(a.__name__||a.__ename__):!1
	};gb.compare=function(a,b){return a==b?0:a>b?1: -1
	};gb.isObject=function(a){if(null==a)return!1;var b=typeof a;return"string"==b||"object"==b&&null==a.__enum__?!0: "function"==b?null!=(a.__name__||a.__ename__):!1
	};gb.isEnumValue=function(a){return null!=
a?null!=a.__enum__:!1
	};gb.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b
		];return!0
	};var Acb=function(){C.call(this)
	};h.Research=Acb;Acb.__name__="Research";Acb.__super__=Jr;Acb.prototype=l(Jr.prototype,
	{setup:function(a){this._context=new Bcb(this,a)
		},__class__:Acb
	});var Ccb=function(a,b){this.i=a;this.end=b
	};h.ReverseIntIterator=Ccb;Ccb.__name__="ReverseIntIterator";Ccb.reverse=function(a){return new Ccb(a.max-1,a.min)
	};Ccb.prototype={hasNext:function(){return this.i>=
this.end
		},next:function(){return this.i--
		},__class__:Ccb
	};var aN=function(){};h.StatsController=aN;aN.__name__="StatsController";aN.addStatsView=function(){aN._stats=new BHb(gg.instance.stage);window.document.body.appendChild(aN._stats.element)
	};aN.toggleStatsView=function(){null==aN._stats?aN.addStatsView():aN._stats.set_visible(!aN._stats.get_visible())
	};aN.printStatsView=function(){};var fa=function(){};h.Std=fa;fa.__name__="Std";fa.string=function(a){return K.__string_rec(a,
		"")
	};fa.int=function(a){return a|
0
	};fa.parseInt=function(a){a=parseInt(a);return isNaN(a)?null:a
	};fa.random=function(a){return 0>=a?0:Math.floor(Math.random()*a)
	};var bN=function(){this.b=""
	};h.StringBuf=bN;bN.__name__="StringBuf";bN.prototype={__class__:bN
	};var rc=function(){};h.StringTools=rc;rc.__name__="StringTools";rc.htmlEscape=function(a,b){for(var c="",d=0,e=a;d<e.length;){a=e;var g=d++,k=a.charCodeAt(g);55296<=k&&56319>=k&&(k=k-55232<<10|a.charCodeAt(g+1)&1023);a=k;65536<=a&&++d;switch(a){case 34:c=b?c+"&quot;":c+String.fromCodePoint(a);
break;case 38:c+="&amp;";break;case 39:c=b?c+"&#039;":c+String.fromCodePoint(a);break;case 60:c+="&lt;";break;case 62:c+="&gt;";break;default:c+=String.fromCodePoint(a)
			}
		}return c
	};rc.startsWith=function(a,b){return a.length>=b.length?0==a.lastIndexOf(b,
		0):!1
	};rc.endsWith=function(a,b){var c=b.length,d=a.length;return d>=c?a.indexOf(b,d-c)==d-c:!1
	};rc.isSpace=function(a,b){a=Wa.cca(a,b);return 8<a&&14>a?!0: 32==a
	};rc.ltrim=function(a){for(var b=a.length,c=0;c<b&&rc.isSpace(a,c);)++c;return 0<c?Wa.substr(a,
c,b-c):a
	};rc.rtrim=function(a){for(var b=a.length,c=0;c<b&&rc.isSpace(a,b-c-1);)++c;return 0<c?Wa.substr(a,
		0,b-c):a
	};rc.trim=function(a){return rc.ltrim(rc.rtrim(a))
	};rc.lpad=function(a,b,c){if(0>=b.length)return a;var d="";for(c-=a.length;d.length<c;)d+=null==b?"null": ""+b;return d+(null==a?"null": ""+a)
	};rc.replace=function(a,b,c){return a.split(b).join(c)
	};rc.hex=function(a,b){var c="";do c="0123456789ABCDEF".charAt(a&15)+c,a>>>=4;while(0<a);if(null!=b)for(;c.length<b;)c="0"+c;return c
	};var Zj=
Ea.ValueType={__ename__: "ValueType",__constructs__: null,TNull: {_hx_name: "TNull",_hx_index: 0,__enum__: "ValueType",toString:N
		},TInt: {_hx_name: "TInt",_hx_index: 1,__enum__: "ValueType",toString:N
		},TFloat: {_hx_name: "TFloat",_hx_index: 2,__enum__: "ValueType",toString:N
		},TBool: {_hx_name: "TBool",_hx_index: 3,__enum__: "ValueType",toString:N
		},TObject: {_hx_name: "TObject",_hx_index: 4,__enum__: "ValueType",toString:N
		},TFunction: {_hx_name: "TFunction",_hx_index: 5,__enum__: "ValueType",toString:N
		},TClass:(H=function(a){return{_hx_index: 6,
c:a,__enum__: "ValueType",toString:N
			}
		},H._hx_name="TClass",H.__params__=[
			"c"
		],H),TEnum:(H=function(a){return{_hx_index: 7,e:a,__enum__: "ValueType",toString:N
			}
		},H._hx_name="TEnum",H.__params__=[
			"e"
		],H),TUnknown: {_hx_name: "TUnknown",_hx_index: 8,__enum__: "ValueType",toString:N
		}
	};Zj.__constructs__=[Zj.TNull,Zj.TInt,Zj.TFloat,Zj.TBool,Zj.TObject,Zj.TFunction,Zj.TClass,Zj.TEnum,Zj.TUnknown
	];Zj.__empty_constructs__=[Zj.TNull,Zj.TInt,Zj.TFloat,Zj.TBool,Zj.TObject,Zj.TFunction,Zj.TUnknown
	];var Ie=function(){};
h.Type=Ie;Ie.__name__="Type";Ie.getEnum=function(a){return null==a?null:Ea[a.__enum__
		]
	};Ie.resolveEnum=function(a){return Ea[a
		]
	};Ie.createInstance=function(a,b){return new (Function.prototype.bind.apply(a,
		[
			null
		].concat(b)))
	};Ie.createEnum=function(a,b,c){var d=gb.field(a,b);if(null==d)throw ba.thrown("No such constructor "+b);if(gb.isFunction(d)){if(null==c)throw ba.thrown("Constructor "+b+" need parameters");return d.apply(a,c)
		}if(null!=c&&0!=c.length)throw ba.thrown("Constructor "+b+" does not need parameters");
return d
	};Ie.createEnumIndex=function(a,b,c){var d=a.__constructs__[b
		];d=null==d?null:d._hx_name;if(null==d)throw ba.thrown(b+" is not a valid enum constructor index");return Ie.createEnum(a,d,c)
	};Ie.typeof=function(a){switch(typeof a){case "boolean":return Zj.TBool;case "function":return a.__name__||a.__ename__?Zj.TObject:Zj.TFunction;case "number":return Math.ceil(a)==a%2147483648?Zj.TInt:Zj.TFloat;case "object":if(null==a)return Zj.TNull;var b=a.__enum__;if(null!=b)return Zj.TEnum(Ea[b
			]);a=K.getClass(a);
return null!=a?Zj.TClass(a):Zj.TObject;case "string":return Zj.TClass(String);case "undefined":return Zj.TNull;default:return Zj.TUnknown
		}
	};Ie.enumEq=function(a,b){if(a==b)return!0;try{var c=a.__enum__;if(null==c||c!=b.__enum__||a._hx_index!=b._hx_index)return!1;var d=Ea[c
			].__constructs__[a._hx_index
			].__params__;for(c=0;c<d.length;){var e=d[c
				];++c;if(!Ie.enumEq(a[e
				],b[e
				]))return!1
			}
		}catch(g){return He.lastError=g,!1
		}return!0
	};Ie.enumParameters=function(a){var b=Ea[a.__enum__
		].__constructs__[a._hx_index
		].__params__;
if(null!=b){for(var c=[],d=0;d<b.length;){var e=b[d
				];++d;c.push(a[e
				])
			}return c
		}return[]
	};var ya={gt:function(a,b){var c=0>a;return c!=0>b?c:a>b
		},gte:function(a,b){var c=0>a;return c!=0>b?c:a>=b
		},toFloat:function(a){return 0>a?4294967296+a:a+0
		}
	},FWa=function(a){this._catalog=a;a=a.pluralForms;this._plural=new Function("n",
		"return Number("+a.substring(a.lastIndexOf("plural=")+7,a.lastIndexOf(";"))+")")
	};h[
		"gettext.Gettext"
	]=FWa;FWa.__name__="gettext.Gettext";FWa.prototype={gettext:function(a){var b=
this._getSingularTranslation(a);return null==b?a=this._cutOffContext(a):this._cutOffContext(b)
		},ngettext:function(a,b,c){var d=this._getPluralTranslation(a,c);return null==d?d=this._cutOffContext(1==c?a:b):this._cutOffContext(d)
		},_getSingularTranslation:function(a){a=this._catalog.strings.h[a
			];return null!=a?a[
				0
			]: null
		},_getPluralTranslation:function(a,b){a=this._catalog.strings.h[a
			];return null!=a?a[this._plural.call(null,b)
			]: null
		},_cutOffContext:function(a){var b=a.lastIndexOf("|");if(-1!=b){var c=
a.indexOf("%");if(b<c||-1==c)return Wa.substr(a,b+1,null)
			}return a
		},__class__:FWa
	};var me={__properties__: {get_length: "get_length"
		},charAt:function(a,b){if(0>b)return"";for(var c=0,d=0;d<a.length;){var e=d++,g=a.charCodeAt(e);55296<=g&&56319>=g&&(g=g-55232<<10|a.charCodeAt(e+1)&1023);e=g;if(c==b)return String.fromCodePoint(e);65536<=e&&++d;++c
			}return""
		},charCodeAt:function(a,b){if(0>b)return null;for(var c=0,d=0;d<a.length;){var e=d++,g=a.charCodeAt(e);55296<=g&&56319>=g&&(g=g-55232<<10|a.charCodeAt(e+
1)&1023);e=g;if(c==b)return e;65536<=e&&++d;++c
			}return null
		},indexOf:function(a,b,c){null==c?c=0: 0>c&&(c=me.get_length(a)+c);for(var d=0,e=0,g=0,k=-1;e<=a.length;){var t=a.charCodeAt(e);55296<=t&&56319>=t&&(t=t-55232<<10|a.charCodeAt(e+1)&1023);if(d>=c){var u=b.charCodeAt(g);55296<=u&&56319>=u&&(u=u-55232<<10|b.charCodeAt(g+1)&1023);if(t==u){if(0==g&&(k=d),++g,
						65536<=u&&++g,g==b.length)return k
					}else if(0!=g){k=-1;g=0;continue
					}
				}++e;65536<=t&&++e;++d
			}return-1
		},substr:function(a,b,c){
			0>b&&(b=me.get_length(a)+
b,
			0>b&&(b=0));if(null!=c&&(0>c&&(c=me.get_length(a)+c),
			0>=c))return"";for(var d=0,e=0,g=-1,k=0;e<a.length;){var t=a.charCodeAt(e);55296<=t&&56319>=t&&(t=t-55232<<10|a.charCodeAt(e+1)&1023);if(d>=b){if(0>g){if(null==c)return Wa.substr(a,e,null);g=e
					}++k;if(k>=c)return Wa.substr(a,g,(65536>t?e:e+1)-g+1)
				}e+=65536<=t?2: 1;++d
			}return 0>g?"":Wa.substr(a,g,null)
		},substring:function(a,b,c){
			0>b&&(b=0);if(null!=c){
				0>c&&(c=0);if(b==c)return"";if(b>c){var d=b;b=c;c=d
				}
			}for(var e=d=0,g=-1,k=0;e<a.length;){var t=
a.charCodeAt(e);55296<=t&&56319>=t&&(t=t-55232<<10|a.charCodeAt(e+1)&1023);if(b<=d){if(0>g){if(null==c)return Wa.substr(a,e,null);g=e
					}++k;if(k>=c-b)return Wa.substr(a,g,(65536>t?e:e+1)-g+1)
				}e+=65536<=t?2: 1;++d
			}return 0>g?"":Wa.substr(a,g,null)
		},get_length:function(a){for(var b=0,c=0;c<a.length;){var d=c++,e=a.charCodeAt(d);55296<=e&&56319>=e&&(e=e-55232<<10|a.charCodeAt(d+1)&1023);65536<=e&&++c;++b
			}return b
		}
	},Cf={toString:function(a){switch(a){case 0:return"Element";case 1:return"PCData";case 2:return"CData";
case 3:return"Comment";case 4:return"DocType";case 5:return"ProcessingInstruction";case 6:return"Document"
			}
		}
	},cc=function(a){this.nodeType=a;this.children=[];this.attributeMap=new x
	};h.Xml=cc;cc.__name__="Xml";cc.parse=function(a){return zZ.parse(a)
	};cc.createElement=function(a){var b=new cc(cc.Element);if(b.nodeType!=cc.Element)throw ba.thrown("Bad node type, expected Element but found "+(null==b.nodeType?"null":Cf.toString(b.nodeType)));b.nodeName=a;return b
	};cc.createPCData=function(a){var b=new cc(cc.PCData);
if(b.nodeType==cc.Document||b.nodeType==cc.Element)throw ba.thrown("Bad node type, unexpected "+(null==b.nodeType?"null":Cf.toString(b.nodeType)));b.nodeValue=a;return b
	};cc.createCData=function(a){var b=new cc(cc.CData);if(b.nodeType==cc.Document||b.nodeType==cc.Element)throw ba.thrown("Bad node type, unexpected "+(null==b.nodeType?"null":Cf.toString(b.nodeType)));b.nodeValue=a;return b
	};cc.createComment=function(a){var b=new cc(cc.Comment);if(b.nodeType==cc.Document||b.nodeType==cc.Element)throw ba.thrown("Bad node type, unexpected "+
(null==b.nodeType?"null":Cf.toString(b.nodeType)));b.nodeValue=a;return b
	};cc.createDocType=function(a){var b=new cc(cc.DocType);if(b.nodeType==cc.Document||b.nodeType==cc.Element)throw ba.thrown("Bad node type, unexpected "+(null==b.nodeType?"null":Cf.toString(b.nodeType)));b.nodeValue=a;return b
	};cc.createProcessingInstruction=function(a){var b=new cc(cc.ProcessingInstruction);if(b.nodeType==cc.Document||b.nodeType==cc.Element)throw ba.thrown("Bad node type, unexpected "+(null==b.nodeType?"null":
Cf.toString(b.nodeType)));b.nodeValue=a;return b
	};cc.createDocument=function(){return new cc(cc.Document)
	};cc.prototype={get:function(a){if(this.nodeType!=cc.Element)throw ba.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":Cf.toString(this.nodeType)));return this.attributeMap.h[a
			]
		},set:function(a,b){if(this.nodeType!=cc.Element)throw ba.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":Cf.toString(this.nodeType)));this.attributeMap.h[a
			]=
b
		},exists:function(a){if(this.nodeType!=cc.Element)throw ba.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":Cf.toString(this.nodeType)));return Object.prototype.hasOwnProperty.call(this.attributeMap.h,a)
		},attributes:function(){if(this.nodeType!=cc.Element)throw ba.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":Cf.toString(this.nodeType)));return new l7(this.attributeMap.h)
		},elements:function(){if(this.nodeType!=cc.Document&&this.nodeType!=
cc.Element)throw ba.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":Cf.toString(this.nodeType)));for(var a=[],b=0,c=this.children;b<c.length;){var d=c[b
				];++b;d.nodeType==cc.Element&&a.push(d)
			}return new Lv(a)
		},elementsNamed:function(a){if(this.nodeType!=cc.Document&&this.nodeType!=cc.Element)throw ba.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":Cf.toString(this.nodeType)));for(var b=[],c=0,d=this.children;c<
d.length;){var e=d[c
				];++c;if(e.nodeType==cc.Element){if(e.nodeType!=cc.Element)throw ba.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":Cf.toString(e.nodeType)));var g=e.nodeName==a
				}else g=!1;g&&b.push(e)
			}return new Lv(b)
		},firstElement:function(){if(this.nodeType!=cc.Document&&this.nodeType!=cc.Element)throw ba.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":Cf.toString(this.nodeType)));for(var a=0,b=this.children;a<b.length;){var c=
b[a
				];++a;if(c.nodeType==cc.Element)return c
			}return null
		},addChild:function(a){if(this.nodeType!=cc.Document&&this.nodeType!=cc.Element)throw ba.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":Cf.toString(this.nodeType)));null!=a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this
		},removeChild:function(a){if(this.nodeType!=cc.Document&&this.nodeType!=cc.Element)throw ba.thrown("Bad node type, expected Element or Document but found "+(null==
this.nodeType?"null":Cf.toString(this.nodeType)));return Wa.remove(this.children,a)?(a.parent=null,!0):!1
		},toString:function(){return GWa.print(this)
		},__class__:cc
	};var zm=function(){};h[
		"cloner.Cloner"
	]=zm;zm.__name__="cloner.Cloner";zm.clone=function(a){return zm._clone(a,new $d)
	};zm._clone=function(a,b){return null==a||"number"==typeof a||"string"==typeof a||"boolean"==typeof a||a.__name__||a.__ename__||gb.isEnumValue(a)?a:a instanceof Array?zm.cloneArray(a,b):K.__implements(a,nC)?zm.cloneMap(a,
b):zm.cloneObject(a,b)
	};zm.cloneObject=function(a,b){var c=b.h[a.__id__
		];if(null==c){c=K.getClass(a);c=null==c?{}:Object.create(c.prototype);b.set(a,c);for(var d=0,e=gb.fields(a);d<e.length;){var g=e[d
				];++d;c[g
				]=zm._clone(gb.field(a,g),b)
			}
		}return c
	};zm.cloneMap=function(a,b){var c=b.h[a.__id__
		];if(null==c){c=Ie.createInstance(K.getClass(a),zm.emptyArgs);b.set(a,c);for(var d=a.keys();d.hasNext();){var e=d.next();c.set(e,zm._clone(a.get(e),b))
			}
		}return c
	};zm.cloneArray=function(a,b){var c=b.h[a.__id__
		];
if(null==c){c=[];b.set(a,c);for(var d=0;d<a.length;)c.push(zm._clone(a[d++
			],b))
		}return c
	};var Kr=function(a){this._tweens=[];this._labelStartTimes=new x;this._endTime=0;null!=a&&null!=a.onComplete&&(this._onComplete=a.onComplete,null!=a.onCompleteParams&&(this._onCompleteParams=a.onCompleteParams))
	};h[
		"com.greensock.TimelineMax"
	]=Kr;Kr.__name__="com.greensock.TimelineMax";Kr.prototype={_to:function(a,b,c,d){null==d&&(d="+=0");c.overwrite=0;a=O._new(a,b,c);c=Object.prototype.hasOwnProperty.call(c,
			"delay")?gb.field(c,
			"delay"): 0;var e=0;if("number"==typeof d&&(d|0)===d||"number"==typeof d)O.delay(a,d+c),e=d+b;else if("string"==typeof d){var g=d.charAt(0),k=d.indexOf("=");e=-1!=d.indexOf("+");var t=d,u=0;-1!=k&&(++k,u=parseFloat(d.substr(k,d.length)),t=d.substr(0,k-2));"+"!=g&&"-"!=g?(null==this._labelStartTimes.h[t
				]&&(this._labelStartTimes.h[t
				]=this._endTime),d=this._labelStartTimes.h[t
				]):d=this._endTime;e?(O.delay(a,d+u+c),b=d+b+u):(O.delay(a,d-u+c),b=d+b-u);e=b+c
			}this._endTime<e&&(this._endTime=
e,null!=this._onComplete&&(Ta.killDelayedCallsTo(this._onComplete),Ta.delayedCallBySeconds(this._endTime,this._onComplete,this._onCompleteParams)));this._tweens.push(a);return this
		},_fromTo:function(a,b,c,d,e){a=O._fromTo(a,b,c,d);c=Object.prototype.hasOwnProperty.call(c,
			"delay")?gb.field(c,
			"delay"): 0;d=0;if("number"==typeof e&&(e|0)===e||"number"==typeof e)O.delay(a,e+c),d=e+b;else if("string"==typeof e){var g=e.charAt(0),k=e.indexOf("=");d=-1!=e.indexOf("+");var t=e,u=0;-1!=k&&(++k,u=parseFloat(e.substr(k,
e.length)),t=e.substr(0,k-2));"+"!=g&&"-"!=g?(null==this._labelStartTimes.h[t
				]&&(this._labelStartTimes.h[t
				]=this._endTime),e=this._labelStartTimes.h[t
				]):e=this._endTime;d?(O.delay(a,e+u+c),b=e+b+u):(O.delay(a,e-u+c),b=e+b-u);d=b+c
			}this._endTime<d&&(this._endTime=d,null!=this._onComplete&&(Ta.killDelayedCallsTo(this._onComplete),Ta.delayedCallBySeconds(this._endTime,this._onComplete,this._onCompleteParams)));this._tweens.push(a);return this
		},kill:function(a){for(a=this._tweens.length;0<=--a;){var b=
this._tweens[a
				];O.totalProgress(b,
				1);Wa.remove(this._tweens,b)
			}
		},play:function(){for(var a=0,b=this._tweens.length;a<b;)O.resume(this._tweens[a++
			])
		},_addTween:function(a,b,c,d){var e=0;if("number"==typeof c&&(c|0)===c||"number"==typeof c)O.delay(a,c+d),e=c+b;else if("string"==typeof c){var g=c.charAt(0),k=c.indexOf("=");e=-1!=c.indexOf("+");var t=c,u=0;-1!=k&&(++k,u=parseFloat(c.substr(k,c.length)),t=c.substr(0,k-2));"+"!=g&&"-"!=g?(null==this._labelStartTimes.h[t
				]&&(this._labelStartTimes.h[t
				]=this._endTime),
c=this._labelStartTimes.h[t
				]):c=this._endTime;e?(O.delay(a,c+u+d),b=c+b+u):(O.delay(a,c-u+d),b=c+b-u);e=b+d
			}this._endTime<e&&(this._endTime=e,null!=this._onComplete&&(Ta.killDelayedCallsTo(this._onComplete),Ta.delayedCallBySeconds(this._endTime,this._onComplete,this._onCompleteParams)));this._tweens.push(a)
		},_setTweenPosition:function(a,b,c,d,e){var g=c.indexOf("="),k=-1!=c.indexOf("+"),t=c,u=0;-1!=g&&(++g,u=parseFloat(c.substr(g,c.length)),t=c.substr(0,g-2));d?(null==this._labelStartTimes.h[t
			]&&
(this._labelStartTimes.h[t
			]=this._endTime),c=this._labelStartTimes.h[t
			]):c=this._endTime;if(k)return O.delay(a,c+u+e),c+b+u;O.delay(a,c-u+e);return c+b-u
		},_addTweenPosition:function(a,b,c,d,e){O.delay(a,d+b+e);return d+c+b
		},_substractTweenPosition:function(a,b,c,d,e){O.delay(a,d-b+e);return d+c-b
		},__class__:Kr
	};var O={killTweensOf:function(a,b,c){Dd.stop(a,c,!1,!1)
		},delayedCall:function(a,b,c){Ta.delayedCallBySeconds(a,b,c)
		},delayedCallByFrames:function(a,b,c){Ta.delayedCallByFrames(a,b,c)
		},killDelayedCallsTo:function(a){Ta.killDelayedCallsTo(a)
		},
_new:function(a,b,c){if(null==a)throw ba.thrown(new wb("Cannot tween a null object."));return O._createActuator(a,b,c)
		},pause:function(a){Dd.pause(a)
		},play:function(a){a.reverse(!1)
		},resume:function(a){Dd.resume(a)
		},reverse:function(a){a.reverse()
		},totalProgress:function(a,b,c){null==c&&(c=!1);1==b&&Dd.stop(a,
			null,!0,!c)
		},kill:function(a,b){Dd.stop(a,b,!1,!1)
		},delay:function(a,b){a.delay(b)
		},restart:function(a,b,c){null==b&&(b=!1);a.restart(b)
		},seek:function(a,b){},duration:function(a,b){return 0
		},
isActive:function(a){return!1
		},getTweensOf:function(a,b){return null
		},isTweening:function(a){return!1
		},repeat:function(a,b){},_fromTo:function(a,b,c,d){O._applyProperties(a,c);return O._new(a,b,d)
		},_from:function(a,b,c){a=O._new(a,b,c);O.reverse(a);return a
		},_to:function(a,b,c){return O._new(a,b,c)
		},_applyProperties:function(a,b){for(var c=0,d=gb.fields(b);c<d.length;){var e=d[c
				];++c;Object.prototype.hasOwnProperty.call(a,e)?a[e
				]=gb.field(b,e):gb.setProperty(a,e,gb.field(b,e))
			}
		},extractTweenOption:function(a,
b,c){Object.prototype.hasOwnProperty.call(a,b)&&(c=gb.field(a,b),gb.deleteField(a,b));return c
		},_createActuator:function(a,b,c){var d=O.extractTweenOption(c,
			"onStart"),e=O.extractTweenOption(c,
			"onComplete"),g=O.extractTweenOption(c,
			"onUpdate"),k=O.extractTweenOption(c,
			"onRepeat"),t=O.extractTweenOption(c,
			"onReverseComplete"),u=O.extractTweenOption(c,
			"delay",
			0),A=O.extractTweenOption(c,
			"ease",Ek.easeOut),z=O.extractTweenOption(c,
			"repeat",
			0),J=O.extractTweenOption(c,
			"yoyo",!1),T=O.extractTweenOption(c,
			"colorTransform"),W=O.extractTweenOption(c,
			"overwrite",
			2);1==W&&Dd.stop(a,
			null,!1,!1);gb.deleteField(c,
			"glowFilter");gb.deleteField(c,
			"removeTint");var X=O.extractTweenOption(c,
			"autoAlpha"),da=null!=X;da&&(c.alpha=X,
			0==b&&(c.visible=0<X));X=null;null!=T&&(X=Oka,null!=T.tint&&(c.colorValue=T.tint),null!=T.tintAmount&&(c.colorStrength=.5*T.tintAmount),null!=T.alpha&&(c.colorAlpha=T.alpha));T=O.extractTweenOption(c,
			"transformAroundCenter");null!=T&&(T.point=O._getTargetCenter(a),T.pointIsLocal=!0,c.transformAroundPoint=
T);null!=c.transformAroundPoint&&(X=Dcb);T=O.extractTweenOption(c,
			"bezier");if(null!=T){var pa=T.values;X=[];T=[];for(var na=pa.length-1,wa=pa[na
				].x,Ca=pa[na
				].y,Fa=1;Fa<na;){var sb=Fa++;X.push(pa[sb
					].x);T.push(pa[sb
					].y)
				}pa=new CHb;pa.bezierN(wa,Ca,X,T);c.x=pa.get_x();c.y=pa.get_y();a=Dd.tween(a,b,c,
				2==W,HWa)
			}else a=Dd.tween(a,b,c,
			2==W,X);if(null!=d)a.onStart(d);a.delay(u);K.__implements(A,Li)&&a.ease(A);if(null!=t)a.onReverseComplete(t);if(null!=e)a.onComplete(e);if(null!=g)a.onUpdate(g);if(null!=
k)a.onRepeat(k);a.autoVisible(da);a.repeat(z);a.reflect(J);return a
		},_getTargetCenter:function(a){a=a instanceof jc?a:null;return null==a?null:new p(a.get_width()/2,a.get_height()/2)
		}
	},Ta=function(){};h[
		"com.greensock._TweenMax.DelayCallManager"
	]=Ta;Ta.__name__="com.greensock._TweenMax.DelayCallManager";Ta.delayedCallBySeconds=function(a,b,c){var d=new Ecb(b,c);Ta._timeDelayedCalls.push(d);O._to(d,a,
		{progress: 1,onComplete:function(){Ta._onDelayedCall(d)
			}
		})
	};Ta.delayedCallByFrames=function(a,b,c){
		0==
Ta._frameDelayedCalls.length&&qb.get_current().stage.addEventListener("enterFrame",Ta._handleFrameDelayedCalls);Ta._frameDelayedCalls.push(new Fcb(a,b,c))
	};Ta.killDelayedCallsTo=function(a){Ta._killTimeDelayedCallsTo(a);Ta._killFrameDelayedCallsTo(a)
	};Ta._onDelayedCall=function(a){Wa.remove(Ta._timeDelayedCalls,a);a.call()
	};Ta._killTimeDelayedCallsTo=function(a){for(var b=Ta._timeDelayedCalls.length;0<=--b;){var c=Ta._timeDelayedCalls[b
			];c.sameCallbackAs(a)&&(Dd.stop(c,
			null,!1,!1),Ta._timeDelayedCalls.splice(b,
			1))
		}
	};Ta._handleFrameDelayedCalls=function(a){a=Ta._frameDelayedCalls.slice();for(var b=0;b<a.length;){var c=a[b
			];++b;c.advanceFrame();c.isElapsed()&&(Wa.remove(Ta._frameDelayedCalls,c),c.call())
		}0==Ta._frameDelayedCalls.length&&qb.get_current().stage.removeEventListener("enterFrame",Ta._handleFrameDelayedCalls)
	};Ta._killFrameDelayedCallsTo=function(a){for(var b=Ta._frameDelayedCalls.length;0<=--b;)Ta._frameDelayedCalls[b
		].sameCallbackAs(a)&&Ta._frameDelayedCalls.splice(b,
		1);0==Ta._frameDelayedCalls.length&&
qb.get_current().stage.removeEventListener("enterFrame",Ta._handleFrameDelayedCalls)
	};var AZ=function(a,b){this._callback=a;this._callbackParams=b
	};h[
		"com.greensock._TweenMax.DelayedCallObject"
	]=AZ;AZ.__name__="com.greensock._TweenMax.DelayedCallObject";AZ.prototype={sameCallbackAs:function(a){return this._callback==a
		},call:function(){this._callback.apply(this._callback,this._callbackParams)
		},__class__:AZ
	};var Ecb=function(a,b){AZ.call(this,a,b);this.progress=0
	};h[
		"com.greensock._TweenMax.TimeDelayedCallObject"
	]=
Ecb;Ecb.__name__="com.greensock._TweenMax.TimeDelayedCallObject";Ecb.__super__=AZ;Ecb.prototype=l(AZ.prototype,
	{__class__:Ecb
	});var Fcb=function(a,b,c){AZ.call(this,b,c);this._numFrames=a;this._frameCount=0
	};h[
		"com.greensock._TweenMax.FrameDelayedCallObject"
	]=Fcb;Fcb.__name__="com.greensock._TweenMax.FrameDelayedCallObject";Fcb.__super__=AZ;Fcb.prototype=l(AZ.prototype,
	{advanceFrame:function(){this._frameCount++
		},isElapsed:function(){return this._frameCount>=this._numFrames
		},__class__:Fcb
	});var wRb=
function(){};h[
		"com.greensock.TweenMaxProperties"
	]=wRb;wRb.__name__="com.greensock.TweenMaxProperties";var Se=function(a,b,c,d,e){null==b&&(b=1);this.suppressEvents=!1;this.positionOld=this.ratio=this.ratioOld=this.calculatedPosition=this.calculatedPositionOld=NaN;this.timeScale=1;this.useFrames=!1;this.repeatCount=1;this.reflect=!1;this.autoPlay=!0;this._position=NaN;this._paused=!0;this._delay=0;Jb.call(this);null==Se.shape&&((Se.shape=new Od).addEventListener("enterFrame",Se.staticTick),Se.time=
qb.getTimer()/1E3);this.ease=Se.defaultEase;this.dispatchEvents=Se.defaultDispatchEvents;this.target=a;this.duration=b;this.pluginData=this.copy(e,
		{});a=!1;null!=d&&(a=gb.field(d,
		"swapValues"),gb.deleteField(d,
		"swapValues"));this.copy(d,this);this.resetValues(c);a&&this.swapValues();0==this.duration&&0==this.get_delay()&&this.autoPlay&&this.set_position(0)
	};h[
		"com.gskinner.motion.GTween"
	]=Se;Se.__name__="com.gskinner.motion.GTween";Se.installPlugin=function(a,b,c){null==c&&(c=!1);for(var d=0,e=b.length;d<
e;){var g=b[d++
			];"*"==g&&(Se.hasStarPlugins=!0);null==gb.field(Se.plugins,g)?Se.plugins[g
			]=[a
			]:c?gb.field(Se.plugins,g).unshift(a):gb.field(Se.plugins,g).push(a)
		}
	};Se.linearEase=function(a,b,c,d){return a
	};Se.getTimer=function(){return qb.getTimer()
	};Se.staticTick=function(a){a=Se.time;Se.time=qb.getTimer()/1E3;if(!Se.pauseAll){a=(Se.time-a)*Se.timeScaleAll;for(var b=Se.tickList.keys();b.hasNext();){var c=b.next();c.set_position(c._position+(c.useFrames?Se.timeScaleAll:a)*c.timeScale)
			}
		}
	};Se.__super__=
Jb;Se.prototype=l(Jb.prototype,
	{get_paused:function(){return this._paused
		},set_paused:function(a){if(a==this._paused)return this._paused;this._paused=a;if(isNaN(this._position)||0!=this.repeatCount&&this._position>=this.repeatCount*this.duration)this._inited=!1,this.calculatedPosition=this.calculatedPositionOld=this.ratio=this.ratioOld=this.positionOld=0,this._position=-this.get_delay();this._paused?(Se.tickList.remove(this),K.__implements(this.target,Yj)&&this.target.removeEventListener("_",m(this,
this.invalidate)),Se.gcLockList.remove(this)):(Se.tickList.set(this,!0),K.__implements(this.target,Yj)?this.target.addEventListener("_",m(this,this.invalidate)):Se.gcLockList.set(this,!0));return this._paused
		},get_position:function(){return this._position
		},set_position:function(a){this.positionOld=this._position;this.ratioOld=this.ratio;this.calculatedPositionOld=this.calculatedPosition;var b=this.repeatCount*this.duration,c=a>=b&&0<this.repeatCount;if(c){if(this.calculatedPositionOld==b)return this._position;
this._position=b;this.calculatedPosition=this.reflect&&0==(this.repeatCount&1)?0:this.duration
			}else this._position=a,this.calculatedPosition=0>this._position?0: 0==this.duration?NaN:this._position%this.duration,this.reflect&&0!=((this._position/this.duration|0)&1)&&(this.calculatedPosition=this.duration-this.calculatedPosition);this.ratio=0==this.duration&&0<=this._position?1:this.ease(this.calculatedPosition/this.duration,
			0,
			1,
			1);if(null!=this.target&&(0<=this._position||0<=this.positionOld)&&this.calculatedPosition!=
this.calculatedPositionOld)for(this._inited||this.init(),a=0,b=gb.fields(this._values);a<b.length;){var d=b[a
				];++a;var e=gb.field(this._initValues,d),g=gb.field(this._rangeValues,d),k=e+g*this.ratio,t=gb.field(Se.plugins,d);if(null!=t){for(var u=t.length,A=0;A<u;)k=t[A++
					].tween(this,d,k,e,g,this.ratio,c);isNaN(k)||gb.setProperty(this.target,d,k)
				}else gb.setProperty(this.target,d,k)
			}if(Se.hasStarPlugins)for(t=gb.field(Se.plugins,
			"*"),u=t.length,a=0;a<u;)t[a++
			].tween(this,
			"*",NaN,NaN,NaN,this.ratio,
c);if(!this.suppressEvents&&(this.dispatchEvents&&this.dispatchEvt("change"),null!=this.onChange))this.onChange(this);if(c&&(this.set_paused(!0),null!=this.nextTween&&this.nextTween.set_paused(!1),!this.suppressEvents&&(this.dispatchEvents&&this.dispatchEvt("complete"),null!=this.onComplete)))this.onComplete(this);return this._position
		},get_delay:function(){return this._delay
		},set_delay:function(a){
			0>=this._position&&(this._position=-a);return this._delay=a
		},get_proxy:function(){null==this._proxy&&
(this._proxy=m7._new(this));return this._proxy
		},setValue:function(a,b){this._values[a
			]=b;this.invalidate()
		},getValue:function(a){if(null==this._values)return NaN;a=gb.field(this._values,a);return"number"!=typeof a?NaN:a
		},deleteValue:function(a){gb.deleteField(this._rangeValues,a);gb.deleteField(this._initValues,a);return gb.deleteField(this._values,a)
		},setValues:function(a){this.copy(a,this._values,!0);this.invalidate()
		},resetValues:function(a){this._values={};this.setValues(a)
		},getValues:function(){return this.copy(this._values,
			{})
		},getInitValue:function(a){if(null==this._initValues)throw ba.thrown("Not initialized");a=gb.field(this._initValues,a);return"number"!=typeof a?NaN:a
		},swapValues:function(){this._inited||this.init();var a=this._values;this._values=this._initValues;this._initValues=a;a=0;for(var b=gb.fields(this._rangeValues);a<b.length;){var c=b[a
				];++a;this._rangeValues[c
				]=-1*gb.field(this._rangeValues,c)
			}this.calculatedPosition=this.calculatedPositionOld=NaN;0>this._position?(a=this.positionOld,this.set_position(0),
this._position=this.positionOld,this.positionOld=a):this.set_position(this._position)
		},init:function(){this._inited=!0;this._initValues={};this._rangeValues={};for(var a=0,b=gb.fields(this._values);a<b.length;){var c=b[a
				];++a;if(null!=gb.field(Se.plugins,c)){var d=gb.field(Se.plugins,c),e=d.length,g=NaN;if(Object.prototype.hasOwnProperty.call(this.target,c))g=gb.field(this.target,c);else{var k=gb.field(this.target,
						"get_"+c);null!=k&&gb.isFunction(k)&&(g=gb.getProperty(this.target,c))
					}for(k=0;k<e;)g=
d[k++
					].init(this,c,g);isNaN(g)||(this._initValues[c
					]=g,this._rangeValues[c
					]=gb.field(this._values,c)-g)
				}else d=gb.getProperty(this.target,c),this._initValues[c
				]=d,this._rangeValues[c
				]=gb.field(this._values,c)-d
			}if(Se.hasStarPlugins)for(d=gb.field(Se.plugins,
			"*"),e=d.length,a=0;a<e;)d[a++
			].init(this,
			"*",NaN);if(!this.suppressEvents&&(this.dispatchEvents&&this.dispatchEvt("init"),null!=this.onInit))this.onInit(this)
		},beginning:function(){this.set_position(0);this.set_paused(!0)
		},end:function(){this.set_position(0<
this.repeatCount?this.repeatCount*this.duration:this.duration)
		},invalidate:function(a){this._inited=!1;0<this._position&&(this._position=0);this.autoPlay&&this.set_paused(!1)
		},copy:function(a,b,c){null==c&&(c=!1);for(var d=0,e=gb.fields(a);d<e.length;){var g=e[d
				];++d;c&&null==gb.field(a,g)?gb.deleteField(b,g):gb.setProperty(b,g,gb.field(a,g))
			}return b
		},dispatchEvt:function(a){this.hasEventListener(a)&&this.dispatchEvent(new D(a))
		},__class__:Se,__properties__: {get_proxy: "get_proxy",set_delay: "set_delay",
get_delay: "get_delay",set_position: "set_position",get_position: "get_position",set_paused: "set_paused",get_paused: "get_paused"
		}
	});var m7={_new:function(a){return a
		},fieldRead:function(a,b){var c=a.getValue(b);return isNaN(c)?gb.getProperty(a.target,b):c
		},fieldWrite:function(a,b,c){
			1==c||0==c||"string"==typeof c||isNaN(c)?gb.setProperty(a.target,b,c):a.setValue(b,parseFloat(fa.string(c)))
		},arrayRead:function(a,b){var c=a.getValue(b);return isNaN(c)?gb.getProperty(a.target,b):c
		},arrayWrite:function(a,
b,c){
			"boolean"==typeof c||"string"==typeof c||isNaN(c)?gb.setProperty(a.target,b,c):a.setValue(b,parseFloat(fa.string(c)))
		}
	},Pka=function(a,b,c,d,e,g){null==b&&(b=1);this.suppressCallbacks=!1;this.tweens=[];this.tweenStartPositions=[];this.callbacks=[];this.labels=new x;this.addTweens(g);Se.call(this,a,b,c,d,e);this.autoPlay&&this.set_paused(!1)
	};h[
		"com.gskinner.motion.GTweenTimeline"
	]=Pka;Pka.__name__="com.gskinner.motion.GTweenTimeline";Pka.setPropertyValue=function(a,b,c){gb.setProperty(a,b,c)
	};
Pka.__super__=Se;Pka.prototype=l(Se.prototype,
	{set_position:function(a){var b=this.suppressEvents;this.suppressEvents=!0;Se.prototype.set_position.call(this,a);var c=this.tweens.length;if(this.reflect&&1<=(this._position/this.duration|0)%2)for(var d=0;d<c;){var e=d++;this.tweens[e
				].set_position(this.calculatedPosition-this.tweenStartPositions[e
				])
			}else for(e=c-1;0<=e;)this.tweens[e
			].set_position(this.calculatedPosition-this.tweenStartPositions[e
			]),--e;this.suppressCallbacks||this.checkCallbacks();
this.suppressEvents=b;if(null!=this.onChange&&!this.suppressEvents)this.onChange(this);if(null!=this.onComplete&&!this.suppressEvents&&a>=this.repeatCount*this.duration&&0<this.repeatCount)this.onComplete(this);return a
		},addTween:function(a,b){if(null!=b&&!isNaN(a)){b.autoPlay=!1;b.set_paused(!0);for(var c=-1;++c<this.tweens.length&&this.tweenStartPositions[c
				]<a;);this.tweens.splice(c,
				0,b);this.tweenStartPositions.splice(c,
				0,a);isNaN(this.calculatedPosition)?b.set_position(0-a):b.set_position(this.calculatedPosition-
a)
			}
		},addTweens:function(a){if(null!=a)for(var b=0;b<a.length;)this.addTween(a[b
			],K.__cast(a[b+1
			],Se)),b+=2
		},removeTween:function(a){for(var b=this.tweens.length;0<=b;)this.tweens[b
			]==a&&(this.tweens.splice(b,
			1),this.tweenStartPositions.splice(b,
			1)),--b
		},addLabel:function(a,b){this.labels.h[b
			]=a
		},removeLabel:function(a){var b=this.labels;Object.prototype.hasOwnProperty.call(b.h,a)&&delete b.h[a
			]
		},addCallback:function(a,b,c,d,e){a=this.resolveLabelOrPosition(a);if(!isNaN(a)){b=new DHb(a,b,c,d,e);for(c=
this.callbacks.length-1;0<=c&&!(a>this.callbacks[c
				].position);)--c;this.callbacks.splice(c+1,
				0,b)
			}
		},removeCallback:function(a){a=this.resolveLabelOrPosition(a);if(!isNaN(a))for(var b=this.callbacks.length,c=0;c<b;){var d=c++;a==this.callbacks[d
				].position&&this.callbacks.splice(d,
				1)
			}
		},gotoAndPlay:function(a){this.goto(a);this.set_paused(!1)
		},gotoAndStop:function(a){this.goto(a);this.set_paused(!0)
		},goto:function(a){a=this.resolveLabelOrPosition(a);isNaN(a)||this.set_position(a)
		},resolveLabelOrPosition:function(a){return isNaN(a)?
this.labels.h[null==a?"null":fa.string(a)
			]:a
		},calculateDuration:function(){var a=0;0<this.callbacks.length&&(a=this.callbacks[this.callbacks.length-1
			].position);for(var b=0,c=this.tweens.length;b<c;){var d=b++;this.tweens[d
				].duration+this.tweenStartPositions[d
				]>a&&(a=this.tweens[d
				].duration+this.tweenStartPositions[d
				])
			}this.duration=a
		},checkCallbacks:function(){if(0!=this.callbacks.length){var a=this._position/this.duration|0,b=this.positionOld/this.duration|0;a==b||0<this.repeatCount&&this._position>=
this.duration*this.repeatCount?this.checkCallbackRange(this.calculatedPositionOld,this.calculatedPosition):(b=this.reflect&&1<=b%2,this.checkCallbackRange(this.calculatedPositionOld,b?0:this.duration),b=this.reflect&&1<=a%2,this.checkCallbackRange(b?this.duration: 0,this.calculatedPosition,!this.reflect))
			}
		},checkCallbackRange:function(a,b,c){null==c&&(c=!1);var d=a,e=b,g=-1,k=this.callbacks.length,t=1;a>b&&(d=b,e=a,g=k,k=t=-1);for(;(g+=t)!=k;){var u=this.callbacks[g
				],A=u.position;if(A>d&&A<e||A==b||
c&&A==a)1==t?null!=u.forward&&u.forward.apply(this,u.forwardParams):null!=u.reverse&&u.reverse.apply(this,u.reverseParams)
			}
		},__class__:Pka
	});var DHb=function(a,b,c,d,e){this.position=a;this.forward=b;this.reverse=d;this.forwardParams=c;this.reverseParams=e
	};h[
		"com.gskinner.motion._GTweenTimeline.Callback"
	]=DHb;DHb.__name__="com.gskinner.motion._GTweenTimeline.Callback";DHb.prototype={__class__:DHb
	};var n7=function(){};h[
		"com.gskinner.motion.easing.Cubic"
	]=n7;n7.__name__="com.gskinner.motion.easing.Cubic";
n7.easeIn=function(a,b,c,d){return a*a*a
	};n7.easeOut=function(a,b,c,d){return--a*a*a+1
	};n7.easeInOut=function(a,b,c,d){return.5>a?4*a*a*a: 4*--a*a*a+1
	};var IWa=function(){};h[
		"com.gskinner.motion.easing.Sine"
	]=IWa;IWa.__name__="com.gskinner.motion.easing.Sine";IWa.easeIn=function(a,b,c,d){return 1-Math.cos(Math.PI/2*a)
	};IWa.easeOut=function(a,b,c,d){return Math.sin(Math.PI/2*a)
	};IWa.easeInOut=function(a,b,c,d){return-.5*(Math.cos(a*Math.PI)-1)
	};var Gcb=function(){};h[
		"com.gskinner.motion.plugins.IGTweenPlugin"
	]=
Gcb;Gcb.__name__="com.gskinner.motion.plugins.IGTweenPlugin";Gcb.__isInterface__=!0;Gcb.prototype={__class__:Gcb
	};var Fk=function(){};h[
		"starling.events.EventDispatcher"
	]=Fk;Fk.__name__="starling.events.EventDispatcher";Fk.prototype={addEventListener:function(a,b){if(null==b)throw ba.thrown(new wb("null listener added"));null==this.mEventListeners&&(this.mEventListeners=new x);var c=this.mEventListeners.h[a
			];if(null==c){c=this.mEventListeners;var d=Ub.toFunctionVector(null);c.h[a
				]=d;this.mEventListeners.h[a
				].push(b)
			}else{a=
0;for(d=c.get_length();a<d;)if(c.get(a++)==b)return;c.set(c.get_length(),b)
			}
		},removeEventListener:function(a,b){if(null!=this.mEventListeners){var c=this.mEventListeners.h[a
				],d=null!=c?c.get_length(): 0;if(0<d){var e=c.indexOf(b,
					0);if(-1!=e){b=c.slice(0,e);for(e+=1;e<d;){var g=e++;b.set(g-1,c.get(g))
						}this.mEventListeners.h[a
						]=b
					}
				}
			}
		},removeEventListeners:function(a){if(null!=a&&null!=this.mEventListeners){var b=this.mEventListeners;Object.prototype.hasOwnProperty.call(b.h,a)&&delete b.h[a
				]
			}else this.mEventListeners=
null
		},dispatchEvent:function(a){var b=a.bubbles;if(b||null!=this.mEventListeners&&Object.prototype.hasOwnProperty.call(this.mEventListeners.h,a.type)){var c=a.target;a.setTarget(this);b&&this instanceof Wc?this.__bubbleEvent(a):this.__invokeEvent(a);null!=c&&a.setTarget(c)
			}
		},__invokeEvent:function(a){var b=null!=this.mEventListeners?this.mEventListeners.h[a.type
			]: null,c=null==b?0:b.get_length();if(0!=c){a.setCurrentTarget(this);for(var d=0;d<c;){var e=b.get(d++);if(null!=e&&(e(a,a.data),a.stopsImmediatePropagation))return!0
				}return a.stopsPropagation
			}return!1
		},
__bubbleEvent:function(a){var b=K.__cast(this,Wc),c=1;if(0<Fk.sBubbleChains.length){var d=Fk.sBubbleChains.pop();d.set(0,b)
			}else{d=[b
				];for(var e=Ub.toObjectVector(null),g=0,k=d.length;g<k;){var t=g++;e.set(t,d[t
					])
				}d=e
			}for(;;){b=b.get_parent();if(null==b)break;d.set(c++,b)
			}g=0;for(k=c;g<k&&(t=g++,null==d.get(t)||!d.get(t).__invokeEvent(a)););d.set_length(0);Fk.sBubbleChains[Fk.sBubbleChains.length
			]=d
		},dispatchEventWith:function(a,b,c){null==b&&(b=!1);if(b||this.hasEventListener(a))a=Sd.fromPool(a,
b,c),this.dispatchEvent(a),Sd.toPool(a)
		},hasEventListener:function(a){a=null!=this.mEventListeners?this.mEventListeners.h[a
			]:null;return null!=a?0!=a.get_length():!1
		},__class__:Fk
	};var Ub={__properties__: {set_length: "set_length",get_length: "get_length",set_fixed: "set_fixed",get_fixed: "get_fixed"
		},concat:function(a,b){return a.concat(b)
		},filter:function(a,b){return a.filter(b)
		},copy:function(a){return a.copy()
		},get:function(a,b){return a.get(b)
		},contains:function(a,b){return-1!=a.indexOf(b)
		},indexOf:function(a,
b,c){null==c&&(c=0);return a.indexOf(b,c)
		},insertAt:function(a,b,c){a.insertAt(b,c)
		},iterator:function(a){return new EHb(a)
		},keyValueIterator:function(a){return new FHb(a)
		},join:function(a,b){null==b&&(b=",");return a.join(b)
		},lastIndexOf:function(a,b,c){null==c&&(c=0);return a.lastIndexOf(b,c)
		},pop:function(a){return a.pop()
		},push:function(a,b){return a.push(b)
		},removeAt:function(a,b){return a.removeAt(b)
		},reverse:function(a){return a.reverse()
		},set:function(a,b,c){return a.set(b,c)
		},shift:function(a){return a.shift()
		},
slice:function(a,b,c){return a.slice(b,c)
		},sort:function(a,b){a.sort(b)
		},splice:function(a,b,c){return a.splice(b,c)
		},toString:function(a){return a.toString()
		},unshift:function(a,b){a.unshift(b)
		},ofArray:function(a){for(var b=Ub.toObjectVector(null),c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e
				])
			}return b
		},isVector:function(a){return K.__implements(a,wS)
		},convert:function(a){return a
		},toBoolVector:function(a,b,c){return new hJ(b,c)
		},toIntVector:function(a,b,c){return new iJ(b,c)
		},toFloatVector:function(a,
b,c){return new jJ(b,c)
		},toFunctionVector:function(a,b,c){return new kJ(b,c)
		},toObjectVector:function(a,b,c){return new lJ(b,c)
		},get_fixed:function(a){return a.fixed
		},set_fixed:function(a,b){return a.fixed=b
		},get_length:function(a){return a.get_length()
		},set_length:function(a,b){return a.set_length(b)
		}
	},Eb=function(a,b,c,d,e,g){null==g&&(g=0);null==e&&(e=0);null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=1);this.a=a;this.b=b;this.c=c;this.d=d;this.tx=e;this.ty=g
	};h[
		"openfl.geom.Matrix"
	]=
Eb;Eb.__name__="openfl.geom.Matrix";Eb.prototype={clone:function(){return new Eb(this.a,this.b,this.c,this.d,this.tx,this.ty)
		},concat:function(a){var b=this.a*a.a+this.b*a.c;this.b=this.a*a.b+this.b*a.d;this.a=b;b=this.c*a.a+this.d*a.c;this.d=this.c*a.b+this.d*a.d;this.c=b;b=this.tx*a.a+this.ty*a.c+a.tx;this.ty=this.tx*a.b+this.ty*a.d+a.ty;this.tx=b
		},copyColumnFrom:function(a,b){if(2<a)throw ba.thrown("Column "+a+" out of bounds (2)");0==a?(this.a=b.x,this.c=b.y): 1==a?(this.b=b.x,this.d=b.y):(this.tx=
b.x,this.ty=b.y)
		},copyColumnTo:function(a,b){if(2<a)throw ba.thrown("Column "+a+" out of bounds (2)");0==a?(b.x=this.a,b.y=this.c,b.z=0): 1==a?(b.x=this.b,b.y=this.d,b.z=0):(b.x=this.tx,b.y=this.ty,b.z=1)
		},copyFrom:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.d=a.d;this.tx=a.tx;this.ty=a.ty
		},copyRowFrom:function(a,b){if(2<a)throw ba.thrown("Row "+a+" out of bounds (2)");0==a?(this.a=b.x,this.c=b.y): 1==a?(this.b=b.x,this.d=b.y):(this.tx=b.x,this.ty=b.y)
		},copyRowTo:function(a,b){if(2<a)throw ba.thrown("Row "+
a+" out of bounds (2)");0==a?(b.x=this.a,b.y=this.b,b.z=this.tx): 1==a?(b.x=this.c,b.y=this.d,b.z=this.ty):b.setTo(0,
			0,
			1)
		},createBox:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);if(0!=c){var g=Math.cos(c);c=Math.sin(c);this.a=g*a;this.b=c*b;this.c=-c*a;this.d=g*b
			}else this.a=a,this.c=this.b=0,this.d=b;this.tx=d;this.ty=e
		},createGradientBox:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);this.a=a/1638.4;this.d=b/1638.4;if(0!=c){var g=Math.cos(c);c=Math.sin(c);this.b=
c*this.d;this.c=-c*this.a;this.a*=g;this.d*=g
			}else this.c=this.b=0;this.tx=d+a/2;this.ty=e+b/2
		},deltaTransformPoint:function(a){return new p(a.x*this.a+a.y*this.c,a.x*this.b+a.y*this.d)
		},equals:function(a){return null!=a&&this.tx==a.tx&&this.ty==a.ty&&this.a==a.a&&this.b==a.b&&this.c==a.c?this.d==a.d:!1
		},identity:function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0
		},invert:function(){var a=this.a*this.d-this.b*this.c;if(0==a)this.a=this.b=this.c=this.d=0,this.tx=-this.tx,this.ty=-this.ty;
else{a=1/a;var b=this.d*a;this.d=this.a*a;this.a=b;this.b*=-a;this.c*=-a;a=-this.a*this.tx-this.c*this.ty;this.ty=-this.b*this.tx-this.d*this.ty;this.tx=a
			}return this
		},rotate:function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.a*b-this.b*a;this.b=this.a*a+this.b*b;this.a=c;c=this.c*b-this.d*a;this.d=this.c*a+this.d*b;this.c=c;c=this.tx*b-this.ty*a;this.ty=this.tx*a+this.ty*b;this.tx=c
		},scale:function(a,b){this.a*=a;this.b*=b;this.c*=a;this.d*=b;this.tx*=a;this.ty*=b
		},setRotation:function(a,b){null==
b&&(b=1);this.a=Math.cos(a)*b;this.c=Math.sin(a)*b;this.b=-this.c;this.d=this.a
		},setTo:function(a,b,c,d,e,g){this.a=a;this.b=b;this.c=c;this.d=d;this.tx=e;this.ty=g
		},to3DString:function(a){null==a&&(a=!1);return a?"matrix3d("+this.a+", "+this.b+", 0, 0, "+this.c+", "+this.d+", 0, 0, 0, 0, 1, 0, "+(this.tx|0)+", "+(this.ty|0)+", 0, 1)": "matrix3d("+this.a+", "+this.b+", 0, 0, "+this.c+", "+this.d+", 0, 0, 0, 0, 1, 0, "+this.tx+", "+this.ty+", 0, 1)"
		},toMozString:function(){return"matrix("+this.a+", "+
this.b+", "+this.c+", "+this.d+", "+this.tx+"px, "+this.ty+"px)"
		},toString:function(){return"matrix("+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.tx+", "+this.ty+")"
		},transformPoint:function(a){return new p(a.x*this.a+a.y*this.c+this.tx,a.x*this.b+a.y*this.d+this.ty)
		},translate:function(a,b){this.tx+=a;this.ty+=b
		},toArray:function(a){null==a&&(a=!1);null==this.__array&&(this.__array=new Float32Array(9));a?(this.__array[
				0
			]=this.a,this.__array[
				1
			]=this.b,this.__array[
				2
			]=0,this.__array[
				3
			]=this.c,
this.__array[
				4
			]=this.d,this.__array[
				5
			]=0,this.__array[
				6
			]=this.tx,this.__array[
				7
			]=this.ty):(this.__array[
				0
			]=this.a,this.__array[
				1
			]=this.c,this.__array[
				2
			]=this.tx,this.__array[
				3
			]=this.b,this.__array[
				4
			]=this.d,this.__array[
				5
			]=this.ty,this.__array[
				6
			]=0,this.__array[
				7
			]=0);this.__array[
				8
			]=1;return this.__array
		},__cleanValues:function(){this.a=Math.round(1E3*this.a)/1E3;this.b=Math.round(1E3*this.b)/1E3;this.c=Math.round(1E3*this.c)/1E3;this.d=Math.round(1E3*this.d)/1E3;this.tx=Math.round(10*this.tx)/10;
this.ty=Math.round(10*this.ty)/10
		},__transformInversePoint:function(a){var b=this.a*this.d-this.b*this.c;if(0==b)a.x=-this.tx,a.y=-this.ty;else{var c=1/b*(this.c*(this.ty-a.y)+this.d*(a.x-this.tx));a.y=1/b*(this.a*(a.y-this.ty)+this.b*(this.tx-a.x));a.x=c
			}
		},__transformInverseX:function(a,b){var c=this.a*this.d-this.b*this.c;return 0==c?-this.tx: 1/c*(this.c*(this.ty-b)+this.d*(a-this.tx))
		},__transformInverseY:function(a,b){var c=this.a*this.d-this.b*this.c;return 0==c?-this.ty: 1/c*(this.a*(b-this.ty)+
this.b*(this.tx-a))
		},__transformPoint:function(a){var b=a.x,c=a.y;a.x=b*this.a+c*this.c+this.tx;a.y=b*this.b+c*this.d+this.ty
		},__transformX:function(a,b){return a*this.a+b*this.c+this.tx
		},__transformY:function(a,b){return a*this.b+b*this.d+this.ty
		},__translateTransformed:function(a,b){this.tx=a*this.a+b*this.c+this.tx;this.ty=a*this.b+b*this.d+this.ty
		},__class__:Eb
	};var Kj=function(a){if(null!=a&&16==a.get_length())this.rawData=a.concat(null);else{a=[
				1,
				0,
				0,
				0,
				0,
				1,
				0,
				0,
				0,
				0,
				1,
				0,
				0,
				0,
				0,
				1
			];for(var b=Ub.toFloatVector(null),
c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e
				])
			}this.rawData=b
		}
	};h[
		"openfl.geom.Matrix3D"
	]=Kj;Kj.__name__="openfl.geom.Matrix3D";Kj.create2D=function(a,b,c,d){null==d&&(d=0);null==c&&(c=1);var e=d*Math.PI/180;d=Math.cos(e);e=Math.sin(e);a=[d*c,-e*c,
			0,
			0,e*c,d*c,
			0,
			0,
			0,
			0,
			1,
			0,a,b,
			0,
			1
		];b=Ub.toFloatVector(null);c=0;for(d=a.length;c<d;)e=c++,b.set(e,a[e
		]);return new Kj(b)
	};Kj.createABCD=function(a,b,c,d,e,g){a=[a,b,
			0,
			0,c,d,
			0,
			0,
			0,
			0,
			1,
			0,e,g,
			0,
			1
		];b=Ub.toFloatVector(null);c=0;for(d=a.length;c<d;)e=c++,b.set(e,
a[e
		]);return new Kj(b)
	};Kj.createOrtho=function(a,b,c,d,e,g){var k=1/(b-a),t=1/(d-c),u=1/(g-e);a=[
			2*k,
			0,
			0,
			0,
			0,
			2*t,
			0,
			0,
			0,
			0,
			-2*u,
			0,-(a+b)*k,-(c+d)*t,-(e+g)*u,
			1
		];b=Ub.toFloatVector(null);c=0;for(d=a.length;c<d;)e=c++,b.set(e,a[e
		]);return new Kj(b)
	};Kj.interpolate=function(a,b,c){for(var d=new Kj,e=0;16>e;){var g=e++;d.rawData.set(g,a.rawData.get(g)+(b.rawData.get(g)-a.rawData.get(g))*c)
		}return d
	};Kj.__getAxisRotation=function(a,b,c,d){var e=new Kj;a=new $f(a,b,c);d=Math.PI/180*-d;c=Math.cos(d);d=Math.sin(d);
b=1-c;e.rawData.set(0,c+a.x*a.x*b);e.rawData.set(5,c+a.y*a.y*b);e.rawData.set(10,c+a.z*a.z*b);c=a.x*a.y*b;var g=a.z*d;e.rawData.set(4,c+g);e.rawData.set(1,c-g);c=a.x*a.z*b;g=a.y*d;e.rawData.set(8,c-g);e.rawData.set(2,c+g);c=a.y*a.z*b;g=a.x*d;e.rawData.set(9,c+g);e.rawData.set(6,c-g);return e
	};Kj.prototype={append:function(a){var b=this.rawData.get(0),c=this.rawData.get(4),d=this.rawData.get(8),e=this.rawData.get(12),g=this.rawData.get(1),k=this.rawData.get(5),t=this.rawData.get(9),u=this.rawData.get(13),
A=this.rawData.get(2),z=this.rawData.get(6),J=this.rawData.get(10),T=this.rawData.get(14),W=this.rawData.get(3),X=this.rawData.get(7),da=this.rawData.get(11),pa=this.rawData.get(15),na=a.rawData.get(0),wa=a.rawData.get(4),Ca=a.rawData.get(8),Fa=a.rawData.get(12),sb=a.rawData.get(1),ib=a.rawData.get(5),Db=a.rawData.get(9),zb=a.rawData.get(13),Cb=a.rawData.get(2),Wb=a.rawData.get(6),uc=a.rawData.get(10),ec=a.rawData.get(14),ud=a.rawData.get(3),ae=a.rawData.get(7),Ad=a.rawData.get(11);a=a.rawData.get(15);
this.rawData.set(0,b*na+g*wa+A*Ca+W*Fa);this.rawData.set(1,b*sb+g*ib+A*Db+W*zb);this.rawData.set(2,b*Cb+g*Wb+A*uc+W*ec);this.rawData.set(3,b*ud+g*ae+A*Ad+W*a);this.rawData.set(4,c*na+k*wa+z*Ca+X*Fa);this.rawData.set(5,c*sb+k*ib+z*Db+X*zb);this.rawData.set(6,c*Cb+k*Wb+z*uc+X*ec);this.rawData.set(7,c*ud+k*ae+z*Ad+X*a);this.rawData.set(8,d*na+t*wa+J*Ca+da*Fa);this.rawData.set(9,d*sb+t*ib+J*Db+da*zb);this.rawData.set(10,d*Cb+t*Wb+J*uc+da*ec);this.rawData.set(11,d*ud+t*ae+J*Ad+da*a);this.rawData.set(12,
e*na+u*wa+T*Ca+pa*Fa);this.rawData.set(13,e*sb+u*ib+T*Db+pa*zb);this.rawData.set(14,e*Cb+u*Wb+T*uc+pa*ec);this.rawData.set(15,e*ud+u*ae+T*Ad+pa*a)
		},appendRotation:function(a,b,c){var d=0,e=d,g=e;null!=c&&(g=c.x,e=c.y,d=c.z);c=a*Math.PI/180;a=Math.cos(c);c=Math.sin(c);var k=b.x,t=b.y;b=b.z;var u=k*k,A=t*t,z=b*b,J=u+A+z;if(0!=J){var T=Math.sqrt(J);k/=T;t/=T;b/=T;u/=J;A/=J;z/=J
			}J=1-a;T=new Kj;var W=T.rawData;W.set(0,u+(A+z)*a);W.set(1,k*t*J+b*c);W.set(2,k*b*J-t*c);W.set(4,k*t*J-b*c);W.set(5,A+(u+z)*
a);W.set(6,t*b*J+k*c);W.set(8,k*b*J+t*c);W.set(9,t*b*J-k*c);W.set(10,z+(u+A)*a);W.set(12,(g*(A+z)-k*(e*t+d*b))*J+(e*b-d*t)*c);W.set(13,(e*(u+z)-t*(g*k+d*b))*J+(d*k-g*b)*c);W.set(14,(d*(u+A)-b*(g*k+e*t))*J+(g*t-e*k)*c);this.append(T)
		},appendScale:function(a,b,c){var d=this.rawData;d.set(0,d.get(0)*a);d=this.rawData;d.set(1,d.get(1)*b);d=this.rawData;d.set(2,d.get(2)*c);d=this.rawData;d.set(4,d.get(4)*a);d=this.rawData;d.set(5,d.get(5)*b);d=this.rawData;d.set(6,d.get(6)*c);d=this.rawData;d.set(8,d.get(8)*
a);d=this.rawData;d.set(9,d.get(9)*b);d=this.rawData;d.set(10,d.get(10)*c);d=this.rawData;d.set(12,d.get(12)*a);d=this.rawData;d.set(13,d.get(13)*b);d=this.rawData;d.set(14,d.get(14)*c)
		},appendTranslation:function(a,b,c){var d=this.rawData;d.set(12,d.get(12)+a);d=this.rawData;d.set(13,d.get(13)+b);d=this.rawData;d.set(14,d.get(14)+c)
		},clone:function(){return new Kj(this.rawData.copy())
		},copyColumnFrom:function(a,b){switch(a){case 0:this.rawData.set(0,b.x);this.rawData.set(1,b.y);this.rawData.set(2,
b.z);this.rawData.set(3,b.w);break;case 1:this.rawData.set(4,b.x);this.rawData.set(5,b.y);this.rawData.set(6,b.z);this.rawData.set(7,b.w);break;case 2:this.rawData.set(8,b.x);this.rawData.set(9,b.y);this.rawData.set(10,b.z);this.rawData.set(11,b.w);break;case 3:this.rawData.set(12,b.x),this.rawData.set(13,b.y),this.rawData.set(14,b.z),this.rawData.set(15,b.w)
			}
		},copyColumnTo:function(a,b){switch(a){case 0:b.x=this.rawData.get(0);b.y=this.rawData.get(1);b.z=this.rawData.get(2);b.w=this.rawData.get(3);
break;case 1:b.x=this.rawData.get(4);b.y=this.rawData.get(5);b.z=this.rawData.get(6);b.w=this.rawData.get(7);break;case 2:b.x=this.rawData.get(8);b.y=this.rawData.get(9);b.z=this.rawData.get(10);b.w=this.rawData.get(11);break;case 3:b.x=this.rawData.get(12),b.y=this.rawData.get(13),b.z=this.rawData.get(14),b.w=this.rawData.get(15)
			}
		},copyFrom:function(a){this.rawData=a.rawData.copy()
		},copyRawDataFrom:function(a,b,c){null==c&&(c=!1);null==b&&(b=0);c&&this.transpose();for(var d=0,e=a.get_length()-b;d<
e;){var g=d++;this.rawData.set(g,a.get(g+b))
			}c&&this.transpose()
		},copyRawDataTo:function(a,b,c){null==c&&(c=!1);null==b&&(b=0);c&&this.transpose();for(var d=0,e=this.rawData.get_length();d<e;){var g=d++;a.set(g+b,this.rawData.get(g))
			}c&&this.transpose()
		},copyRowFrom:function(a,b){switch(a){case 0:this.rawData.set(0,b.x);this.rawData.set(4,b.y);this.rawData.set(8,b.z);this.rawData.set(12,b.w);break;case 1:this.rawData.set(1,b.x);this.rawData.set(5,b.y);this.rawData.set(9,b.z);this.rawData.set(13,b.w);
break;case 2:this.rawData.set(2,b.x);this.rawData.set(6,b.y);this.rawData.set(10,b.z);this.rawData.set(14,b.w);break;case 3:this.rawData.set(3,b.x),this.rawData.set(7,b.y),this.rawData.set(11,b.z),this.rawData.set(15,b.w)
			}
		},copyRowTo:function(a,b){switch(a){case 0:b.x=this.rawData.get(0);b.y=this.rawData.get(4);b.z=this.rawData.get(8);b.w=this.rawData.get(12);break;case 1:b.x=this.rawData.get(1);b.y=this.rawData.get(5);b.z=this.rawData.get(9);b.w=this.rawData.get(13);break;case 2:b.x=this.rawData.get(2);
b.y=this.rawData.get(6);b.z=this.rawData.get(10);b.w=this.rawData.get(14);break;case 3:b.x=this.rawData.get(3),b.y=this.rawData.get(7),b.z=this.rawData.get(11),b.w=this.rawData.get(15)
			}
		},copyToMatrix3D:function(a){a.rawData=this.rawData.copy()
		},decompose:function(a){null==a&&(a=1);var b=Ub.toObjectVector(null),c=this.clone().rawData.copy(),d=new $f(c.get(12),c.get(13),c.get(14));c.set(12,
			0);c.set(13,
			0);c.set(14,
			0);var e=new $f;e.x=Math.sqrt(c.get(0)*c.get(0)+c.get(1)*c.get(1)+c.get(2)*c.get(2));e.y=
Math.sqrt(c.get(4)*c.get(4)+c.get(5)*c.get(5)+c.get(6)*c.get(6));e.z=Math.sqrt(c.get(8)*c.get(8)+c.get(9)*c.get(9)+c.get(10)*c.get(10));0>c.get(0)*(c.get(5)*c.get(10)-c.get(6)*c.get(9))-c.get(1)*(c.get(4)*c.get(10)-c.get(6)*c.get(8))+c.get(2)*(c.get(4)*c.get(9)-c.get(5)*c.get(8))&&(e.z=-e.z);c.set(0,c.get(0)/e.x);c.set(1,c.get(1)/e.x);c.set(2,c.get(2)/e.x);c.set(4,c.get(4)/e.y);c.set(5,c.get(5)/e.y);c.set(6,c.get(6)/e.y);c.set(8,c.get(8)/e.z);c.set(9,c.get(9)/e.z);c.set(10,c.get(10)/e.z);var g=new $f;
switch(a){case 0:g.w=Math.acos((c.get(0)+c.get(5)+c.get(10)-1)/2);a=Math.sqrt((c.get(6)-c.get(9))*(c.get(6)-c.get(9))+(c.get(8)-c.get(2))*(c.get(8)-c.get(2))+(c.get(1)-c.get(4))*(c.get(1)-c.get(4)));0!=a?(g.x=(c.get(6)-c.get(9))/a,g.y=(c.get(8)-c.get(2))/a,g.z=(c.get(1)-c.get(4))/a):g.x=g.y=g.z=0;break;case 1:g.y=Math.asin(-c.get(2));1!=c.get(2)&&-1!=c.get(2)?(g.x=Math.atan2(c.get(6),c.get(10)),g.z=Math.atan2(c.get(1),c.get(0))):(g.z=0,g.x=Math.atan2(c.get(4),c.get(5)));break;case 2:a=c.get(0)+c.get(5)+
c.get(10),
				0<a?(g.w=Math.sqrt(1+a)/2,g.x=(c.get(6)-c.get(9))/(4*g.w),g.y=(c.get(8)-c.get(2))/(4*g.w),g.z=(c.get(1)-c.get(4))/(4*g.w)):c.get(0)>c.get(5)&&c.get(0)>c.get(10)?(g.x=Math.sqrt(1+c.get(0)-c.get(5)-c.get(10))/2,g.w=(c.get(6)-c.get(9))/(4*g.x),g.y=(c.get(1)+c.get(4))/(4*g.x),g.z=(c.get(8)+c.get(2))/(4*g.x)):c.get(5)>c.get(10)?(g.y=Math.sqrt(1+c.get(5)-c.get(0)-c.get(10))/2,g.x=(c.get(1)+c.get(4))/(4*g.y),g.w=(c.get(8)-c.get(2))/(4*g.y),g.z=(c.get(6)+c.get(9))/(4*g.y)):(g.z=Math.sqrt(1+c.get(10)-
c.get(0)-c.get(5))/2,g.x=(c.get(8)+c.get(2))/(4*g.z),g.y=(c.get(6)+c.get(9))/(4*g.z),g.w=(c.get(1)-c.get(4))/(4*g.z))
			}b.push(d);b.push(g);b.push(e);return b
		},deltaTransformVector:function(a){var b=a.x,c=a.y;a=a.z;return new $f(b*this.rawData.get(0)+c*this.rawData.get(4)+a*this.rawData.get(8)+this.rawData.get(3),b*this.rawData.get(1)+c*this.rawData.get(5)+a*this.rawData.get(9)+this.rawData.get(7),b*this.rawData.get(2)+c*this.rawData.get(6)+a*this.rawData.get(10)+this.rawData.get(11),
			0)
		},identity:function(){for(var a=
[
				1,
				0,
				0,
				0,
				0,
				1,
				0,
				0,
				0,
				0,
				1,
				0,
				0,
				0,
				0,
				1
			],b=Ub.toFloatVector(null),c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e
				])
			}this.rawData=b
		},interpolateTo:function(a,b){for(var c=0;16>c;){var d=c++;this.rawData.set(d,this.rawData.get(d)+(a.rawData.get(d)-this.rawData.get(d))*b)
			}
		},invert:function(){var a=this.get_determinant(),b=1E-11<Math.abs(a);if(b){a=1/a;var c=this.rawData.get(0),d=this.rawData.get(4),e=this.rawData.get(8),g=this.rawData.get(12),k=this.rawData.get(1),t=this.rawData.get(5),u=this.rawData.get(9),A=this.rawData.get(13),
z=this.rawData.get(2),J=this.rawData.get(6),T=this.rawData.get(10),W=this.rawData.get(14),X=this.rawData.get(3),da=this.rawData.get(7),pa=this.rawData.get(11),na=this.rawData.get(15);this.rawData.set(0,a*(t*(T*na-W*pa)-u*(J*na-W*da)+A*(J*pa-T*da)));this.rawData.set(1,-a*(k*(T*na-W*pa)-u*(z*na-W*X)+A*(z*pa-T*X)));this.rawData.set(2,a*(k*(J*na-W*da)-t*(z*na-W*X)+A*(z*da-J*X)));this.rawData.set(3,-a*(k*(J*pa-T*da)-t*(z*pa-T*X)+u*(z*da-J*X)));this.rawData.set(4,-a*(d*(T*na-W*pa)-e*(J*na-W*da)+g*(J*pa-
T*da)));this.rawData.set(5,a*(c*(T*na-W*pa)-e*(z*na-W*X)+g*(z*pa-T*X)));this.rawData.set(6,-a*(c*(J*na-W*da)-d*(z*na-W*X)+g*(z*da-J*X)));this.rawData.set(7,a*(c*(J*pa-T*da)-d*(z*pa-T*X)+e*(z*da-J*X)));this.rawData.set(8,a*(d*(u*na-A*pa)-e*(t*na-A*da)+g*(t*pa-u*da)));this.rawData.set(9,-a*(c*(u*na-A*pa)-e*(k*na-A*X)+g*(k*pa-u*X)));this.rawData.set(10,a*(c*(t*na-A*da)-d*(k*na-A*X)+g*(k*da-t*X)));this.rawData.set(11,-a*(c*(t*pa-u*da)-d*(k*pa-u*X)+e*(k*da-t*X)));this.rawData.set(12,-a*(d*(u*W-A*T)-e*
(t*W-A*J)+g*(t*T-u*J)));this.rawData.set(13,a*(c*(u*W-A*T)-e*(k*W-A*z)+g*(k*T-u*z)));this.rawData.set(14,-a*(c*(t*W-A*J)-d*(k*W-A*z)+g*(k*J-t*z)));this.rawData.set(15,a*(c*(t*T-u*J)-d*(k*T-u*z)+e*(k*J-t*z)))
			}return b
		},pointAt:function(a,b,c){null==b&&(b=new $f(0,
			0,
			-1));null==c&&(c=new $f(0,
			-1,
			0));b=b.subtract(a);c=c.clone();b.normalize();c.normalize();var d=b.clone();d.scaleBy(c.dotProduct(b));c=c.subtract(d);0<c.get_length()?c.normalize():c=0!=b.x?new $f(-b.y,b.x,
			0):new $f(1,
			0,
			0);d=c.crossProduct(b);
d.normalize();this.rawData.set(0,d.x);this.rawData.set(4,d.y);this.rawData.set(8,d.z);this.rawData.set(12,
			0);this.rawData.set(1,c.x);this.rawData.set(5,c.y);this.rawData.set(9,c.z);this.rawData.set(13,
			0);this.rawData.set(2,b.x);this.rawData.set(6,b.y);this.rawData.set(10,b.z);this.rawData.set(14,
			0);this.rawData.set(3,a.x);this.rawData.set(7,a.y);this.rawData.set(11,a.z);this.rawData.set(15,
			1)
		},prepend:function(a){var b=a.rawData.get(0),c=a.rawData.get(4),d=a.rawData.get(8),e=a.rawData.get(12),g=a.rawData.get(1),
k=a.rawData.get(5),t=a.rawData.get(9),u=a.rawData.get(13),A=a.rawData.get(2),z=a.rawData.get(6),J=a.rawData.get(10),T=a.rawData.get(14),W=a.rawData.get(3),X=a.rawData.get(7),da=a.rawData.get(11);a=a.rawData.get(15);var pa=this.rawData.get(0),na=this.rawData.get(4),wa=this.rawData.get(8),Ca=this.rawData.get(12),Fa=this.rawData.get(1),sb=this.rawData.get(5),ib=this.rawData.get(9),Db=this.rawData.get(13),zb=this.rawData.get(2),Cb=this.rawData.get(6),Wb=this.rawData.get(10),uc=this.rawData.get(14),ec=
this.rawData.get(3),ud=this.rawData.get(7),ae=this.rawData.get(11),Ad=this.rawData.get(15);this.rawData.set(0,b*pa+g*na+A*wa+W*Ca);this.rawData.set(1,b*Fa+g*sb+A*ib+W*Db);this.rawData.set(2,b*zb+g*Cb+A*Wb+W*uc);this.rawData.set(3,b*ec+g*ud+A*ae+W*Ad);this.rawData.set(4,c*pa+k*na+z*wa+X*Ca);this.rawData.set(5,c*Fa+k*sb+z*ib+X*Db);this.rawData.set(6,c*zb+k*Cb+z*Wb+X*uc);this.rawData.set(7,c*ec+k*ud+z*ae+X*Ad);this.rawData.set(8,d*pa+t*na+J*wa+da*Ca);this.rawData.set(9,d*Fa+t*sb+J*ib+da*Db);this.rawData.set(10,
d*zb+t*Cb+J*Wb+da*uc);this.rawData.set(11,d*ec+t*ud+J*ae+da*Ad);this.rawData.set(12,e*pa+u*na+T*wa+a*Ca);this.rawData.set(13,e*Fa+u*sb+T*ib+a*Db);this.rawData.set(14,e*zb+u*Cb+T*Wb+a*uc);this.rawData.set(15,e*ec+u*ud+T*ae+a*Ad)
		},prependRotation:function(a,b,c){var d=0,e=d,g=e;null!=c&&(g=c.x,e=c.y,d=c.z);c=a*Math.PI/180;a=Math.cos(c);c=Math.sin(c);var k=b.x,t=b.y;b=b.z;var u=k*k,A=t*t,z=b*b,J=u+A+z;if(0!=J){var T=Math.sqrt(J);k/=T;t/=T;b/=T;u/=J;A/=J;z/=J
			}J=1-a;T=new Kj;var W=T.rawData;W.set(0,u+
(A+z)*a);W.set(1,k*t*J+b*c);W.set(2,k*b*J-t*c);W.set(4,k*t*J-b*c);W.set(5,A+(u+z)*a);W.set(6,t*b*J+k*c);W.set(8,k*b*J+t*c);W.set(9,t*b*J-k*c);W.set(10,z+(u+A)*a);W.set(12,(g*(A+z)-k*(e*t+d*b))*J+(e*b-d*t)*c);W.set(13,(e*(u+z)-t*(g*k+d*b))*J+(d*k-g*b)*c);W.set(14,(d*(u+A)-b*(g*k+e*t))*J+(g*t-e*k)*c);this.prepend(T)
		},prependScale:function(a,b,c){var d=this.rawData;d.set(0,d.get(0)*a);d=this.rawData;d.set(1,d.get(1)*a);d=this.rawData;d.set(2,d.get(2)*a);d=this.rawData;d.set(3,d.get(3)*a);d=this.rawData;
d.set(4,d.get(4)*b);d=this.rawData;d.set(5,d.get(5)*b);d=this.rawData;d.set(6,d.get(6)*b);d=this.rawData;d.set(7,d.get(7)*b);d=this.rawData;d.set(8,d.get(8)*c);d=this.rawData;d.set(9,d.get(9)*c);d=this.rawData;d.set(10,d.get(10)*c);d=this.rawData;d.set(11,d.get(11)*c)
		},prependTranslation:function(a,b,c){var d=this.rawData.get(0),e=this.rawData.get(4),g=this.rawData.get(8),k=this.rawData.get(12),t=this.rawData.get(1),u=this.rawData.get(5),A=this.rawData.get(9),z=this.rawData.get(13),J=this.rawData.get(2),
T=this.rawData.get(6),W=this.rawData.get(10),X=this.rawData.get(14),da=this.rawData.get(3),pa=this.rawData.get(7),na=this.rawData.get(11),wa=this.rawData.get(15);this.rawData.set(12,a*d+b*e+c*g+k);this.rawData.set(13,a*t+b*u+c*A+z);this.rawData.set(14,a*J+b*T+c*W+X);this.rawData.set(15,a*da+b*pa+c*na+wa)
		},recompose:function(a,b){if(3>a.get_length()||0==a.get(2).x||0==a.get(2).y||0==a.get(2).z)return!1;null==b&&(b=1);this.identity();var c=[];c[
				0
			]=c[
				1
			]=c[
				2
			]=a.get(2).x;c[
				4
			]=c[
				5
			]=c[
				6
			]=a.get(2).y;c[
				8
			]=
c[
				9
			]=c[
				10
			]=a.get(2).z;if(null==b){var d=a.get(1).x,e=a.get(1).y,g=a.get(1).z,k=a.get(1).w;0==b&&(d*=Math.sin(k/2),e*=Math.sin(k/2),g*=Math.sin(k/2),k=Math.cos(k/2));this.rawData.set(0,(1-2*e*e-2*g*g)*c[
					0
				]);this.rawData.set(1,(2*d*e+2*k*g)*c[
					1
				]);this.rawData.set(2,(2*d*g-2*k*e)*c[
					2
				]);this.rawData.set(3,
				0);this.rawData.set(4,(2*d*e-2*k*g)*c[
					4
				]);this.rawData.set(5,(1-2*d*d-2*g*g)*c[
					5
				]);this.rawData.set(6,(2*e*g+2*k*d)*c[
					6
				]);this.rawData.set(7,
				0);this.rawData.set(8,(2*d*g+2*k*e)*c[
					8
				]);this.rawData.set(9,
(2*e*g-2*k*d)*c[
					9
				]);this.rawData.set(10,(1-2*d*d-2*e*e)*c[
					10
				])
			}else if(1==b){b=Math.cos(a.get(1).x);d=Math.cos(a.get(1).y);e=Math.cos(a.get(1).z);g=Math.sin(a.get(1).x);k=Math.sin(a.get(1).y);var t=Math.sin(a.get(1).z);this.rawData.set(0,d*e*c[
					0
				]);this.rawData.set(1,d*t*c[
					1
				]);this.rawData.set(2,-k*c[
					2
				]);this.rawData.set(3,
				0);this.rawData.set(4,(g*k*e-b*t)*c[
					4
				]);this.rawData.set(5,(g*k*t+b*e)*c[
					5
				]);this.rawData.set(6,g*d*c[
					6
				]);this.rawData.set(7,
				0);this.rawData.set(8,(b*k*e+g*t)*c[
					8
				]);this.rawData.set(9,
(b*k*t-g*e)*c[
					9
				]);this.rawData.set(10,b*d*c[
					10
				])
			}else d=a.get(1).x,e=a.get(1).y,g=a.get(1).z,k=a.get(1).w,
			0==b&&(d*=Math.sin(k/2),e*=Math.sin(k/2),g*=Math.sin(k/2),k=Math.cos(k/2)),this.rawData.set(0,(1-2*e*e-2*g*g)*c[
				0
			]),this.rawData.set(1,(2*d*e+2*k*g)*c[
				1
			]),this.rawData.set(2,(2*d*g-2*k*e)*c[
				2
			]),this.rawData.set(3,
			0),this.rawData.set(4,(2*d*e-2*k*g)*c[
				4
			]),this.rawData.set(5,(1-2*d*d-2*g*g)*c[
				5
			]),this.rawData.set(6,(2*e*g+2*k*d)*c[
				6
			]),this.rawData.set(7,
			0),this.rawData.set(8,(2*d*g+2*k*e)*c[
				8
			]),
this.rawData.set(9,(2*e*g-2*k*d)*c[
				9
			]),this.rawData.set(10,(1-2*d*d-2*e*e)*c[
				10
			]);this.rawData.set(11,
			0);this.rawData.set(12,a.get(0).x);this.rawData.set(13,a.get(0).y);this.rawData.set(14,a.get(0).z);this.rawData.set(15,
			1);0==a.get(2).x&&this.rawData.set(0,
			1E-15);0==a.get(2).y&&this.rawData.set(5,
			1E-15);0==a.get(2).z&&this.rawData.set(10,
			1E-15);return!(0==a.get(2).x||0==a.get(2).y||0==a.get(2).y)
		},transformVector:function(a){var b=a.x,c=a.y;a=a.z;return new $f(b*this.rawData.get(0)+c*this.rawData.get(4)+
a*this.rawData.get(8)+this.rawData.get(12),b*this.rawData.get(1)+c*this.rawData.get(5)+a*this.rawData.get(9)+this.rawData.get(13),b*this.rawData.get(2)+c*this.rawData.get(6)+a*this.rawData.get(10)+this.rawData.get(14),b*this.rawData.get(3)+c*this.rawData.get(7)+a*this.rawData.get(11)+this.rawData.get(15))
		},transformVectors:function(a,b){for(var c=0,d,e,g;c+3<=a.get_length();)d=a.get(c),e=a.get(c+1),g=a.get(c+2),b.set(c,d*this.rawData.get(0)+e*this.rawData.get(4)+g*this.rawData.get(8)+this.rawData.get(12)),
b.set(c+1,d*this.rawData.get(1)+e*this.rawData.get(5)+g*this.rawData.get(9)+this.rawData.get(13)),b.set(c+2,d*this.rawData.get(2)+e*this.rawData.get(6)+g*this.rawData.get(10)+this.rawData.get(14)),c+=3
		},transpose:function(){var a=this.rawData.copy();this.rawData.set(1,a.get(4));this.rawData.set(2,a.get(8));this.rawData.set(3,a.get(12));this.rawData.set(4,a.get(1));this.rawData.set(6,a.get(9));this.rawData.set(7,a.get(13));this.rawData.set(8,a.get(2));this.rawData.set(9,a.get(6));this.rawData.set(11,
a.get(14));this.rawData.set(12,a.get(3));this.rawData.set(13,a.get(7));this.rawData.set(14,a.get(11))
		},get_determinant:function(){return(this.rawData.get(0)*this.rawData.get(5)-this.rawData.get(4)*this.rawData.get(1))*(this.rawData.get(10)*this.rawData.get(15)-this.rawData.get(14)*this.rawData.get(11))-(this.rawData.get(0)*this.rawData.get(9)-this.rawData.get(8)*this.rawData.get(1))*(this.rawData.get(6)*this.rawData.get(15)-this.rawData.get(14)*this.rawData.get(7))+(this.rawData.get(0)*this.rawData.get(13)-
this.rawData.get(12)*this.rawData.get(1))*(this.rawData.get(6)*this.rawData.get(11)-this.rawData.get(10)*this.rawData.get(7))+(this.rawData.get(4)*this.rawData.get(9)-this.rawData.get(8)*this.rawData.get(5))*(this.rawData.get(2)*this.rawData.get(15)-this.rawData.get(14)*this.rawData.get(3))-(this.rawData.get(4)*this.rawData.get(13)-this.rawData.get(12)*this.rawData.get(5))*(this.rawData.get(2)*this.rawData.get(11)-this.rawData.get(10)*this.rawData.get(3))+(this.rawData.get(8)*this.rawData.get(13)-
this.rawData.get(12)*this.rawData.get(9))*(this.rawData.get(2)*this.rawData.get(7)-this.rawData.get(6)*this.rawData.get(3))
		},get_position:function(){return new $f(this.rawData.get(12),this.rawData.get(13),this.rawData.get(14))
		},set_position:function(a){this.rawData.set(12,a.x);this.rawData.set(13,a.y);this.rawData.set(14,a.z);return a
		},__class__:Kj,__properties__: {set_position: "set_position",get_position: "get_position",get_determinant: "get_determinant"
		}
	};var p=function(a,b){null==b&&(b=0);null==a&&
(a=0);this.x=a;this.y=b
	};h[
		"openfl.geom.Point"
	]=p;p.__name__="openfl.geom.Point";p.distance=function(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)
	};p.interpolate=function(a,b,c){return new p(b.x+c*(a.x-b.x),b.y+c*(a.y-b.y))
	};p.polar=function(a,b){return new p(a*Math.cos(b),a*Math.sin(b))
	};p.prototype={add:function(a){return new p(a.x+this.x,a.y+this.y)
		},clone:function(){return new p(this.x,this.y)
		},copyFrom:function(a){this.x=a.x;this.y=a.y
		},equals:function(a){return null!=a&&a.x==this.x?
a.y==this.y:!1
		},normalize:function(a){if(0!=this.x||0!=this.y)a/=Math.sqrt(this.x*this.x+this.y*this.y),this.x*=a,this.y*=a
		},offset:function(a,b){this.x+=a;this.y+=b
		},setTo:function(a,b){this.x=a;this.y=b
		},subtract:function(a){return new p(this.x-a.x,this.y-a.y)
		},toString:function(){return"(x="+this.x+", y="+this.y+")"
		},__toTempCopy:function(){null==p.__tempCopy&&(p.__tempCopy=new p);p.__tempCopy.setTo(this.x,this.y);return p.__tempCopy
		},get_length:function(){return Math.sqrt(this.x*this.x+this.y*
this.y)
		},__class__:p,__properties__: {get_length: "get_length"
		}
	};var $f=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.w=d;this.x=a;this.y=b;this.z=c
	};h[
		"openfl.geom.Vector3D"
	]=$f;$f.__name__="openfl.geom.Vector3D";$f.__properties__={get_Z_AXIS: "get_Z_AXIS",get_Y_AXIS: "get_Y_AXIS",get_X_AXIS: "get_X_AXIS"
	};$f.angleBetween=function(a,b){var c=a.get_length(),d=b.get_length();a=a.dotProduct(b);0!=c&&(a/=c);0!=d&&(a/=d);return Math.acos(a)
	};$f.distance=function(a,b){var c=
b.x-a.x,d=b.y-a.y;a=b.z-a.z;return Math.sqrt(c*c+d*d+a*a)
	};$f.get_X_AXIS=function(){return new $f(1,
		0,
		0)
	};$f.get_Y_AXIS=function(){return new $f(0,
		1,
		0)
	};$f.get_Z_AXIS=function(){return new $f(0,
		0,
		1)
	};$f.prototype={add:function(a){return new $f(this.x+a.x,this.y+a.y,this.z+a.z)
		},clone:function(){return new $f(this.x,this.y,this.z,this.w)
		},copyFrom:function(a){this.x=a.x;this.y=a.y;this.z=a.z
		},crossProduct:function(a){return new $f(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x,
			1)
		},
decrementBy:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z
		},dotProduct:function(a){return this.x*a.x+this.y*a.y+this.z*a.z
		},equals:function(a,b){null==b&&(b=!1);return this.x==a.x&&this.y==a.y&&this.z==a.z?b?this.w==a.w:!0:!1
		},incrementBy:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z
		},nearEquals:function(a,b,c){null==c&&(c=!1);return Math.abs(this.x-a.x)<b&&Math.abs(this.y-a.y)<b&&Math.abs(this.z-a.z)<b?c?Math.abs(this.w-a.w)<b:!0:!1
		},negate:function(){this.x*=-1;this.y*=-1;this.z*=-1
		},normalize:function(){var a=
this.get_length();0!=a&&(this.x/=a,this.y/=a,this.z/=a);return a
		},project:function(){this.x/=this.w;this.y/=this.w;this.z/=this.w
		},scaleBy:function(a){this.x*=a;this.y*=a;this.z*=a
		},setTo:function(a,b,c){this.x=a;this.y=b;this.z=c
		},subtract:function(a){return new $f(this.x-a.x,this.y-a.y,this.z-a.z)
		},toString:function(){return"Vector3D("+this.x+", "+this.y+", "+this.z+")"
		},get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)
		},get_lengthSquared:function(){return this.x*
this.x+this.y*this.y+this.z*this.z
		},__class__:$f,__properties__: {get_lengthSquared: "get_lengthSquared",get_length: "get_length"
		}
	};var Wc=function(){this.mX=this.mY=this.mPivotX=this.mPivotY=this.mRotation=this.mSkewX=this.mSkewY=0;this.mScaleX=this.mScaleY=this.mAlpha=1;this.mVisible=this.mTouchable=!0;this.mBlendMode="auto";this.mTransformationMatrix=new Eb;this.mOrientationChanged=this.mUseHandCursor=!1
	};h[
		"starling.display.DisplayObject"
	]=Wc;Wc.__name__="starling.display.DisplayObject";Wc.__super__=
Fk;Wc.prototype=l(Fk.prototype,
	{dispose:function(){null!=this.mFilter&&this.mFilter.dispose();null!=this.mMask&&this.mMask.dispose();this.removeEventListeners();this.set_mask(null)
		},removeFromParent:function(a){null==a&&(a=!1);null!=this.mParent?this.mParent.removeChild(this,a):a&&this.dispose()
		},getTransformationMatrix:function(a,b){var c;null!=b?b.identity():b=new Eb;if(a==this)return b;if(a==this.mParent||null==a&&null==this.mParent)return b.copyFrom(this.get_transformationMatrix()),b;if(null==
a||a==this.get_base()){for(c=this;c!=a;)b.concat(c.get_transformationMatrix()),c=c.mParent;return b
			}if(a.mParent==this)return a.getTransformationMatrix(this,b),b.invert(),b;var d=this.__findCommonParent(this,a);for(c=this;c!=d;)b.concat(c.get_transformationMatrix()),c=c.mParent;if(d==a)return b;Wc.sHelperMatrix.identity();for(c=a;c!=d;)Wc.sHelperMatrix.concat(c.get_transformationMatrix()),c=c.mParent;Wc.sHelperMatrix.invert();b.concat(Wc.sHelperMatrix);return b
		},getBounds:function(a,b){throw ba.thrown(new Qka);
		},hitTest:function(a,b){null==b&&(b=!1);return b&&(!this.mVisible||!this.mTouchable)||null!=this.mMask&&!this.hitTestMask(a)?null:this.getBounds(this,Wc.sHelperRect).containsPoint(a)?this: null
		},hitTestMask:function(a){if(null!=this.mMask){null!=this.mMask.get_stage()?this.getTransformationMatrix(this.mMask,Wc.sHelperMatrixAlt):(Wc.sHelperMatrixAlt.copyFrom(this.mMask.get_transformationMatrix()),Wc.sHelperMatrixAlt.invert());var b=a==Wc.sHelperPoint?new p:Wc.sHelperPoint;jd.transformPoint(Wc.sHelperMatrixAlt,
a,b);return null!=this.mMask.hitTest(b,!0)
			}return!0
		},localToGlobal:function(a,b){if(this.get_is3D())return Wc.sHelperPoint3D.setTo(a.x,a.y,
			0),this.local3DToGlobal(Wc.sHelperPoint3D,b);this.getTransformationMatrix(this.get_base(),Wc.sHelperMatrixAlt);return jd.transformPoint(Wc.sHelperMatrixAlt,a,b)
		},globalToLocal:function(a,b){if(this.get_is3D())return this.globalToLocal3D(a,Wc.sHelperPoint3D),this.get_stage().getCameraPosition(this,Wc.sHelperPointAlt3D),Am.intersectLineWithXYPlane(Wc.sHelperPointAlt3D,
Wc.sHelperPoint3D,b);this.getTransformationMatrix(this.get_base(),Wc.sHelperMatrixAlt);Wc.sHelperMatrixAlt.invert();return jd.transformPoint(Wc.sHelperMatrixAlt,a,b)
		},render:function(a,b){throw ba.thrown(new Qka);
		},get_hasVisibleArea:function(){return 0!=this.mAlpha&&this.mVisible&&!this.mIsMask&&0!=this.mScaleX?0!=this.mScaleY:!1
		},alignPivot:function(a,b){null==b&&(b="center");null==a&&(a="center");var c=this.getBounds(this,Wc.sHelperRect);this.mOrientationChanged=!0;if("left"==a)this.mPivotX=c.x;
else if("center"==a)this.mPivotX=c.x+c.width/2;else if("right"==a)this.mPivotX=c.x+c.width;else throw ba.thrown(new oc("Invalid horizontal alignment: "+a));if("top"==b)this.mPivotY=c.y;else if("center"==b)this.mPivotY=c.y+c.height/2;else if("bottom"==b)this.mPivotY=c.y+c.height;else throw ba.thrown(new oc("Invalid vertical alignment: "+b));
		},getTransformationMatrix3D:function(a,b){var c;null!=b?b.identity():b=new Kj;if(a==this)return b;if(a==this.mParent||null==a&&null==this.mParent)return b.copyFrom(this.get_transformationMatrix3D()),
b;if(null==a||a==this.get_base()){for(c=this;c!=a;)b.append(c.get_transformationMatrix3D()),c=c.mParent;return b
			}if(a.mParent==this)return a.getTransformationMatrix3D(this,b),b.invert(),b;var d=this.__findCommonParent(this,a);for(c=this;c!=d;)b.append(c.get_transformationMatrix3D()),c=c.mParent;if(d==a)return b;Wc.sHelperMatrix3D.identity();for(c=a;c!=d;)Wc.sHelperMatrix3D.append(c.get_transformationMatrix3D()),c=c.mParent;Wc.sHelperMatrix3D.invert();b.append(Wc.sHelperMatrix3D);return b
		},local3DToGlobal:function(a,
b){var c=this.get_stage();if(null==c)throw ba.thrown(new ld("Object not connected to stage"));this.getTransformationMatrix3D(c,Wc.sHelperMatrixAlt3D);jd.transformPoint3D(Wc.sHelperMatrixAlt3D,a,Wc.sHelperPoint3D);return Am.intersectLineWithXYPlane(c.get_cameraPosition(),Wc.sHelperPoint3D,b)
		},globalToLocal3D:function(a,b){var c=this.get_stage();if(null==c)throw ba.thrown(new ld("Object not connected to stage"));this.getTransformationMatrix3D(c,Wc.sHelperMatrixAlt3D);Wc.sHelperMatrixAlt3D.invert();
return jd.transformCoords3D(Wc.sHelperMatrixAlt3D,a.x,a.y,
			0,b)
		},__setParent:function(a){for(var b=a;b!=this&&null!=b;)b=b.mParent;if(b==this)throw ba.thrown(new oc("An object cannot be added as a child to itself or one of its children (or children's children, etc.)"));this.mParent=a
		},__setIs3D:function(a){this.mIs3D=a
		},get_isMask:function(){return this.mIsMask
		},__isEquivalent:function(a,b,c){null==c&&(c=1E-4);return a-c<b?a+c>b:!1
		},__findCommonParent:function(a,b){for(;null!=a;)Wc.sAncestors.set(Wc.sAncestors.get_length(),
a),a=a.mParent;for(a=b;null!=a&&-1==Wc.sAncestors.indexOf(a,
			0);)a=a.mParent;Wc.sAncestors.set_length(0);if(null!=a)return a;throw ba.thrown(new oc("Object not connected to target"));
		},dispatchEvent:function(a){
			"removedFromStage"==a.type&&null==this.get_stage()||Fk.prototype.dispatchEvent.call(this,a)
		},addEventListener:function(a,b){
			"enterFrame"!=a||this.hasEventListener(a)||(this.addEventListener("addedToStage",m(this,this.__addEnterFrameListenerToStage)),this.addEventListener("removedFromStage",
m(this,this.__removeEnterFrameListenerFromStage)),null!=this.get_stage()&&this.__addEnterFrameListenerToStage());Fk.prototype.addEventListener.call(this,a,b)
		},removeEventListener:function(a,b){Fk.prototype.removeEventListener.call(this,a,b);"enterFrame"!=a||this.hasEventListener(a)||(this.removeEventListener("addedToStage",m(this,this.__addEnterFrameListenerToStage)),this.removeEventListener("removedFromStage",m(this,this.__removeEnterFrameListenerFromStage)),this.__removeEnterFrameListenerFromStage())
		},
removeEventListeners:function(a){null!=a&&"enterFrame"!=a||!this.hasEventListener("enterFrame")||(this.removeEventListener("addedToStage",m(this,this.__addEnterFrameListenerToStage)),this.removeEventListener("removedFromStage",m(this,this.__removeEnterFrameListenerFromStage)),this.__removeEnterFrameListenerFromStage());Fk.prototype.removeEventListeners.call(this,a)
		},__addEnterFrameListenerToStage:function(a){nb.get_current().get_stage().addEnterFrameListener(this)
		},__removeEnterFrameListenerFromStage:function(a){nb.get_current().get_stage().removeEnterFrameListener(this)
		},
get_transformationMatrix:function(){if(this.mOrientationChanged)if(this.mOrientationChanged=!1,
			0==this.mSkewX&&0==this.mSkewY)if(0==this.mRotation)this.mTransformationMatrix.setTo(this.mScaleX,
			0,
			0,this.mScaleY,this.mX-this.mPivotX*this.mScaleX,this.mY-this.mPivotY*this.mScaleY);else{var a=Math.cos(this.mRotation),b=Math.sin(this.mRotation),c=this.mScaleX*a,d=this.mScaleX*b;b=this.mScaleY*-b;a*=this.mScaleY;this.mTransformationMatrix.setTo(c,d,b,a,this.mX-this.mPivotX*c-this.mPivotY*b,this.mY-this.mPivotX*
d-this.mPivotY*a)
			}else if(this.mTransformationMatrix.identity(),this.mTransformationMatrix.scale(this.mScaleX,this.mScaleY),jd.skew(this.mTransformationMatrix,this.mSkewX,this.mSkewY),this.mTransformationMatrix.rotate(this.mRotation),this.mTransformationMatrix.translate(this.mX,this.mY),
			0!=this.mPivotX||0!=this.mPivotY)this.mTransformationMatrix.tx=this.mX-this.mTransformationMatrix.a*this.mPivotX-this.mTransformationMatrix.c*this.mPivotY,this.mTransformationMatrix.ty=this.mY-this.mTransformationMatrix.b*
this.mPivotX-this.mTransformationMatrix.d*this.mPivotY;return this.mTransformationMatrix
		},set_transformationMatrix:function(a){var b=Math.PI/4;this.mOrientationChanged=!1;this.mTransformationMatrix.copyFrom(a);this.mPivotX=this.mPivotY=0;this.mX=a.tx;this.mY=a.ty;this.mSkewX=Math.atan(-a.c/a.d);this.mSkewY=Math.atan(a.b/a.a);this.mSkewX!=this.mSkewX&&(this.mSkewX=0);this.mSkewY!=this.mSkewY&&(this.mSkewY=0);this.mScaleY=this.mSkewX>-b&&this.mSkewX<b?a.d/Math.cos(this.mSkewX):-a.c/Math.sin(this.mSkewX);
this.mScaleX=this.mSkewY>-b&&this.mSkewY<b?a.a/Math.cos(this.mSkewY):a.b/Math.sin(this.mSkewY);this.__isEquivalent(this.mSkewX,this.mSkewY)?(this.mRotation=this.mSkewX,this.mSkewX=this.mSkewY=0):this.mRotation=0;return this.mTransformationMatrix
		},get_transformationMatrix3D:function(){null==this.mTransformationMatrix3D&&(this.mTransformationMatrix3D=new Kj);return jd.convertTo3D(this.get_transformationMatrix(),this.mTransformationMatrix3D)
		},get_is3D:function(){return this.mIs3D
		},get_useHandCursor:function(){return this.mUseHandCursor
		},
set_useHandCursor:function(a){if(a==this.mUseHandCursor)return this.mUseHandCursor;(this.mUseHandCursor=a)?this.addEventListener("touch",m(this,this.__onTouch)):this.removeEventListener("touch",m(this,this.__onTouch));return a
		},__onTouch:function(a){Lr.set_cursor(a.interactsWith(this)?"button": "auto")
		},get_bounds:function(){return this.getBounds(this.mParent)
		},get_width:function(){return this.getBounds(this.mParent,Wc.sHelperRect).width
		},set_width:function(a){this.set_scaleX(1);var b=this.get_width();
0!=b&&this.set_scaleX(a/b);return a
		},get_height:function(){return this.getBounds(this.mParent,Wc.sHelperRect).height
		},set_height:function(a){this.set_scaleY(1);var b=this.get_height();0!=b&&this.set_scaleY(a/b);return a
		},get_x:function(){return this.mX
		},set_x:function(a){this.mX!=a&&(this.mX=a,this.mOrientationChanged=!0);return a
		},get_y:function(){return this.mY
		},set_y:function(a){this.mY!=a&&(this.mY=a,this.mOrientationChanged=!0);return a
		},get_pivotX:function(){return this.mPivotX
		},set_pivotX:function(a){this.mPivotX!=
a&&(this.mPivotX=a,this.mOrientationChanged=!0);return a
		},get_pivotY:function(){return this.mPivotY
		},set_pivotY:function(a){this.mPivotY!=a&&(this.mPivotY=a,this.mOrientationChanged=!0);return a
		},get_scaleX:function(){return this.mScaleX
		},set_scaleX:function(a){this.mScaleX!=a&&(this.mScaleX=a,this.mOrientationChanged=!0);return a
		},get_scaleY:function(){return this.mScaleY
		},set_scaleY:function(a){this.mScaleY!=a&&(this.mScaleY=a,this.mOrientationChanged=!0);return a
		},get_scale:function(){return this.get_scaleX()
		},
set_scale:function(a){return this.set_scaleX(this.set_scaleY(a))
		},get_skewX:function(){return this.mSkewX
		},set_skewX:function(a){a=Am.normalizeAngle(a);this.mSkewX!=a&&(this.mSkewX=a,this.mOrientationChanged=!0);return a
		},get_skewY:function(){return this.mSkewY
		},set_skewY:function(a){a=Am.normalizeAngle(a);this.mSkewY!=a&&(this.mSkewY=a,this.mOrientationChanged=!0);return a
		},get_rotation:function(){return this.mRotation
		},set_rotation:function(a){a=Am.normalizeAngle(a);this.mRotation!=a&&(this.mRotation=
a,this.mOrientationChanged=!0);return a
		},get_alpha:function(){return this.mAlpha
		},set_alpha:function(a){this.mAlpha=0>a?0: 1<a?1:a;return a
		},get_visible:function(){return this.mVisible
		},set_visible:function(a){return this.mVisible=a
		},get_touchable:function(){return this.mTouchable
		},set_touchable:function(a){return this.mTouchable=a
		},get_blendMode:function(){return this.mBlendMode
		},set_blendMode:function(a){return this.mBlendMode=a
		},get_name:function(){return this.mName
		},set_name:function(a){return this.mName=
a
		},get_filter:function(){return this.mFilter
		},set_filter:function(a){return this.mFilter=a
		},get_mask:function(){return this.mMask
		},set_mask:function(a){this.mMask!=a&&(null!=this.mMask&&(this.mMask.mIsMask=!1),null!=a&&(a.mIsMask=!0),this.mMask=a);return this.mMask
		},get_parent:function(){return this.mParent
		},get_base:function(){for(var a=this;null!=a.mParent;)a=a.mParent;return a
		},get_root:function(){for(var a=this;null!=a.mParent;){if(a.mParent instanceof cN)return a;a=a.get_parent()
			}return null
		},
get_stage:function(){return this.get_base()instanceof cN?this.get_base(): null
		},__class__:Wc,__properties__: {get_stage: "get_stage",get_root: "get_root",get_base: "get_base",get_parent: "get_parent",set_mask: "set_mask",get_mask: "get_mask",set_filter: "set_filter",get_filter: "get_filter",set_name: "set_name",get_name: "get_name",set_blendMode: "set_blendMode",get_blendMode: "get_blendMode",set_touchable: "set_touchable",get_touchable: "get_touchable",set_visible: "set_visible",get_visible: "get_visible",set_alpha: "set_alpha",
get_alpha: "get_alpha",set_rotation: "set_rotation",get_rotation: "get_rotation",set_skewY: "set_skewY",get_skewY: "get_skewY",set_skewX: "set_skewX",get_skewX: "get_skewX",set_scale: "set_scale",get_scale: "get_scale",set_scaleY: "set_scaleY",get_scaleY: "get_scaleY",set_scaleX: "set_scaleX",get_scaleX: "get_scaleX",set_pivotY: "set_pivotY",get_pivotY: "get_pivotY",set_pivotX: "set_pivotX",get_pivotX: "get_pivotX",set_y: "set_y",get_y: "get_y",set_x: "set_x",get_x: "get_x",set_height: "set_height",get_height: "get_height",
set_width: "set_width",get_width: "get_width",get_bounds: "get_bounds",set_useHandCursor: "set_useHandCursor",get_useHandCursor: "get_useHandCursor",get_is3D: "get_is3D",get_transformationMatrix3D: "get_transformationMatrix3D",set_transformationMatrix: "set_transformationMatrix",get_transformationMatrix: "get_transformationMatrix",get_isMask: "get_isMask",get_hasVisibleArea: "get_hasVisibleArea"
		}
	});var mJ=function(){};h[
		"starling.animation.IAnimatable"
	]=mJ;mJ.__name__="starling.animation.IAnimatable";mJ.__isInterface__=
!0;mJ.prototype={__class__:mJ
	};var Ka=function(a){this.batchBounds=new Z;this.mEmitterObject=null;this.emitter=new p;this.mEmitterX=this.mEmitterY=0;this.mEmissionTime=this.mEmissionTimePredefined=-1;this.mEmissionRate=NaN;this.mBlendFuncSource=this.mBlendFuncDestination=null;this.mTextureAnimation=!1;this.mNumberOfFrames=1;this.mLastFrame=99999;this.mFrameTime=NaN;this.mFrameLUTLength=0;this.mFrameLUT=null;this.mFirstFrame=0;this.mAnimationLoops=this.mAnimationLoopLength=1;this.mEndColorVariance=
new Mr(0,
		0,
		0,
		0);this.mEndColor=new Mr(1,
		1,
		1,
		1);this.mStartColorVariance=new Mr(0,
		0,
		0,
		0);this.mStartColor=new Mr(1,
		1,
		1,
		1);this.mStartRotation=this.mStartRotationVariance=this.mEndRotation=this.mEndRotationVariance=this.mSpeed=this.mSpeedVariance=this.mGravityX=this.mGravityY=this.mRadialAcceleration=this.mRadialAccelerationVariance=this.mTangentialAcceleration=this.mTangentialAccelerationVariance=this.mMaxRadius=this.mMaxRadiusVariance=this.mMinRadius=this.mMinRadiusVariance=this.mRotatePerSecond=
this.mRotatePerSecondVariance=NaN;this.mEmitAngleAlignedRotation=!1;this.mLifespan=this.mLifespanVariance=this.mStartSize=this.mStartSizeVariance=this.mEndSize=this.mEndSizeVariance=this.mEmitAngle=this.mEmitAngleVariance=NaN;this.mMaxNumParticles=0;this.mEmitterXVariance=this.mEmitterYVariance=NaN;this.mEmitterType=0;this.mParticles=this.mVertexData=null;this.mTinted=this.mPremultipliedAlpha=this.mExactBounds=!1;this.mTexture=null;this.mSystemAlpha=1;this.mSpawnTime=0;this.mSortFunction=null;this.mSmoothing=
"bilinear";this.mPlaying=this.mRandomStartFrames=!1;this.mMaxCapacity=this.mNumBatchedParticles=this.mNumParticles=0;this._mFilter=null;this.mFadeInTime=this.mFadeOutTime=0;this.mDisposed=!1;this.mCustomFunc=null;this.mCompleted=!1;this.mBounds=null;this.mBatching=!0;this.mBatched=!1;this.mJuggler=Ka.defaultJuggler;this.forceSortFlag=!1;this.autoClearOnComplete=Ka.AutoClearOnComplete;Wc.call(this);if(null==a)throw ba.thrown(new oc("config must not be null"));Ka.sInstances.push(this);this.initInstance(a)
	};
h[
		"de.flintfabrik.starling.display.FFParticleSystem"
	]=Ka;Ka.__name__="de.flintfabrik.starling.display.FFParticleSystem";Ka.__interfaces__=[mJ
	];Ka.__properties__={get_poolSize: "get_poolSize",get_particlesInPool: "get_particlesInPool"
	};Ka.createBuffers=function(a){if(null!=Ka.sVertexBuffers)for(var b=0,c=Ka.sVertexBuffers.get_length();b<c;)Ka.sVertexBuffers.get(b++).dispose();null!=Ka.sIndexBuffer&&Ka.sIndexBuffer.dispose();var d=nb.get_current().get_context();if(null==d)throw ba.thrown(new Nv);if("Disposed"!=
d.driverInfo){Ka.sVertexBuffers=Ub.toObjectVector(null);Ka.sVertexBufferIdx=-1;if(o7.currentDomain.hasDefinition("flash.display3D.Context3DBufferUsage"))for(b=0,c=Ka.sNumberOfVertexBuffers;b<c;)Ka.sVertexBuffers.set(b++,d.createVertexBuffer(4*a,
			8,
			0));else for(b=0,c=Ka.sNumberOfVertexBuffers;b<c;)Ka.sVertexBuffers.set(b++,d.createVertexBuffer(4*a,
			8));var e=new xl(0);Xh.set_length(e,
			128*a);b=0;for(c=Ka.sNumberOfVertexBuffers;b<c;)Ka.sVertexBuffers.get(b++).uploadFromByteArray(e,
			0,
			0,
			4*a);Xh.set_length(e,
			0);if(null==Ka.sIndices)for(Ka.sIndices=Ub.toIntVector(null),c=0,e=-1,b=0;16383>b;)++b,Ka.sIndices.set(++e,c),Ka.sIndices.set(++e,c+1),Ka.sIndices.set(++e,c+2),Ka.sIndices.set(++e,c+1),Ka.sIndices.set(++e,c+3),Ka.sIndices.set(++e,c+2),c+=4;Ka.sIndexBuffer=d.createIndexBuffer(6*a);Ka.sIndexBuffer.uploadFromVector(Ka.sIndices,
			0,
			6*a)
		}
	};Ka.init=function(a,b,c,d){null==d&&(d=1);null==c&&(c=0);null==b&&(b=!1);null==a&&(a=16383);0==c&&0!=Ka.sBufferSize&&(c=Ka.sBufferSize);ya.gt(c,
		16383)?c=16383:ya.gte(0,
c)&&(c=16383);Ka.sBufferSize=c;Ka.sNumberOfVertexBuffers=d;Ka.createBuffers(Ka.sBufferSize);Ka.sLUTsCreated||Ka.initLUTs();if(null==Ka.sParticlePool)for(Ka.sFixedPool=b,Ka.sParticlePool=Ub.toObjectVector(null),Ka.sPoolSize=a,a=-1;++a<Ka.sPoolSize;)Ka.sParticlePool.set(a,new Hcb);null==Ka.defaultJuggler&&(Ka.defaultJuggler=nb.get_current().get_juggler());nb.get_current().get_stage3D().addEventListener("context3DCreate",Ka.onContextCreated,!1,
		0,!0)
	};Ka.initLUTs=function(){for(var a=0;2048>a;){var b=
a++;Ka.sCosLUT.set(b&2047,Math.cos(.0030679615757712823*b));Ka.sSinLUT.set(b&2047,Math.sin(.0030679615757712823*b))
		}Ka.sLUTsCreated=!0
	};Ka.disposeParticles=function(){nb.get_current().get_stage3D().removeEventListener("context3DCreate",Ka.onContextCreated);Ka.disposeBuffers();Ka.disposePool()
	};Ka.disposeBuffers=function(){for(var a=Ka.sInstances.get_length()-1;0<=a;)Ka.sInstances.get(a).dispose(),--a;if(null!=Ka.sVertexBuffers){for(var b=0,c=Ka.sNumberOfVertexBuffers;b<c;)a=b++,Ka.sVertexBuffers.get(a).dispose(),
Ka.sVertexBuffers.set(a,null);Ka.sVertexBuffers=null;Ka.sNumberOfVertexBuffers=0
		}null!=Ka.sIndexBuffer&&(Ka.sIndexBuffer.dispose(),Ka.sIndexBuffer=null);Ka.sBufferSize=0
	};Ka.disposePool=function(){for(var a=Ka.sInstances.get_length()-1;0<=a;)Ka.sInstances.get(a).dispose(),--a;Ka.sParticlePool=null
	};Ka.onContextCreated=function(a){Ka.createBuffers(Ka.sBufferSize)
	};Ka.getImageProgramName=function(a,b,c,d,e){null==e&&(e="bilinear");null==d&&(d=1);null==c&&(c=!1);null==b&&(b=!0);var g=0;a&&(g|=1);b&&
(g|=2);c&&(g|=4);"none"==e?g|=8: "trilinear"==e&&(g|=16);3==d?g|=32: 4==d&&(g|=64);a=Ka.sProgramNameCache.h[g
		];null==a&&(a="QB_i."+fa.string(ya.toFloat(g)),Ka.sProgramNameCache.h[g
		]=a);return a
	};Ka.get_particlesInPool=function(){return Ka.sParticlePool.get_length()
	};Ka.get_poolSize=function(){return Ka.sPoolSize
	};Ka.__super__=Wc;Ka.prototype=l(Wc.prototype,
	{addedToStageHandler:function(a){this.mMaxCapacity=0!=this.mMaxNumParticles?Math.min(16383,this.mMaxNumParticles)|0: 16383;null!=a&&(this.getParticlesFromPool(),
this.mPlaying&&this.start(this.mEmissionTime))
		},advanceParticle:function(a,b){var c=a.totalTime-a.currentTime;c>b||(b=c);a.currentTime+=b;if(1==this.mEmitterType)a.emitRotation+=a.emitRotationDelta*b,a.emitRadius+=a.emitRadiusDelta*b,c=(325.94932345220167*a.emitRotation|0)&2047,a.x=this.mEmitterX-Ka.sCosLUT.get(c)*a.emitRadius,a.y=this.mEmitterY-Ka.sSinLUT.get(c)*a.emitRadius;else{if(0!=a.radialAcceleration||0!=a.tangentialAcceleration){c=a.x-a.startX;var d=a.y-a.startY,e=Math.sqrt(c*c+d*d);.01>e&&
(e=.01);c/=e;d/=e;e=c;var g=d;c*=a.radialAcceleration;d*=a.radialAcceleration;var k=e;e=-g*a.tangentialAcceleration;g=k*a.tangentialAcceleration;a.velocityX+=b*(this.mGravityX+c+e);a.velocityY+=b*(this.mGravityY+d+g)
				}else a.velocityX+=b*this.mGravityX,a.velocityY+=b*this.mGravityY;a.x+=a.velocityX*b;a.y+=a.velocityY*b
			}a.scale+=a.scaleDelta*b;a.rotation+=a.rotationDelta*b;this.mTextureAnimation&&(a.frame+=a.frameDelta*b,a.frameIdx=a.frame|0,a.frameIdx>this.mFrameLUTLength&&(a.frameIdx=this.mFrameLUTLength));
this.mTinted&&(a.colorRed+=a.colorDeltaRed*b,a.colorGreen+=a.colorDeltaGreen*b,a.colorBlue+=a.colorDeltaBlue*b,a.colorAlpha+=a.colorDeltaAlpha*b)
		},advanceTime:function(a){var b=this.forceSortFlag;this.mFrameTime+=a;if(null==this.mParticles)0!=this.mEmissionTime?(this.mEmissionTime-=a,
			1.79E308!=this.mEmissionTime&&(this.mEmissionTime=Math.max(0,this.mEmissionTime-a))):(this.stop(this.autoClearOnComplete),this.complete());else{var c=0;null!=this.mEmitterObject?(this.mEmitterX=this.emitter.x=this.mEmitterObject.x,
this.mEmitterY=this.emitter.y=this.mEmitterObject.y):(this.mEmitterX=this.emitter.x,this.mEmitterY=this.emitter.y);for(;c<this.mNumParticles;){var d=this.mParticles.get(c);if(d.currentTime<d.totalTime){var e=d,g=e.totalTime-e.currentTime;var k=g>a?a:g;e.currentTime+=k;if(1==this.mEmitterType)e.emitRotation+=e.emitRotationDelta*k,e.emitRadius+=e.emitRadiusDelta*k,g=(325.94932345220167*e.emitRotation|0)&2047,e.x=this.mEmitterX-Ka.sCosLUT.get(g)*e.emitRadius,e.y=this.mEmitterY-Ka.sSinLUT.get(g)*e.emitRadius;
else{if(0!=e.radialAcceleration||0!=e.tangentialAcceleration){g=e.x-e.startX;var t=e.y-e.startY,u=Math.sqrt(g*g+t*t);.01>u&&(u=.01);g/=u;t/=u;u=g;var A=t;g*=e.radialAcceleration;t*=e.radialAcceleration;var z=u;u=-A*e.tangentialAcceleration;A=z*e.tangentialAcceleration;e.velocityX+=k*(this.mGravityX+g+u);e.velocityY+=k*(this.mGravityY+t+A)
							}else e.velocityX+=k*this.mGravityX,e.velocityY+=k*this.mGravityY;e.x+=e.velocityX*k;e.y+=e.velocityY*k
						}e.scale+=e.scaleDelta*k;e.rotation+=e.rotationDelta*k;this.mTextureAnimation&&
(e.frame+=e.frameDelta*k,e.frameIdx=e.frame|0,e.frameIdx>this.mFrameLUTLength&&(e.frameIdx=this.mFrameLUTLength));this.mTinted&&(e.colorRed+=e.colorDeltaRed*k,e.colorGreen+=e.colorDeltaGreen*k,e.colorBlue+=e.colorDeltaBlue*k,e.colorAlpha+=e.colorDeltaAlpha*k);++c
					}else if(d.active=!1,c!=--this.mNumParticles&&(b=this.mParticles.get(this.mNumParticles),this.mParticles.set(this.mNumParticles,d),this.mParticles.set(c,b),b=!0),
					0==this.mNumParticles&&0>this.mEmissionTime){this.stop(this.autoClearOnComplete);
this.complete();return
					}
				}if(0<this.mEmissionTime){for(c=1/this.mEmissionRate;0<this.mFrameTime&&this.mNumParticles<this.mMaxCapacity;){this.mNumParticles==(null!=this.mVertexData?this.mVertexData.get_numVertices()/4|0: 0)&&this.raiseCapacity(null!=this.mVertexData?this.mVertexData.get_numVertices()/4|0: 0);e=d=this.mParticles.get(this.mNumParticles);k=this.mLifespan+this.mLifespanVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);if(!(0>=k)){e.active=!0;e.currentTime=
0;e.totalTime=k;e.x=this.mEmitterX+this.mEmitterXVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);e.y=this.mEmitterY+this.mEmitterYVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);e.startX=this.mEmitterX;e.startY=this.mEmitterY;t=this.mEmitAngle+this.mEmitAngleVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);g=(325.94932345220167*t|0)&2047;u=this.mSpeed+this.mSpeedVariance*
(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);e.velocityX=u*Ka.sCosLUT.get(g);e.velocityY=u*Ka.sSinLUT.get(g);e.emitRadius=this.mMaxRadius+this.mMaxRadiusVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);e.emitRadiusDelta=this.mMaxRadius/k;e.emitRadius=this.mMaxRadius+this.mMaxRadiusVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);e.emitRadiusDelta=(this.mMinRadius+this.mMinRadiusVariance*
(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1)-e.emitRadius)/k;e.emitRotation=this.mEmitAngle+this.mEmitAngleVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);e.emitRotationDelta=this.mRotatePerSecond+this.mRotatePerSecondVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);e.radialAcceleration=this.mRadialAcceleration+this.mRadialAccelerationVariance*(ya.toFloat(Ka.sRandomSeed=
16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);e.tangentialAcceleration=this.mTangentialAcceleration+this.mTangentialAccelerationVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);g=this.mStartSize+this.mStartSizeVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);u=this.mEndSize+this.mEndSizeVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);.1>g&&(g=.1);
.1>u&&(u=.1);A=((this.mFrameLUT.get(0).rotated?this.mFrameLUT.get(0).particleHalfHeight:this.mFrameLUT.get(0).particleHalfWidth)|0)<<1;e.scale=g/A;e.scaleDelta=(u-g)/k/A;e.frame=this.mRandomStartFrames?this.mAnimationLoopLength*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(-2147483648)): 0;e.frameIdx=e.frame|0;e.frameDelta=this.mNumberOfFrames/k;g=this.mStartColor.red;u=this.mStartColor.green;A=this.mStartColor.blue;z=this.mStartColor.alpha;0!=this.mStartColorVariance.red&&
(g+=this.mStartColorVariance.red*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));0!=this.mStartColorVariance.green&&(u+=this.mStartColorVariance.green*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));0!=this.mStartColorVariance.blue&&(A+=this.mStartColorVariance.blue*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));0!=this.mStartColorVariance.alpha&&(z+=this.mStartColorVariance.alpha*
(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));var J=this.mEndColor.red,T=this.mEndColor.green,W=this.mEndColor.blue,X=this.mEndColor.alpha;0!=this.mEndColorVariance.red&&(J+=this.mEndColorVariance.red*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));0!=this.mEndColorVariance.green&&(T+=this.mEndColorVariance.green*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));0!=this.mEndColorVariance.blue&&
(W+=this.mEndColorVariance.blue*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));0!=this.mEndColorVariance.alpha&&(X+=this.mEndColorVariance.alpha*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));e.colorRed=g;e.colorGreen=u;e.colorBlue=A;e.colorAlpha=z;e.colorDeltaRed=(J-g)/k;e.colorDeltaGreen=(T-u)/k;e.colorDeltaBlue=(W-A)/k;e.colorDeltaAlpha=(X-z)/k;this.mEmitAngleAlignedRotation?(g=t+this.mStartRotation+this.mStartRotationVariance*
(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1),t=t+this.mEndRotation+this.mEndRotationVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1)):(g=this.mStartRotation+this.mStartRotationVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1),t=this.mEndRotation+this.mEndRotationVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));e.rotation=
g;e.rotationDelta=(t-g)/k;e.spawnFactor=1;e.fadeInFactor=1;e.fadeOutFactor=1
						}k=this.mFrameTime;g=d.totalTime-d.currentTime;g>k||(k=g);d.currentTime+=k;1==this.mEmitterType?(d.emitRotation+=d.emitRotationDelta*k,d.emitRadius+=d.emitRadiusDelta*k,e=(325.94932345220167*d.emitRotation|0)&2047,d.x=this.mEmitterX-Ka.sCosLUT.get(e)*d.emitRadius,d.y=this.mEmitterY-Ka.sSinLUT.get(e)*d.emitRadius):(0!=d.radialAcceleration||0!=d.tangentialAcceleration?(g=d.x-d.startX,t=d.y-d.startY,u=Math.sqrt(g*g+t*t),.01>
u&&(u=.01),g/=u,t/=u,u=g,A=t,g*=d.radialAcceleration,t*=d.radialAcceleration,z=u,u=-A*d.tangentialAcceleration,A=z*d.tangentialAcceleration,d.velocityX+=k*(this.mGravityX+g+u),d.velocityY+=k*(this.mGravityY+t+A)):(d.velocityX+=k*this.mGravityX,d.velocityY+=k*this.mGravityY),d.x+=d.velocityX*k,d.y+=d.velocityY*k);d.scale+=d.scaleDelta*k;d.rotation+=d.rotationDelta*k;this.mTextureAnimation&&(d.frame+=d.frameDelta*k,d.frameIdx=d.frame|0,d.frameIdx>this.mFrameLUTLength&&(d.frameIdx=this.mFrameLUTLength));
this.mTinted&&(d.colorRed+=d.colorDeltaRed*k,d.colorGreen+=d.colorDeltaGreen*k,d.colorBlue+=d.colorDeltaBlue*k,d.colorAlpha+=d.colorDeltaAlpha*k);++this.mNumParticles;this.mFrameTime-=c
					}1.79E308!=this.mEmissionTime&&(this.mEmissionTime=Math.max(0,this.mEmissionTime-a))
				}else if(!this.mCompleted&&0==this.mNumParticles){this.stop(this.autoClearOnComplete);this.complete();return
				}if(null!=this.mParticles){null!=this.mCustomFunc&&this.mCustomFunc(this.mParticles,this.mNumParticles);b&&null!=this.mSortFunction&&
this.mParticles.sort(this.mSortFunction);a=this.mVertexData.get_rawData();b=.5*Math.PI;if(0!=this.mSpawnTime||0!=this.mFadeInTime||0!=this.mFadeOutTime)for(c=0,e=this.mNumParticles;c<e;)d=this.mParticles.get(c++),g=d.currentTime/d.totalTime,
					0!=this.mSpawnTime&&(d.spawnFactor=g<this.mSpawnTime?g/this.mSpawnTime: 1),
					0!=this.mFadeInTime&&(d.fadeInFactor=g<this.mFadeInTime?g/this.mFadeInTime: 1),
					0!=this.mFadeOutTime&&(g=1-g,d.fadeOutFactor=g<this.mFadeOutTime?g/this.mFadeOutTime: 1);c=0;for(e=this.mNumParticles;c<
e;){d=c++;k=d<<2;d=this.mParticles.get(d);W=this.mFrameLUT.get(d.frameIdx);t=d.colorRed;u=d.colorGreen;A=d.colorBlue;z=d.colorAlpha*d.fadeInFactor*d.fadeOutFactor*this.mSystemAlpha;g=d.rotation;W.rotated&&(g-=b);J=d.x;T=d.y;X=W.particleHalfWidth*d.scale*d.spawnFactor;d=W.particleHalfHeight*d.scale*d.spawnFactor;if(0!=g){g=(325.94932345220167*g|0)&2047;var da=Ka.sCosLUT.get(g);var pa=Ka.sSinLUT.get(g);g=da*X;da*=d;X*=pa;d*=pa;k<<=3;a[k
							]=J-g+d;++k;a[k
							]=T-X-da;++k;a[k
							]=t;++k;a[k
							]=u;++k;a[k
							]=A;++k;a[k
							]=
z;++k;a[k
							]=W.textureX;++k;a[k
							]=W.textureY;++k;a[k
							]=J+g+d;++k;a[k
							]=T+X-da;++k;a[k
							]=t;++k;a[k
							]=u;++k;a[k
							]=A;++k;a[k
							]=z;++k;a[k
							]=W.textureWidth;++k;a[k
							]=W.textureY;++k;a[k
							]=J-g-d;++k;a[k
							]=T-X+da;++k;a[k
							]=t;++k;a[k
							]=u;++k;a[k
							]=A;++k;a[k
							]=z;++k;a[k
							]=W.textureX;++k;a[k
							]=W.textureHeight;++k;a[k
							]=J+g-d;++k;a[k
							]=T+X+da
						}else k<<=3,a[k
						]=J-X,++k,a[k
						]=T-d,++k,a[k
						]=t,++k,a[k
						]=u,++k,a[k
						]=A,++k,a[k
						]=z,++k,a[k
						]=W.textureX,++k,a[k
						]=W.textureY,++k,a[k
						]=J+X,++k,a[k
						]=T-d,++k,a[k
						]=t,++k,a[k
						]=u,++k,a[k
						]=A,++k,a[k
						]=z,++k,
a[k
						]=W.textureWidth,++k,a[k
						]=W.textureY,++k,a[k
						]=J-X,++k,a[k
						]=T+d,++k,a[k
						]=t,++k,a[k
						]=u,++k,a[k
						]=A,++k,a[k
						]=z,++k,a[k
						]=W.textureX,++k,a[k
						]=W.textureHeight,++k,a[k
						]=J+X,++k,a[k
						]=T+d;++k;a[k
						]=t;++k;a[k
						]=u;++k;a[k
						]=A;++k;a[k
						]=z;++k;a[k
						]=W.textureWidth;++k;a[k
						]=W.textureHeight
					}if(this.mExactBounds){b=0;c=1;k=1.79E308;t=-1.79E308;u=1.79E308;A=-1.79E308;for(d=4*this.mNumParticles;0<d;)e=a[b
						],g=a[c
						],k>e&&(k=e),t<e&&(t=e),u>g&&(u=g),A<g&&(A=g),b+=8,c+=8,--d;this.mBounds.x=k;this.mBounds.y=u;this.mBounds.width=
t-k;this.mBounds.height=A-u
					}
				}
			}
		},initInstance:function(a){this.parseSystemOptions(a);this.mEmissionRate=this.mMaxNumParticles/this.mLifespan;this.mFrameTime=this.mEmissionTime=0;this.mMaxCapacity=0!=this.mMaxNumParticles?Math.min(16383,this.mMaxNumParticles)|0: 16383;null!=Ka.sVertexBuffers&&null!=Ka.sVertexBuffers.get(0)||Ka.init();null==Ka.defaultJuggler&&(Ka.defaultJuggler=nb.get_current().get_juggler());this.addEventListener("addedToStage",m(this,this.addedToStageHandler));this.addedToStageHandler(null)
		},
initParticle:function(a){var b=this.mLifespan+this.mLifespanVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);if(!(0>=b)){a.active=!0;a.currentTime=0;a.totalTime=b;a.x=this.mEmitterX+this.mEmitterXVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);a.y=this.mEmitterY+this.mEmitterYVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);a.startX=this.mEmitterX;a.startY=this.mEmitterY;
var c=this.mEmitAngle+this.mEmitAngleVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1),d=(325.94932345220167*c|0)&2047,e=this.mSpeed+this.mSpeedVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);a.velocityX=e*Ka.sCosLUT.get(d);a.velocityY=e*Ka.sSinLUT.get(d);a.emitRadius=this.mMaxRadius+this.mMaxRadiusVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);a.emitRadiusDelta=
this.mMaxRadius/b;a.emitRadius=this.mMaxRadius+this.mMaxRadiusVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);a.emitRadiusDelta=(this.mMinRadius+this.mMinRadiusVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1)-a.emitRadius)/b;a.emitRotation=this.mEmitAngle+this.mEmitAngleVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);a.emitRotationDelta=this.mRotatePerSecond+
this.mRotatePerSecondVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);a.radialAcceleration=this.mRadialAcceleration+this.mRadialAccelerationVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);a.tangentialAcceleration=this.mTangentialAcceleration+this.mTangentialAccelerationVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);d=this.mStartSize+this.mStartSizeVariance*(ya.toFloat(Ka.sRandomSeed=
16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);e=this.mEndSize+this.mEndSizeVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1);.1>d&&(d=.1);.1>e&&(e=.1);var g=((this.mFrameLUT.get(0).rotated?this.mFrameLUT.get(0).particleHalfHeight:this.mFrameLUT.get(0).particleHalfWidth)|0)<<1;a.scale=d/g;a.scaleDelta=(e-d)/b/g;a.frame=this.mRandomStartFrames?this.mAnimationLoopLength*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(-2147483648)): 0;a.frameIdx=a.frame|0;a.frameDelta=this.mNumberOfFrames/b;d=this.mStartColor.red;e=this.mStartColor.green;g=this.mStartColor.blue;var k=this.mStartColor.alpha;0!=this.mStartColorVariance.red&&(d+=this.mStartColorVariance.red*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));0!=this.mStartColorVariance.green&&(e+=this.mStartColorVariance.green*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));0!=this.mStartColorVariance.blue&&
(g+=this.mStartColorVariance.blue*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));0!=this.mStartColorVariance.alpha&&(k+=this.mStartColorVariance.alpha*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));var t=this.mEndColor.red,u=this.mEndColor.green,A=this.mEndColor.blue,z=this.mEndColor.alpha;0!=this.mEndColorVariance.red&&(t+=this.mEndColorVariance.red*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-
1));0!=this.mEndColorVariance.green&&(u+=this.mEndColorVariance.green*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));0!=this.mEndColorVariance.blue&&(A+=this.mEndColorVariance.blue*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));0!=this.mEndColorVariance.alpha&&(z+=this.mEndColorVariance.alpha*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));a.colorRed=d;a.colorGreen=e;a.colorBlue=
g;a.colorAlpha=k;a.colorDeltaRed=(t-d)/b;a.colorDeltaGreen=(u-e)/b;a.colorDeltaBlue=(A-g)/b;a.colorDeltaAlpha=(z-k)/b;this.mEmitAngleAlignedRotation?(d=c+this.mStartRotation+this.mStartRotationVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1),c=c+this.mEndRotation+this.mEndRotationVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1)):(d=this.mStartRotation+this.mStartRotationVariance*(ya.toFloat(Ka.sRandomSeed=
16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1),c=this.mEndRotation+this.mEndRotationVariance*(ya.toFloat(Ka.sRandomSeed=16807*Ka.sRandomSeed&2147483647)/ya.toFloat(1073741824)-1));a.rotation=d;a.rotationDelta=(c-d)/b;a.spawnFactor=1;a.fadeInFactor=1;a.fadeOutFactor=1
			}
		},complete:function(){this.mCompleted||(this.mCompleted=!0,this.dispatchEventWith("complete"))
		},dispose:function(){Ka.sInstances.splice(Ka.sInstances.indexOf(this,
			0),
			1);this.removeEventListener("addedToStage",m(this,this.addedToStageHandler));
this.stop(!0);this.mBatched=!1;Wc.prototype.set_filter.call(this,this._mFilter=null);this.removeFromParent();Wc.prototype.dispose.call(this);this.mDisposed=!0
		},get_disposed:function(){return this.mDisposed
		},set_filter:function(a){this.mBatched||(this._mFilter=a);Wc.prototype.set_filter.call(this,a);return a
		},getBounds:function(a,b){null==b&&(b=new Z);return a==this||null==a?(null!=this.mBounds?b=this.mBounds:null!=this.get_stage()?(b.x=0,b.y=0,b.width=this.get_stage().get_stageWidth(),b.height=this.get_stage().get_stageHeight()):
(this.getTransformationMatrix(a,Ka.sHelperMatrix),jd.transformCoords(Ka.sHelperMatrix,
			0,
			0,Ka.sHelperPoint),b.x=Ka.sHelperPoint.x,b.y=Ka.sHelperPoint.y,b.width=b.height=0),b):null!=a?(null!=this.mBounds?(this.getTransformationMatrix(a,Ka.sHelperMatrix),jd.transformCoords(Ka.sHelperMatrix,this.mBounds.x,this.mBounds.y,Ka.sHelperPoint),b.x=Ka.sHelperPoint.x,b.y=Ka.sHelperPoint.y,jd.transformCoords(Ka.sHelperMatrix,this.mBounds.width,this.mBounds.height,Ka.sHelperPoint),b.width=Ka.sHelperPoint.x,b.height=
Ka.sHelperPoint.y):null!=this.get_stage()?(b.x=0,b.y=0,b.width=this.get_stage().get_stageWidth(),b.height=this.get_stage().get_stageHeight()):(this.getTransformationMatrix(a,Ka.sHelperMatrix),jd.transformCoords(Ka.sHelperMatrix,
			0,
			0,Ka.sHelperPoint),b.x=Ka.sHelperPoint.x,b.y=Ka.sHelperPoint.y,b.width=b.height=0),b):b=this.mBounds
		},getParticlesFromPool:function(){if(null!=this.mParticles)return!0;if(this.mDisposed)return!1;if(Ka.sParticlePool.get_length()>=this.mMaxNumParticles){this.mParticles=Ub.toObjectVector(null,
this.mMaxNumParticles,!0);var a=this.mMaxNumParticles,b=Ka.sParticlePool.get_length();for(Ka.sParticlePool.fixed=!1;0!=a;)this.mParticles.set(--a,Ka.sParticlePool.get(--b)),this.mParticles.get(a).active=!1,Ka.sParticlePool.set(b,null);Ka.sParticlePool.set_length(b);Ka.sParticlePool.fixed=!0;this.mVertexData=new og(4*this.mMaxNumParticles);this.mNumParticles=0;this.raiseCapacity(this.mMaxNumParticles-this.mParticles.get_length());return!0
			}if(Ka.sFixedPool)return!1;a=Ka.sParticlePool.get_length()-1;
b=this.mMaxNumParticles;for(Ka.sParticlePool.fixed=!1;++a<b;)Ka.sParticlePool.set(a,new Hcb);Ka.sParticlePool.fixed=!0;return this.getParticlesFromPool()
		},parseSystemOptions:function(a){if(null!=a){var b=.005555555555555556*Math.PI;this.mTextureAnimation=a.isAnimated;this.mAnimationLoops=ya.toFloat(a.loops);this.mFirstFrame=a.firstFrame;this.mLastFrame=a.lastFrame;this.mRandomStartFrames=a.randomStartFrames;this.mTinted=a.tinted;this.mSpawnTime=a.spawnTime;this.mFadeInTime=a.fadeInTime;this.mFadeOutTime=
a.fadeOutTime;this.mEmitterType=a.emitterType|0;this.mMaxNumParticles=a.maxParticles;this.emitter.x=this.mEmitterX=a.sourceX;this.emitter.y=this.mEmitterY=a.sourceY;this.mEmitterXVariance=a.sourceVarianceX;this.mEmitterYVariance=a.sourceVarianceY;this.mLifespan=a.lifespan;this.set_lifespanVariance(a.lifespanVariance);this.mEmitAngle=a.angle*b;this.mEmitAngleVariance=a.angleVariance*b;this.mStartSize=a.startParticleSize;this.mStartSizeVariance=a.startParticleSizeVariance;this.mEndSize=a.finishParticleSize;
this.mEndSizeVariance=a.finishParticleSizeVariance;this.mStartRotation=a.rotationStart*b;this.mStartRotationVariance=a.rotationStartVariance*b;this.mEndRotation=a.rotationEnd*b;this.mEndRotationVariance=a.rotationEndVariance*b;this.mEmissionTimePredefined=a.duration;this.mEmissionTimePredefined=0>this.mEmissionTimePredefined?1.79E308:this.mEmissionTimePredefined;this.mGravityX=a.gravityX;this.mGravityY=a.gravityY;this.mSpeed=a.speed;this.mSpeedVariance=a.speedVariance;this.mRadialAcceleration=a.radialAcceleration;
this.mRadialAccelerationVariance=a.radialAccelerationVariance;this.mTangentialAcceleration=a.tangentialAcceleration;this.mTangentialAccelerationVariance=a.tangentialAccelerationVariance;this.mMaxRadius=a.maxRadius;this.mMaxRadiusVariance=a.maxRadiusVariance;this.set_minRadius(a.minRadius);this.mMinRadiusVariance=a.minRadiusVariance;this.mRotatePerSecond=a.rotatePerSecond*b;this.mRotatePerSecondVariance=a.rotatePerSecondVariance*b;this.mStartColor.red=a.startColor.red;this.mStartColor.green=a.startColor.green;
this.mStartColor.blue=a.startColor.blue;this.mStartColor.alpha=a.startColor.alpha;this.mStartColorVariance.red=a.startColorVariance.red;this.mStartColorVariance.green=a.startColorVariance.green;this.mStartColorVariance.blue=a.startColorVariance.blue;this.mStartColorVariance.alpha=a.startColorVariance.alpha;this.mEndColor.red=a.finishColor.red;this.mEndColor.green=a.finishColor.green;this.mEndColor.blue=a.finishColor.blue;this.mEndColor.alpha=a.finishColor.alpha;this.mEndColorVariance.red=a.finishColorVariance.red;
this.mEndColorVariance.green=a.finishColorVariance.green;this.mEndColorVariance.blue=a.finishColorVariance.blue;this.mEndColorVariance.alpha=a.finishColorVariance.alpha;this.mBlendFuncSource=a.blendFuncSource;this.mBlendFuncDestination=a.blendFuncDestination;this.mEmitAngleAlignedRotation=a.emitAngleAlignedRotation;this.set_exactBounds(a.excactBounds);this.mTexture=a.texture;this.mPremultipliedAlpha=a.premultipliedAlpha;this._mFilter=a.filter;this.mCustomFunc=a.customFunction;this.mSortFunction=a.sortFunction;
this.forceSortFlag=a.forceSortFlag;this.mFrameLUT=a.mFrameLUT;this.mAnimationLoopLength=this.mLastFrame-this.mFirstFrame+1;this.mNumberOfFrames=this.mFrameLUT.get_length()-1-(this.mRandomStartFrames&&this.mTextureAnimation?this.mAnimationLoopLength: 0);this.mFrameLUTLength=this.mFrameLUT.get_length()-1
			}
		},exportSystemOptions:function(a){null==a&&(a=new ux(this.mTexture));var b=180/Math.PI;a.isAnimated=this.mTextureAnimation;a.loops=this.mAnimationLoops|0;a.firstFrame=this.mFirstFrame;a.lastFrame=this.mLastFrame;
a.randomStartFrames=this.mRandomStartFrames;a.tinted=this.mTinted;a.premultipliedAlpha=this.mPremultipliedAlpha;a.spawnTime=this.mSpawnTime;a.fadeInTime=this.mFadeInTime;a.fadeOutTime=this.mFadeOutTime;a.emitterType=this.mEmitterType;a.maxParticles=this.mMaxNumParticles;a.sourceX=this.mEmitterX;a.sourceY=this.mEmitterY;a.sourceVarianceX=this.mEmitterXVariance;a.sourceVarianceY=this.mEmitterYVariance;a.lifespan=this.mLifespan;a.lifespanVariance=this.mLifespanVariance;a.angle=this.mEmitAngle*b;a.angleVariance=
this.mEmitAngleVariance*b;a.startParticleSize=this.mStartSize;a.startParticleSizeVariance=this.mStartSizeVariance;a.finishParticleSize=this.mEndSize;a.finishParticleSizeVariance=this.mEndSizeVariance;a.rotationStart=this.mStartRotation*b;a.rotationStartVariance=this.mStartRotationVariance*b;a.rotationEnd=this.mEndRotation*b;a.rotationEndVariance=this.mEndRotationVariance*b;a.duration=1.79E308==this.mEmissionTimePredefined?-1:this.mEmissionTimePredefined;a.gravityX=this.mGravityX;a.gravityY=this.mGravityY;
a.speed=this.mSpeed;a.speedVariance=this.mSpeedVariance;a.radialAcceleration=this.mRadialAcceleration;a.radialAccelerationVariance=this.mRadialAccelerationVariance;a.tangentialAcceleration=this.mTangentialAcceleration;a.tangentialAccelerationVariance=this.mTangentialAccelerationVariance;a.maxRadius=this.mMaxRadius;a.maxRadiusVariance=this.mMaxRadiusVariance;a.minRadius=this.mMinRadius;a.minRadiusVariance=this.mMinRadiusVariance;a.rotatePerSecond=this.mRotatePerSecond*b;a.rotatePerSecondVariance=this.mRotatePerSecondVariance*
b;a.startColor=this.mStartColor;a.startColorVariance=this.mStartColorVariance;a.finishColor=this.mEndColor;a.finishColorVariance=this.mEndColorVariance;a.blendFuncSource=this.mBlendFuncSource;a.blendFuncDestination=this.mBlendFuncDestination;a.emitAngleAlignedRotation=this.mEmitAngleAlignedRotation;a.excactBounds=this.mExactBounds;a.texture=this.mTexture;a.filter=this._mFilter;a.customFunction=this.mCustomFunc;a.sortFunction=this.mSortFunction;a.forceSortFlag=this.forceSortFlag;a.mFrameLUT=this.mFrameLUT;
a.firstFrame=this.mFirstFrame;a.lastFrame=this.mLastFrame;return a
		},pause:function(){Ka.automaticJugglerManagement&&this.mJuggler.remove(this);this.mPlaying=!1
		},raiseCapacity:function(a){var b=null!=this.mVertexData?this.mVertexData.get_numVertices()/4|0: 0;a=Math.min(this.mMaxCapacity,(null!=this.mVertexData?this.mVertexData.get_numVertices()/4|0: 0)+a)|0;b<a&&this.mVertexData.set_numVertices(4*a)
		},getProgram:function(a){var b=nb.get_current(),c=null;null!=this.mTexture&&(c=Ka.getImageProgramName(this.mTinted,
this.mTexture.get_mipMapping(),this.mTexture.get_repeat(),this.mTexture.get_format(),this.mSmoothing));var d=b.getProgram(c);null==d&&(null==this.mTexture?(d="m44 op, va0, vc1 \nmul v0, va1, vc0 \n",a="mov oc, v0       \n"):(d=a?"m44 op, va0, vc1 \nmul v0, va1, vc0 \nmov v1, va2      \n": "m44 op, va0, vc1 \nmov v1, va2      \n",a=rc.replace(a?"tex ft1,  v1, fs0 <???> \nmul  oc, ft1,  v0       \n": "tex  oc,  v1, fs0 <???> \n",
			"<???>",md.getTextureLookupFlags(this.mTexture.get_format(),this.mTexture.get_mipMapping(),
this.mTexture.get_repeat(),this.get_smoothing()))),d=b.registerProgramFromSource(c,d,a));return d
		},isStateChange:function(a,b,c,d,e,g,k,t,u){return 0==this.mNumParticles?!1:null!=this.mTexture&&null!=c?this.mTexture.get_base()==c.get_base()&&this.mTexture.get_repeat()==c.get_repeat()&&this.mPremultipliedAlpha==d&&this.mSmoothing==e&&this.mTinted==(a||1!=b)&&this.get_blendMode()==g&&this.mBlendFuncSource==k&&this.mBlendFuncDestination==t?this._mFilter!=u:!0:!0
		},render:function(a,b){this.mNumBatchedParticles=
0;this.getBounds(this.get_stage(),this.batchBounds);if(0!=this.mNumParticles)if(this.mBatching){if(!this.mBatched){b=this.get_parent().getChildIndex(this);for(var c=this.get_parent().get_numChildren();++b<c;){var d=this.get_parent().getChildAt(b);if(d instanceof Ka)if(null==d.mParticles||d.isStateChange(this.mTinted,this.get_alpha(),this.mTexture,this.mPremultipliedAlpha,this.mSmoothing,this.get_blendMode(),this.mBlendFuncSource,this.mBlendFuncDestination,this._mFilter))break;else{if(this.get_numParticles()+
this.mNumBatchedParticles+d.get_numParticles()>Ka.sBufferSize)break;d.mVertexData.copyTo(this.mVertexData,
							4*(this.get_numParticles()+this.mNumBatchedParticles),
							0,
							4*d.get_numParticles());this.mNumBatchedParticles+=d.get_numParticles();d.mBatched=!0;d.set_filter(null);d.getBounds(this.get_stage(),Ka.sHelperRect);this.batchBounds.intersects(Ka.sHelperRect)&&(this.batchBounds=this.batchBounds.union(Ka.sHelperRect))
						}else break
					}this.renderCustom(a)
				}
			}else this.renderCustom(a);Wc.prototype.set_filter.call(this,
this._mFilter);this.mBatched=!1
		},renderCustom:function(a){Ka.sVertexBufferIdx=++Ka.sVertexBufferIdx%Ka.sNumberOfVertexBuffers;if(0!=this.mNumParticles&&null!=Ka.sVertexBuffers){a.finishQuadBatch();a.raiseDrawCount();Ka.getImageProgramName(this.mTinted,this.mTexture.get_mipMapping(),this.mTexture.get_repeat(),this.mTexture.get_format(),this.mSmoothing);var b=nb.get_current().get_context();Ka.sRenderAlpha.set(0,Ka.sRenderAlpha.set(1,Ka.sRenderAlpha.set(2,this.mPremultipliedAlpha?this.get_alpha(): 1)));
Ka.sRenderAlpha.set(3,this.get_alpha());if(null==b)throw ba.thrown(new Nv);b.setBlendFactors(this.mBlendFuncSource,this.mBlendFuncDestination);jd.convertTo3D(a.get_mvpMatrix(),Ka.sRenderMatrix);b.setProgram(this.getProgram(this.mTinted));b.setProgramConstantsFromVector(1,
				0,Ka.sRenderAlpha,
				1);b.setProgramConstantsFromMatrix(1,
				1,Ka.sRenderMatrix,!0);b.setTextureAt(0,this.mTexture.get_base());Ka.sVertexBuffers.get(Ka.sVertexBufferIdx).uploadFromTypedArray(this.mVertexData.get_rawData());b.setVertexBufferAt(0,
Ka.sVertexBuffers.get(Ka.sVertexBufferIdx),
				0,
				2);this.mTinted&&b.setVertexBufferAt(1,Ka.sVertexBuffers.get(Ka.sVertexBufferIdx),
				2,
				4);b.setVertexBufferAt(2,Ka.sVertexBuffers.get(Ka.sVertexBufferIdx),
				6,
				2);null!=this.batchBounds&&a.pushClipRect(this.batchBounds);b.drawTriangles(Ka.sIndexBuffer,
				0,
				2*Math.min(Ka.sBufferSize,this.mNumParticles+this.mNumBatchedParticles)|0);null!=this.batchBounds&&a.popClipRect();b.setVertexBufferAt(2,null);b.setVertexBufferAt(1,null);b.setVertexBufferAt(0,null);b.setTextureAt(0,
null);nb.get_current().removeCurrentProgram()
			}
		},resume:function(){Ka.automaticJugglerManagement&&this.mJuggler.add(this);this.mPlaying=!0
		},start:function(a){null==a&&(a=0);this.mCompleted&&this.reset();0==this.mEmissionRate||this.mCompleted||(0==a?a=this.mEmissionTimePredefined: 0>a&&(a=1.79E308),this.mPlaying=!0,this.mEmissionTime=a,this.mFrameTime=0,Ka.automaticJugglerManagement&&this.mJuggler.add(this))
		},stop:function(a){null==a&&(a=!1);this.mEmissionTime=0;a&&(Ka.automaticJugglerManagement&&this.mJuggler.remove(this),
this.mPlaying=!1,this.returnParticlesToPool(),this.dispatchEventWith("cancel"))
		},reset:function(){if(!this.mDisposed){this.mEmissionRate=this.mMaxNumParticles/this.mLifespan;this.mFrameTime=0;for(this.mPlaying=!1;0!=this.mNumParticles;)this.mParticles.get(--this.mNumParticles).active=!1;this.mMaxCapacity=0!=this.mMaxNumParticles?Math.min(16383,this.mMaxNumParticles)|0: 16383;this.mCompleted=!1;null==this.mParticles&&this.getParticlesFromPool();return null!=this.mParticles
			}return!1
		},returnParticlesToPool:function(){this.mNumParticles=
0;if(null!=this.mParticles){var a=this.mParticles.get_length(),b=Ka.sParticlePool.get_length()-1;for(Ka.sParticlePool.fixed=!1;0!=a;)Ka.sParticlePool.set(++b,this.mParticles.get(--a));Ka.sParticlePool.fixed=!0;this.mParticles=null
			}this.mVertexData=null;if(Ka.sFixedPool)for(a=0,b=Ka.sInstances.get_length();a<b;){var c=Ka.sInstances.get(a++);if(c!=this&&!c.mCompleted&&c.mPlaying&&null!=c.get_parent()&&null==c.mParticles&&c.getParticlesFromPool())break
			}
		},updateEmissionRate:function(){this.set_emissionRate(this.mMaxNumParticles/
this.mLifespan)
		},get_alpha:function(){return this.mSystemAlpha
		},set_alpha:function(a){return this.mSystemAlpha=a
		},get_batching:function(){return this.mBatching
		},set_batching:function(a){return this.mBatching=a
		},get_blendFuncSource:function(){return this.mBlendFuncSource
		},set_blendFuncSource:function(a){return this.mBlendFuncSource=a
		},get_blendFuncDestination:function(){return this.mBlendFuncDestination
		},set_blendFuncDestination:function(a){return this.mBlendFuncDestination=a
		},get_capacity:function(){return null!=
this.mVertexData?this.mVertexData.get_numVertices()/4|0: 0
		},get_completed:function(){return this.mCompleted
		},set_customFunction:function(a){return this.mCustomFunc=a
		},get_customFunction:function(){return this.mCustomFunc
		},get_numParticles:function(){return this.mNumParticles
		},get_cycleDuration:function(){return this.mMaxNumParticles/this.mEmissionRate
		},get_emissionRate:function(){return this.mEmissionRate
		},set_emissionRate:function(a){return this.mEmissionRate=a
		},get_emitAngle:function(){return this.mEmitAngle
		},
set_emitAngle:function(a){return this.mEmitAngle=a
		},set_emitAngleAlignedRotation:function(a){return this.mEmitAngleAlignedRotation=a
		},get_emitAngleAlignedRotation:function(){return this.mEmitAngleAlignedRotation
		},get_emitAngleVariance:function(){return this.mEmitAngleVariance
		},set_emitAngleVariance:function(a){return this.mEmitAngleVariance=a
		},get_emitterType:function(){return this.mEmitterType
		},set_emitterType:function(a){return this.mEmitterType=a
		},get_emitterObject:function(){return this.mEmitterObject
		},
set_emitterObject:function(a){return this.mEmitterObject=a
		},get_emitterX:function(){return this.emitter.x
		},set_emitterX:function(a){return this.emitter.x=a
		},get_emitterXVariance:function(){return this.mEmitterXVariance
		},set_emitterXVariance:function(a){return this.mEmitterXVariance=a
		},get_emitterY:function(){return this.emitter.y
		},set_emitterY:function(a){return this.emitter.y=a
		},get_emitterYVariance:function(){return this.mEmitterYVariance
		},set_emitterYVariance:function(a){return this.mEmitterYVariance=
a
		},get_emitting:function(){return 0!=this.mEmissionTime
		},get_endColor:function(){return this.mEndColor
		},set_endColor:function(a){null!=a&&(this.mEndColor=a);return a
		},get_endColorVariance:function(){return this.mEndColorVariance
		},set_endColorVariance:function(a){null!=a&&(this.mEndColorVariance=a);return a
		},get_endRotation:function(){return this.mEndRotation
		},set_endRotation:function(a){return this.mEndRotation=a
		},get_endRotationVariance:function(){return this.mEndRotationVariance
		},set_endRotationVariance:function(a){return this.mEndRotationVariance=
a
		},get_endSize:function(){return this.mEndSize
		},set_endSize:function(a){return this.mEndSize=a
		},get_endSizeVariance:function(){return this.mEndSizeVariance
		},set_endSizeVariance:function(a){return this.mEndSizeVariance=a
		},get_exactBounds:function(){return this.mExactBounds
		},set_exactBounds:function(a){this.mBounds=a?new Z:null;return this.mExactBounds=a
		},get_fadeInTime:function(){return this.mFadeInTime
		},set_fadeInTime:function(a){this.mFadeInTime=Math.max(0,Math.min(a,
			1));return a
		},get_fadeOutTime:function(){return this.mFadeOutTime
		},
set_fadeOutTime:function(a){this.mFadeOutTime=Math.max(0,Math.min(a,
			1));return a
		},get_gravityX:function(){return this.mGravityX
		},set_gravityX:function(a){return this.mGravityX=a
		},get_gravityY:function(){return this.mGravityY
		},set_gravityY:function(a){return this.mGravityY=a
		},get_lifespan:function(){return this.mLifespan
		},set_lifespan:function(a){this.mLifespan=Math.max(.01,a);this.mLifespanVariance=Math.min(this.mLifespan,this.mLifespanVariance);this.updateEmissionRate();return a
		},get_lifespanVariance:function(){return this.mLifespanVariance
		},
set_lifespanVariance:function(a){this.mLifespanVariance=Math.min(this.mLifespan,a);return a
		},get_maxCapacity:function(){return this.mMaxCapacity
		},set_maxCapacity:function(a){this.mMaxCapacity=Math.min(Math.min(16383,ya.toFloat(this.get_maxNumParticles())),ya.toFloat(a))|0;return a
		},get_maxNumParticles:function(){return this.mMaxNumParticles
		},set_maxNumParticles:function(a){this.returnParticlesToPool();this.mMaxCapacity=Math.min(16383,ya.toFloat(a))|0;this.mMaxNumParticles=this.get_maxCapacity();this.getParticlesFromPool()||
this.stop();this.updateEmissionRate();return a
		},get_maxRadius:function(){return this.mMaxRadius
		},set_maxRadius:function(a){return this.mMaxRadius=a
		},get_maxRadiusVariance:function(){return this.mMaxRadiusVariance
		},set_maxRadiusVariance:function(a){return this.mMaxRadiusVariance=a
		},get_minRadius:function(){return this.mMinRadius
		},set_minRadius:function(a){return this.mMinRadius=a
		},get_minRadiusVariance:function(){return this.mMinRadiusVariance
		},set_minRadiusVariance:function(a){return this.mMinRadiusVariance=
a
		},get_playing:function(){return this.mPlaying
		},get_premultipliedAlpha:function(){return this.mPremultipliedAlpha
		},set_premultipliedAlpha:function(a){return this.mPremultipliedAlpha=a
		},get_radialAcceleration:function(){return this.mRadialAcceleration
		},set_radialAcceleration:function(a){return this.mRadialAcceleration=a
		},get_radialAccelerationVariance:function(){return this.mRadialAccelerationVariance
		},set_radialAccelerationVariance:function(a){return this.mRadialAccelerationVariance=a
		},get_randomStartFrames:function(){return this.mRandomStartFrames
		},
set_randomStartFrames:function(a){return this.mRandomStartFrames=a
		},get_rotatePerSecond:function(){return this.mRotatePerSecond
		},set_rotatePerSecond:function(a){return this.mRotatePerSecond=a
		},get_rotatePerSecondVariance:function(){return this.mRotatePerSecondVariance
		},set_rotatePerSecondVariance:function(a){return this.mRotatePerSecondVariance=a
		},get_smoothing:function(){return this.mSmoothing
		},set_smoothing:function(a){Rka.isValid(a)&&(this.mSmoothing=a);return a
		},set_sortFunction:function(a){return this.mSortFunction=
a
		},get_sortFunction:function(){return this.mSortFunction
		},get_startColor:function(){return this.mStartColor
		},set_startColor:function(a){null!=a&&(this.mStartColor=a);return a
		},get_startColorVariance:function(){return this.mStartColorVariance
		},set_startColorVariance:function(a){null!=a&&(this.mStartColorVariance=a);return a
		},get_startSize:function(){return this.mStartSize
		},set_startSize:function(a){return this.mStartSize=a
		},get_startSizeVariance:function(){return this.mStartSizeVariance
		},set_startSizeVariance:function(a){return this.mStartSizeVariance=
a
		},get_startRotation:function(){return this.mStartRotation
		},set_startRotation:function(a){return this.mStartRotation=a
		},get_startRotationVariance:function(){return this.mStartRotationVariance
		},set_startRotationVariance:function(a){return this.mStartRotationVariance=a
		},get_spawnTime:function(){return this.mSpawnTime
		},set_spawnTime:function(a){this.mSpawnTime=Math.max(0,Math.min(a,
			1));return a
		},get_speed:function(){return this.mSpeed
		},set_speed:function(a){return this.mSpeed=a
		},get_speedVariance:function(){return this.mSpeedVariance
		},
set_speedVariance:function(a){return this.mSpeedVariance=a
		},get_tangentialAcceleration:function(){return this.mTangentialAcceleration
		},set_tangentialAcceleration:function(a){return this.mTangentialAcceleration=a
		},get_tangentialAccelerationVariance:function(){return this.mTangentialAccelerationVariance
		},set_tangentialAccelerationVariance:function(a){return this.mTangentialAccelerationVariance=a
		},get_texture:function(){return this.mTexture
		},get_tinted:function(){return this.mTinted
		},set_tinted:function(a){return this.mTinted=
a
		},get_juggler:function(){return this.mJuggler
		},set_juggler:function(a){if(null==a||a==this.mJuggler)return a;this.mJuggler.contains(this)&&(this.mJuggler.remove(this),a.add(this));return this.mJuggler=a
		},__class__:Ka,__properties__:l(Wc.prototype.__properties__,
		{set_juggler: "set_juggler",get_juggler: "get_juggler",set_tinted: "set_tinted",get_tinted: "get_tinted",get_texture: "get_texture",set_tangentialAccelerationVariance: "set_tangentialAccelerationVariance",get_tangentialAccelerationVariance: "get_tangentialAccelerationVariance",
set_tangentialAcceleration: "set_tangentialAcceleration",get_tangentialAcceleration: "get_tangentialAcceleration",set_speedVariance: "set_speedVariance",get_speedVariance: "get_speedVariance",set_speed: "set_speed",get_speed: "get_speed",set_spawnTime: "set_spawnTime",get_spawnTime: "get_spawnTime",set_startRotationVariance: "set_startRotationVariance",get_startRotationVariance: "get_startRotationVariance",set_startRotation: "set_startRotation",get_startRotation: "get_startRotation",set_startSizeVariance: "set_startSizeVariance",
get_startSizeVariance: "get_startSizeVariance",set_startSize: "set_startSize",get_startSize: "get_startSize",set_startColorVariance: "set_startColorVariance",get_startColorVariance: "get_startColorVariance",set_startColor: "set_startColor",get_startColor: "get_startColor",set_sortFunction: "set_sortFunction",get_sortFunction: "get_sortFunction",set_smoothing: "set_smoothing",get_smoothing: "get_smoothing",set_rotatePerSecondVariance: "set_rotatePerSecondVariance",get_rotatePerSecondVariance: "get_rotatePerSecondVariance",
set_rotatePerSecond: "set_rotatePerSecond",get_rotatePerSecond: "get_rotatePerSecond",set_randomStartFrames: "set_randomStartFrames",get_randomStartFrames: "get_randomStartFrames",set_radialAccelerationVariance: "set_radialAccelerationVariance",get_radialAccelerationVariance: "get_radialAccelerationVariance",set_radialAcceleration: "set_radialAcceleration",get_radialAcceleration: "get_radialAcceleration",set_premultipliedAlpha: "set_premultipliedAlpha",get_premultipliedAlpha: "get_premultipliedAlpha",get_playing: "get_playing",
set_minRadiusVariance: "set_minRadiusVariance",get_minRadiusVariance: "get_minRadiusVariance",set_minRadius: "set_minRadius",get_minRadius: "get_minRadius",set_maxRadiusVariance: "set_maxRadiusVariance",get_maxRadiusVariance: "get_maxRadiusVariance",set_maxRadius: "set_maxRadius",get_maxRadius: "get_maxRadius",set_maxNumParticles: "set_maxNumParticles",get_maxNumParticles: "get_maxNumParticles",set_maxCapacity: "set_maxCapacity",get_maxCapacity: "get_maxCapacity",set_lifespanVariance: "set_lifespanVariance",get_lifespanVariance: "get_lifespanVariance",
set_lifespan: "set_lifespan",get_lifespan: "get_lifespan",set_gravityY: "set_gravityY",get_gravityY: "get_gravityY",set_gravityX: "set_gravityX",get_gravityX: "get_gravityX",set_fadeOutTime: "set_fadeOutTime",get_fadeOutTime: "get_fadeOutTime",set_fadeInTime: "set_fadeInTime",get_fadeInTime: "get_fadeInTime",set_exactBounds: "set_exactBounds",get_exactBounds: "get_exactBounds",set_endSizeVariance: "set_endSizeVariance",get_endSizeVariance: "get_endSizeVariance",set_endSize: "set_endSize",get_endSize: "get_endSize",
set_endRotationVariance: "set_endRotationVariance",get_endRotationVariance: "get_endRotationVariance",set_endRotation: "set_endRotation",get_endRotation: "get_endRotation",set_endColorVariance: "set_endColorVariance",get_endColorVariance: "get_endColorVariance",set_endColor: "set_endColor",get_endColor: "get_endColor",get_emitting: "get_emitting",set_emitterYVariance: "set_emitterYVariance",get_emitterYVariance: "get_emitterYVariance",set_emitterY: "set_emitterY",get_emitterY: "get_emitterY",set_emitterXVariance: "set_emitterXVariance",
get_emitterXVariance: "get_emitterXVariance",set_emitterX: "set_emitterX",get_emitterX: "get_emitterX",set_emitterObject: "set_emitterObject",get_emitterObject: "get_emitterObject",set_emitterType: "set_emitterType",get_emitterType: "get_emitterType",set_emitAngleVariance: "set_emitAngleVariance",get_emitAngleVariance: "get_emitAngleVariance",set_emitAngleAlignedRotation: "set_emitAngleAlignedRotation",get_emitAngleAlignedRotation: "get_emitAngleAlignedRotation",set_emitAngle: "set_emitAngle",get_emitAngle: "get_emitAngle",
set_emissionRate: "set_emissionRate",get_emissionRate: "get_emissionRate",get_cycleDuration: "get_cycleDuration",get_numParticles: "get_numParticles",set_customFunction: "set_customFunction",get_customFunction: "get_customFunction",get_completed: "get_completed",get_capacity: "get_capacity",set_blendFuncDestination: "set_blendFuncDestination",get_blendFuncDestination: "get_blendFuncDestination",set_blendFuncSource: "set_blendFuncSource",get_blendFuncSource: "get_blendFuncSource",set_batching: "set_batching",get_batching: "get_batching",
get_disposed: "get_disposed"
		})
	});var Icb=function(a,b,c,d,e,g,k){null==k&&(k=!1);null==g&&(g=64);null==e&&(e=64);null==d&&(d=0);null==c&&(c=0);null==b&&(b=64);null==a&&(a=64);this.rotated=!1;this.textureX=c/a;this.textureY=d/b;this.textureWidth=(c+e)/a;this.textureHeight=(d+g)/b;this.particleHalfWidth=(e|0)>>1;this.particleHalfHeight=(g|0)>>1;this.rotated=k
	};h[
		"de.flintfabrik.starling.display.fFParticleSystem.Frame"
	]=Icb;Icb.__name__="de.flintfabrik.starling.display.fFParticleSystem.Frame";Icb.prototype=
{__class__:Icb
	};var Hcb=function(){this.customValues=null;this.active=!1;this.emitRadiusDelta=this.emitRotation=this.emitRotationDelta=this.rotationDelta=this.scaleDelta=this.frameIdx=this.frame=this.frameDelta=this.fadeInFactor=this.fadeOutFactor=this.spawnFactor=0;this.emitRadius=1;this.colorDeltaRed=this.colorDeltaGreen=this.colorDeltaBlue=this.colorDeltaAlpha=this.startX=this.startY=this.velocityX=this.velocityY=this.radialAcceleration=this.tangentialAcceleration=0;this.totalTime=this.colorRed=
this.colorGreen=this.colorBlue=this.colorAlpha=1;this.currentTime=0;this.alpha=1;this.rotation=0;this.scale=1;this.x=this.y=0
	};h[
		"de.flintfabrik.starling.display.fFParticleSystem.Particle"
	]=Hcb;Hcb.__name__="de.flintfabrik.starling.display.fFParticleSystem.Particle";Hcb.prototype={__class__:Hcb
	};var ux=function(a,b,c){this.mFrameLUT=this.texture=this.atlasXML=null;this.excactBounds=!1;this.blendFuncDestination=5;this.blendFuncSource=2;this.forceSortFlag=!1;this.filter=this.customFunction=this.sortFunction=
null;this.finishColorVariance=new Mr(0,
		0,
		0,
		0);this.finishColor=new Mr(1,
		1,
		1,
		1);this.startColorVariance=new Mr(0,
		0,
		0,
		0);this.startColor=new Mr(1,
		1,
		1,
		1);this.maxRadiusVariance=this.minRadius=this.minRadiusVariance=this.rotatePerSecond=this.rotatePerSecondVariance=0;this.maxRadius=100;this.speedVariance=this.radialAcceleration=this.radialAccelerationVariance=this.tangentialAcceleration=this.tangentialAccelerationVariance=0;this.speed=50;this.gravityX=this.gravityY=0;this.duration=2;this.finishParticleSizeVariance=
this.rotationStart=this.rotationStartVariance=this.rotationEnd=this.rotationEndVariance=0;this.finishParticleSize=20;this.startParticleSizeVariance=0;this.startParticleSize=20;this.emitAngleAlignedRotation=!1;this.lifespanVariance=this.angle=this.angleVariance=0;this.lifespan=1;this.sourceX=this.sourceY=this.sourceVarianceX=this.sourceVarianceY=0;this.maxParticles=10;this.spawnTime=this.fadeInTime=this.fadeOutTime=this.emitterType=0;this.tinted=this.premultipliedAlpha=!0;this.randomStartFrames=!1;
this.loops=1;this.lastFrame=-1;this.firstFrame=0;this.isAnimated=!1;this.animationLength=1;this.mFirstFrameName=this.mLastFrameName="";if(null==a)throw ba.thrown(new wb("texture must not be null"));this.texture=a;this.atlasXML=b;null!=c&&ux.fromXML(c,a,b,this)
	};h[
		"de.flintfabrik.starling.display.fFParticleSystem.SystemOptions"
	]=ux;ux.__name__="de.flintfabrik.starling.display.fFParticleSystem.SystemOptions";ux.fromXML=function(a,b,c,d){null==d&&(d=new ux(b,c));d.texture=b;d.atlasXML=c;for(a=a.elements();a.hasNext();){b=
a.next();if(b.nodeType!=cc.Element)throw ba.thrown("Bad node type, expected Element but found "+(null==b.nodeType?"null":Cf.toString(b.nodeType)));c=b.nodeName;switch(c){case "FinishParticleSizeVariance":b=b.get("value");d.finishParticleSizeVariance=null!=b?parseFloat(b): 0;break;case "angle":b=b.get("value");d.angle=null!=b?parseFloat(b): 0;break;case "angleVariance":b=b.get("value");d.angleVariance=null!=b?parseFloat(b): 0;break;case "blendFuncDestination":b=fa.parseInt(b.get("value"));b=null==b?0:
b;switch(b){case 0:b=9;break;case 1:b=2;break;case 768:b=8;break;case 769:b=6;break;case 770:b=7;break;case 771:b=5;break;case 772:b=0;break;case 773:b=3;break;case 774:b=1;break;case 775:b=4;break;default:throw ba.thrown(new oc("unsupported blending function: "+b));
				}d.blendFuncDestination=b;break;case "blendFuncSource":b=fa.parseInt(b.get("value"));b=null==b?0:b;switch(b){case 0:b=9;break;case 1:b=2;break;case 768:b=8;break;case 769:b=6;break;case 770:b=7;break;case 771:b=5;break;case 772:b=0;break;
case 773:b=3;break;case 774:b=1;break;case 775:b=4;break;default:throw ba.thrown(new oc("unsupported blending function: "+b));
				}d.blendFuncSource=b;break;case "duration":b=b.get("value");d.duration=null!=b?parseFloat(b): 0;break;case "emitAngleAlignedRotation":b.exists("value")?(b=b.get("value").toLowerCase(),b="true"==b?!0: 0<fa.parseInt(b)):b=!1;d.emitAngleAlignedRotation=b;break;case "emitterType":b=fa.parseInt(b.get("value"));d.emitterType=null==b?0:b;break;case "excactBounds":b.exists("value")?
(b=b.get("value").toLowerCase(),b="true"==b?!0: 0<fa.parseInt(b)):b=!1;d.excactBounds=b;break;case "fadeInTime":b=b.get("value");d.fadeInTime=null!=b?parseFloat(b): 0;break;case "fadeOutTime":b=b.get("value");d.fadeOutTime=null!=b?parseFloat(b): 0;break;case "finishColor":c=d.finishColor;null==c&&(c=new Mr);var e=b.get("red");c.red=null!=e?parseFloat(e): 0;e=b.get("green");c.green=null!=e?parseFloat(e): 0;e=b.get("blue");c.blue=null!=e?parseFloat(e): 0;b=b.get("alpha");c.alpha=null!=b?parseFloat(b): 0;break;
case "finishColorVariance":c=d.finishColorVariance;null==c&&(c=new Mr);e=b.get("red");c.red=null!=e?parseFloat(e): 0;e=b.get("green");c.green=null!=e?parseFloat(e): 0;e=b.get("blue");c.blue=null!=e?parseFloat(e): 0;b=b.get("alpha");c.alpha=null!=b?parseFloat(b): 0;break;case "finishParticleSize":b=b.get("value");d.finishParticleSize=null!=b?parseFloat(b): 0;break;case "finishParticleSizeVariance":b=b.get("value");d.finishParticleSizeVariance=null!=b?parseFloat(b): 0;break;case "gravity":c=b.get("x");d.gravityX=
null!=c?parseFloat(c): 0;b=b.get("y");d.gravityY=null!=b?parseFloat(b): 0;break;case "maxParticles":b=fa.parseInt(b.get("value"));d.maxParticles=null==b?0:b;break;case "maxRadius":b=b.get("value");d.maxRadius=null!=b?parseFloat(b): 0;break;case "maxRadiusVariance":b=b.get("value");d.maxRadiusVariance=null!=b?parseFloat(b): 0;break;case "minRadius":b=b.get("value");d.minRadius=null!=b?parseFloat(b): 0;break;case "minRadiusVariance":b=b.get("value");d.minRadiusVariance=null!=b?parseFloat(b): 0;break;case "particleLifeSpan":b=
b.get("value");d.lifespan=Math.max(.01,null!=b?parseFloat(b): 0);break;case "particleLifeSpanVariance":b=b.get("value");d.lifespanVariance=null!=b?parseFloat(b): 0;break;case "particleLifespan":b=b.get("value");d.lifespan=Math.max(.01,null!=b?parseFloat(b): 0);break;case "particleLifespanVariance":b=b.get("value");d.lifespanVariance=null!=b?parseFloat(b): 0;break;case "premultipliedAlpha":b.exists("value")?(b=b.get("value").toLowerCase(),b="true"==b?!0: 0<fa.parseInt(b)):b=!1;d.premultipliedAlpha=b;break;
case "radialAccelVariance":b=b.get("value");d.radialAccelerationVariance=null!=b?parseFloat(b): 0;break;case "radialAcceleration":b=b.get("value");d.radialAcceleration=null!=b?parseFloat(b): 0;break;case "rotatePerSecond":b=b.get("value");d.rotatePerSecond=null!=b?parseFloat(b): 0;break;case "rotatePerSecondVariance":b=b.get("value");d.rotatePerSecondVariance=null!=b?parseFloat(b): 0;break;case "rotationEnd":b=b.get("value");d.rotationEnd=null!=b?parseFloat(b): 0;break;case "rotationEndVariance":b=b.get("value");
d.rotationEndVariance=null!=b?parseFloat(b): 0;break;case "rotationStart":b=b.get("value");d.rotationStart=null!=b?parseFloat(b): 0;break;case "rotationStartVariance":b=b.get("value");d.rotationStartVariance=null!=b?parseFloat(b): 0;break;case "sourcePosition":c=b.get("x");d.sourceX=null!=c?parseFloat(c): 0;b=b.get("y");d.sourceY=null!=b?parseFloat(b): 0;break;case "sourcePositionVariance":c=b.get("x");d.sourceVarianceX=null!=c?parseFloat(c): 0;b=b.get("y");d.sourceVarianceY=null!=b?parseFloat(b): 0;break;
case "spawnTime":b=b.get("value");d.spawnTime=null!=b?parseFloat(b): 0;break;case "speed":b=b.get("value");d.speed=null!=b?parseFloat(b): 0;break;case "speedVariance":b=b.get("value");d.speedVariance=null!=b?parseFloat(b): 0;break;case "startColor":c=d.startColor;null==c&&(c=new Mr);e=b.get("red");c.red=null!=e?parseFloat(e): 0;e=b.get("green");c.green=null!=e?parseFloat(e): 0;e=b.get("blue");c.blue=null!=e?parseFloat(e): 0;b=b.get("alpha");c.alpha=null!=b?parseFloat(b): 0;break;case "startColorVariance":c=
d.startColorVariance;null==c&&(c=new Mr);e=b.get("red");c.red=null!=e?parseFloat(e): 0;e=b.get("green");c.green=null!=e?parseFloat(e): 0;e=b.get("blue");c.blue=null!=e?parseFloat(e): 0;b=b.get("alpha");c.alpha=null!=b?parseFloat(b): 0;break;case "startParticleSize":b=b.get("value");d.startParticleSize=null!=b?parseFloat(b): 0;break;case "startParticleSizeVariance":b=b.get("value");d.startParticleSizeVariance=null!=b?parseFloat(b): 0;break;case "tangentialAccelVariance":b=b.get("value");d.tangentialAccelerationVariance=
null!=b?parseFloat(b): 0;break;case "tangentialAcceleration":b=b.get("value");d.tangentialAcceleration=null!=b?parseFloat(b): 0;break;case "tinted":b.exists("value")?(b=b.get("value").toLowerCase(),b="true"==b?!0: 0<fa.parseInt(b)):b=!1,d.tinted=b
			}
		}d.updateFrameLUT();return d
	};ux.getFloatValue=function(a,b){a=a.get(b);return null!=a?parseFloat(a): 0
	};ux.getBooleanValue=function(a,b){return a.exists(b)?(a=a.get(b).toLowerCase(),
		"true"==a?!0: 0<fa.parseInt(a)):!1
	};ux.getIntValue=function(a,b){a=fa.parseInt(a.get(b));
return null==a?0:a
	};ux.getColor=function(a,b){null==b&&(b=new Mr);var c=a.get("red");b.red=null!=c?parseFloat(c): 0;c=a.get("green");b.green=null!=c?parseFloat(c): 0;c=a.get("blue");b.blue=null!=c?parseFloat(c): 0;c=a.get("alpha");b.alpha=null!=c?parseFloat(c): 0;return b
	};ux.getFrameIdx=function(a,b){if(null!=b&&null==fa.parseInt(a)){var c=0,d=0;for(b=b.elementsNamed("SubTexture");b.hasNext();)b.next().get("name")==a&&(c=d),++d;return c
		}return fa.parseInt(a)
	};ux.getBlendFunc=function(a){a=fa.parseInt(a.get("value"));
a=null==a?0:a;switch(a){case 0:return 9;case 1:return 2;case 768:return 8;case 769:return 6;case 770:return 7;case 771:return 5;case 772:return 0;case 773:return 3;case 774:return 1;case 775:return 4;default:throw ba.thrown(new oc("unsupported blending function: "+a));
		}
	};ux.prototype={appendFromObject:function(a){if(null!=a)for(var b=0,c=gb.fields(a);b<c.length;){var d=c[b
				];++b;try{gb.setProperty(this,d,gb.getProperty(a,d))
				}catch(e){He.lastError=e
				}
			}this.updateFrameLUT();return this
		},clone:function(a){null==
a&&(a=new ux(this.texture,this.atlasXML));a.texture=this.texture;a.atlasXML=this.atlasXML;a.sourceX=this.sourceX;a.sourceY=this.sourceY;a.sourceVarianceX=this.sourceVarianceX;a.sourceVarianceY=this.sourceVarianceY;a.gravityX=this.gravityX;a.gravityY=this.gravityY;a.emitterType=this.emitterType;a.maxParticles=this.maxParticles;a.lifespan=this.lifespan;a.lifespanVariance=this.lifespanVariance;a.startParticleSize=this.startParticleSize;a.startParticleSizeVariance=this.startParticleSizeVariance;a.finishParticleSize=
this.finishParticleSize;a.finishParticleSizeVariance=this.finishParticleSizeVariance;a.angle=this.angle;a.angleVariance=this.angleVariance;a.rotationStart=this.rotationStart;a.rotationStartVariance=this.rotationStartVariance;a.rotationEnd=this.rotationEnd;a.rotationEndVariance=this.rotationEndVariance;a.emitAngleAlignedRotation=this.emitAngleAlignedRotation;a.speed=this.speed;a.speedVariance=this.speedVariance;a.radialAcceleration=this.radialAcceleration;a.radialAccelerationVariance=this.radialAccelerationVariance;
a.tangentialAcceleration=this.tangentialAcceleration;a.tangentialAccelerationVariance=this.tangentialAccelerationVariance;a.maxRadius=this.maxRadius;a.maxRadiusVariance=this.maxRadiusVariance;a.minRadius=this.minRadius;a.minRadiusVariance=this.minRadiusVariance;a.rotatePerSecond=this.rotatePerSecond;a.rotatePerSecondVariance=this.rotatePerSecondVariance;a.startColor=this.startColor;a.startColorVariance=this.startColorVariance;a.finishColor=this.finishColor;a.finishColorVariance=this.finishColorVariance;
a.blendFuncSource=this.blendFuncSource;a.blendFuncDestination=this.blendFuncDestination;a.duration=this.duration;a.isAnimated=this.isAnimated;a.set_firstFrameName(this.get_firstFrameName());a.firstFrame=this.firstFrame;a.set_lastFrameName(this.get_lastFrameName());a.lastFrame=this.lastFrame;a.lastFrame=this.lastFrame;a.loops=this.loops;a.randomStartFrames=this.randomStartFrames;a.tinted=this.tinted;a.spawnTime=this.spawnTime;a.fadeInTime=this.fadeInTime;a.fadeOutTime=this.fadeOutTime;a.excactBounds=
this.excactBounds;a.filter=this.filter;a.customFunction=this.customFunction;a.sortFunction=this.sortFunction;a.forceSortFlag=this.forceSortFlag;a.mFrameLUT=this.mFrameLUT;return a
		},exportConfig:function(a){throw ba.thrown(new wb("Functionality not ported: exportConfig!"));
		},getFrameNameFromAtlas:function(a,b){throw ba.thrown(new wb("Functionality not ported: getFrameNameFromAtlas!"));
		},updateFrameLUT:function(){this.mFrameLUT=Ub.toObjectVector(null);if(null==this.atlasXML)if(this.texture instanceof
Ov){var a=this.texture,b=a.get_clipping(),c=this.texture.get_root();a=new Icb(c.get_nativeWidth(),c.get_nativeHeight(),b.x*c.get_nativeWidth(),b.y*c.get_nativeHeight(),b.width*c.get_nativeWidth(),b.height*c.get_nativeHeight(),a.get_rotated());this.mFrameLUT.set(0,a)
			}else this.mFrameLUT.set(0,new Icb(this.texture.get_width(),this.texture.get_height(),
			0,
			0,this.texture.get_width(),this.texture.get_height(),!1));this.mFrameLUT.fixed=!0
		},get_frameLUT:function(){null==this.mFrameLUT&&this.updateFrameLUT();
return this.mFrameLUT
		},get_firstFrameName:function(){return this.mFirstFrameName
		},set_firstFrameName:function(a){var b=this.atlasXML,c;if(null!=b&&null==fa.parseInt(a)){var d=c=0;for(b=b.elementsNamed("SubTexture");b.hasNext();)b.next().get("name")==a&&(c=d),++d
			}else c=fa.parseInt(a);-1!=c?(this.firstFrame=c,this.mFirstFrameName=a):this.mFirstFrameName="";return a
		},get_lastFrameName:function(){return this.mLastFrameName
		},set_lastFrameName:function(a){var b=this.atlasXML,c;if(null!=b&&null==fa.parseInt(a)){var d=
c=0;for(b=b.elementsNamed("SubTexture");b.hasNext();)b.next().get("name")==a&&(c=d),++d
			}else c=fa.parseInt(a);if(-1!=c){b=this.atlasXML;if(null!=b&&null==fa.parseInt(a))for(d=c=0,b=b.elementsNamed("SubTexture");b.hasNext();)b.next().get("name")==a&&(c=d),++d;else c=fa.parseInt(a);this.lastFrame=c;this.mLastFrameName=a
			}else this.mLastFrameName="";return a
		},__class__:ux,__properties__: {set_lastFrameName: "set_lastFrameName",get_lastFrameName: "get_lastFrameName",set_firstFrameName: "set_firstFrameName",
get_firstFrameName: "get_firstFrameName",get_frameLUT: "get_frameLUT"
		}
	};var Mr=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.red=this.green=this.blue=this.alpha=NaN;this.red=a;this.green=b;this.blue=c;this.alpha=d
	};h[
		"de.flintfabrik.starling.utils.ColorArgb"
	]=Mr;Mr.__name__="de.flintfabrik.starling.utils.ColorArgb";Mr.fromRgbColor=function(a){var b=new Mr;b.fromRgb(a);return b
	};Mr.fromArgbColor=function(a){var b=new Mr;b.fromArgb(a);return b
	};Mr.prototype={toRgb:function(){var a=
this.red;0>a?a=0: 1<a&&(a=1);var b=this.green;0>b?b=0: 1<b&&(b=1);var c=this.blue;0>c?c=0: 1<c&&(c=1);return(255*a|0)<<16|(255*b|0)<<8|255*c|0
		},toArgb:function(){var a=this.alpha;0>a?a=0: 1<a&&(a=1);var b=this.red;0>b?b=0: 1<b&&(b=1);var c=this.green;0>c?c=0: 1<c&&(c=1);var d=this.blue;0>d?d=0: 1<d&&(d=1);return(255*a|0)<<24|(255*b|0)<<16|(255*c|0)<<8|255*d|0
		},fromRgb:function(a){this.red=ya.toFloat(a>>>16&255)/255;this.green=ya.toFloat(a>>>8&255)/255;this.blue=ya.toFloat(a&255)/255
		},fromArgb:function(a){this.red=
ya.toFloat(a>>>16&255)/255;this.green=ya.toFloat(a>>>8&255)/255;this.blue=ya.toFloat(a&255)/255;this.alpha=ya.toFloat(a>>>24&255)/255
		},copyFrom:function(a){this.red=a.red;this.green=a.green;this.blue=a.blue;this.alpha=a.alpha
		},__class__:Mr
	};var Gk=function(a,b){this._id=a;this._value=b
	};h[
		"de.innogames.collections.resources.Resource"
	]=Gk;Gk.__name__="de.innogames.collections.resources.Resource";Gk.createEmpty=function(){return new Gk("",
		0)
	};Gk.prototype={get_id:function(){return this._id
		},set_id:function(a){return this._id=
a
		},get_value:function(){return this._value
		},set_value:function(a){return this._value=a
		},clone:function(){return new Gk(this._id,this._value)
		},__class__:Gk,__properties__: {set_value: "set_value",get_value: "get_value",set_id: "set_id",get_id: "get_id"
		}
	};var Jf=function(){this._keys=[];this._collection=new x
	};h[
		"de.innogames.collections.resources.ResourceCollection"
	]=Jf;Jf.__name__="de.innogames.collections.resources.ResourceCollection";Jf.equals=function(a,b){if(null==a&&null==b)return!0;if(null==a||null==
b||a._keys.length!=b._keys.length)return!1;for(var c=0,d=a._keys;c<d.length;){var e=d[c
			];++c;if(a.getValueFor(e)!=b.getValueFor(e))return!1
		}return!0
	};Jf.prototype={getValueFor:function(a){a=this._collection.h[a
			];return null==a?0:a.get_value()
		},setValueFor:function(a,b){var c=this._collection.h[a
			];null==c&&(c=new Gk(a,
			0),this._collection.h[a
			]=c,this._keys.push(a));c.set_value(b)
		},add:function(a){for(var b=0,c=a._keys;b<c.length;)this.addResource(a._collection.h[c[b++
				]
			])
		},addResource:function(a){this.addTo(a.get_id(),
a.get_value())
		},addTo:function(a,b){var c=this._collection.h[a
			];null==c&&(c=new Gk(a,
			0),this._collection.h[a
			]=c,this._keys.push(a));a=c;a.set_value(a.get_value()+b)
		},subtract:function(a){a=a._collection.h;for(var b=Object.keys(a),c=b.length,d=0;d<c;)this.subtractResource(a[b[d++
				]
			])
		},subtractResource:function(a){this.subtractFrom(a.get_id(),a.get_value())
		},subtractFrom:function(a,b){var c=this._collection.h[a
			];null==c&&(c=new Gk(a,
			0),this._collection.h[a
			]=c,this._keys.push(a));a=c;a.set_value(a.get_value()-
b)
		},multiply:function(a){for(var b=this._collection.h,c=Object.keys(b),d=c.length,e=0;e<d;){var g=b[c[e++
					]
				];g.set_value(Math.ceil(g.get_value()*a))
			}
		},keyValueIterator:function(){return new yl(this._keys,this._collection)
		},createFilter:function(){return dN.on(this)
		},clone:function(){for(var a=new Jf,b=0,c=this._keys;b<c.length;){var d=this._collection.h[c[b++
					]
				];a.setValueFor(d.get_id(),d.get_value())
			}return a
		},sort:function(a){this._keys.sort(a)
		},_getResourceById:function(a){var b=this._collection.h[a
			];
null==b&&(b=new Gk(a,
			0),this._collection.h[a
			]=b,this._keys.push(a));return b
		},get_resources:function(){for(var a=Ub.toObjectVector(null),b=0,c=this._keys;b<c.length;)a.push(this._collection.h[c[b++
				]
			].clone());return a
		},get_ids:function(){for(var a=this._keys,b=Ub.toObjectVector(null),c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e
				])
			}return b
		},__class__:Jf,__properties__: {get_ids: "get_ids",get_resources: "get_resources"
		}
	};var yl=function(a,b){this._collection=b;this._ids=a;this._length=this._ids.length;
this._current=0
	};h[
		"de.innogames.collections.resources._ResourceCollection.ResourceCollectionKeyValueIterator"
	]=yl;yl.__name__="de.innogames.collections.resources._ResourceCollection.ResourceCollectionKeyValueIterator";yl.prototype={hasNext:function(){return this._current<this._length
		},next:function(){var a=this._ids[this._current++
			];return{key:a,value:this._collection.h[a
				].get_value()
			}
		},__class__:yl
	};var BZ=function(a,b){this._minimum=a;this._maximum=b
	};h[
		"de.innogames.collections.resources.filter.FilterRange"
	]=
BZ;BZ.__name__="de.innogames.collections.resources.filter.FilterRange";BZ.prototype={isInRange:function(a){return a>=this._minimum?a<=this._maximum:!1
		},__class__:BZ
	};var GHb=function(a){this._resources=a
	};h[
		"de.innogames.collections.resources.filter.FilterResult"
	]=GHb;GHb.__name__="de.innogames.collections.resources.filter.FilterResult";GHb.prototype={toCollection:function(){for(var a=new Jf,b=this._resources,c=0;c<b.get_length();){var d=b.get(c++);a.setValueFor(d.get_id(),d.get_value())
			}return a
		},
toList:function(){return this._resources
		},ids:function(){for(var a=Ub.toObjectVector(null),b=this._resources,c=0;c<b.get_length();)a.push(b.get(c++).get_id());return a
		},count:function(){return this._resources.get_length()
		},first:function(){return 0!=this._resources.get_length()?this._resources.get(0): null
		},__class__:GHb
	};var Jcb=function(){};h[
		"de.innogames.collections.resources.filter.IResourceFilter"
	]=Jcb;Jcb.__name__="de.innogames.collections.resources.filter.IResourceFilter";Jcb.__isInterface__=
!0;Jcb.prototype={__class__:Jcb
	};var dN=function(){this._ranges=[];this._collection=null;this._hasExcludeIds=!1;this._includedIds=[];this._excludedIdsMap=new x;this._includedIdsMap=new x
	};h[
		"de.innogames.collections.resources.filter.ResourceFilter"
	]=dN;dN.__name__="de.innogames.collections.resources.filter.ResourceFilter";dN.__interfaces__=[Jcb
	];dN.on=function(a){dN._filter._reset();dN._filter._collection=a;return dN._filter
	};dN.prototype={includeIds:function(a){for(var b=0;b<a.length;){var c=a[b
				];
++b;null==this._includedIdsMap.h[c
				]&&(this._includedIdsMap.h[c
				]=c,this._includedIds.push(c))
			}return this
		},excludeIds:function(a){for(var b=0;b<a.length;){var c=a[b
				];++b;null==this._excludedIdsMap.h[c
				]&&(this._excludedIdsMap.h[c
				]=c,this._hasExcludeIds=!0)
			}return this
		},inRange:function(a){this._ranges.push(a);return this
		},filter:function(){for(var a=this._collection.get_resources(),b=Ub.toObjectVector(null),c=0;c<a.get_length();){var d=a.get(c++);this._filterByIds(d)&&this._filterByRanges(d)&&b.push(d)
			}0<
this._includedIds.length&&b.sort(m(this,this._sortResourcesByIds));return new GHb(b)
		},_reset:function(){this._includedIdsMap=new x;this._includedIds.length=0;this._excludedIdsMap=new x;this._hasExcludeIds=!1;this._ranges.length=0
		},_filterByIds:function(a){a=a.get_id();return 0!=this._includedIds.length?null!=this._includedIdsMap.h[a
			]?null==this._excludedIdsMap.h[a
			]:!1:this._hasExcludeIds?null==this._excludedIdsMap.h[a
			]:!0
		},_filterByRanges:function(a){for(var b=0,c=this._ranges;b<c.length;)if(!c[b++
			].isInRange(a.get_value()))return!1;
return!0
		},_sortResourcesByIds:function(a,b){a=this._includedIds.indexOf(a.get_id());b=this._includedIds.indexOf(b.get_id());return a==b?0: -1==b?-1: -1==a?1:a-b
		},__class__:dN
	};var te=Ea[
		"de.innogames.common.assets.AssetCachePolicy"
	]={__ename__: "de.innogames.common.assets.AssetCachePolicy",__constructs__: null,CHECKSUM_LIST: {_hx_name: "CHECKSUM_LIST",_hx_index: 0,__enum__: "de.innogames.common.assets.AssetCachePolicy",toString:N
		},BROWSER: {_hx_name: "BROWSER",_hx_index: 1,__enum__: "de.innogames.common.assets.AssetCachePolicy",
toString:N
		}
	};te.__constructs__=[te.CHECKSUM_LIST,te.BROWSER
	];te.__empty_constructs__=[te.CHECKSUM_LIST,te.BROWSER
	];var p7=function(a){this._breadcrumbReporter=a;this._loaders=new x;this._queue=[];this._numConnections=0;this._maxConnections=10
	};h[
		"de.innogames.common.assets.AssetLoadingManager"
	]=p7;p7.__name__="de.innogames.common.assets.AssetLoadingManager";p7.prototype={load:function(a,b,c,d,e){var g=this._loaders.h[a
			];null==g&&(g=this._loaders,d=new Kcb(a,b,d,e,this),g=g.h[a
			]=d,this._breadcrumbReporter.addBreadcrumb("Assets",
			"Asset load: "+a+" (priority="+fa.string(b)+")",
			"log"));g.storeMode=c;return Qe.ofSpecific(g.promise)
		},disposeAsset:function(a){var b=this._loaders.h[a
			];if(null!=b){b.dispose();var c=this._loaders;Object.prototype.hasOwnProperty.call(c.h,a)&&delete c.h[a
				];Wa.remove(this._queue,b)
			}
		},cleanGarbage:function(){for(var a=new xS(this._loaders.h);a.hasNext();){var b=a.next();b.value.storeMode==Zk.Temporary&&this.disposeAsset(b.key)
			}
		},_enqueue:function(a){if(a.priority==Sc.LOW)this._queue.push(a);else{for(var b=
this._queue.length,c=0;c<b;){var d=this._queue[c
					].priority;if(d==Sc.HIGH||d==Sc.NORMAL&&a.priority==Sc.NORMAL)++c;else break
				}this._queue.splice(c,
				0,a)
			}
		},_processQueue:function(){if(this._numConnections<this._maxConnections){var a=this._queue.shift();null!=a&&a.load()
			}
		},_decreaseMaxConnections:function(){
			1<this._maxConnections&&(this._maxConnections=Math.max(1,this._maxConnections/2)|0)
		},_increaseMaxConnections:function(){
			10>this._maxConnections&&(this._maxConnections=Math.min(10,
			2*this._maxConnections)|
0)
		},__class__:p7
	};var at=function(){};h[
		"tink.core.LinkObject"
	]=at;at.__name__="tink.core.LinkObject";at.__isInterface__=!0;at.prototype={__class__:at
	};var Kcb=function(a,b,c,d,e){var g=this;this._id=a;this.priority=b;this._load=c;this._dispose=d;this._manager=e;this.promise=new Kc(function(k){g._trigger=k;g.priority!=Sc.UNQUEUED&&g._manager._numConnections>=g._manager._maxConnections?g._manager._enqueue(g):g.load();return g
		})
	};h[
		"de.innogames.common.assets._AssetLoadingManager.AssetLoader"
	]=Kcb;
Kcb.__name__="de.innogames.common.assets._AssetLoadingManager.AssetLoader";Kcb.__interfaces__=[at
	];Kcb.prototype={load:function(){var a=this;this.priority!=Sc.UNQUEUED&&this._manager._numConnections++;var b=0,c=null;c=function(){a._loadingLink=a._load(function(d){switch(d._hx_index){case 0:if(a.priority!=Sc.UNQUEUED){var e=a._manager;e._numConnections--
						}a._loadingLink=null;if(a.storeMode==Zk.NoStore){e=a._manager._loaders;var g=a._id;Object.prototype.hasOwnProperty.call(e.h,g)&&delete e.h[g
							]
						}else a._content=
d.data;a._trigger(d);a.priority!=Sc.UNQUEUED&&(a._manager._increaseMaxConnections(),a._manager._processQueue());break;case 1: 3>b?(b+=1,a.priority!=Sc.UNQUEUED&&a._manager._decreaseMaxConnections(),c()):(a.priority!=Sc.UNQUEUED&&(e=a._manager,e._numConnections--),a._loadingLink=null,e=a._manager._loaders,g=a._id,Object.prototype.hasOwnProperty.call(e.h,g)&&delete e.h[g
						],a._trigger(d),a.priority!=Sc.UNQUEUED&&a._manager._processQueue())
					}
				})
			};c()
		},cancel:function(){Wa.remove(this._manager._queue,this);
this._cancelLoading()
		},dispose:function(){this._cancelLoading();null!=this._content&&(null!=this._dispose&&this._dispose(this._content),this._content=null)
		},_cancelLoading:function(){var a=this._loadingLink;this._loadingLink=null;null!=a&&(this.priority!=Sc.UNQUEUED&&this._manager._numConnections--,null!=a&&a.cancel())
		},isQueued:function(){return this.priority!=Sc.UNQUEUED
		},__class__:Kcb
	};var Sc=Ea[
		"de.innogames.common.assets.AssetLoadingPriority"
	]={__ename__: "de.innogames.common.assets.AssetLoadingPriority",
__constructs__: null,HIGH: {_hx_name: "HIGH",_hx_index: 0,__enum__: "de.innogames.common.assets.AssetLoadingPriority",toString:N
		},NORMAL: {_hx_name: "NORMAL",_hx_index: 1,__enum__: "de.innogames.common.assets.AssetLoadingPriority",toString:N
		},LOW: {_hx_name: "LOW",_hx_index: 2,__enum__: "de.innogames.common.assets.AssetLoadingPriority",toString:N
		},UNQUEUED: {_hx_name: "UNQUEUED",_hx_index: 3,__enum__: "de.innogames.common.assets.AssetLoadingPriority",toString:N
		}
	};Sc.__constructs__=[Sc.HIGH,Sc.NORMAL,Sc.LOW,Sc.UNQUEUED
	];
Sc.__empty_constructs__=[Sc.HIGH,Sc.NORMAL,Sc.LOW,Sc.UNQUEUED
	];var Va=function(a,b,c){Va.instance=this;this._loadingManager=a;this._urlBuilder=b;this._urlLoader=new HHb(a,b,c);this._imageLibraryLoader=new IHb(this._loadingManager,this._urlLoader)
	};h[
		"de.innogames.common.assets.AssetManager"
	]=Va;Va.__name__="de.innogames.common.assets.AssetManager";Va.prototype={loadText:function(a,b,c,d){null==d&&(d=Zk.Permanent);null==c&&(c=te.CHECKSUM_LIST);null==b&&(b=Sc.NORMAL);return this._urlLoader.loadText(a,
b,c,d)
		},loadBytes:function(a,b,c,d){null==d&&(d=Zk.Permanent);null==c&&(c=te.CHECKSUM_LIST);null==b&&(b=Sc.NORMAL);return this._urlLoader.loadBytes(a,b,c,d)
		},loadImage:function(a,b,c,d){null==d&&(d=Zk.Permanent);null==c&&(c=te.CHECKSUM_LIST);null==b&&(b=Sc.NORMAL);return this._urlLoader.loadImage(a,b,c,d)
		},loadImageLibrary:function(a,b,c){null==c&&(c=Zk.Permanent);null==b&&(b=Sc.NORMAL);return this._imageLibraryLoader.load(a,b,c)
		},unload:function(a){this._loadingManager.disposeAsset(a)
		},unloadUrl:function(a){this.unload(this._urlBuilder.buildAbsoluteUrl(a))
		},
cleanGarbage:function(){this._loadingManager.cleanGarbage()
		},getAbsoluteUrl:function(a,b){a=this._urlBuilder.buildAbsoluteUrl(a);b==te.CHECKSUM_LIST&&(a=this._urlBuilder.applyCacheBreaker(a));return a
		},__class__:Va
	};var Zk=Ea[
		"de.innogames.common.assets.AssetStoreMode"
	]={__ename__: "de.innogames.common.assets.AssetStoreMode",__constructs__: null,NoStore: {_hx_name: "NoStore",_hx_index: 0,__enum__: "de.innogames.common.assets.AssetStoreMode",toString:N
		},Permanent: {_hx_name: "Permanent",_hx_index: 1,__enum__: "de.innogames.common.assets.AssetStoreMode",
toString:N
		},Temporary: {_hx_name: "Temporary",_hx_index: 2,__enum__: "de.innogames.common.assets.AssetStoreMode",toString:N
		}
	};Zk.__constructs__=[Zk.NoStore,Zk.Permanent,Zk.Temporary
	];Zk.__empty_constructs__=[Zk.NoStore,Zk.Permanent,Zk.Temporary
	];var JHb=function(a,b){
		"/"!=a.charAt(a.length-1)&&(a+="/");this._baseUrl=a;this._assetRoot=a+"assets";this._antiCacheSuffix=fa.string((new Date).getTime());this._checksums=b
	};h[
		"de.innogames.common.assets.AssetUrlBuilder"
	]=JHb;JHb.__name__="de.innogames.common.assets.AssetUrlBuilder";
JHb.prototype={buildAbsoluteUrl:function(a){if(null==a||""==a)throw new ba("Specified url is null or empty");""!=this._baseUrl&&-1==a.indexOf("http://")&&-1==a.indexOf("https://")&&("/"==a.charAt(0)&&(a=a.substring(1)),a=this._baseUrl+a);return a
		},applyCacheBreaker:function(a){var b=rc.replace(a,this._assetRoot,
			"");b=this._checksums[b
			];return null!=b?this._applyUrlChecksum(a,b):this._applyUrlSuffix(a,this._antiCacheSuffix)
		},_applyUrlChecksum:function(a,b){var c=a.lastIndexOf(".");return-1==c?a+"-"+
b:a.substring(0,c)+"-"+b+a.substring(c)
		},_applyUrlSuffix:function(a,b){return a+(-1!=a.indexOf("?")?"&": "?")+b
		},__class__:JHb
	};var HHb=function(a,b,c){this._loader=a;this._urlBuilder=b;this._enableCORSHeaders=c
	};h[
		"de.innogames.common.assets.AssetUrlLoader"
	]=HHb;HHb.__name__="de.innogames.common.assets.AssetUrlLoader";HHb.prototype={loadText:function(a,b,c,d){return this._loadUrl(a,b,c,d,JSb,null)
		},loadBytes:function(a,b,c,d){return this._loadUrl(a,b,c,d,ISb,null)
		},loadImage:function(a,b,c,d){return this._loadUrl(a,
b,c,d,HSb,function(e){e.dispose()
			})
		},_loadUrl:function(a,b,c,d,e,g){var k=this;a=this._urlBuilder.buildAbsoluteUrl(a);return this._loader.load(a,b,d,function(t){var u=new kn(c==te.CHECKSUM_LIST?k._urlBuilder.applyCacheBreaker(a):a);u.manageCookies=k._enableCORSHeaders;return e(u,t)
			},g)
		},__class__:HHb
	};var Lcb=function(){};h[
		"de.innogames.common.assets.atlasformat.IAtlasData"
	]=Lcb;Lcb.__name__="de.innogames.common.assets.atlasformat.IAtlasData";Lcb.__isInterface__=!0;Lcb.prototype={__class__:Lcb
	};
var Mcb=function(){};h[
		"de.innogames.common.assets.atlasformat.ISpriteData"
	]=Mcb;Mcb.__name__="de.innogames.common.assets.atlasformat.ISpriteData";Mcb.__isInterface__=!0;Mcb.prototype={__class__:Mcb,__properties__: {get_name: "get_name",get_rotated: "get_rotated"
		}
	};var JWa=function(){this._spriteData=[]
	};h[
		"de.innogames.common.assets.atlasformat.starling.StarlingAtlasData"
	]=JWa;JWa.__name__="de.innogames.common.assets.atlasformat.starling.StarlingAtlasData";JWa.__interfaces__=[Lcb
	];JWa.prototype={getSpriteData:function(){return this._spriteData
		},
_addSprite:function(a,b,c,d){a=rc.replace(a,
			"\\",
			"_");this._spriteData.push(new Ncb(a,b,c,d))
		},__class__:JWa
	};var Ocb=function(a){this._spriteData=[];gRb(a,m(this,this._addSprite))
	};h[
		"de.innogames.common.assets.atlasformat.starling.StarlingAtlasJsonData"
	]=Ocb;Ocb.__name__="de.innogames.common.assets.atlasformat.starling.StarlingAtlasJsonData";Ocb.__super__=JWa;Ocb.prototype=l(JWa.prototype,
	{__class__:Ocb
	});var Ncb=function(a,b,c,d){null==d&&(d=!1);this._name=a;this._region=b;this._frame=c;this._rotated=
d
	};h[
		"de.innogames.common.assets.atlasformat.starling.StarlingSpriteData"
	]=Ncb;Ncb.__name__="de.innogames.common.assets.atlasformat.starling.StarlingSpriteData";Ncb.__interfaces__=[Mcb
	];Ncb.prototype={get_name:function(){return this._name
		},get_rotated:function(){return this._rotated
		},getRegion:function(){return this._region
		},getFrame:function(){return this._frame
		},__class__:Ncb,__properties__: {get_rotated: "get_rotated",get_name: "get_name"
		}
	};var q7=function(a){this._libraryId=a
	};h[
		"de.innogames.common.assets.lib.ImageLibrary"
	]=
q7;q7.__name__="de.innogames.common.assets.lib.ImageLibrary";q7.prototype={getImage:function(a){a=this.getSprite(a);return null!=a?a.get_bitmapData(): null
		},__class__:q7
	};var Pcb=function(a,b){this._libraryId=a;this._atlases=b
	};h[
		"de.innogames.common.assets.lib.LoadedImageLibrary"
	]=Pcb;Pcb.__name__="de.innogames.common.assets.lib.LoadedImageLibrary";Pcb.__super__=q7;Pcb.prototype=l(q7.prototype,
	{hasImage:function(a){return null!=this._getSprite(a)
		},getSprite:function(a){var b=this._getSprite(a);return null==
b?(null!=y._reportError&&y._reportError(Error("[LOGGER] MISSING_ASSET: Failed to get image `"+(a+"` from asset library `"+this._libraryId+"`"))),eN.dummySprite):b
		},_dispose:function(){for(var a=0,b=this._atlases;a<b.length;)b[a++
			].dispose();this._atlases.length=0;null!=this._textureAtlas&&(this._textureAtlas.dispose(),this._textureAtlas=null)
		},getStarlingAtlas:function(){if(1!=this._atlases.length)throw ba.thrown(new wb("TextureAtlas can be only created for BitmapDataAtlasLibraries containing exactly one atlas!"));
null==this._textureAtlas&&(this._textureAtlas=this._atlases[
				0
			].toStarlingAtlas());return this._textureAtlas
		},getStarlingAtlasByIndex:function(a){return 0>a||a>=this._atlases.length?this._atlases[
				0
			].toStarlingAtlas():this._atlases[a
			].toStarlingAtlas()
		},getNames:function(a){null==a&&(a="");for(var b=[],c=0,d=this._atlases;c<d.length;)b=b.concat(d[c++
			].getNames(a));return b
		},_getSprite:function(a){for(var b=0,c=this._atlases;b<c.length;){var d=c[b++
				].getBitmapDataSprite(a);if(null!=d)return d
			}return null
		},
__class__:Pcb
	});var pb=function(a,b,c,d){null==d&&(d=-1);null==c&&(c=!0);this.__textureVersion=-1;this.__pixelRatio=1;this.transparent=c;0>a&&(a=0);0>b&&(b=0);this.width=a;this.height=b;this.rect=new Z(0,
		0,a,b);this.__lock=0;0<a&&0<b&&(c?0==(d&-16777216)&&(d=0):d=-16777216|d&16777215,this.__image=new sf(null,a,b,d<<8|d>>>24&255),this.__image.set_transparent(c),this.readable=this.__isValid=!0);this.__ownsTexture=!1
	};h[
		"openfl.display.BitmapData"
	]=pb;pb.__name__="openfl.display.BitmapData";pb.__interfaces__=
[AWa
	];pb.fromBase64=function(a,b){var c=new pb(0,
		0,!0,
		0);c.__fromImage(sf.fromBase64(a,b));return c
	};pb.fromBytes=function(a,b){var c=new pb(0,
		0,!0,
		0);c.__fromImage(sf.fromBytes(Xh.toBytes(a)));null!=b&&c.__applyAlpha(b);return c
	};pb.fromCanvas=function(a,b){null==b&&(b=!0);if(null==a)return null;var c=new pb(0,
		0,b,
		0);a=sf.fromCanvas(a);a.set_transparent(b);c.__fromImage(a);return c
	};pb.fromFile=function(a){var b=new pb(0,
		0,!0,
		0);b.__fromFile(a);return b
	};pb.fromImage=function(a,b){null==b&&(b=!0);
if(null==a||null==a.buffer)return null;a.set_transparent(b);b=new pb(0,
		0,b,
		0);b.__fromImage(a);return b
	};pb.fromTexture=function(a){if(null==a)return null;var b=new pb(a.__width,a.__height,!0,
		0);b.readable=!1;b.__textureData=a.__textureData;b.__textureContext=a.__textureContext;b.__image=null;return b
	};pb.loadFromBase64=function(a,b){return sf.loadFromBase64(a,b).then(function(c){return wq.withValue(pb.fromImage(c))
		})
	};pb.loadFromBytes=function(a,b){return sf.loadFromBytes(Xh.toBytes(a)).then(function(c){c=
pb.fromImage(c);null!=b&&c.__applyAlpha(b);return wq.withValue(c)
		})
	};pb.loadFromFile=function(a){return sf.loadFromFile(a).then(function(b){return wq.withValue(pb.fromImage(b))
		})
	};pb.prototype={applyFilter:function(a,b,c,d){this.readable&&null!=a&&a.readable&&(d.__applyFilter(this,a,b,c),
			0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2)
		},clone:function(){if(!this.__isValid)return new pb(this.width,this.height,this.transparent,
			0);var a=this.__getImage();if(this.readable||null!=a)return pb.fromImage(a.clone(),
this.transparent);a=new pb(0,
			0,this.transparent,
			0);a.width=this.width;a.height=this.height;a.rect.copyFrom(this.rect);a.__textureData=this.__textureData;a.__textureContext=this.__textureContext;a.__isValid=!0;return a
		},colorTransform:function(a,b){this.readable&&(this.__getImage().colorTransform(a.__toLimeRectangle(),b.__toLimeColorMatrix()),
			0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2)
		},__markUsersRenderDirty:function(){
			0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2
		},
__doMarkUsersRenderDirty:function(){for(var a=this.__usersHead;null!=a;){a.__batchQuadDirty=!0;if(!a.__renderDirty)if(a.__renderDirty=!0,null!=a.__maskTarget){var b=a.__maskTarget;b.__renderDirty||(b.__renderDirty=!0,null!=b.__maskTarget?b.__maskTarget.__setRenderDirty():b.__setParentRenderDirty());b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())
				}else a.__setParentRenderDirty();a.__updateDirty||(a.__updateDirty=!0,a.__setParentUpdateTraverse());a=a.__bitmapDataUserNext
			}
		},compare:function(a){if(a==
this)return 0;if(null==a)return-1;if(0==this.readable||0==a.readable)return-2;if(this.width!=a.width)return-3;if(this.height!=a.height)return-4;var b=this.__getImage(),c=a.__getImage();if(null!=b&&null!=c&&b.get_format()==c.get_format()){var d=b.get_data(),e=c.get_data(),g=!0;c=0;for(b=d.length;c<b;){var k=c++;if(d[k
					]!=e[k
					]){g=!1;break
					}
				}if(g)return 0
			}d=null;c=0;for(b=this.height;c<b;){k=c++;for(var t=0,u=this.width;t<u;){var A=t++;e=!1;var z=this.getPixel32(A,k);var J=a.getPixel32(A,k);g=0;if(z!=
J){var T=(z>>>16&255)-(J>>>16&255);var W=(z>>>8&255)-(J>>>8&255);var X=(z&255)-(J&255);0>T&&(T*=-1);0>W&&(W*=-1);0>X&&(X*=-1);0==T&&0==W&&0==X?(z=(z>>>24&255)-(J>>>24&255),
						0!=z&&(g=(z&255)<<24|16777215,e=!0)):(g=(T&255)<<16|0,g=(g>>>24&255)<<24|(g>>>16&255)<<16|(W&255)<<8|g&255,g=(g>>>24&255)<<24|(g>>>16&255)<<16|(g>>>8&255)<<8|X&255,g=-16777216|(g>>>16&255)<<16|(g>>>8&255)<<8|g&255,e=!0)
					}e&&(null==d&&(d=new pb(this.width,this.height,this.transparent||a.transparent,
					0)),d.__getImage().setPixel32(A,
k,g,
					1))
				}
			}return null==d?0:d
		},copyChannel:function(a,b,c,d,e){if(this.readable){switch(d){case 1:d=Nr.RED;break;case 2:d=Nr.GREEN;break;case 4:d=Nr.BLUE;break;case 8:d=Nr.ALPHA;break;default:return
				}switch(e){case 1:e=Nr.RED;break;case 2:e=Nr.GREEN;break;case 4:e=Nr.BLUE;break;case 8:e=Nr.ALPHA;break;default:return
				}this.__getImage().copyChannel(a.__getImage(),b.__toLimeRectangle(),c,d,e);0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2
			}
		},copyPixels:function(a,b,c,d,e,g){null==g&&(g=!1);
this.readable&&null!=a&&(a=a.__getImage(),null!=a&&(this.__getImage().copyPixels(a,b.__toLimeRectangle(),c.__toTempCopy(),null!=d?d.__getImage(): null,e,g),
			0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2))
		},dispose:function(){this.__cleanup();this.__image=null;this.height=this.width=0;this.rect=null;this.readable=this.__isValid=!1;for(var a=this.__usersHead;null!=a;){var b=a.__bitmapDataUserNext;a.__bitmapDataUserPrev=a.__bitmapDataUserNext=null;a=b
			}this.__usersHead=this.__usersTail=null;
null!=this.__buffer&&(this.__bufferContext.isBuffer(this.__buffer)&&this.__bufferContext.deleteBuffer(this.__buffer),this.__bufferContext=this.__buffer=null);this.__ownsTexture&&(this.__ownsTexture=!1,this.__textureContext.deleteTexture(this.__textureData.glTexture),this.__textureContext=this.__textureData=null)
		},disposeImage:function(){this.readable=!1
		},draw:function(a,b,c,d,e,g){null==g&&(g=!1);null==b&&(b=new Eb,null!=a.__transform&&(b.copyFrom(a.__transform),b.tx=0,b.ty=0));if(null!=c&&!c.__isDefault()){var k=
Z.__pool.get(),t=Eb.__pool.get();a.__getBounds(k,t);var u=new pb(Math.ceil(k.width),Math.ceil(k.height),!0,
				0);u.__pixelRatio=this.__pixelRatio;u.draw(a);u.colorTransform(u.rect,c);a=u;Z.__pool.release(k);Eb.__pool.release(t)
			}null==d&&(d=10);c=qb.get_current().stage.__renderer;this.getTexture(c.gl);k=this.width;t=this.height;var A=this.__textureData.glTexture,z=this.__pixelRatio;u=c.renderSession;u.batcher.flush();var J=c.displayMatrix,T=c.projectionFlipped,W=u.batcher.projectionMatrix,X=c.height,
da=u.pixelRatio,pa=u.allowSmoothing,na=u.clearRenderDirty,wa=u.blendModeManager.currentBlendMode,Ca=u.shaderManager.currentShader,Fa=u.maskManager.suspend(),sb=c._viewportX,ib=c._viewportY,Db=c._viewportWidth,zb=c._viewportHeight,Cb=c._currentFramebuffer,Wb=c.renderToTexture,uc=c.gl.isEnabled(2960);uc&&c.gl.disable(2960);var ec=Z.__pool.get();ec.copyFrom(u.batcher.viewport);u.pixelRatio=z;Mz.renderToTextureDisplayMatrix.a=Mz.renderToTextureDisplayMatrix.d=z;c.displayMatrix=Mz.renderToTextureDisplayMatrix;
c.renderToTexture=!0;c.projectionFlipped=Id.createOrtho(0,k,
			0,t,
			-1E3,
			1E3);c.height=t;u.batcher.projectionMatrix=c.projectionFlipped;c._setViewport(0,
			0,k,t);z=c.gl.createFramebuffer();c._bindFramebuffer(z);c.gl.framebufferTexture2D(36160,
			36064,
			3553,A,
			0);A=c.gl.createRenderbuffer();c.gl.bindRenderbuffer(36161,A);c.gl.renderbufferStorage(36161,
			34041,k,t);c.gl.framebufferRenderbuffer(36160,
			33306,
			36161,A);c.gl.bindRenderbuffer(36161,null);u.allowSmoothing=g;u.clearRenderDirty=!1;null!=e&&u.maskManager.pushRect(e,
Eb.__identity);a.__renderToBitmap(u,b,d,!0);null!=e&&u.maskManager.popRect();u.batcher.flush();this.__textureVersion=this.__image.version+1;c._setViewport(sb,ib,Db,zb);c.projectionFlipped=T;c.height=X;c.renderToTexture=Wb;c.displayMatrix=J;u.pixelRatio=da;u.allowSmoothing=pa;u.clearRenderDirty=na;u.batcher.projectionMatrix=W;u.batcher.viewport.setTo(ec.x,ec.y,ec.width,ec.height);Z.__pool.release(ec);u.blendModeManager.setBlendMode(wa);u.shaderManager.setShader(Ca);u.maskManager.resume(Fa);uc&&c.gl.enable(2960);
c._bindFramebuffer(Cb);c.gl.deleteFramebuffer(z);c.gl.deleteRenderbuffer(A);0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2
		},drawWithQuality:function(a,b,c,d,e,g,k){null==g&&(g=!1);this.draw(a,b,c,d,e,
			2!=k&&g)
		},encode:function(a,b,c){if(!this.readable||null==a)return null;null==c&&(c=new xl(0));var d=this.__getImage();if(!a.equals(this.rect)){var e=Eb.__pool.get();e.tx=Math.round(-a.x);e.ty=Math.round(-a.y);a=new pb(Math.ceil(a.width),Math.ceil(a.height),!0,
				0);a.draw(this,e);d=a.__getImage();
Eb.__pool.release(e)
			}return b instanceof KHb?(c.writeBytes(Xh.fromBytes(d.encode("png"))),c):b instanceof Qcb?(c.writeBytes(Xh.fromBytes(d.encode("jpg",K.__cast(b,Qcb).quality))),c): null
		},fillRect:function(a,b){null!=a&&(this.transparent&&0==(b&-16777216)&&(b=0),this.readable&&(this.__getImage().fillRect(a.__toLimeRectangle(),b,
			1),
			0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2))
		},floodFill:function(a,b,c){this.readable&&(this.__getImage().floodFill(a,b,c,
			1),
			0==this.__lock?this.__doMarkUsersRenderDirty():
this.__lock=2)
		},generateFilterRect:function(a,b){a=a.clone();a.x-=b.__leftExtension;a.y-=b.__topExtension;a.width+=b.__leftExtension+b.__rightExtension;a.height+=b.__topExtension+b.__bottomExtension;return a
		},isBufferDirty:function(a,b,c){return null==this.__buffer||this.__bufferContext!=a||this.__bufferAlpha!=b||null==this.__bufferColorTransform&&null!=c?!0:null!=this.__bufferColorTransform?!this.__bufferColorTransform.__equals(c):!1
		},getBuffer:function(a,b,c){if(null==this.__buffer||this.__bufferContext!=
a){this.__bufferData=new Float32Array(104);var d=this.width/this.__pixelRatio,e=this.height/this.__pixelRatio;this.__bufferData[
					0
				]=d;this.__bufferData[
					1
				]=e;this.__bufferData[
					3
				]=1;this.__bufferData[
					4
				]=1;this.__bufferData[
					27
				]=e;this.__bufferData[
					30
				]=1;this.__bufferData[
					52
				]=d;this.__bufferData[
					55
				]=1;for(d=0;4>d;)e=d++,this.__bufferData[
					26*e+5
				]=b,null!=c?(this.__bufferData[
					26*e+6
				]=c.redMultiplier,this.__bufferData[
					26*e+11
				]=c.greenMultiplier,this.__bufferData[
					26*e+16
				]=c.blueMultiplier,this.__bufferData[
					26*
e+21
				]=c.alphaMultiplier,this.__bufferData[
					26*e+22
				]=c.redOffset/255,this.__bufferData[
					26*e+23
				]=c.greenOffset/255,this.__bufferData[
					26*e+24
				]=c.blueOffset/255,this.__bufferData[
					26*e+25
				]=c.alphaOffset/255):(this.__bufferData[
					26*e+6
				]=1,this.__bufferData[
					26*e+11
				]=1,this.__bufferData[
					26*e+16
				]=1,this.__bufferData[
					26*e+21
				]=1);this.__bufferAlpha=b;this.__bufferColorTransform=null!=c?c.__clone():null;this.__bufferContext=a;this.__buffer=a.createBuffer();a.bindBuffer(34962,this.__buffer);a.bufferData(34962,this.__bufferData,
				35044)
			}else{var g=!1;this.__bufferAlpha!=b&&(g=!0,this.__bufferData[
					5
				]=b,this.__bufferData[
					31
				]=b,this.__bufferData[
					57
				]=b,this.__bufferAlpha=this.__bufferData[
					83
				]=b);if(null==this.__bufferColorTransform&&null!=c||null!=this.__bufferColorTransform&&!this.__bufferColorTransform.__equals(c))if(g=!0,null!=c)for(null==this.__bufferColorTransform?this.__bufferColorTransform=c.__clone():this.__bufferColorTransform.__copyFrom(c),d=0;4>d;)e=d++,this.__bufferData[
					26*e+6
				]=c.redMultiplier,this.__bufferData[
					26*
e+11
				]=c.greenMultiplier,this.__bufferData[
					26*e+16
				]=c.blueMultiplier,this.__bufferData[
					26*e+21
				]=c.alphaMultiplier,this.__bufferData[
					26*e+22
				]=c.redOffset/255,this.__bufferData[
					26*e+23
				]=c.greenOffset/255,this.__bufferData[
					26*e+24
				]=c.blueOffset/255,this.__bufferData[
					26*e+25
				]=c.alphaOffset/255;else for(d=0;4>d;)e=d++,this.__bufferData[
					26*e+6
				]=1,this.__bufferData[
					26*e+11
				]=1,this.__bufferData[
					26*e+16
				]=1,this.__bufferData[
					26*e+21
				]=1,this.__bufferData[
					26*e+22
				]=0,this.__bufferData[
					26*e+23
				]=0,this.__bufferData[
					26*
e+24
				]=0,this.__bufferData[
					26*e+25
				]=0;a.bindBuffer(34962,this.__buffer);g&&a.bufferData(34962,this.__bufferData,
				35044)
			}return this.__buffer
		},__getTextureRegion:function(a,b,c,d,e){e.u0=a;e.v0=b;e.u1=c;e.v1=b;e.u2=c;e.v2=d;e.u3=a;e.v3=d
		},getColorBoundsRect:function(a,b,c){null==c&&(c=!0);if(!this.readable)return new Z(0,
			0,this.width,this.height);a=this.__getImage().getColorBoundsRect(a,b,c,
			1);return new Z(a.x,a.y,a.width,a.height)
		},getPixel:function(a,b){return this.readable?this.__getImage().getPixel(a,
b,
			1): 0
		},getPixel32:function(a,b){return this.readable?this.__getImage().getPixel32(a,b,
			1): 0
		},getPixels:function(a){if(!this.readable)return null;null==a&&(a=this.rect);a=Xh.fromBytes(this.__getImage().getPixels(a.__toLimeRectangle(),
			1));a.__endian=0;return a
		},__getImage:function(){var a=this.__image;if(null==a)return null;if(a.version<this.__textureVersion){var b=qb.get_current().stage.__renderer,c=this.getTexture(b.gl).data.glTexture,d=b._currentFramebuffer,e=b.gl.createFramebuffer();b._bindFramebuffer(e);
b.gl.framebufferTexture2D(36160,
				36064,
				3553,c,
				0);this.__readPixelsToImage(b.gl);b._bindFramebuffer(d);b.gl.deleteFramebuffer(e)
			}return a
		},getTexture:function(a){if(!this.__isValid)return null;if(null==this.__textureData||this.__textureContext!=a)this.__textureContext=a,this.__textureData=new Rcb(a.createTexture()),this.__quadTextureData=null,this.__ownsTexture=!0,a.bindTexture(3553,this.__textureData.glTexture),a.texParameteri(3553,
			10242,
			33071),a.texParameteri(3553,
			10243,
			33071),a.texParameteri(3553,
			10240,
			9728),a.texParameteri(3553,
			10241,
			9728),this.__textureVersion=-1;var b=this.__image;if(null!=b&&b.version>this.__textureVersion){var c;if(1==b.buffer.bitsPerPixel)var d=c=6406;else null==pb.__supportsBGRA&&(pb.__textureInternalFormat=6408,pb.__supportsBGRA=!1,pb.__textureFormat=6408),c=pb.__textureInternalFormat,d=pb.__textureFormat;a.bindTexture(3553,this.__textureData.glTexture);b.type==bm.DATA||b.get_premultiplied()?!b.get_premultiplied()&&b.get_transparent()&&a.pixelStorei(37441,
				1):a.pixelStorei(37441,
				1);pb.__supportsBGRA||0==b.get_format()||(b=b.clone(),b.set_format(0));b.type==bm.DATA?a.texImage2D(3553,
				0,c,b.buffer.width,b.buffer.height,
				0,d,
				5121,b.get_data()):a.texImage2D(3553,
				0,c,d,
				5121,b.get_src());a.bindTexture(3553,null);this.__textureVersion=b.version
			}this.readable||null==this.__image||(this.__image=null);null==this.__quadTextureData&&(this.__quadTextureData=this.__prepareQuadTextureData(this.__textureData));return this.__quadTextureData
		},__prepareQuadTextureData:function(a){return new oC(a,
oC.fullFrameUVs,!0)
		},__fillBatchQuad:function(a,b){var c=this.width/this.__pixelRatio,d=this.height/this.__pixelRatio;b[
				0
			]=0*a.a+0*a.c+a.tx;b[
				1
			]=0*a.b+0*a.d+a.ty;b[
				2
			]=c*a.a+0*a.c+a.tx;b[
				3
			]=c*a.b+0*a.d+a.ty;b[
				4
			]=c*a.a+d*a.c+a.tx;b[
				5
			]=c*a.b+d*a.d+a.ty;b[
				6
			]=0*a.a+d*a.c+a.tx;b[
				7
			]=0*a.b+d*a.d+a.ty
		},__fillTransformedVertexCoords:function(a,b,c,d,e,g){e=c+e;g=d+g;b[
				0
			]=c*a.a+d*a.c+a.tx;b[
				1
			]=c*a.b+d*a.d+a.ty;b[
				2
			]=e*a.a+d*a.c+a.tx;b[
				3
			]=e*a.b+d*a.d+a.ty;b[
				4
			]=e*a.a+g*a.c+a.tx;b[
				5
			]=e*a.b+g*a.d+a.ty;b[
				6
			]=c*a.a+
g*a.c+a.tx;b[
				7
			]=c*a.b+g*a.d+a.ty
		},getVector:function(a){a=this.getPixels(a);for(var b=Xh.get_length(a)/4|0,c=Ub.toIntVector(null,b,!0),d=0;d<b;)c.set(d++,a.readUnsignedInt());return c
		},histogram:function(a){a=this.getPixels(null!=a?a:new Z(0,
			0,this.width,this.height));for(var b=[],c=[],d=0;256>d;)++d,c.push(0);b.push(c);c=[];for(d=0;256>d;)++d,c.push(0);b.push(c);c=[];for(d=0;256>d;)++d,c.push(0);b.push(c);c=[];for(d=0;256>d;)++d,c.push(0);b.push(c);c=0;for(d=Xh.get_length(a);c<d;){var e=b[c++%4
				],
g=a.readUnsignedByte();++e[g
				]
			}return b
		},hitTest:function(a,b,c,d,e){null==e&&(e=1);if(!this.readable)return!1;c instanceof B&&(c=K.__cast(c,B).__bitmapData);if(c instanceof p){e=c;c=e.x-a.x|0;var g=e.y-a.y|0;if(this.rect.contains(c,g)&&(this.getPixel32(c,g)>>24&255)>b)return!0
			}else if(c instanceof pb){var k=c;null==d?g=c=0:(c=d.x-a.x|0,g=d.y-a.y|0);if(this.rect.contains(c,g))for(d=Z.__pool.get(),d.setTo(c,g,Math.min(k.width,this.width-c),Math.min(k.height,this.height-g)),a=this.getPixels(d),d.offset(-c,
-g),k=k.getPixels(d),c=d.width*d.height|0,Z.__pool.release(d),g=0;g<c;){++g;d=a.readUnsignedInt();var t=k.readUnsignedInt();if((d>>24&255)>b&&(t>>24&255)>e)return!0
				}
			}else if(c instanceof Z){e=Z.__pool.get();e.copyFrom(c);e.offset(-a.x,-a.y);e.__contract(0,
				0,this.width,this.height);if(0<e.width&&0<e.height)for(a=this.getPixels(e),c=Xh.get_length(a)/4|0,g=0;g<c;)if(++g,d=a.readUnsignedInt(),(d>>24&255)>b)return Z.__pool.release(e),!0;Z.__pool.release(e)
			}return!1
		},lock:function(){
			0==this.__lock&&(this.__lock=
1)
		},merge:function(a,b,c,d,e,g,k){this.readable&&null!=a&&a.readable&&null!=b&&null!=c&&(this.__getImage().merge(a.__getImage(),b.__toLimeRectangle(),c,d,e,g,k),
			0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2)
		},noise:function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=7);null==c&&(c=255);null==b&&(b=0);if(this.readable){var g=function(){a=1103515245*a+12345;return(Math.abs(a/65536)|0)%32768
				};g();c-=b;new xl(0);var k=1==(d&1),t=1==(d&2)>>1,u=1==(d&4)>>2;d=1==(d&8)>>3;for(var A=this.__getImage(),
z=0,J=this.height;z<J;)for(var T=z++,W=0,X=this.width;W<X;){var da=W++,pa=0,na=0,wa=0,Ca=255;e?(pa=wa=na=b+g()%c,Ca=255):(k&&(pa=b+g()%c),t&&(wa=b+g()%c),u&&(na=b+g()%c),d&&(Ca=b+g()%c));Ca=(Ca<<8)+pa;Ca=(Ca<<8)+wa;Ca=(Ca<<8)+na;A.setPixel32(da,T,Ca,
					1)
				}0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2
			}
		},paletteMap:function(a,b,c,d,e,g,k){var t=b.width|0,u=b.height|0;a=a.getPixels(b);b=0;for(var A=u*t;b<A;){var z=b++;var J=a.readUnsignedInt();var T=null==k?J&-16777216:k[J>>24&255
				];var W=
null==d?J&16711680:d[J>>16&255
				];var X=null==e?J&65280:e[J>>8&255
				];J=null==g?J&255:g[J&255
				];W=T+W+X+J;a.position=4*z;a.writeUnsignedInt(W)
			}a.position=0;d=Z.__pool.get();d.setTo(c.x,c.y,t,u);this.setPixels(d,a);Z.__pool.release(d)
		},perlinNoise:function(a,b,c,d,e,g,k,t,u){this.readable&&((new KWa(d,c,.01)).fill(this,a,b,
			0),
			0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2)
		},scroll:function(a,b){this.readable&&(this.__getImage().scroll(a,b),
			0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=
2)
		},setPixel:function(a,b,c){this.readable&&(this.__getImage().setPixel(a,b,c,
			1),
			0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2)
		},setPixel32:function(a,b,c){this.readable&&(this.__getImage().setPixel32(a,b,c,
			1),
			0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2)
		},setPixels:function(a,b){if(this.readable&&null!=a){if(ya.toFloat(b.length-b.position)<a.width*a.height*4)throw ba.thrown(new wb("End of file was encountered.",
				2030));this.__getImage().setPixels(a.__toLimeRectangle(),
Xh.toBytes(b),b.position,
				1,b.__endian);0==this.__lock?this.__doMarkUsersRenderDirty():this.__lock=2
			}
		},setVector:function(a,b){var c=new xl(0);Xh.set_length(c,
			4*b.get_length());for(var d=0;d<b.get_length();)c.writeUnsignedInt(b.get(d++));c.position=0;this.setPixels(a,c)
		},threshold:function(a,b,c,d,e,g,k,t){null==t&&(t=!1);null==k&&(k=-1);null==g&&(g=0);return null==a||null==b||null==c||b.x>a.width||b.y>a.height||c.x>this.width||c.y>this.height?0:this.__getImage().threshold(a.__getImage(),b.__toLimeRectangle(),
c,d,e,g,k,t,
			1)
		},unlock:function(a){
			2==this.__lock&&this.__doMarkUsersRenderDirty();this.__lock=0
		},__applyAlpha:function(a){var b=this.__getImage();pe.convertToCanvas(b);pe.createImageData(b);for(var c=b.buffer.data,d=0,e=Xh.get_length(a);d<e;)c[
				4*d++ +3
			]=a.readUnsignedByte();b.version++
		},__cleanup:function(){null!=this.__vaoContext&&(null!=this.__vao&&(this.__vaoContext.deleteVertexArray(this.__vao),this.__vao=null),null!=this.__vaoMask&&(this.__vaoContext.deleteVertexArray(this.__vaoMask),this.__vaoMask=
null),this.__vaoContext=null)
		},__drawBitmapCache:function(a,b,c){var d=qb.get_current().stage.__renderer,e=d.gl,g=this.__image;this.__image=null;this.getTexture(e);this.__image=g;e.bindTexture(3553,this.__textureData.glTexture);e.texImage2D(3553,
			0,
			6408,this.width,this.height,
			0,
			6408,
			5121,null);e.bindTexture(3553,null);var k=this.width,t=this.height,u=this.__textureData.glTexture,A=this.__pixelRatio,z=d.renderSession;z.batcher.flush();var J=d.displayMatrix,T=d.projectionFlipped,W=z.batcher.projectionMatrix,
X=d.height,da=z.pixelRatio,pa=z.allowSmoothing,na=z.clearRenderDirty,wa=z.blendModeManager.currentBlendMode,Ca=z.shaderManager.currentShader,Fa=z.maskManager.suspend(),sb=d._viewportX,ib=d._viewportY,Db=d._viewportWidth,zb=d._viewportHeight,Cb=d._currentFramebuffer,Wb=d.renderToTexture,uc=d.gl.isEnabled(2960);uc&&d.gl.disable(2960);var ec=Z.__pool.get();ec.copyFrom(z.batcher.viewport);z.pixelRatio=A;Mz.renderToTextureDisplayMatrix.a=Mz.renderToTextureDisplayMatrix.d=A;d.displayMatrix=Mz.renderToTextureDisplayMatrix;
d.renderToTexture=!0;d.projectionFlipped=Id.createOrtho(0,k,
			0,t,
			-1E3,
			1E3);d.height=t;z.batcher.projectionMatrix=d.projectionFlipped;d._setViewport(0,
			0,k,t);A=d.gl.createFramebuffer();d._bindFramebuffer(A);d.gl.framebufferTexture2D(36160,
			36064,
			3553,u,
			0);u=d.gl.createRenderbuffer();d.gl.bindRenderbuffer(36161,u);d.gl.renderbufferStorage(36161,
			34041,k,t);d.gl.framebufferRenderbuffer(36160,
			33306,
			36161,u);d.gl.bindRenderbuffer(36161,null);a.__renderToBitmap(z,b,
			10,!1);z.batcher.flush();this.__textureVersion=
g.version+1;c&&this.__readPixelsToImage(e);d._setViewport(sb,ib,Db,zb);d.projectionFlipped=T;d.height=X;d.renderToTexture=Wb;d.displayMatrix=J;z.pixelRatio=da;z.allowSmoothing=pa;z.clearRenderDirty=na;z.batcher.projectionMatrix=W;z.batcher.viewport.setTo(ec.x,ec.y,ec.width,ec.height);Z.__pool.release(ec);z.blendModeManager.setBlendMode(wa);z.shaderManager.setShader(Ca);z.maskManager.resume(Fa);uc&&d.gl.enable(2960);d._bindFramebuffer(Cb);d.gl.deleteFramebuffer(A);d.gl.deleteRenderbuffer(u)
		},__readPixelsToImage:function(a){var b=
this.__image;b.type==bm.CANVAS&&(b.buffer.__srcCanvas=null,b.buffer.__srcContext=null,b.buffer.__srcImage=null,b.buffer.data=new Uint8Array(this.width*this.height*4),b.type=bm.DATA);a.pixelStorei(37441,
			0);a.readPixels(0,
			0,this.width,this.height,
			6408,
			5121,b.buffer.data,
			0);b.buffer.premultiplied=!0;b.version=this.__textureVersion;b.dirty=!0
		},__fromBase64:function(a,b){this.__fromImage(sf.fromBase64(a,b))
		},__fromBytes:function(a,b){this.__fromImage(sf.fromBytes(Xh.toBytes(a)));null!=b&&this.__applyAlpha(b)
		},
__fromFile:function(a){this.__fromImage(sf.fromFile(a))
		},__fromImage:function(a){null!=a&&null!=a.buffer&&(this.__image=a,this.width=a.width,this.height=a.height,this.rect=new Z(0,
			0,a.width,a.height),this.__isValid=this.readable=!0)
		},__getBounds:function(a,b){var c=jc.__tempBoundsRectangle;this.rect.__transform(c,b);a.__expand(c.x,c.y,c.width,c.height)
		},__loadFromBase64:function(a,b){var c=this;return sf.loadFromBase64(a,b).then(function(d){c.__fromImage(d);return wq.withValue(c)
			})
		},__loadFromBytes:function(a,
b){var c=this;return sf.loadFromBytes(Xh.toBytes(a)).then(function(d){c.__fromImage(d);null!=b&&c.__applyAlpha(b);return wq.withValue(c)
			})
		},__loadFromFile:function(a){var b=this;return sf.loadFromFile(a).then(function(c){b.__fromImage(c);return wq.withValue(b)
			})
		},__renderToBitmap:function(a,b,c,d){this.__isValid&&(d=pC.pool.get(),this.__fillBatchQuad(a.renderer.getDisplayTransformTempMatrix(b,a.roundPixels),d.vertexData),d.texture=this.getTexture(a.gl),b=ge.fromOpenFLBlendMode(c),d.alpha=1,d.colorTransform=
null,d.blendMode=b,d.smoothing=a.allowSmoothing,a.batcher.render(d),pC.pool.release(d))
		},__class__:pb
	};var sf=function(a,b,c,d,e){null==c&&(c=-1);null==b&&(b=-1);this.width=b;this.height=c;this.version=0;null==e&&(e=bm.CANVAS);this.type=e;if(null==a){if(0<b&&0<c)switch(this.type._hx_index){case 0:this.buffer=new nJ(null,b,c);pe.createCanvas(this,b,c);null!=d&&0!=d&&this.fillRect(new Dp(0,
				0,b,c),d);break;case 1:this.buffer=new nJ(new Uint8Array(b*c*4),b,c),null!=d&&0!=d&&this.fillRect(new Dp(0,
				0,b,
c),d)
			}
		}else this.__fromImageBuffer(a)
	};h[
		"lime.graphics.Image"
	]=sf;sf.__name__="lime.graphics.Image";sf.fromBase64=function(a,b){if(null==a)return null;var c=new sf;c.__fromBase64(a,b);return c
	};sf.fromBytes=function(a){if(null==a)return null;var b=new sf;b.__fromBytes(a);return b
	};sf.fromCanvas=function(a){if(null==a)return null;var b=new nJ(null,a.width,a.height);b.set_src(a);a=new sf(b);a.type=bm.CANVAS;return a
	};sf.fromFile=function(a){if(null==a)return null;var b=new sf;b.__fromFile(a);return b
	};
sf.fromImageElement=function(a){if(null==a)return null;var b=new nJ(null,a.width,a.height);b.set_src(a);a=new sf(b);a.type=bm.CANVAS;return a
	};sf.loadFromBase64=function(a,b){return null==a||null==b?wq.withValue(null):xe.loadImage("data:"+b+";base64,"+a)
	};sf.loadFromBytes=function(a){if(null==a)return wq.withValue(null);if(sf.__isPNG(a))var b="image/png";else if(sf.__isJPG(a))b="image/jpeg";else if(sf.__isGIF(a))b="image/gif";else if(sf.__isWebP(a))b="image/webp";else return wq.withValue(null);return sf.loadFromBase64(sf.__base64Encode(a),
b)
	};sf.loadFromFile=function(a){return null==a?wq.withValue(null):xe.loadImage(a)
	};sf.__base64Encode=function(a){switch(a.length%3){case 1:var b="==";break;case 2:b="=";break;default:b=""
		}null==sf.__base64Encoder&&(sf.__base64Encoder=new LWa(Df.ofString(sf.__base64Chars)));return sf.__base64Encoder.encodeBytes(a).toString()+b
	};sf.__isGIF=function(a){if(null==a||6>a.length)return!1;a=a.getString(0,
		6);return"GIF87a"!=a?"GIF89a"==a:!0
	};sf.__isJPG=function(a){return null==a||4>a.length?!1: 255==a.b[
			0
		]&&
216==a.b[
			1
		]&&255==a.b[a.length-2
		]?217==a.b[a.length-1
		]:!1
	};sf.__isPNG=function(a){return null==a||8>a.length?!1: 137==a.b[
			0
		]&&80==a.b[
			1
		]&&78==a.b[
			2
		]&&71==a.b[
			3
		]&&13==a.b[
			4
		]&&10==a.b[
			5
		]&&26==a.b[
			6
		]?10==a.b[
			7
		]:!1
	};sf.__isWebP=function(a){return null==a||16>a.length?!1: "RIFF"==a.getString(0,
		4)?"WEBP"==a.getString(8,
		4):!1
	};sf.prototype={clone:function(){if(null!=this.buffer){this.type==bm.CANVAS?pe.convertToCanvas(this):pe.convertToData(this);var a=new sf(this.buffer.clone(),this.width,this.height,
				null,
this.type);a.version=this.version;return a
			}return new sf(null,this.width,this.height,
			null,this.type)
		},colorTransform:function(a,b){a=this.__clipRect(a);null!=this.buffer&&null!=a&&(pe.convertToData(this),ye.colorTransform(this,a,b))
		},copyChannel:function(a,b,c,d,e){b=this.__clipRect(b);null==this.buffer||null==b||e==Nr.ALPHA&&!this.get_transparent()||0>=b.width||0>=b.height||(b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),pe.convertToData(this),pe.convertToData(a),
ye.copyChannel(this,a,b,c,d,e))
		},copyPixels:function(a,b,c,d,e,g){null==g&&(g=!1);if(null!=this.buffer&&null!=a&&!(0>=b.width||0>=b.height||0>=this.width||0>=this.height))switch(b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),
			0>b.x&&(b.width+=b.x,b.x=0),
			0>b.y&&(b.height+=b.y,b.y=0),c.x+b.width>this.width&&(b.width=this.width-c.x),c.y+b.height>this.height&&(b.height=this.height-c.y),
			0>c.x&&(b.width+=c.x,b.x-=c.x,c.x=0),
			0>c.y&&(b.height+=c.y,b.y-=c.y,c.y=0),
a==this&&c.x<b.get_right()&&c.y<b.get_bottom()&&(a=this.clone()),this.type._hx_index){case 0:null!=d||a.type!=bm.CANVAS?(pe.convertToData(this),pe.convertToData(a),null!=d&&pe.convertToData(d),ye.copyPixels(this,a,b,c,d,e,g)):(pe.convertToCanvas(this),pe.convertToCanvas(a),pe.copyPixels(this,a,b,c,d,e,g));break;case 1:pe.convertToData(this),pe.convertToData(a),null!=d&&pe.convertToData(d),ye.copyPixels(this,a,b,c,d,e,g)
			}
		},encode:function(a,b){null==b&&(b=90);null==a&&(a="png");switch(a){case "bmp":return vOb.encode(this);
case "jpeg":case "jpg":return wOb.encode(this,b);case "png":return xOb.encode(this)
			}return null
		},fillRect:function(a,b,c){a=this.__clipRect(a);if(null!=this.buffer&&null!=a)switch(this.type._hx_index){case 0:pe.fillRect(this,a,b,c);break;case 1:pe.convertToData(this),
				0!=this.buffer.data.length&&ye.fillRect(this,a,b,c)
			}
		},floodFill:function(a,b,c,d){null!=this.buffer&&(pe.convertToData(this),ye.floodFill(this,a,b,c,d))
		},getColorBoundsRect:function(a,b,c,d){null==c&&(c=!0);if(null==this.buffer)return null;
this.type==bm.CANVAS&&pe.convertToData(this);return ye.getColorBoundsRect(this,a,b,c,d)
		},getPixel:function(a,b,c){if(null==this.buffer||0>a||0>b||a>=this.width||b>=this.height)return 0;pe.convertToData(this);return ye.getPixel(this,a,b,c)
		},getPixel32:function(a,b,c){if(null==this.buffer||0>a||0>b||a>=this.width||b>=this.height)return 0;pe.convertToData(this);return ye.getPixel32(this,a,b,c)
		},getPixels:function(a,b){if(null==this.buffer)return null;pe.convertToData(this);return ye.getPixels(this,a,
b)
		},merge:function(a,b,c,d,e,g,k){null!=this.buffer&&null!=a&&(this.type==bm.CANVAS&&pe.convertToCanvas(this),pe.convertToData(this),pe.convertToData(a),ye.merge(this,a,b,c,d,e,g,k))
		},scroll:function(a,b){if(null!=this.buffer)switch(this.type._hx_index){case 0:pe.scroll(this,a,b);break;case 1:this.copyPixels(this,this.get_rect(),new p(a,b))
			}
		},setPixel:function(a,b,c,d){null==this.buffer||0>a||0>b||a>=this.width||b>=this.height||(pe.convertToData(this),ye.setPixel(this,a,b,c,d))
		},setPixel32:function(a,
b,c,d){null==this.buffer||0>a||0>b||a>=this.width||b>=this.height||(pe.convertToData(this),ye.setPixel32(this,a,b,c,d))
		},setPixels:function(a,b,c,d,e){a=this.__clipRect(a);null!=this.buffer&&null!=a&&(null==e&&(e=0),pe.convertToData(this),ye.setPixels(this,a,b,c,d,e))
		},threshold:function(a,b,c,d,e,g,k,t,u){null==t&&(t=!1);null==k&&(k=-1);null==g&&(g=0);if(null==this.buffer||null==a||null==b)return 0;pe.convertToData(this);pe.convertToData(a);return ye.threshold(this,a,b,c,d,e,g,k,t,u)
		},__clipRect:function(a){return null==
a||0>a.x&&(a.width-=-a.x,a.x=0,
			0>=a.x+a.width)||0>a.y&&(a.height-=-a.y,a.y=0,
			0>=a.y+a.height)||a.x+a.width>=this.width&&(a.width-=a.x+a.width-this.width,
			0>=a.width)||a.y+a.height>=this.height&&(a.height-=a.y+a.height-this.height,
			0>=a.height)?null:a
		},__fromBase64:function(a,b,c){var d=this,e=new Image;e.addEventListener("load",function(g){d.buffer=new nJ(null,e.width,e.height);d.buffer.__srcImage=e;d.width=d.buffer.width;d.height=d.buffer.height;null!=c&&c(d)
			},!1);e.src="data:"+b+";base64,"+a
		},__fromBytes:function(a,
b){if(sf.__isPNG(a))var c="image/png";else if(sf.__isJPG(a))c="image/jpeg";else if(sf.__isGIF(a))c="image/gif";else return;this.__fromBase64(sf.__base64Encode(a),c,b)
		},__fromFile:function(a,b,c){var d=this,e=new Image;xe.__isSameOrigin(a)||(e.crossOrigin="Anonymous");e.onload=function(g){d.buffer=new nJ(null,e.width,e.height);d.buffer.__srcImage=e;d.width=e.width;d.height=e.height;null!=b&&b(d)
			};e.onerror=function(g){null!=c&&c()
			};e.src=a
		},__fromImageBuffer:function(a){this.buffer=a;null!=a&&(-1==
this.width&&(this.width=a.width),
			-1==this.height&&(this.height=a.height))
		},get_data:function(){null==this.buffer.data&&0<this.buffer.width&&0<this.buffer.height&&pe.convertToData(this);return this.buffer.data
		},set_data:function(a){return this.buffer.data=a
		},get_format:function(){return this.buffer.format
		},set_format:function(a){this.buffer.format!=a&&1==this.type._hx_index&&ye.setFormat(this,a);return this.buffer.format=a
		},get_powerOfTwo:function(){return 0!=this.buffer.width&&(this.buffer.width&
~this.buffer.width+1)==this.buffer.width?0!=this.buffer.height?(this.buffer.height&~this.buffer.height+1)==this.buffer.height:!1:!1
		},set_powerOfTwo:function(a){if(a!=this.get_powerOfTwo()){for(var b=1,c=1;b<this.buffer.width;)b<<=1;for(;c<this.buffer.height;)c<<=1;switch(this.type._hx_index){case 1:ye.resizeBuffer(this,b,c)
				}
			}return a
		},get_premultiplied:function(){return this.buffer.premultiplied
		},set_premultiplied:function(a){if(a&&!this.buffer.premultiplied)pe.convertToData(this),ye.multiplyAlpha(this);
else if(!a&&this.buffer.premultiplied)switch(this.type._hx_index){case 1:pe.convertToData(this),ye.unmultiplyAlpha(this)
			}return a
		},get_rect:function(){return new Dp(0,
			0,this.width,this.height)
		},get_src:function(){return this.buffer.get_src()
		},set_src:function(a){return this.buffer.set_src(a)
		},get_transparent:function(){return null==this.buffer?!1:this.buffer.transparent
		},set_transparent:function(a){return null==this.buffer?!1:this.buffer.transparent=a
		},__class__:sf,__properties__: {set_transparent: "set_transparent",
get_transparent: "get_transparent",set_src: "set_src",get_src: "get_src",get_rect: "get_rect",set_premultiplied: "set_premultiplied",get_premultiplied: "get_premultiplied",set_powerOfTwo: "set_powerOfTwo",get_powerOfTwo: "get_powerOfTwo",set_format: "set_format",get_format: "get_format",set_data: "set_data",get_data: "get_data"
		}
	};var bm=Ea[
		"lime.graphics.ImageType"
	]={__ename__: "lime.graphics.ImageType",__constructs__: null,CANVAS: {_hx_name: "CANVAS",_hx_index: 0,__enum__: "lime.graphics.ImageType",toString:N
		},DATA: {_hx_name: "DATA",
_hx_index: 1,__enum__: "lime.graphics.ImageType",toString:N
		}
	};bm.__constructs__=[bm.CANVAS,bm.DATA
	];bm.__empty_constructs__=[bm.CANVAS,bm.DATA
	];var nJ=function(a,b,c,d,e){null==d&&(d=32);null==c&&(c=0);null==b&&(b=0);this.data=a;this.width=b;this.height=c;this.bitsPerPixel=d;this.format=null==e?0:e;this.premultiplied=!1;this.transparent=!0
	};h[
		"lime.graphics.ImageBuffer"
	]=nJ;nJ.__name__="lime.graphics.ImageBuffer";nJ.prototype={clone:function(){var a=new nJ(this.data,this.width,this.height,this.bitsPerPixel);
if(null!=this.data)a.data=new Uint8Array(this.data.byteLength),a.data.set(new Uint8Array(this.data));else if(null!=this.__srcImageData){a.__srcCanvas=window.document.createElement("canvas");a.__srcContext=a.__srcCanvas.getContext("2d");a.__srcCanvas.width=this.__srcImageData.width;a.__srcCanvas.height=this.__srcImageData.height;a.__srcImageData=a.__srcContext.createImageData(this.__srcImageData.width,this.__srcImageData.height);var b=new Uint8ClampedArray(this.__srcImageData.data);a.__srcImageData.data.set(b)
			}else null!=
this.__srcCanvas?(a.__srcCanvas=window.document.createElement("canvas"),a.__srcContext=a.__srcCanvas.getContext("2d"),a.__srcCanvas.width=this.__srcCanvas.width,a.__srcCanvas.height=this.__srcCanvas.height,a.__srcContext.drawImage(this.__srcCanvas,
			0,
			0)):a.__srcImage=this.__srcImage;a.bitsPerPixel=this.bitsPerPixel;a.format=this.format;a.premultiplied=this.premultiplied;a.transparent=this.transparent;return a
		},get_src:function(){return null!=this.__srcImage?this.__srcImage:this.__srcCanvas
		},set_src:function(a){a instanceof
Image?this.__srcImage=a:a instanceof HTMLCanvasElement&&(this.__srcCanvas=a,this.__srcContext=this.__srcCanvas.getContext("2d"));return a
		},get_stride:function(){return 4*this.width
		},__class__:nJ,__properties__: {get_stride: "get_stride",set_src: "set_src",get_src: "get_src"
		}
	};var pe=function(){};h[
		"lime.graphics.utils.ImageCanvasUtil"
	]=pe;pe.__name__="lime.graphics.utils.ImageCanvasUtil";pe.convertToCanvas=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage?(null==c.__srcCanvas&&(pe.createCanvas(a,
c.__srcImage.width,c.__srcImage.height),c.__srcContext.drawImage(c.__srcImage,
		0,
		0)),c.__srcImage=null):null==c.__srcCanvas&&null!=c.data?(a.set_transparent(!0),pe.createCanvas(a,c.width,c.height),pe.createImageData(a),c.__srcContext.putImageData(c.__srcImageData,
		0,
		0)):a.type==bm.DATA&&null!=c.__srcImageData&&a.dirty&&(c.__srcContext.putImageData(c.__srcImageData,
		0,
		0),a.dirty=!1);b?(c.data=null,c.__srcImageData=null):null==c.data&&null!=c.__srcImageData&&(c.data=c.__srcImageData.data);a.type=bm.CANVAS
	};
pe.convertToData=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage&&pe.convertToCanvas(a);null!=c.__srcCanvas&&null==c.data?(pe.createImageData(a),a.type==bm.CANVAS&&(a.dirty=!1)):a.type==bm.CANVAS&&null!=c.__srcCanvas&&a.dirty&&(null==c.__srcImageData?pe.createImageData(a):(c.__srcImageData=c.__srcContext.getImageData(0,
		0,c.width,c.height),c.data=new Uint8Array(c.__srcImageData.data.buffer)),a.dirty=!1);b&&(a.buffer.__srcCanvas=null,a.buffer.__srcContext=null);a.type=bm.DATA
	};pe.copyPixels=
function(a,b,c,d,e,g,k){null==k&&(k=!1);null==d||d.x>=a.width||d.y>=a.height||null==c||1>c.width||1>c.height||(null!=e&&e.get_transparent()&&(null==g&&(g=new p),b=a.clone(),b.copyChannel(e,new Dp(g.x,g.y,c.width,c.height),new p(c.x,c.y),Nr.ALPHA,Nr.ALPHA)),pe.convertToCanvas(a,!0),k||a.get_transparent()&&b.get_transparent()&&a.buffer.__srcContext.clearRect(d.x,d.y,c.width,c.height),pe.convertToCanvas(b),null!=b.buffer.get_src()&&(a.buffer.__srcContext.globalCompositeOperation="source-over",a.buffer.__srcContext.drawImage(b.buffer.get_src(),
c.x|0,c.y|0,c.width|0,c.height|0,d.x|0,d.y|0,c.width|0,c.height|0)),a.dirty=!0,a.version++)
	};pe.createCanvas=function(a,b,c){var d=a.buffer;null==d.__srcCanvas&&(d.__srcCanvas=window.document.createElement("canvas"),d.__srcCanvas.width=b,d.__srcCanvas.height=c,a.get_transparent()?d.__srcContext=d.__srcCanvas.getContext("2d"):(a.get_transparent()||d.__srcCanvas.setAttribute("moz-opaque",
		"true"),d.__srcContext=d.__srcCanvas.getContext("2d",
		{alpha:!1
		})),a=d.__srcContext,a.mozImageSmoothingEnabled=!1,
a.msImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1)
	};pe.createImageData=function(a){a=a.buffer;null==a.__srcImageData&&(null==a.data?a.__srcImageData=a.__srcContext.getImageData(0,
		0,a.width,a.height):(a.__srcImageData=a.__srcContext.createImageData(a.width,a.height),a.__srcImageData.data.set(a.data)),a.data=new Uint8Array(a.__srcImageData.data.buffer))
	};pe.fillRect=function(a,b,c,d){pe.convertToCanvas(a);if(1==d){d=c>>16&255;var e=c>>8&255;var g=c&255;c=a.get_transparent()?c>>24&255: 255
		}else d=
c>>24&255,e=c>>16&255,g=c>>8&255,c=a.get_transparent()?c&255: 255;0==b.x&&0==b.y&&b.width==a.width&&b.height==a.height&&a.get_transparent()&&0==c?a.buffer.__srcCanvas.width=a.buffer.width:(255>c&&a.buffer.__srcContext.clearRect(b.x,b.y,b.width,b.height),
		0<c&&(a.buffer.__srcContext.fillStyle="rgba("+d+", "+e+", "+g+", "+c/255+")",a.buffer.__srcContext.fillRect(b.x,b.y,b.width,b.height)),a.dirty=!0,a.version++)
	};pe.resize=function(a,b,c){var d=a.buffer;if(null==d.__srcCanvas)pe.createCanvas(a,b,c),d.__srcContext.drawImage(d.get_src(),
		0,
		0,b,c);else{pe.convertToCanvas(a,!0);var e=d.__srcCanvas;d.__srcCanvas=null;pe.createCanvas(a,b,c);d.__srcContext.drawImage(e,
			0,
			0,b,c)
		}d.__srcImageData=null;d.data=null;a.dirty=!0;a.version++
	};pe.scroll=function(a,b,c){if(0!=b%a.width||0!=c%a.height){var d=a.clone();pe.convertToCanvas(a,!0);a.buffer.__srcContext.clearRect(b,c,a.width,a.height);a.buffer.__srcContext.drawImage(d.get_src(),b,c);a.dirty=!0;a.version++
		}
	};pe.sync=function(a,b){null!=a&&(a.type==bm.CANVAS?pe.convertToCanvas(a,b):pe.convertToData(a,
b))
	};var Dp=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d
	};h[
		"lime.math.Rectangle"
	]=Dp;Dp.__name__="lime.math.Rectangle";Dp.prototype={clone:function(){return new Dp(this.x,this.y,this.width,this.height)
		},contains:function(a,b){return a>=this.x&&b>=this.y&&a<this.get_right()?b<this.get_bottom():!1
		},containsPoint:function(a){return this.contains(a.x,a.y)
		},containsRect:function(a){return 0>=a.width||0>=a.height?a.x>this.x&&
a.y>this.y&&a.get_right()<this.get_right()?a.get_bottom()<this.get_bottom():!1:a.x>=this.x&&a.y>=this.y&&a.get_right()<=this.get_right()?a.get_bottom()<=this.get_bottom():!1
		},copyFrom:function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height
		},equals:function(a){return null!=a&&this.x==a.x&&this.y==a.y&&this.width==a.width?this.height==a.height:!1
		},inflate:function(a,b){this.x-=a;this.width+=2*a;this.y-=b;this.height+=2*b
		},inflatePoint:function(a){this.inflate(a.x,a.y)
		},intersection:function(a){var b=
this.x<a.x?a.x:this.x,c=this.get_right()>a.get_right()?a.get_right():this.get_right();if(c<=b)return new Dp;var d=this.y<a.y?a.y:this.y;a=this.get_bottom()>a.get_bottom()?a.get_bottom():this.get_bottom();return a<=d?new Dp:new Dp(b,d,c-b,a-d)
		},intersects:function(a){var b=this.x<a.x?a.x:this.x;if((this.get_right()>a.get_right()?a.get_right():this.get_right())<=b)return!1;b=this.y<a.y?a.y:this.y;return(this.get_bottom()>a.get_bottom()?a.get_bottom():this.get_bottom())>b
		},isEmpty:function(){return 0>=
this.width?!0: 0>=this.height
		},offset:function(a,b){this.x+=a;this.y+=b
		},offsetPoint:function(a){this.x+=a.x;this.y+=a.y
		},setEmpty:function(){this.x=this.y=this.width=this.height=0
		},setTo:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d
		},union:function(a){if(0==this.width||0==this.height)return a.clone();if(0==a.width||0==a.height)return this.clone();var b=this.x>a.x?a.x:this.x,c=this.get_right()<a.get_right()?a.get_right():this.get_right(),d=this.y>a.y?a.y:this.y;return new Dp(b,d,c-
b,(this.get_bottom()<a.get_bottom()?a.get_bottom():this.get_bottom())-d)
		},__contract:function(a,b,c,d){if(0!=this.width||0!=this.height)this.x<a&&(this.x=a),this.y<b&&(this.y=b),this.get_right()>a+c&&(this.width=a+c-this.x),this.get_bottom()>b+d&&(this.height=b+d-this.y)
		},__expand:function(a,b,c,d){if(0==this.width&&0==this.height)this.x=a,this.y=b,this.width=c,this.height=d;else{var e=this.get_right(),g=this.get_bottom();this.x>a&&(this.x=a);this.y>b&&(this.y=b);e<a+c&&(this.width=a+c-this.x);g<
b+d&&(this.height=b+d-this.y)
			}
		},get_bottom:function(){return this.y+this.height
		},set_bottom:function(a){this.height=a-this.y;return a
		},get_bottomRight:function(){return new p(this.x+this.width,this.y+this.height)
		},set_bottomRight:function(a){this.width=a.x-this.x;this.height=a.y-this.y;return a.clone()
		},get_left:function(){return this.x
		},set_left:function(a){this.width-=a-this.x;return this.x=a
		},get_right:function(){return this.x+this.width
		},set_right:function(a){this.width=a-this.x;return a
		},get_size:function(){return new p(this.width,
this.height)
		},set_size:function(a){this.width=a.x;this.height=a.y;return a.clone()
		},get_top:function(){return this.y
		},set_top:function(a){this.height-=a-this.y;return this.y=a
		},get_topLeft:function(){return new p(this.x,this.y)
		},set_topLeft:function(a){this.x=a.x;this.y=a.y;return a.clone()
		},__class__:Dp,__properties__: {set_topLeft: "set_topLeft",get_topLeft: "get_topLeft",set_top: "set_top",get_top: "get_top",set_size: "set_size",get_size: "get_size",set_right: "set_right",get_right: "get_right",set_left: "set_left",
get_left: "get_left",set_bottomRight: "set_bottomRight",get_bottomRight: "get_bottomRight",set_bottom: "set_bottom",get_bottom: "get_bottom"
		}
	};var Scb=function(a,b,c,d){this._parent=a;this._region=b;this._rotated=d;this._frame=c;this.offset=null!=this._frame?new p(-this._frame.x,-this._frame.y):oJ.instance
	};h[
		"de.innogames.common.assets.lib.bmpAtlas.BitmapDataSprite"
	]=Scb;Scb.__name__="de.innogames.common.assets.lib.bmpAtlas.BitmapDataSprite";Scb.prototype={dispose:function(){null!=this._bitmapData&&this._bitmapData.dispose();
null!=this._trimmedBitmapData&&this._trimmedBitmapData.dispose()
		},get_bitmapData:function(){null==this._bitmapData&&(this._bitmapData=this._createBitmapData(this._frame));return this._bitmapData
		},get_trimmedBitmapData:function(){null==this._trimmedBitmapData&&(this._trimmedBitmapData=this._createBitmapData(null));return this._trimmedBitmapData
		},_createBitmapData:function(a){var b=0,c=0,d=0,e=0;null!=a&&(b=a.x|0,c=a.y|0,d=a.width|0,e=a.height|0);return new vx(this._parent,this._region.x|0,this._region.y|
0,this._region.width|0,this._region.height|0,b,c,d,e,this._rotated)
		},__class__:Scb,__properties__: {get_trimmedBitmapData: "get_trimmedBitmapData",get_bitmapData: "get_bitmapData"
		}
	};var oJ=function(){};h[
		"de.innogames.strategycity.util.ZeroPoint"
	]=oJ;oJ.__name__="de.innogames.strategycity.util.ZeroPoint";var eN=function(a){this._libraryId=a
	};h[
		"de.innogames.common.assets.lib.DummyImageLibrary"
	]=eN;eN.__name__="de.innogames.common.assets.lib.DummyImageLibrary";eN.__super__=q7;eN.prototype=l(q7.prototype,
	{hasImage:function(a){return!0
		},getSprite:function(a){return eN.dummySprite
		},getNames:function(a){return[]
		},getStarlingAtlas:function(){null==eN._dummyAtlas&&(eN._dummyAtlas=new Nz(Pf.empty(1,
			1)));return eN._dummyAtlas
		},_dispose:function(){},__class__:eN
	});var IHb=function(a,b){this._manager=a;this._urlLoader=b
	};h[
		"de.innogames.common.assets.lib.ImageLibraryLoader"
	]=IHb;IHb.__name__="de.innogames.common.assets.lib.ImageLibraryLoader";IHb.prototype={load:function(a,b,c){var d=this;return this._manager.load(a,
Sc.UNQUEUED,c,function(e){return d._loadLibrary(a,b,function(g){switch(g._hx_index){case 0:e(g);break;case 1:null!=y._reportError&&y._reportError(Error("[LOGGER] "+g.failure.message)),e(Ha.Success(new eN(a)))
					}
				})
			},function(e){e._dispose()
			})
		},_loadLibrary:function(a,b,c){var d=FQb[a
			];if(null==d)return c(Ha.Failure(new fi(null,
			"MISSING_ASSET: Image library assets not found in the catalog for "+a,
			{fileName: "src/de/innogames/common/assets/lib/ImageLibraryLoader.hx",lineNumber: 55,className: "de.innogames.common.assets.lib.ImageLibraryLoader",
methodName: "_loadLibrary"
			}))),null;for(var e=[],g=0;g<d.length;)e.push(this._loadBitmapAtlas("/assets"+d[g++
			],b));return Qe.inParallel(e).handle(function(k){switch(k._hx_index){case 0:c(Ha.Success(new Pcb(a,k.data)));break;case 1:c(Ha.Failure(new fi(null,
					"Failed to load image library "+a+": "+k.failure.message,
					{fileName: "src/de/innogames/common/assets/lib/ImageLibraryLoader.hx",lineNumber: 64,className: "de.innogames.common.assets.lib.ImageLibraryLoader",methodName: "_loadLibrary"
					})))
				}
			})
		},_loadBitmapAtlas:function(a,
b){var c=a.substring(0,a.length-3)+"json";return Qe.merge(this._urlLoader.loadImage(a,b,te.CHECKSUM_LIST,Zk.NoStore),Qe.next(this._urlLoader.loadText(c,b,te.CHECKSUM_LIST,Zk.NoStore),function(d){return new cd(new dd(Ha.Success(new Ocb(JSON.parse(d)))))
			}),function(d,e){return new cd(new dd(Ha.Success(new LHb(d,e))))
			})
		},__class__:IHb
	};var LHb=function(a,b){this._atlasBitmapData=a;this._atlasData=b;this._bitmapDataSpriteLookup=new x;this._addRegions(b)
	};h[
		"de.innogames.common.assets.lib.bmpAtlas.BitmapDataAtlas"
	]=
LHb;LHb.__name__="de.innogames.common.assets.lib.bmpAtlas.BitmapDataAtlas";LHb.prototype={dispose:function(){this._atlasBitmapData.dispose();for(var a=this._bitmapDataSpriteLookup.h,b=Object.keys(a),c=b.length,d=0;d<c;)a[b[d++
				]
			].dispose()
		},getBitmapDataSprite:function(a){return this._bitmapDataSpriteLookup.h[a
			]
		},toStarlingAtlas:function(){return new CZ(this._atlasBitmapData,this._atlasData)
		},getNames:function(a){null==a&&(a="");for(var b=[],c=Object.keys(this._bitmapDataSpriteLookup.h),d=c.length,
e=0;e<d;){var g=c[e++
				];0==g.indexOf(a)&&b.push(g)
			}b.sort(function(k,t){return k<t?-1:k>t?1: 0
			});return b
		},_addRegions:function(a){var b=0;for(a=a.getSpriteData();b<a.length;){var c=a[b
				];++b;this._addRegion(c.get_name(),c.getRegion(),c.getFrame(),c.get_rotated())
			}
		},_addRegion:function(a,b,c,d){this._bitmapDataSpriteLookup.h[a
			]=new Scb(this._atlasBitmapData,b,c,d)
		},__class__:LHb
	};var Nz=function(a,b){this.mSubTextures=new x;this.mAtlasTexture=a;null!=b&&this.parseAtlasXml(b)
	};h[
		"starling.textures.TextureAtlas"
	]=
Nz;Nz.__name__="starling.textures.TextureAtlas";Nz.parseBool=function(a){return null!=a?"true"==a.toLowerCase():!1
	};Nz.prototype={dispose:function(){this.mAtlasTexture.dispose()
		},getXmlFloat:function(a,b){a=a.get(b);return null!=a?parseFloat(a): 0
		},parseAtlasXml:function(a){var b=this.mAtlasTexture.get_scale(),c=new Z,d=new Z,e=a.firstElement();if(e.nodeType!=cc.Element)throw ba.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":Cf.toString(e.nodeType)));"TextureAtlas"==e.nodeName&&
(a=a.firstElement());for(a=a.elementsNamed("SubTexture");a.hasNext();){var g=a.next();e=g.get("name");var k=this.getXmlFloat(g,
				"x")/b,t=this.getXmlFloat(g,
				"y")/b,u=this.getXmlFloat(g,
				"width")/b,A=this.getXmlFloat(g,
				"height")/b,z=this.getXmlFloat(g,
				"frameX")/b,J=this.getXmlFloat(g,
				"frameY")/b,T=this.getXmlFloat(g,
				"frameWidth")/b,W=this.getXmlFloat(g,
				"frameHeight")/b;g=Nz.parseBool(g.get("rotated"));c.setTo(k,t,u,A);d.setTo(z,J,T,W);0<T&&0<W?this.addRegion(e,c,d,g):this.addRegion(e,c,
				null,g)
			}
		},getTexture:function(a){return this.mSubTextures.h[a
			]
		},
getTextures:function(a,b){null==a&&(a="");null==b&&(b=Ub.toObjectVector(null));a=this.getNames(a,Nz.sNames);for(var c=0;c<a.get_length();){var d=a.get(c++);b.set(b.get_length(),this.getTexture(d))
			}Nz.sNames.set_length(0);return b
		},getNames:function(a,b){null==a&&(a="");null==b&&(b=Ub.toObjectVector(null));if(null==this.mSubTextureNames){this.mSubTextureNames=Ub.toObjectVector(null);for(var c=Object.keys(this.mSubTextures.h),d=c.length,e=0;e<d;){var g=c[e++
					];this.mSubTextureNames.set(this.mSubTextureNames.get_length(),
g)
				}this.mSubTextureNames.sort(m(this,this.compare))
			}c=this.mSubTextureNames;for(d=0;d<c.get_length();)g=c.get(d++),
			0==g.indexOf(a)&&b.set(b.get_length(),g);return b
		},getRegion:function(a){a=this.mSubTextures.h[a
			];return null!=a?a.get_region(): null
		},getFrame:function(a){a=this.mSubTextures.h[a
			];return null!=a?a.get_frame(): null
		},getRotation:function(a){a=this.mSubTextures.h[a
			];return null!=a?a.get_rotated():!1
		},addRegion:function(a,b,c,d){null==d&&(d=!1);var e=this.mSubTextures;b=new Ov(this.mAtlasTexture,
b,!1,c,d);e.h[a
			]=b;this.mSubTextureNames=null
		},removeRegion:function(a){var b=this.mSubTextures.h[a
			];null!=b&&b.dispose();b=this.mSubTextures;Object.prototype.hasOwnProperty.call(b.h,a)&&delete b.h[a
			];this.mSubTextureNames=null
		},get_texture:function(){return this.mAtlasTexture
		},compare:function(a,b){return a<b?-1:a>b?1: 0
		},__class__:Nz,__properties__: {get_texture: "get_texture"
		}
	};var CZ=function(a,b){Nz.call(this,CZ._bitmapDataToStarlingTexture(a));this._addRegions(b)
	};h[
		"de.innogames.common.assets.lib.bmpAtlas.BitmapDataTextureAtlas"
	]=
CZ;CZ.__name__="de.innogames.common.assets.lib.bmpAtlas.BitmapDataTextureAtlas";CZ._bitmapDataToContext3DTexture=function(a){var b=nb.get_current().get_context(),c=b.__renderSession.gl,d=a.getTexture(c),e=Object.create(yS.prototype);e.__context=b;e.__textureData=d.data;e.__textureContext=c;e.__internalFormat=pb.__textureInternalFormat;e.__format=pb.__textureFormat;e.__textureTarget=3553;e.__width=a.width;e.__height=a.height;e.__optimizeForRenderToTexture=!1;e.__streamingLevels=0;return e
	};CZ._bitmapDataToStarlingTexture=
function(a){var b=new fF(CZ._bitmapDataToContext3DTexture(a),
		1,a.width,a.height,!1,!0);b.set_onRestore(function(){var c=nb.get_current().get_context(),d=c.__renderSession.gl,e=a.getTexture(d),g=b.get_base();g.__context=c;g.__textureData=e.data;g.__textureContext=d
		});return b
	};CZ.__super__=Nz;CZ.prototype=l(Nz.prototype,
	{dispose:function(){},_addRegions:function(a){var b=0;for(a=a.getSpriteData();b<a.length;){var c=a[b
				];++b;this.addRegion(c.get_name(),c.getRegion(),c.getFrame(),c.get_rotated())
			}
		},
__class__:CZ
	});var Ska=function(){};h[
		"de.innogames.common.assets.sound.Sound"
	]=Ska;Ska.__name__="de.innogames.common.assets.sound.Sound";Ska.__isInterface__=!0;Ska.prototype={__class__:Ska
	};var r7=function(){};h[
		"de.innogames.common.assets.sound.DummySound"
	]=r7;r7.__name__="de.innogames.common.assets.sound.DummySound";r7.__interfaces__=[Ska
	];r7.prototype={play:function(a,b,c){return fN.instance
		},__class__:r7
	};var MWa=function(){};h[
		"de.innogames.common.assets.sound.SoundLibrary"
	]=MWa;MWa.__name__=
"de.innogames.common.assets.sound.SoundLibrary";MWa.__isInterface__=!0;MWa.prototype={__class__:MWa
	};var zS=function(a,b,c,d){this._soundId=a;this._soundsEnabled=b;this._howl=c;this._loadHowl=d;this._playbacks=[];this._loadState=Oz.NotStarted
	};h[
		"de.innogames.common.assets.sound.SoundLoadingPlayer"
	]=zS;zS.__name__="de.innogames.common.assets.sound.SoundLoadingPlayer";zS.prototype={preload:function(){if(!F.get_value(this._soundsEnabled))return Qe.NOISE;switch(this._loadState._hx_index){case 0:return null==
this._preloadPromise&&(this._preloadPromise=new Rc),this._load(),this._preloadPromise;case 1:return null==this._preloadPromise&&(this._preloadPromise=new Rc),this._preloadPromise;case 2:case 3:return Qe.NOISE
			}
		},startPlayback:function(a,b,c,d){var e=this;if(!F.get_value(this._soundsEnabled)||this._loadState==Oz.Failed)return fN.instance;if(null==this._howl)return null!=y._reportError&&y._reportError(Error("[LOGGER] Attempting to play unloaded sound "+(this._soundId+" (sprite="+a+")"))),fN.instance;
null==a&&(a=void 0);a=this._howl.play(a);this._howl.loop(b,a);this._howl.volume(c,a);b&&(d=!0);var g=new Tcb(this,a,d);this._playbacks.push(g);if(!b)this._howl.once("end",function(){return Wa.remove(e._playbacks,g)
			},a);null==this._cancelPlaybacksOnDisableLink&&(this._cancelPlaybacksOnDisableLink=F.bind(this._soundsEnabled,function(k){k||e._cancelAllPlaybacks()
			}));this._loadState==Oz.NotStarted&&this._load();return g
		},_addEndCallback:function(a,b){if(-1!=this._playbacks.indexOf(a))this._howl.once("end",
b,a._id)
		},_fadeOut:function(a,b){var c=this;-1!=this._playbacks.indexOf(a)&&(this._howl.fade(this._howl.volume(a._id),
			0,b,a._id),this._howl.once("fade",function(){c._stop(a)
			},a._id))
		},_stop:function(a){Wa.remove(this._playbacks,a)&&this._howl.stop(a._id)
		},_load:function(){var a=this;this._loadState=Oz.Started;this._loadingLink=this._loadHowl().handle(function(b){switch(b._hx_index){case 0:a._loadState=Oz.Finished;a._removeExpiredPlaybacks();break;case 1:a._loadState=Oz.Failed,a._playbacks.length=
0,null!=y._reportError&&y._reportError(Error("[LOGGER] "+b.failure.message))
				}null!=a._preloadPromise&&(a._preloadPromise.trigger(b),a._preloadPromise=null)
			})
		},_removeExpiredPlaybacks:function(){for(var a=Wa.now()/1E3-.5,b=0;b<this._playbacks.length;){var c=this._playbacks[b
				];-1==c._startTime||c._startTime>=a?++b:(this._howl.stop(c._id),this._playbacks.splice(b,
				1))
			}
		},_cancelAllPlaybacks:function(){for(var a=0,b=this._playbacks;a<b.length;)this._howl.stop(b[a++
			]._id);this._playbacks.length=0
		},dispose:function(){var a=
this._loadingLink;null!=a&&a.cancel();a=this._cancelPlaybacksOnDisableLink;null!=a&&a.cancel();this._playbacks.length=0;null!=this._howl&&(this._howl.unload(),this._howl=null)
		},__class__:zS
	};var NWa=function(a,b,c,d){zS.call(this,a,b,c,d);this._sounds=new x
	};h[
		"de.innogames.common.assets.sound.RealSoundLibrary"
	]=NWa;NWa.__name__="de.innogames.common.assets.sound.RealSoundLibrary";NWa.__interfaces__=[MWa
	];NWa.__super__=zS;NWa.prototype=l(zS.prototype,
	{getSound:function(a){var b=this._sounds.h[a
			];if(null!=
b)return b;Object.prototype.hasOwnProperty.call(this._howl._sprite,a)?b=!0:(null!=y._reportError&&y._reportError(Error("[LOGGER] No sound sprite "+(a+" in sound library "+this._soundId))),b=!1);if(!b)return r7.instance;b=new Ucb(this,a);return this._sounds.h[a
			]=b
		},playSound:function(a,b,c,d){null==d&&(d=!1);null==c&&(c=1);null==b&&(b=!1);if(Object.prototype.hasOwnProperty.call(this._howl._sprite,a))var e=!0;else null!=y._reportError&&y._reportError(Error("[LOGGER] No sound sprite "+(a+" in sound library "+
this._soundId))),e=!1;return e?this.startPlayback(a,b,c,d):fN.instance
		},__class__:NWa
	});var Tka=function(){};h[
		"de.innogames.common.assets.sound.DummySoundLibrary"
	]=Tka;Tka.__name__="de.innogames.common.assets.sound.DummySoundLibrary";Tka.__interfaces__=[MWa
	];Tka.prototype={preload:function(){return Qe.NOISE
		},getSound:function(a){return r7.instance
		},playSound:function(a,b,c,d){return fN.instance
		},__class__:Tka
	};var Ucb=function(a,b){this._player=a;this._spriteId=b
	};h[
		"de.innogames.common.assets.sound._SoundLibrary.SoundSprite"
	]=
Ucb;Ucb.__name__="de.innogames.common.assets.sound._SoundLibrary.SoundSprite";Ucb.__interfaces__=[Ska
	];Ucb.prototype={play:function(a,b,c){null==c&&(c=!1);null==b&&(b=1);null==a&&(a=!1);return this._player.startPlayback(this._spriteId,a,b,c)
		},__class__:Ucb
	};var Oz=Ea[
		"de.innogames.common.assets.sound._SoundLoadingPlayer.LoadState"
	]={__ename__: "de.innogames.common.assets.sound._SoundLoadingPlayer.LoadState",__constructs__: null,NotStarted: {_hx_name: "NotStarted",_hx_index: 0,__enum__: "de.innogames.common.assets.sound._SoundLoadingPlayer.LoadState",
toString:N
		},Started: {_hx_name: "Started",_hx_index: 1,__enum__: "de.innogames.common.assets.sound._SoundLoadingPlayer.LoadState",toString:N
		},Finished: {_hx_name: "Finished",_hx_index: 2,__enum__: "de.innogames.common.assets.sound._SoundLoadingPlayer.LoadState",toString:N
		},Failed: {_hx_name: "Failed",_hx_index: 3,__enum__: "de.innogames.common.assets.sound._SoundLoadingPlayer.LoadState",toString:N
		}
	};Oz.__constructs__=[Oz.NotStarted,Oz.Started,Oz.Finished,Oz.Failed
	];Oz.__empty_constructs__=[Oz.NotStarted,Oz.Started,
Oz.Finished,Oz.Failed
	];var ic=function(a,b,c,d){ic.instance=this;this.settings=new MHb;F.bind(this.settings.volume,Howler.volume,
		null,null);this._loadingManager=a;this._urlBuilder=b;this._manifest=c;this._enableCORSHeaders=d;this._libraries=new x;this._backgroundSounds=new x
	};h[
		"de.innogames.common.assets.sound.SoundManager"
	]=ic;ic.__name__="de.innogames.common.assets.sound.SoundManager";ic.prototype={getLibrary:function(a,b){null==b&&(b=Sc.NORMAL);var c=this,d=this._libraries.h[a
			];if(null!=d)return d;
d=this._manifest[a
			];if(null==d)return null!=y._reportError&&y._reportError(Error("[LOGGER] No sound atlas definition: "+a)),Tka.instance;var e=this._createUnloadedHowl(a,!1,d);d=new NWa(a,this.settings.effectsEnabled,e,function(){return c._loadHowl(a,e,b)
			});return this._libraries.h[a
			]=d
		},disposeLibrary:function(a){var b=this._libraries.h[a
			];if(null!=b){var c=this._libraries;Object.prototype.hasOwnProperty.call(c.h,a)&&delete c.h[a
				];b.dispose()
			}
		},getBackgroundSound:function(a,b){null==b&&(b=Sc.NORMAL);
var c=this,d=this._backgroundSounds.h[a
			];if(null!=d)return d;var e=this._createUnloadedHowl(a,!0,null);d=new OWa(a,this.settings.backgroundEnabled,e,function(){return c._loadHowl(a,e,b)
			});return this._backgroundSounds.h[a
			]=d
		},disposeBackgroundSound:function(a){var b=this._backgroundSounds.h[a
			];if(null!=b){var c=this._backgroundSounds;Object.prototype.hasOwnProperty.call(c.h,a)&&delete c.h[a
				];b.dispose()
			}
		},_createUnloadedHowl:function(a,b,c){b=[];b.push(this._urlBuilder.applyCacheBreaker(this._urlBuilder.buildAbsoluteUrl("assets/"+
a+".ogg")));b.push(this._urlBuilder.applyCacheBreaker(this._urlBuilder.buildAbsoluteUrl("assets/"+a+".mp3")));a={src:b,sprite:c,html5:!1,preload:!1
			};this._enableCORSHeaders&&(a.xhr={withCredentials:!0
			});return new Howl(a)
		},_loadHowl:function(a,b,c){return this._loadingManager.load(a,c,Zk.NoStore,function(d){var e=function(){d(Ha.Success(null))
				},g=function(k,t){d(Ha.Failure(new fi(null,
					"Error loading Howl `"+a+"`: "+t,
					{fileName: "src/de/innogames/common/assets/sound/SoundManager.hx",lineNumber: 107,
className: "de.innogames.common.assets.sound.SoundManager",methodName: "_loadHowl"
					})))
				};b.on("load",e);b.on("loaderror",g);b.load();return new ng(function(){b.off("load",e);b.off("loaderror",g);"loading"==b.state()&&b.unload()
				})
			},null)
		},__class__:ic
	};var Uka=function(){};h[
		"de.innogames.common.assets.sound.SoundPlayback"
	]=Uka;Uka.__name__="de.innogames.common.assets.sound.SoundPlayback";Uka.__isInterface__=!0;Uka.__interfaces__=[at
	];Uka.prototype={__class__:Uka
	};var Tcb=function(a,b,c){this._startTime=
c?-1:Wa.now()/1E3;this._player=a;this._id=b
	};h[
		"de.innogames.common.assets.sound.RealSoundPlayback"
	]=Tcb;Tcb.__name__="de.innogames.common.assets.sound.RealSoundPlayback";Tcb.__interfaces__=[Uka
	];Tcb.prototype={addEndCallback:function(a){this._player._addEndCallback(this,a)
		},fadeOut:function(a){this._player._fadeOut(this,a)
		},cancel:function(){this._player._stop(this)
		},_playsOnLoad:function(a){return-1!=this._startTime?this._startTime>=a:!0
		},__class__:Tcb
	};var fN=function(){};h[
		"de.innogames.common.assets.sound.DummySoundPlayback"
	]=
fN;fN.__name__="de.innogames.common.assets.sound.DummySoundPlayback";fN.__interfaces__=[Uka
	];fN.prototype={addEndCallback:function(a){a()
		},fadeOut:function(a){},cancel:function(){},__class__:fN
	};var MHb=function(){this.backgroundEnabled=I._new(!1);this.effectsEnabled=I._new(!1);this.volume=I._new(1)
	};h[
		"de.innogames.common.assets.sound.SoundSettings"
	]=MHb;MHb.__name__="de.innogames.common.assets.sound.SoundSettings";MHb.prototype={__class__:MHb
	};var OWa=function(a,b,c,d){zS.call(this,a,b,c,d)
	};h[
		"de.innogames.common.assets.sound.StreamingLoadingSound"
	]=
OWa;OWa.__name__="de.innogames.common.assets.sound.StreamingLoadingSound";OWa.__interfaces__=[Ska
	];OWa.__super__=zS;OWa.prototype=l(zS.prototype,
	{play:function(a,b,c){null==c&&(c=!1);null==b&&(b=1);null==a&&(a=!1);return this.startPlayback(null,a,b,c)
		},__class__:OWa
	});var Vcb=function(a,b){Nz.call(this,a);gRb(b,m(this,this.addRegion))
	};h[
		"de.innogames.common.assets.starling.StarlingJsonTextureAtlas"
	]=Vcb;Vcb.__name__="de.innogames.common.assets.starling.StarlingJsonTextureAtlas";Vcb.__super__=Nz;
Vcb.prototype=l(Nz.prototype,
	{__class__:Vcb
	});var Wcb=function(){};h[
		"de.innogames.common.display.IWindowContainer"
	]=Wcb;Wcb.__name__="de.innogames.common.display.IWindowContainer";Wcb.__isInterface__=!0;Wcb.prototype={__class__:Wcb
	};var Xcb=function(){};h[
		"de.innogames.common.map2D.IPathfinderMap"
	]=Xcb;Xcb.__name__="de.innogames.common.map2D.IPathfinderMap";Xcb.__isInterface__=!0;Xcb.prototype={__class__:Xcb,__properties__: {get_bottom: "get_bottom",get_right: "get_right"
		}
	};var Ycb=function(){};h[
		"de.innogames.common.map2D.IPlacementMap"
	]=
Ycb;Ycb.__name__="de.innogames.common.map2D.IPlacementMap";Ycb.__isInterface__=!0;Ycb.prototype={__class__:Ycb,__properties__: {get_length: "get_length",get_width: "get_width",get_y: "get_y",get_x: "get_x"
		}
	};var Zcb=function(){};h[
		"de.innogames.common.map2D.IValueMap"
	]=Zcb;Zcb.__name__="de.innogames.common.map2D.IValueMap";Zcb.__isInterface__=!0;Zcb.prototype={__class__:Zcb,__properties__: {get_length: "get_length",get_width: "get_width",get_y: "get_y",get_x: "get_x",get_id: "get_id"
		}
	};var PWa=function(a,b,
c,d){this._map=null;this.x=a;this.y=b;this.width=c;this.height=d;this._map=[]
	};h[
		"de.innogames.common.map2D.PathfinderMap"
	]=PWa;PWa.__name__="de.innogames.common.map2D.PathfinderMap";PWa.__interfaces__=[Xcb
	];PWa.prototype={get_right:function(){return this.x+this.width
		},get_bottom:function(){return this.y+this.height
		},getTileValue:function(a,b){return this._map[b
			][a
			]
		},setTileValue:function(a,b,c){null==this._map[c
			]&&(this._map[c
			]=[]);this._map[c
			][b
			]=a
		},contains:function(a,b){return a>=this.x&&a<this.get_right()&&
b>=this.y?b<this.get_bottom():!1
		},__class__:PWa,__properties__: {get_bottom: "get_bottom",get_right: "get_right"
		}
	};var Vka=function(a,b){null==b&&(b=!1);null==a&&(a=!1);this._distanceMap=this._foundPaths=this._distances=this._adjacentTiles=null;this._diagonalAllowed=a;this._hexagonalMap=b;this._reset();this._adjacentTiles=new x
	};h[
		"de.innogames.common.map2D.Pathfinding"
	]=Vka;Vka.__name__="de.innogames.common.map2D.Pathfinding";Vka._cloneArray=function(a){for(var b=[],c=0;c<a.length;)b.push(a[c++
		].clone());
return b
	};Vka.prototype={findPath:function(a,b,c){if(null!=b&&null!=c){if(0!=p.distance(b,c)){var d=p.distance(b,c);d=!isNaN(d)
				}else d=!1;d=!d
			}else d=!0;return d?null:this._findPath(this._calculateDistanceMap(a,b,
			255),b,c,
			255)
		},calculatePathSum:function(a,b){for(var c=0,d=0;d<b.length;){var e=b[d
				];++d;c+=a.getTileValue(e.x|0,e.y|0)
			}return c
		},findReachable:function(a,b,c){var d=[];a=this._calculateDistanceMap(a,b,c);b=a.get_bottom();for(var e=a.get_right(),g=a.y;g<b;)for(var k=g++,t=a.x;t<e;){var u=
t++;a.getTileValue(u,k)<=c&&d.push(new p(u,k))
			}return d
		},getTilesInRange:function(a,b,c){var d=[],e=[],g=Object.create(null);g[b.x+":"+b.y
			]=!0;for(e.push({point:b,distance:c
			});0<e.length;){var k=e.shift();b=k.distance;d.push(k.point);if(0!=b)for(c=0,k=this._getValidAdjacentTiles(a,k.point);c<k.length;){var t=k[c
					];++c;var u=t.x+":"+t.y;null==g[u
					]&&(e.push({point:t,distance:b-1
					}),g[u
					]=!0)
				}
			}return d
		},calculateDistance:function(a,b){var c=fa.string(a)+fa.string(b);if(null!=this._distances.h[c
			])return this._distances.h[c
			];
if(this._hexagonalMap){var d=b.y|0,e=a.y|0;d=b.x-a.x-((0!=d%2?d-1:d)/2|0)+((0!=e%2?e-1:e)/2|0)|0;a=b.y-a.y|0;a=fc.equalSign(d,a)?fc.abs(d+a)|0:Math.max(fc.abs(d),fc.abs(a))|0
			}else a=p.distance(a,b)|0;return this._distances.h[c
			]=a
		},clear:function(){this._distanceMap=null;this._reset()
		},set_diagonalAllowed:function(a){return this._diagonalAllowed=a
		},set_hexagonalMap:function(a){return this._hexagonalMap=a
		},getAdjacentTiles:function(a,b){return Vka._cloneArray(this._getValidAdjacentTiles(a,b))
		},_getValidAdjacentTiles:function(a,
b){var c=fa.string(b);if(null!=this._adjacentTiles.h[c
			])return this._adjacentTiles.h[c
			];var d=[];b=this._getAdjacentTileList(b.x|0,b.y|0);for(var e=b.length-1|0;0<=e;){var g=b[e
				];a.contains(g.x|0,g.y|0)&&d.push(g);--e
			}return this._adjacentTiles.h[c
			]=d
		},_calculateDistanceMap:function(a,b,c){null==c&&(c=10);if(null!=this._distanceMap)return this._distanceMap;for(var d=new PWa(a.x,a.y,a.width,a.height),e=d.get_bottom(),g=d.get_right(),k=d.y;k<e;)for(var t=k++,u=d.x;u<g;)d.setTileValue(255,u++,t);e=[new $cb(b.x|
0,b.y|0)
			];for(d.setTileValue(0,b.x|0,b.y|0);0<e.length;){k=e.shift();if(null==k)break;b=k.cost;g=this._getAdjacentTileList(k.x,k.y);t=g.length;for(k=0;k<t;){var A=g[k++
					];u=A.x|0;A=A.y|0;if(a.contains(u,A)){var z=b+(0<a.getTileValue(u,A)?a.getTileValue(u,A): 1);z>=d.getTileValue(u,A)||(d.setTileValue(z,u,A),z<=c&&e.push(new $cb(u,A,z,
						0)))
					}
				}
			}return this._distanceMap=d
		},_findPath:function(a,b,c,d){null==d&&(d=10);var e=fa.string(b)+fa.string(c)+d;if(null!=this._foundPaths.h[e
			])return this._foundPaths.h[e
			];
if(!a.contains(c.x|0,c.y|0)||255==a.getTileValue(c.x|0,c.y|0))return null;var g=c,k=0,t=a.getTileValue(b.x|0,b.y|0)+1;for(c=[c
			];d>t&&100>k;){var u=this.getAdjacentTiles(a,g);d=9999;g=null;for(var A=0;A<u.length;){var z=u[A
					];++A;var J=a.getTileValue(z.x|0,z.y|0);J<d&&(d=J,g=z)
				}if(null==g)break;g.equals(b)||c.push(g);++k
			}c.reverse();return this._foundPaths.h[e
			]=c
		},_getAdjacentTileList:function(a,b){var c=[new p(a,b-1),new p(a+1,b),new p(a,b+1),new p(a-1,b)
			];this._diagonalAllowed&&!this._hexagonalMap?
c=c.concat([new p(a-1,b-1),new p(a+1,b-1),new p(a-1,b+1),new p(a+1,b+1)
			]):this._hexagonalMap&&(c=1==b%2?c.concat([new p(a+1,b-1),new p(a+1,b+1)
			]):c.concat([new p(a-1,b-1),new p(a-1,b+1)
			]));return c
		},_reset:function(){this._foundPaths=new x;this._distances=new x
		},_floor:function(a){return(0!=a%2?a-1:a)/2|0
		},__class__:Vka,__properties__: {set_hexagonalMap: "set_hexagonalMap",set_diagonalAllowed: "set_diagonalAllowed"
		}
	};var $cb=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);this.x=a;this.y=b;this.cost=
c;this.priority=d
	};h[
		"de.innogames.common.map2D.PathfindingNode"
	]=$cb;$cb.__name__="de.innogames.common.map2D.PathfindingNode";$cb.prototype={__class__:$cb
	};var DZ=function(a,b,c,d,e,g){null==g&&(g=0);this._map=[];this._id=a;this._x=b;this._y=c;this._width=d;this._length=e;this._defaultValue=g;this.reset(this._defaultValue)
	};h[
		"de.innogames.common.map2D.PlacementMapPositions"
	]=DZ;DZ.__name__="de.innogames.common.map2D.PlacementMapPositions";DZ.__interfaces__=[Zcb
	];DZ.prototype={reset:function(a){null==
a&&(a=0);this._map=[];for(var b=this.get_bottom(),c=this.get_right(),d=this._y;d<b;){var e=d++;this._map[e
				]=[];for(var g=this._x;g<c;)this._map[e
				][g++
				]=a
			}
		},toArray:function(){return this._map
		},clone:function(){for(var a=new DZ(this._id,this._x,this._y,this._width,this._length,this._defaultValue),b=this.get_bottom(),c=this.get_right(),d=this._y;d<b;)for(var e=d++,g=this._x;g<c;){var k=g++;a.setValueAt(this._map[e
				][k
				],k,e)
			}return a
		},setValueAt:function(a,b,c,d,e){null==e&&(e=1);null==d&&(d=1);if(this.outOfBounds(b,
c,d,e))return!1;this._map=this._modifyMap(this._map,new gN(a,b,c,d,e));return!0
		},getValueAt:function(a,b){return this.outOfBounds(a,b)?0:this._map[b
			][a
			]
		},outOfBounds:function(a,b,c,d){null==d&&(d=1);null==c&&(c=1);1>c&&(c=1);1>d&&(d=1);return a<this._x||a+c-1>this.get_right()-1||b<this._y||b+d-1>this.get_bottom()-1?!0:!1
		},checkAreaFilledWithId:function(a,b,c,d,e){null==e&&(e=1);null==d&&(d=1);if(this.outOfBounds(b,c,d,e))return!1;d=b+d;for(e=c+e;c<e;)for(var g=c++,k=b;k<d;)if(this._map[g
			][k++
			]!=a)return!1;
return!0
		},getArea:function(a,b,c,d){var e=[];if(!this.outOfBounds(a,b,c,d)){c=a+c;d=b+d;for(var g=b;g<d;){var k=g++;e.push([]);for(var t=a;t<c;)e[k-b
					].push(this._map[k
					][t++
					])
				}
			}return e
		},get__overwriteValue:function(){return this._defaultValue
		},get_right:function(){return this._x+this._width
		},get_bottom:function(){return this._y+this._length
		},_modifyMap:function(a,b,c){null==c&&(c=!1);a=a.slice();var d=!1,e=b.value;c&&(e=this.get__overwriteValue());for(var g=b.x+b.width,k=b.y+b.length,t=b.y;t<k;)for(var u=
t++,A=b.x;A<g;){var z=A++;c||a[u
				][z
				]==this.get__overwriteValue()||(d=!0);c?a[u
				][z
				]==b.value&&(a[u
				][z
				]=e):a[u
				][z
				]=e
			}return d?null:a
		},get_x:function(){return this._x
		},get_y:function(){return this._y
		},get_width:function(){return this._width
		},get_length:function(){return this._length
		},get_id:function(){return this._id
		},__class__:DZ,__properties__: {get__overwriteValue: "get__overwriteValue",get_bottom: "get_bottom",get_right: "get_right",get_id: "get_id",get_length: "get_length",get_width: "get_width",get_y: "get_y",
get_x: "get_x"
		}
	};var pJ=function(a,b,c,d,e){null==e&&(e=0);DZ.call(this,
		"default",a,b,c,d,e)
	};h[
		"de.innogames.common.map2D.PlacementMap"
	]=pJ;pJ.__name__="de.innogames.common.map2D.PlacementMap";pJ.__interfaces__=[Ycb
	];pJ.__super__=DZ;pJ.prototype=l(DZ.prototype,
	{clone:function(){for(var a=new pJ(this._x,this._y,this._width,this._length),b=this.get_bottom(),c=this.get_right(),d=this._y;d<b;)for(var e=d++,g=this._x;g<c;){var k=g++;a.placeTile(this._map[e
				][k
				],k,e)
			}return a
		},checkValidPlacement:function(a,
b,c,d){null==d&&(d=1);null==c&&(c=1);if(this.outOfBounds(a,b,c,d))return!1;c=a+c;for(d=b+d;b<d;)for(var e=b++,g=a;g<c;)if(!this._isValidPlacement(g++,e))return!1;return!0
		},placeTile:function(a,b,c,d,e){null==e&&(e=1);null==d&&(d=1);if(this.outOfBounds(b,c,d,e))return!1;d=this._modifyMap(this._map,new gN(a,b,c,d,e));return null!=d&&d[c
			][b
			]==a?(this._map=d,!0):!1
		},moveTile:function(a,b,c,d,e,g,k){null==k&&(k=1);null==g&&(g=1);var t=!0;if(this.outOfBounds(d,e,g,k))return!1;b=this._modifyMap(this._map,
new gN(a,b,c,g,k),!0);null!=b&&(b=this._modifyMap(b,new gN(a,d,e,g,k)),null!=b&&(t=!1));return t?!1:(this._map=b,!0)
		},removeTile:function(a,b,c,d,e){null==e&&(e=1);null==d&&(d=1);if(this.outOfBounds(b,c,d,e))return!1;a=this._modifyMap(this._map,new gN(a,b,c,d,e),!0);return a[c
			][b
			]==this.get__overwriteValue()?(this._map=a,!0):!1
		},getTileId:function(a,b){return this.getValueAt(a,b)
		},getOccupiedAreas:function(a){for(var b=[],c=this._findNextAreaPosition(a,this._x,this._y,b),d=0;null!=c&&20>d;){var e=
this._findArea(a,c.x|0,c.y|0,b);if(null==e)break;else b.push(e),c=this._findNextAreaPosition(a,c.x|0,c.y+e.height|0,b);++d
			}return b
		},_isValidPlacement:function(a,b){return 0!=this._map[b
			][a
			]?!1:!0
		},get__overwriteValue:function(){return 0
		},_findNextAreaPosition:function(a,b,c,d){for(var e=c,g=!0;g;){g=!1;e>=this._map.length-1&&(e=c,++b);if(b>=this._map[e
				].length-1)return null;for(;this._map[e
				][b
				]!=a;)if(e+1<this._map.length)++e;else if(e=c,++b,b>=this._map[c
				].length)return null;this._insideOccupiedAreas(d,
b,e)&&(++e,g=!0)
			}return new p(b,e)
		},_findArea:function(a,b,c,d){for(var e=c,g=!0;g&&this._map[e
			][b
			]==a;){if(e+1>=this._map.length){e=this._map.length;break
				}this._insideOccupiedAreas(d,b,e+1)&&(g=!1);++e
			}d=e;g=this._map[e-1
			].length;for(e=c;e<d;){for(var k=b,t=g+1;k<t;){var u=k++;if(this._map[e
					][u
					]!=a){g=u;break
					}
				}++e
			}a=new Z(b,c,g-b,d-c);0!=a.width?(b=a.width,b=!isNaN(b)):b=!1;b?(0!=a.height?(b=a.height,b=!isNaN(b)):b=!1,b=!b):b=!0;return b?null:a
		},_insideOccupiedAreas:function(a,b,c){for(var d=a.length;0!=
d--;)if(a[d
			].contains(b,c))return!0;return!1
		},__class__:pJ
	});var gN=function(a,b,c,d,e){null==e&&(e=1);null==d&&(d=1);this.value=a;this.x=b;this.y=c;this.width=d;this.length=e
	};h[
		"de.innogames.common.map2D.ValueMapEntity"
	]=gN;gN.__name__="de.innogames.common.map2D.ValueMapEntity";gN.prototype={__class__:gN
	};var QWa=function(){this.seed=1
	};h[
		"de.innogames.common.utils.PM_PRNG"
	]=QWa;QWa.__name__="de.innogames.common.utils.PM_PRNG";QWa.prototype={nextInt:function(){return this.gen()
		},nextDouble:function(){return ya.toFloat(this.gen())/
ya.toFloat(2147483647)
		},nextIntRange:function(a,b){a-=.4999;return Math.round(a+(b+.4999-a)*this.nextDouble())
		},nextDoubleRange:function(a,b){return a+(b-a)*this.nextDouble()
		},gen:function(){return this.seed=ya.toFloat(16807*this.seed)%ya.toFloat(2147483647)|0
		},__class__:QWa
	};var EZ=function(){};h[
		"de.innogames.common.utils.helper.ArrayHelper"
	]=EZ;EZ.__name__="de.innogames.common.utils.helper.ArrayHelper";EZ.arraysMatch=function(a,b){var c=a.length;if(c!=b.length)return!1;for(var d=0;d<c;){var e=
d++;if(a[e
			]!=b[e
			])return!1
		}return!0
	};EZ.getRandomElement=function(a){return a[fa.random(a.length)
		]
	};EZ.shuffle=function(a){a.sort(EZ._randomSort)
	};EZ._randomSort=function(a,b){return.5>Math.random()?-1: 1
	};var lj=function(){};h[
		"de.innogames.common.utils.helper.GraphicsHelper"
	]=lj;lj.__name__="de.innogames.common.utils.helper.GraphicsHelper";lj.scaleBitmapData=function(a,b,c,d){null==d&&(d=!1);if(a.width==b&&a.height==c)return a.clone();var e=new pb(b,c,!0,
		0);lj._matrix.setTo(1,
		0,
		0,
		1,
		0,
		0);lj._matrix.scale(b/
a.width,c/a.height);e.draw(a,lj._matrix,
		null,
		null,
		null,d);return e
	};lj.drawLine=function(a,b,c,d,e){e=new Od;e.set_x(a);e.set_y(b);e.get_graphics().lineStyle(1,d,.8,!0,
		2,
		2);e.get_graphics().lineTo(c,
		0);return e
	};lj.drawOutline=function(a,b,c){null==c&&(c=65280);a.lineStyle(1,c);a.drawRect(b.x,b.y,b.width,b.height)
	};var fc=function(){};h[
		"de.innogames.common.utils.helper.MathHelper"
	]=fc;fc.__name__="de.innogames.common.utils.helper.MathHelper";fc.randomNumber=function(a,b,c){null==c&&(c=!1);null==
b&&(b=1);null==a&&(a=0);a=Math.random()*(1+b-a)+a;c&&(a+=Math.random());return a
	};fc.abs=function(a){return(a^a>>31)-(a>>31)
	};fc.sign=function(a){return 0<a?1: 0>a?-1: 0
	};fc.equalSign=function(a,b){return 0<a*b
	};fc.getRandomInt=function(){fc._rndz=36969*(fc._rndz&65535)+(fc._rndz>>16);fc._rndw=18E3*(fc._rndw&65535)+(fc._rndw>>>16);return(fc._rndz<<16)+fc._rndw
	};fc.getRandomNumber=function(){return ya.toFloat(fc.getRandomInt())/ya.toFloat(-1)
	};fc.pushRandomSeed=function(a,b){if(100<fc._rndStack.length)throw ba.thrown(new wb("The randomseed stack is flooded (not enough pop calls!)"));
fc._rndStack.push(fc._rndz);fc._rndStack.push(fc._rndw);fc.setRandomSeed(a,b)
	};fc.popRandomSeed=function(){fc._rndw=fc._rndStack.pop();fc._rndz=fc._rndStack.pop()
	};fc.setRandomSeed=function(a,b){fc._rndz=0==a?1:a;fc._rndw=0==b?1:b
	};fc.hashOfString=function(a){for(var b=a.length,c=0,d=a.length;c<d;)b=b<<5^b>>27^a.charCodeAt(c++);return b
	};fc.rotateVector2D=function(a,b){var c=fc.deg2rad(a);a=new p;var d=Math.cos(c);c=Math.sin(c);a.x=b.x*d-b.y*c;a.y=b.x*c+b.y*d;return a
	};fc.deg2rad=function(a){return Math.PI/
180*a
	};fc.clamp=function(a,b,c){return Math.max(b,Math.min(c,a))
	};fc._doSignPropagatingRightShiftOnUInt=function(a,b){return a>>b
	};var GQb=function(){};h[
		"de.innogames.common.utils.helper.ObjectHelper"
	]=GQb;GQb.__name__="de.innogames.common.utils.helper.ObjectHelper";GQb.copy=function(a){return zm.clone(a)
	};var Pz=function(){};h[
		"de.innogames.common.utils.helper.StringHelper"
	]=Pz;Pz.__name__="de.innogames.common.utils.helper.StringHelper";Pz.isEmpty=function(a){return null!=a?""==a:!0
	};Pz.trim=function(a){return null==
a?"":rc.trim(a)
	};var sHb=function(a){null==a&&(a=!1);this._collectors=[];a&&(this.addCollector(new adb),this.addCollector(new bdb),this.addCollector(new cdb),this.addCollector(new ddb),this.addCollector(new edb),this.addCollector(new fdb))
	};h[
		"de.innogames.diagnostics.DiagnosticTool"
	]=sHb;sHb.__name__="de.innogames.diagnostics.DiagnosticTool";sHb.prototype={addCollector:function(a){this._collectors.push(a)
		},collect:function(){for(var a={},b=0,c=this._collectors;b<c.length;){var d=c[b
				];++b;a[d.get_name()
				]=
d.collect()
			}return a
		},__class__:sHb
	};var ddb=function(){};h[
		"de.innogames.diagnostics.collectors.CompressedTextureSupportCollector"
	]=ddb;ddb.__name__="de.innogames.diagnostics.collectors.CompressedTextureSupportCollector";ddb.__interfaces__=[$M
	];ddb.prototype={collect:function(){return zl.hasSupportCompressedTextures()?"Supported": "Not supported"
		},get_name:function(){return"Compressed texture"
		},__class__:ddb,__properties__: {get_name: "get_name"
		}
	};var fdb=function(){};h[
		"de.innogames.diagnostics.collectors.ResolutionCollector"
	]=
fdb;fdb.__name__="de.innogames.diagnostics.collectors.ResolutionCollector";fdb.__interfaces__=[$M
	];fdb.prototype={collect:function(){var a=window;return(a.screen.width*a.devicePixelRatio|0)+"x"+(a.screen.height*a.devicePixelRatio|0)
		},get_name:function(){return"resolution"
		},__class__:fdb,__properties__: {get_name: "get_name"
		}
	};var edb=function(){};h[
		"de.innogames.diagnostics.collectors.ShadingLanguageVersionCollector"
	]=edb;edb.__name__="de.innogames.diagnostics.collectors.ShadingLanguageVersionCollector";
edb.__interfaces__=[$M
	];edb.prototype={collect:function(){return zl.getShadingLanguageVersion()
		},get_name:function(){return" Language Version"
		},__class__:edb,__properties__: {get_name: "get_name"
		}
	};var cdb=function(){};h[
		"de.innogames.diagnostics.collectors.WebGLRendererCollector"
	]=cdb;cdb.__name__="de.innogames.diagnostics.collectors.WebGLRendererCollector";cdb.__interfaces__=[$M
	];cdb.prototype={collect:function(){return zl.getRenderer()
		},get_name:function(){return"WebGL renderer"
		},__class__:cdb,__properties__: {get_name: "get_name"
		}
	};
var bdb=function(){};h[
		"de.innogames.diagnostics.collectors.WebGLVendorCollector"
	]=bdb;bdb.__name__="de.innogames.diagnostics.collectors.WebGLVendorCollector";bdb.__interfaces__=[$M
	];bdb.prototype={collect:function(){return zl.getVendor()
		},get_name:function(){return"WebGL vendor"
		},__class__:bdb,__properties__: {get_name: "get_name"
		}
	};var adb=function(){};h[
		"de.innogames.diagnostics.collectors.WebGLVersionCollector"
	]=adb;adb.__name__="de.innogames.diagnostics.collectors.WebGLVersionCollector";adb.__interfaces__=
[$M
	];adb.prototype={collect:function(){return zl.getVersion()
		},get_name:function(){return"WebGL version"
		},__class__:adb,__properties__: {get_name: "get_name"
		}
	};var zl=function(){};h[
		"de.innogames.diagnostics.util.WebGL"
	]=zl;zl.__name__="de.innogames.diagnostics.util.WebGL";zl.getVersion=function(){var a=zl.getWebGL();return null==a?"Unavailable":a.getParameter(a.VERSION)
	};zl.getShadingLanguageVersion=function(){var a=zl.getWebGL();return null==a?"Unknown":a.getParameter(a.SHADING_LANGUAGE_VERSION)
	};
zl.hasSupportCompressedTextures=function(){return null!=zl.getExtension("WEBGL_compressed_texture_s3tc")
	};zl.getVendor=function(){var a=zl.getExtension("WEBGL_debug_renderer_info");return null==a?"Unknown":zl.getWebGL().getParameter(a.UNMASKED_VENDOR_WEBGL)
	};zl.getRenderer=function(){var a=zl.getExtension("WEBGL_debug_renderer_info");return null==a?"Unknown":zl.getWebGL().getParameter(a.UNMASKED_RENDERER_WEBGL)
	};zl.getWebGL=function(){if(null!=zl.webGl)return zl.webGl;var a=window.document.createElement("canvas");
a.width=1;a.height=1;window.document.body.appendChild(a);for(var b=0,c=zl.POSSIBLE_NAMES;b<c.length;)if(zl.webGl=a.getContext(c[b++
		],
		{stencil:!0
		}),null!=zl.webGl){a.remove();break
		}return zl.webGl
	};zl.getExtension=function(a){var b=zl.getWebGL();return null==b?null:b.getExtension(a)
	};var Pv=Ea[
		"de.innogames.forge.city.BackedStringTest"
	]={__ename__: "de.innogames.forge.city.BackedStringTest",__constructs__: null,Hearts: {_hx_name: "Hearts",_hx_index: 0,__enum__: "de.innogames.forge.city.BackedStringTest",
toString:N
		},Diamonds: {_hx_name: "Diamonds",_hx_index: 1,__enum__: "de.innogames.forge.city.BackedStringTest",toString:N
		},Clubs: {_hx_name: "Clubs",_hx_index: 2,__enum__: "de.innogames.forge.city.BackedStringTest",toString:N
		},Spades: {_hx_name: "Spades",_hx_index: 3,__enum__: "de.innogames.forge.city.BackedStringTest",toString:N
		}
	};Pv.__constructs__=[Pv.Hearts,Pv.Diamonds,Pv.Clubs,Pv.Spades
	];Pv.__empty_constructs__=[Pv.Hearts,Pv.Diamonds,Pv.Clubs,Pv.Spades
	];var yOb=function(){};h[
		"de.innogames.forge.city._BackedStringTest.BackedStringTestTools"
	]=
yOb;yOb.__name__="de.innogames.forge.city._BackedStringTest.BackedStringTestTools";yOb.toString=function(a){switch(a._hx_index){case 0:return"FoE";case 1:return"Test";case 2:return"Go";case 3:return"You"
		}
	};yOb.fromString=function(a,b){switch(b){case "FoE":return Pv.Hearts;case "Go":return Pv.Clubs;case "Test":return Pv.Diamonds;case "You":return Pv.Spades;default:return null!=y._reportError&&y._reportError(Error("[LOGGER] Invalid value for enum BackedStringTest: "+b)),
			null
		}
	};var RWa=function(){};
h[
		"de.innogames.forge.city.BackedStringTest_Converter"
	]=RWa;RWa.__name__="de.innogames.forge.city.BackedStringTest_Converter";RWa.fromJson=function(a){var b=null==a?null:a.value;if(null==b){if(null==a)return null;throw new ba("Unsupported enum value: "+fa.string(a.value)+" for enum "+a.__enum__);
		}switch(b){case "FoE":return Pv.Hearts;case "Go":return Pv.Clubs;case "Test":return Pv.Diamonds;case "You":return Pv.Spades;default:if(null==a)return null;throw new ba("Unsupported enum value: "+fa.string(a.value)+
" for enum "+a.__enum__);
		}
	};RWa.toJson=function(a){switch(a._hx_index){case 0:var b="FoE";break;case 1:b="Test";break;case 2:b="Go";break;case 3:b="You"
		}return{__enum__: "BackedStringTest",value:b
		}
	};var Qv=Ea[
		"de.innogames.forge.city.BackedTest"
	]={__ename__: "de.innogames.forge.city.BackedTest",__constructs__: null,Hearts: {_hx_name: "Hearts",_hx_index: 0,__enum__: "de.innogames.forge.city.BackedTest",toString:N
		},Diamonds: {_hx_name: "Diamonds",_hx_index: 1,__enum__: "de.innogames.forge.city.BackedTest",toString:N
		},
Clubs: {_hx_name: "Clubs",_hx_index: 2,__enum__: "de.innogames.forge.city.BackedTest",toString:N
		},Spades: {_hx_name: "Spades",_hx_index: 3,__enum__: "de.innogames.forge.city.BackedTest",toString:N
		}
	};Qv.__constructs__=[Qv.Hearts,Qv.Diamonds,Qv.Clubs,Qv.Spades
	];Qv.__empty_constructs__=[Qv.Hearts,Qv.Diamonds,Qv.Clubs,Qv.Spades
	];var zOb=function(){};h[
		"de.innogames.forge.city._BackedTest.BackedTestTools"
	]=zOb;zOb.__name__="de.innogames.forge.city._BackedTest.BackedTestTools";zOb.toInt=function(a){switch(a._hx_index){case 0:return 0;
case 1:return 1;case 2:return 2;case 3:return 3
		}
	};zOb.fromInt=function(a,b){switch(b){case 0:return Qv.Hearts;case 1:return Qv.Diamonds;case 2:return Qv.Clubs;case 3:return Qv.Spades;default:return null!=y._reportError&&y._reportError(Error("[LOGGER] Invalid value for enum BackedTest: "+b)),
			null
		}
	};var NHb=function(){};h[
		"de.innogames.forge.city.BackedTest_Converter"
	]=NHb;NHb.__name__="de.innogames.forge.city.BackedTest_Converter";NHb.fromJson=function(a){var b=null==a?null:a.value;if(null==b){if(null==
a)return null;throw new ba("Unsupported enum value: "+fa.string(a.value)+" for enum "+a.__enum__);
		}switch(b){case 0:return Qv.Hearts;case 1:return Qv.Diamonds;case 2:return Qv.Clubs;case 3:return Qv.Spades;default:if(null==a)return null;throw new ba("Unsupported enum value: "+fa.string(a.value)+" for enum "+a.__enum__);
		}
	};NHb.toJson=function(a){switch(a._hx_index){case 0:var b=0;break;case 1:b=1;break;case 2:b=2;break;case 3:b=3
		}return{__enum__: "BackedTest",value:b
		}
	};var Rv=Ea[
		"de.innogames.forge.city.BasicTest"
	]=
{__ename__: "de.innogames.forge.city.BasicTest",__constructs__: null,Hearts: {_hx_name: "Hearts",_hx_index: 0,__enum__: "de.innogames.forge.city.BasicTest",toString:N
		},Diamonds: {_hx_name: "Diamonds",_hx_index: 1,__enum__: "de.innogames.forge.city.BasicTest",toString:N
		},Clubs: {_hx_name: "Clubs",_hx_index: 2,__enum__: "de.innogames.forge.city.BasicTest",toString:N
		},Spades: {_hx_name: "Spades",_hx_index: 3,__enum__: "de.innogames.forge.city.BasicTest",toString:N
		}
	};Rv.__constructs__=[Rv.Hearts,Rv.Diamonds,Rv.Clubs,Rv.Spades
	];
Rv.__empty_constructs__=[Rv.Hearts,Rv.Diamonds,Rv.Clubs,Rv.Spades
	];var AOb=function(){};h[
		"de.innogames.forge.city._BasicTest.BasicTestTools"
	]=AOb;AOb.__name__="de.innogames.forge.city._BasicTest.BasicTestTools";AOb.toString=function(a){switch(a._hx_index){case 0:return"Hearts";case 1:return"Diamonds";case 2:return"Clubs";case 3:return"Spades"
		}
	};AOb.fromString=function(a,b){switch(b){case "Clubs":return Rv.Clubs;case "Diamonds":return Rv.Diamonds;case "Hearts":return Rv.Hearts;case "Spades":return Rv.Spades;
default:return null!=y._reportError&&y._reportError(Error("[LOGGER] Invalid value for enum BasicTest: "+b)),
			null
		}
	};var SWa=function(){};h[
		"de.innogames.forge.city.BasicTest_Converter"
	]=SWa;SWa.__name__="de.innogames.forge.city.BasicTest_Converter";SWa.fromJson=function(a){var b=null==a?null:a.value;if(null==b){if(null==a)return null;throw new ba("Unsupported enum value: "+fa.string(a.value)+" for enum "+a.__enum__);
		}switch(b){case "Clubs":return Rv.Clubs;case "Diamonds":return Rv.Diamonds;case "Hearts":return Rv.Hearts;
case "Spades":return Rv.Spades;default:if(null==a)return null;throw new ba("Unsupported enum value: "+fa.string(a.value)+" for enum "+a.__enum__);
		}
	};SWa.toJson=function(a){switch(a._hx_index){case 0:var b="Hearts";break;case 1:b="Diamonds";break;case 2:b="Clubs";break;case 3:b="Spades"
		}return{__enum__: "BasicTest",value:b
		}
	};var xq=Ea[
		"de.innogames.forge.city.CrossSellingType"
	]={__ename__: "de.innogames.forge.city.CrossSellingType",__constructs__: null,ROC: {_hx_name: "ROC",_hx_index: 0,__enum__: "de.innogames.forge.city.CrossSellingType",
toString:N
		},WORD_TRIP: {_hx_name: "WORD_TRIP",_hx_index: 1,__enum__: "de.innogames.forge.city.CrossSellingType",toString:N
		},CROSSWORD_JAM: {_hx_name: "CROSSWORD_JAM",_hx_index: 2,__enum__: "de.innogames.forge.city.CrossSellingType",toString:N
		},BLOONS_TD2: {_hx_name: "BLOONS_TD2",_hx_index: 3,__enum__: "de.innogames.forge.city.CrossSellingType",toString:N
		},HEROES_OF_HISTORY: {_hx_name: "HEROES_OF_HISTORY",_hx_index: 4,__enum__: "de.innogames.forge.city.CrossSellingType",toString:N
		}
	};xq.__constructs__=[xq.ROC,xq.WORD_TRIP,
xq.CROSSWORD_JAM,xq.BLOONS_TD2,xq.HEROES_OF_HISTORY
	];xq.__empty_constructs__=[xq.ROC,xq.WORD_TRIP,xq.CROSSWORD_JAM,xq.BLOONS_TD2,xq.HEROES_OF_HISTORY
	];var BOb=function(){};h[
		"de.innogames.forge.city._CrossSellingType.CrossSellingTypeTools"
	]=BOb;BOb.__name__="de.innogames.forge.city._CrossSellingType.CrossSellingTypeTools";BOb.toString=function(a){switch(a._hx_index){case 0:return"roc";case 1:return"word_trip";case 2:return"crossword_jam";case 3:return"bloons_td2";case 4:return"heroes_of_history"
		}
	};
BOb.fromString=function(a,b){switch(b){case "bloons_td2":return xq.BLOONS_TD2;case "crossword_jam":return xq.CROSSWORD_JAM;case "heroes_of_history":return xq.HEROES_OF_HISTORY;case "roc":return xq.ROC;case "word_trip":return xq.WORD_TRIP;default:return null!=y._reportError&&y._reportError(Error("[LOGGER] Invalid value for enum CrossSellingType: "+b)),
			null
		}
	};var TWa=function(){};h[
		"de.innogames.forge.city.CrossSellingType_Converter"
	]=TWa;TWa.__name__="de.innogames.forge.city.CrossSellingType_Converter";
TWa.fromJson=function(a){var b=null==a?null:a.value;if(null==b){if(null==a)return null;throw new ba("Unsupported enum value: "+fa.string(a.value)+" for enum "+a.__enum__);
		}switch(b){case "bloons_td2":return xq.BLOONS_TD2;case "crossword_jam":return xq.CROSSWORD_JAM;case "heroes_of_history":return xq.HEROES_OF_HISTORY;case "roc":return xq.ROC;case "word_trip":return xq.WORD_TRIP;default:if(null==a)return null;throw new ba("Unsupported enum value: "+fa.string(a.value)+" for enum "+a.__enum__);
		}
	};TWa.toJson=
function(a){switch(a._hx_index){case 0:var b="roc";break;case 1:b="word_trip";break;case 2:b="crossword_jam";break;case 3:b="bloons_td2";break;case 4:b="heroes_of_history"
		}return{__enum__: "CrossSellingType",value:b
		}
	};var hN=function(){};h[
		"de.innogames.shared.extensions.DisplayObjectExtension"
	]=hN;hN.__name__="de.innogames.shared.extensions.DisplayObjectExtension";hN.removeFromParent=function(a){var b=a.parent;null!=b&&b.removeChild(a)
	};var kc=function(){};h[
		"innodi.Injectable"
	]=kc;kc.__name__="innodi.Injectable";
kc.__isInterface__=!0;kc.prototype={__class__:kc
	};var $a=function(){};h[
		"org.robotlegs.mvcs.Actor"
	]=$a;$a.__name__="org.robotlegs.mvcs.Actor";$a.__interfaces__=[kc
	];$a.__instantiate=function(a){return new $a
	};$a.prototype={get_eventDispatcher:function(){return this._eventDispatcher
		},set_eventDispatcher:function(a){return this._eventDispatcher=a
		},get_eventMap:function(){null==this._eventMap&&(this._eventMap=new gF(this.get_eventDispatcher()));return this._eventMap
		},dispatch:function(a){return this.get_eventDispatcher().hasEventListener(a.type)?
this.get_eventDispatcher().dispatchEvent(a):!1
		},__construct:function(a){this.set_eventDispatcher(a.getInstanceForMapping("openfl.events.IEventDispatcher"));return null
		},__class__:$a,__properties__: {get_eventMap: "get_eventMap",set_eventDispatcher: "set_eventDispatcher",get_eventDispatcher: "get_eventDispatcher"
		}
	};var vd=function(){};h[
		"org.robotlegs.utilities.modular.mvcs.ModuleActor"
	]=vd;vd.__name__="org.robotlegs.utilities.modular.mvcs.ModuleActor";vd.__instantiate=function(a){return new vd
	};vd.__super__=
$a;vd.prototype=l($a.prototype,
	{get_moduleEventDispatcher:function(){return this._moduleEventDispatcher
		},set_moduleEventDispatcher:function(a){return this._moduleEventDispatcher=a
		},dispatchToModules:function(a){return this.get_moduleEventDispatcher().hasEventListener(a.type)?this.get_moduleEventDispatcher().dispatchEvent(a):!0
		},__construct:function(a){$a.prototype.__construct.call(this,a);this.set_moduleEventDispatcher(a.getInstanceForMapping("org.robotlegs.utilities.modular.core.IModuleEventDispatcher"));
return null
		},__class__:vd,__properties__:l($a.prototype.__properties__,
		{set_moduleEventDispatcher: "set_moduleEventDispatcher",get_moduleEventDispatcher: "get_moduleEventDispatcher"
		})
	});var $k=function(){this._currentStepIndex=0;this._totalSteps=-1;this._steps=[]
	};h[
		"de.innogames.shared.mvcs.model.AbstractSequencer"
	]=$k;$k.__name__="de.innogames.shared.mvcs.model.AbstractSequencer";$k.__instantiate=function(a){return new $k
	};$k.__super__=vd;$k.prototype=l(vd.prototype,
	{postConstruct:function(){this.configure();
this.step()
		},configure:function(){throw ba.thrown(new wb("Override configure and don't call super",
			8725414));
		},done:function(){},onStep:function(){},step:function(){this.stepsRemain()?this._executeNextStep():this.done()
		},stepsRemain:function(){return 0<this._steps.length
		},addStep:function(a,b){b=a.__name__;this._steps.push(b);this.commandMap.hasEventCommand(b,a,s7)||this.commandMap.mapEvent(b,a,s7,!0)
		},_executeNextStep:function(){
			-1==this._totalSteps&&(this._totalSteps=this._steps.length);var a=new s7(this._steps.shift(),
this,this._currentStepIndex,this._totalSteps);this._currentStepIndex++;this.onStep();this.dispatch(a)
		},_getStepClassName:function(){return null!=this._steps&&0<this._steps.length?this._steps[
				0
			]: "NoCurrentStep"
		},__inject:function(a){this.commandMap=a.getInstanceForMapping("org.robotlegs.core.ICommandMap")
		},__postConstruct:function(a){this.postConstruct()
		},__construct:function(a){vd.prototype.__construct.call(this,a);this.__inject(a);this.__postConstruct(a);return null
		},__class__:$k
	});var Ep=function(){$k.call(this)
	};
h[
		"de.innogames.shared.mvcs.controller.ModuleSequencer"
	]=Ep;Ep.__name__="de.innogames.shared.mvcs.controller.ModuleSequencer";Ep.__instantiate=function(a){return new Ep
	};Ep.__super__=$k;Ep.prototype=l($k.prototype,
	{configure:function(){this._loaderHandle=Ae.requestModuleLoader()
		},_executeNextStep:function(){$k.prototype._executeNextStep.call(this);this.dispatchToModules(new yq("ShieldLoaderEvent/PROGRESS",this._currentStepIndex,this._totalSteps))
		},done:function(){this.dispatchToModules(new AS("ModuleEvent/MODULE_FINISHED_LOADING"));
var a=this._loaderHandle;null!=a&&a.cancel()
		},__class__:Ep
	});var Wka=function(){};h[
		"org.robotlegs.core.ICommand"
	]=Wka;Wka.__name__="org.robotlegs.core.ICommand";Wka.__isInterface__=!0;Wka.__interfaces__=[kc
	];Wka.prototype={__class__:Wka
	};var M=function(){};h[
		"org.robotlegs.mvcs.Command"
	]=M;M.__name__="org.robotlegs.mvcs.Command";M.__interfaces__=[Wka
	];M.__instantiate=function(a){return new M
	};M.prototype={execute:function(){},dispatch:function(a){return this.eventDispatcher.hasEventListener(a.type)?
this.eventDispatcher.dispatchEvent(a):!1
		},__construct:function(a){this.contextView=a.getInstanceForMapping("openfl.display.DisplayObjectContainer");this.commandMap=a.getInstanceForMapping("org.robotlegs.core.ICommandMap");this.eventDispatcher=a.getInstanceForMapping("openfl.events.IEventDispatcher");this.injector=a.getInstanceForMapping("innodi.Injector");this.mediatorMap=a.getInstanceForMapping("org.robotlegs.core.IMediatorMap");return null
		},__class__:M
	};var FZ=function(){};h[
		"de.innogames.shared.mvcs.controller.ProcessSocketConnectedCommand"
	]=
FZ;FZ.__name__="de.innogames.shared.mvcs.controller.ProcessSocketConnectedCommand";FZ.__instantiate=function(a){return new FZ
	};FZ.__super__=M;FZ.prototype=l(M.prototype,
	{execute:function(){this.model.set_connected("SocketConnectionEvent/CONNECTED"==this.event.type);"SocketConnectionEvent/DISCONNECTED"==this.event.type||"SocketConnectionEvent/CONNECTION_FAILED"==this.event.type?(this.model.startReconnecting(),this.model.set_markOnReconnect(!0)): "SocketConnectionEvent/CONNECTED"==this.event.type&&(this.model.get_markOnReconnect()&&
this._triggerDataUpdates(),this.model.set_markOnReconnect(!1))
		},_triggerDataUpdates:function(){this._triggerTavernSocialBarUpdate();this._triggerTavernIconUpdate()
		},_triggerTavernIconUpdate:function(){this.tavernService.getSittingPlayersCount()
		},_triggerTavernSocialBarUpdate:function(){this.tavernService.getOtherTavernStates()
		},__construct:function(a){M.prototype.__construct.call(this,a);this.event=a.getInstanceForMapping("de.innogames.shared.networking.events.SocketConnectionEvent");this.model=a.getInstanceForMapping("de.innogames.strategycity.main.model.SocketModel");
this.tavernService=a.getInstanceForMapping("de.innogames.strategycity.shared.ui.window.tavern.service.TavernService");this.tavernModel=a.getInstanceForMapping("de.innogames.strategycity.shared.ui.window.tavern.model.TavernModel");return null
		},__class__:FZ
	});var BS=function(){this._batchableCommandsInExecution=[];this._batchableCommands=[]
	};h[
		"de.innogames.shared.mvcs.controller.batch.BatchExecutionCommand"
	]=BS;BS.__name__="de.innogames.shared.mvcs.controller.batch.BatchExecutionCommand";BS.__instantiate=
function(a){return new BS
	};BS.__super__=M;BS.prototype=l(M.prototype,
	{execute:function(){for(var a=0,b=this._batchableCommands;a<b.length;){var c=this.injector.instantiate(b[a++
				]);c.addCompleteListener(m(this,this._onBatchableCommandCompleted));this._batchableCommandsInExecution.push(c);c.execute()
			}
		},batchCommand:function(a){this._batchableCommands.push(a)
		},_configure:function(){},_executionCompleted:function(){},_onBatchableCommandCompleted:function(a){Wa.remove(this._batchableCommandsInExecution,
a);0==this._batchableCommandsInExecution.length&&this._executionCompleted()
		},__inject:function(a){},__postConstruct:function(a){this._configure()
		},__construct:function(a){M.prototype.__construct.call(this,a);this.__inject(a);this.__postConstruct(a);return null
		},__class__:BS
	});var UWa=function(){};h[
		"de.innogames.shared.mvcs.controller.batch.IBatchableCommand"
	]=UWa;UWa.__name__="de.innogames.shared.mvcs.controller.batch.IBatchableCommand";UWa.__isInterface__=!0;UWa.__interfaces__=[kc
	];UWa.prototype=
{__class__:UWa
	};var Sv=function(){};h[
		"de.innogames.shared.mvcs.controller.batch.BatchableCommand"
	]=Sv;Sv.__name__="de.innogames.shared.mvcs.controller.batch.BatchableCommand";Sv.__interfaces__=[UWa
	];Sv.__instantiate=function(a){return new Sv
	};Sv.__super__=M;Sv.prototype=l(M.prototype,
	{addCompleteListener:function(a){this.__onCompleteFunction=a
		},execute:function(){},__class__:Sv
	});var D=function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);this.type=a;this.bubbles=b;this.cancelable=c;this.eventPhase=2
	};
h[
		"openfl.events.Event"
	]=D;D.__name__="openfl.events.Event";D.prototype={clone:function(){var a=new D(this.type,this.bubbles,this.cancelable);a.eventPhase=this.eventPhase;a.target=this.target;a.currentTarget=this.currentTarget;return a
		},formatToString:function(a,b,c,d,e,g){var k=[];null!=b&&k.push(b);null!=c&&k.push(c);null!=d&&k.push(d);null!=e&&k.push(e);null!=g&&k.push(g);return m(this,this.__formatToString).apply(this,
			[a,k
			])
		},isDefaultPrevented:function(){return this.__preventDefault
		},preventDefault:function(){this.cancelable&&
(this.__preventDefault=!0)
		},stopImmediatePropagation:function(){this.__isCanceledNow=this.__isCanceled=!0
		},stopPropagation:function(){this.__isCanceled=!0
		},toString:function(){return this.__formatToString("Event",
			[
				"type",
				"bubbles",
				"cancelable"
			])
		},__formatToString:function(a,b){a="["+a;for(var c,d=0;d<b.length;){var e=b[d
				];++d;c=gb.field(this,e);a="string"==typeof c?a+(" "+e+'="'+fa.string(c)+'"'):a+(" "+e+"="+fa.string(c))
			}return a+"]"
		},__class__:D
	};var t7=function(){D.call(this,
		"BreakModuleLoadingEvent/BREAK_MODULE_LOADING")
	};
h[
		"de.innogames.shared.mvcs.event.BreakModuleLoadingEvent"
	]=t7;t7.__name__="de.innogames.shared.mvcs.event.BreakModuleLoadingEvent";t7.__super__=D;t7.prototype=l(D.prototype,
	{clone:function(){return new t7
		},__class__:t7
	});var AS=function(a){D.call(this,a)
	};h[
		"de.innogames.shared.mvcs.event.ModuleEvent"
	]=AS;AS.__name__="de.innogames.shared.mvcs.event.ModuleEvent";AS.__super__=D;AS.prototype=l(D.prototype,
	{clone:function(){return new AS(this.type)
		},__class__:AS
	});var s7=function(a,b,c,d){this._currentStepIndex=
this._totalSteps=0;D.call(this,a);this._classFQN=a;this._sequencer=b;this._currentStepIndex=c;this._totalSteps=d
	};h[
		"de.innogames.shared.mvcs.model.events.SequenceStepEvent"
	]=s7;s7.__name__="de.innogames.shared.mvcs.model.events.SequenceStepEvent";s7.__super__=D;s7.prototype=l(D.prototype,
	{clone:function(){return new s7(this._classFQN,this._sequencer,this._currentStepIndex,this._totalSteps)
		},step:function(){this._sequencer.step()
		},get_currentStepIndex:function(){return this._currentStepIndex
		},get_totalSteps:function(){return this._totalSteps
		},
__class__:s7,__properties__: {get_totalSteps: "get_totalSteps",get_currentStepIndex: "get_currentStepIndex"
		}
	});var VWa=function(){};h[
		"org.robotlegs.core.IMediator"
	]=VWa;VWa.__name__="org.robotlegs.core.IMediator";VWa.__isInterface__=!0;VWa.__interfaces__=[kc
	];VWa.prototype={__class__:VWa
	};var qJ=function(){};h[
		"org.robotlegs.base.MediatorBase"
	]=qJ;qJ.__name__="org.robotlegs.base.MediatorBase";qJ.__interfaces__=[VWa
	];qJ.prototype={preRegister:function(){this.onRegister()
		},onRegister:function(){},preRemove:function(){this.onRemove()
		},
onRemove:function(){},getViewComponent:function(){return this.viewComponent
		},setViewComponent:function(a){this.viewComponent=a
		},__construct:function(a){return null
		},__class__:qJ
	};var V=function(){};h[
		"org.robotlegs.mvcs.Mediator"
	]=V;V.__name__="org.robotlegs.mvcs.Mediator";V.__instantiate=function(a){return new V
	};V.__super__=qJ;V.prototype=l(qJ.prototype,
	{preRemove:function(){null!=this._eventMap&&this._eventMap.unmapListeners();qJ.prototype.preRemove.call(this)
		},get_eventDispatcher:function(){return this._eventDispatcher
		},
set_eventDispatcher:function(a){return this._eventDispatcher=a
		},get_eventMap:function(){null==this._eventMap&&(this._eventMap=new gF(this.get_eventDispatcher()));return this._eventMap
		},dispatch:function(a){return this.get_eventDispatcher().hasEventListener(a.type)?this.get_eventDispatcher().dispatchEvent(a):!1
		},addViewListener:function(a,b,c,d,e,g){null==g&&(g=!0);null==e&&(e=0);null==d&&(d=!1);this.get_eventMap().mapListener(this.viewComponent,a,b,c,d,e,g)
		},removeViewListener:function(a,b,c,d){null==
d&&(d=!1);this.get_eventMap().unmapListener(this.viewComponent,a,b,c,d)
		},addContextListener:function(a,b,c,d,e,g){null==g&&(g=!0);null==e&&(e=0);null==d&&(d=!1);this.get_eventMap().mapListener(this.get_eventDispatcher(),a,b,c,d,e,g)
		},removeContextListener:function(a,b,c,d){null==d&&(d=!1);this.get_eventMap().unmapListener(this.get_eventDispatcher(),a,b,c,d)
		},__construct:function(a){qJ.prototype.__construct.call(this,a);this.set_eventDispatcher(a.getInstanceForMapping("openfl.events.IEventDispatcher"));
this.contextView=a.getInstanceForMapping("openfl.display.DisplayObjectContainer");this.mediatorMap=a.getInstanceForMapping("org.robotlegs.core.IMediatorMap");return null
		},__class__:V,__properties__: {get_eventMap: "get_eventMap",set_eventDispatcher: "set_eventDispatcher",get_eventDispatcher: "get_eventDispatcher"
		}
	});var ag=function(){};h[
		"de.innogames.shared.mvcs.view.ButtonMediator"
	]=ag;ag.__name__="de.innogames.shared.mvcs.view.ButtonMediator";ag.__instantiate=function(a){return new ag
	};ag.__super__=
V;ag.prototype=l(V.prototype,
	{onRegister:function(){this.addViewListener("click",m(this,this._onButtonClick))
		},_onButtonClick:function(a){ic.instance.getLibrary("sounds/city/globalsounds/globalsounds").playSound("City_UI_Click_Vs1")
		},__class__:ag
	});var gd=function(){};h[
		"de.innogames.shared.mvcs.view.IDisposable"
	]=gd;gd.__name__="de.innogames.shared.mvcs.view.IDisposable";gd.__isInterface__=!0;gd.prototype={__class__:gd
	};var kh=function(){this._links=[]
	};h[
		"de.innogames.shared.mvcs.view.Disposer"
	]=
kh;kh.__name__="de.innogames.shared.mvcs.view.Disposer";kh.__interfaces__=[gd,at
	];kh.prototype={add:function(a){null==this._links&&(this._links=[]);this._links.push(a)
		},cancel:function(){if(null!=this._links){for(var a=0,b=this._links;a<b.length;){var c=b[a
					];++a;null!=c&&c.cancel()
				}this._links=null
			}
		},dispose:function(){this.cancel()
		},reset:function(){this.cancel();this._links=[]
		},__class__:kh
	};var Vf=function(a){this._disposable=a
	};h[
		"de.innogames.shared.mvcs.view._Disposer.DisposableAdapter"
	]=Vf;
Vf.__name__="de.innogames.shared.mvcs.view._Disposer.DisposableAdapter";Vf.__interfaces__=[at
	];Vf.prototype={cancel:function(){null!=this._disposable&&(this._disposable.dispose(),this._disposable=null)
		},__class__:Vf
	};var L=function(){this._assetsLoaded=!1;C.call(this);this._disposer=new kh;this._createEventListener()
	};h[
		"de.innogames.shared.mvcs.view.ViewBase"
	]=L;L.__name__="de.innogames.shared.mvcs.view.ViewBase";L.__interfaces__=[gd
	];L.getTooltipContainer=function(){null==L._tooltipContainer&&(L._tooltipContainer=
gg.instance.tooltipContainer);return L._tooltipContainer
	};L.getContextMenuContainer=function(){null==L._contextMenuContainer&&(L._contextMenuContainer=gg.instance.contextMenuContainer);return L._contextMenuContainer
	};L.getMainUIContainer=function(){return gg.instance.uiContainer
	};L.initializeSpecialLayersForPreviewer=function(a,b){L._tooltipContainer=a;L._contextMenuContainer=b
	};L.__super__=C;L.prototype=l(C.prototype,
	{dispose:function(){this._assets=null;null!=this.parent&&this.parent.removeChild(this);
this._abortAssetLoading();this._disposer.cancel();this.dispatchEvent(new xh("ViewCreationEvent/VIEW_DISPOSED"))
		},_requireAssets:function(a){var b=m(this,this._onRequestedAssetsLoaded);this._assetsBatchLoadingLink=yb.getInstance().load(a).handle(function(c){switch(c._hx_index){case 0:za.invoke(b,c.data);break;case 1:c=c.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+c.message))
				}
			})
		},_abortAssetLoading:function(){var a=this._assetsBatchLoadingLink;null!=a&&a.cancel()
		},_onAssetsLoaded:function(){},
_onAddedToStage:function(a){this.removeEventListener("addedToStage",m(this,this._onAddedToStage));null!=this.stage&&this.stage.addEventListener("resize",m(this,this._onResize),!1,
			0,!0);new rJ(this)
		},_onResize:function(a){},_onRemovedFromStage:function(a){this.stage.removeEventListener("resize",m(this,this._onResize));this.removeEventListener("removedFromStage",m(this,this._onRemovedFromStage))
		},_getTooltipContainer:function(){return L.getTooltipContainer()
		},_createEventListener:function(){this.addEventListener("addedToStage",
m(this,this._onAddedToStage),!1,
			0,!0);this.addEventListener("removedFromStage",m(this,this._onRemovedFromStage),!1,
			0,!0)
		},_destroyTooltip:function(a){null!=a&&null!=L._tooltipContainer&&L._tooltipContainer.contains(a)&&L._tooltipContainer.removeChild(a)
		},_onRequestedAssetsLoaded:function(a){null==this._assets?this._assets=a:u7.merge(this._assets,a);this._assetsLoaded=!0;this._onAssetsLoaded();this.dispatchEvent(new xh("ViewCreationEvent/VIEW_INITIALIZED"))
		},get_assetsLoaded:function(){return this._assetsLoaded
		},
get_id:function(){return this._id
		},set_id:function(a){return this._id=a
		},__class__:L,__properties__:l(C.prototype.__properties__,
		{set_id: "set_id",get_id: "get_id",get_assetsLoaded: "get_assetsLoaded"
		})
	});var xh=function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);D.call(this,a,b,c)
	};h[
		"de.innogames.shared.mvcs.view.ViewCreationEvent"
	]=xh;xh.__name__="de.innogames.shared.mvcs.view.ViewCreationEvent";xh.__super__=D;xh.prototype=l(D.prototype,
	{clone:function(){return new xh(this.type,this.bubbles,this.cancelable)
		},
__class__:xh
	});var iN=function(){};h[
		"de.innogames.shared.networking.INetConnectionService"
	]=iN;iN.__name__="de.innogames.shared.networking.INetConnectionService";iN.__isInterface__=!0;iN.prototype={__class__:iN
	};var xa=function(){this._isPaused=!1;this._oneTimeCallbacks=new x
	};h[
		"de.innogames.shared.networking.NetConnectionService"
	]=xa;xa.__name__="de.innogames.shared.networking.NetConnectionService";xa.__interfaces__=[iN
	];xa._containsError=function(a){return a.result instanceof ff
	};xa.__preDestroy=
function(a){a.preDestroy()
	};xa.__instantiate=function(a){return new xa
	};xa.__super__=vd;xa.prototype=l(vd.prototype,
	{postConstruct:function(){this.gateway.addServiceCallback(this.get_serviceName(),m(this,this._onRequestResult))
		},preDestroy:function(){this.dispose()
		},get_serviceName:function(){throw ba.thrown(new wb("AmfService: Mandatory property serviceName not overridden by child class!"));
		},_addOneTimeCallback:function(a,b,c){a=new OHb(a,c);c=this._oneTimeCallbacks.h[b
			];null==c?this._oneTimeCallbacks.h[b
			]=
[a
			]:c.push(a)
		},set_isPaused:function(a){(this._isPaused=a)?null==this._heldBackResponses&&(this._heldBackResponses=[]):this._releaseHeldResponses();return a
		},dispose:function(){this.gateway.removeServiceCallback(this.get_serviceName(),m(this,this._onRequestResult));this._oneTimeCallbacks.h=Object.create(null)
		},_awaitOnce:function(a){var b=new Rc;this._addOneTimeCallback(function(c){b.trigger(c.result)
			},a);return b
		},_awaitOnceNoise:function(a){var b=new Rc;this._addOneTimeCallback(function(c){b.trigger(null)
			},
a);return b
		},_call:function(a,b,c){null==c&&(c=!1);this.gateway.call(new Ec(this.get_serviceName(),a,b),c)
		},_callWithFuture:function(a,b,c){null==c&&(c=!1);var d=new Rc;this._addOneTimeCallback(function(e){d.trigger(e.result)
			},a);this.gateway.call(new Ec(this.get_serviceName(),a,b),c);return d
		},_callWithNoiseFuture:function(a,b,c){null==c&&(c=!1);var d=new Rc;this._addOneTimeCallback(function(e){d.trigger(null)
			},a);this.gateway.call(new Ec(this.get_serviceName(),a,b),c);return d
		},_callWithPromise:function(a,
b,c){null==c&&(c=!1);var d=new Rc;this._addOneTimeCallback(function(e){d.trigger(Ha.Success(e.result))
			},a,function(e){e=fi.withData(null,e.message,e,
				{fileName: "src/de/innogames/shared/networking/NetConnectionService.hx",lineNumber: 116,className: "de.innogames.shared.networking.NetConnectionService",methodName: "_callWithPromise"
				});d.trigger(Ha.Failure(e))
			});this.gateway.call(new Ec(this.get_serviceName(),a,b),c);return d
		},_callWithNoisePromise:function(a,b,c){null==c&&(c=!1);var d=new Rc;this._addOneTimeCallback(function(e){d.trigger(Ha.Success(null))
			},
a,function(e){e=fi.withData(null,e.message,e,
				{fileName: "src/de/innogames/shared/networking/NetConnectionService.hx",lineNumber: 123,className: "de.innogames.shared.networking.NetConnectionService",methodName: "_callWithNoisePromise"
				});d.trigger(Ha.Failure(e))
			});this.gateway.call(new Ec(this.get_serviceName(),a,b),c);return d
		},_onRequestResult:function(a){this._isPaused?this._heldBackResponses.push(a):xa._containsError(a)?this._handleSoftErrors(a.result,a.method):this._onRequestSuccessful(a)
		},_onRequestSuccessful:function(a){this._processSuccessCallbacks(a.method,
a)
		},_handleSoftErrors:function(a,b){b=this._oneTimeCallbacks.h[b
			];this.dispatchToModules(new CS(a));Ae.reset();this.dispatchToModules(new ue("CityUiEvent/HIDE_LOADER"));this._processErrorCallbacks(b,a)
		},_isMaintenance:function(a){return a.result instanceof Xka
		},_processSuccessCallbacks:function(a,b){a=this._oneTimeCallbacks.h[a
			];if(null!=a&&0!=a.length)a.shift().onSuccess(b)
		},_processErrorCallbacks:function(a,b){if(null!=a)for(;0<a.length;){var c=a.shift();if(null!=c.onError)c.onError(b)
			}
		},_releaseHeldResponses:function(){if(null!=
this._heldBackResponses){for(var a=0,b=this._heldBackResponses;a<b.length;)this._onRequestResult(b[a++
				]);this._heldBackResponses.length=0
			}
		},__inject:function(a){this.gateway=a.getInstanceForMapping("de.innogames.shared.networking.NetConnectionGateway")
		},__postConstruct:function(a){this.postConstruct()
		},__construct:function(a){vd.prototype.__construct.call(this,a);this.__inject(a);this.__postConstruct(a);return xa.__preDestroy
		},__class__:xa,__properties__:l(vd.prototype.__properties__,
		{set_isPaused: "set_isPaused",
get_serviceName: "get_serviceName"
		})
	});var Hb=function(){xa.call(this)
	};h[
		"de.innogames.shared.networking.EzService"
	]=Hb;Hb.__name__="de.innogames.shared.networking.EzService";Hb.__super__=xa;Hb.prototype=l(xa.prototype,
	{__class__:Hb
	});var WWa=function(a,b,c,d){this._recorders=new x;this._serviceCallbacks=new x;this._requestCompletedSignal=$b.trigger();this._connection=a;this._socketConnection=b;this._dispatcher=c;this._sentryBreadcrumbReporter=d;this._start()
	};h[
		"de.innogames.shared.networking.NetConnectionGateway"
	]=
WWa;WWa.__name__="de.innogames.shared.networking.NetConnectionGateway";WWa.prototype={addServiceCallback:function(a,b){if(null!=this._recorders.h[a
			])this._swapRecorderForService(a,b);else{var c=this._serviceCallbacks.h[a
				];null==c&&(c=[],this._serviceCallbacks.h[a
				]=c);-1==c.indexOf(b)&&c.push(b)
			}
		},recordRequestsFor:function(a,b){null==this._recorders.h[a
			]&&(b=new Yka(a,b,this),b.startRecording(),this._recorders.h[a
			]=b)
		},setRecorderIgnoreList:function(a,b){a=this._recorders.h[a
			];null!=a&&a.setIgnoreList(b)
		},
removeServiceCallback:function(a,b){a=this._serviceCallbacks.h[a
			];null!=a&&Wa.remove(a,b)
		},call:function(a,b,c){null==b&&(b=!1);this._connection.send(a,b,c);a="BE request "+a.className+"."+a.methodName;b&&(a+=" (immediate)");this._sentryBreadcrumbReporter.addBreadcrumb("Backend",a,
			"log")
		},callOnSocket:function(a){this._socketConnection.send(a);this._sentryBreadcrumbReporter.addBreadcrumb("Backend",
			"BE socket request "+a.className+"."+a.methodName,
			"log")
		},enqueue:function(a,b){this._connection.enqueue(a,
b);a="Queued BE request "+a.className+"."+a.methodName;b&&(a+=" (overwriting)");this._sentryBreadcrumbReporter.addBreadcrumb("Backend",a,
			"log")
		},startHandlingSocketPushes:function(){this._socketConnection.startHandling()
		},shutdown:function(){this._socketConnection.close();this._connection.shutdown()
		},_swapRecorderForService:function(a,b){var c=this._recorders.h[a
			],d=this._recorders;Object.prototype.hasOwnProperty.call(d.h,a)&&delete d.h[a
			];c.stopRecording();this.addServiceCallback(a,b);c.forwardRecordedRequests(b);
c.dispose()
		},_start:function(){this._connection.addEventListener("ServerResponsesReceivedEvent/TYPE",m(this,this._processCallbacks));this._connection.addEventListener("BackendErrorEvent/TYPE",(H=this._dispatcher,m(H,H.dispatchEvent)));this._connection.addEventListener("RedirectEvent/TYPE",(H=this._dispatcher,m(H,H.dispatchEvent)));this._socketConnection.addEventListener("ServerResponsesReceivedEvent/TYPE",m(this,this._onSocketResponseReceived));this._socketConnection.addEventListener("BackendErrorEvent/TYPE",
(H=this._dispatcher,m(H,H.dispatchEvent)));this._socketConnection.addEventListener("SocketConnectionEvent/CONNECTED",(H=this._dispatcher,m(H,H.dispatchEvent)));this._socketConnection.addEventListener("SocketConnectionEvent/DISCONNECTED",(H=this._dispatcher,m(H,H.dispatchEvent)));this._socketConnection.isConnected()||this._socketConnection.connect()
		},_onSocketResponseReceived:function(a){for(var b=0,c=a.responses;b<c.length;){var d=c[b
				];++b;this._sentryBreadcrumbReporter.addBreadcrumb("Backend",
				"BE socket response "+
d.requestClass+"."+d.requestMethod,
				"log",d.responseData)
			}this._processCallbacks(a)
		},_processCallbacks:function(a){var b=0;for(a=a.responses;b<a.length;){var c=a[b
				];++b;this._requestCompletedSignal.handlers.invoke(c.requestId);var d=this._serviceCallbacks.h[c.requestClass
				];if(null!=d){c=new PHb(c.requestMethod,c.responseData);for(var e=0;e<d.length;)d[e++
					](c)
				}
			}
		},get_socketConnection:function(){return this._socketConnection
		},get_requestQueuedSignal:function(){return this._connection._requestQueuedSignal
		},
get_requestCompletedSignal:function(){return this._requestCompletedSignal
		},get_maintenanceSignal:function(){return this._connection._maintenanceSignal
		},__class__:WWa,__properties__: {get_maintenanceSignal: "get_maintenanceSignal",get_requestCompletedSignal: "get_requestCompletedSignal",get_requestQueuedSignal: "get_requestQueuedSignal",get_socketConnection: "get_socketConnection"
		}
	};var Ec=function(a,b,c){this.className=a;this.methodName=b;this.parameters=null==c?[]:c;this.requestId=Ec._getNextRequestId()
	};
h[
		"de.innogames.shared.networking.NetConnectionRequest"
	]=Ec;Ec.__name__="de.innogames.shared.networking.NetConnectionRequest";Ec._getNextRequestId=function(){var a=Ec._requestCounter++;2147483647==Ec._requestCounter&&(Ec._requestCounter=1);return a
	};Ec.prototype={toString:function(){return this.className+"::"+this.methodName+"("+this.parameters.join(", ")+")"
		},toServerRequestVO:function(){var a=new XWa;a.requestClass=this.className;a.requestMethod=this.methodName;a.requestData=this.parameters;a.requestId=
this.requestId;return a
		},get_fullName:function(){return this.className+"."+this.methodName
		},__class__:Ec,__properties__: {get_fullName: "get_fullName"
		}
	};var PHb=function(a,b){this.method=a;this.result=b
	};h[
		"de.innogames.shared.networking.NetConnectionResult"
	]=PHb;PHb.__name__="de.innogames.shared.networking.NetConnectionResult";PHb.prototype={__class__:PHb
	};var OHb=function(a,b){this.onSuccess=a;this.onError=b
	};h[
		"de.innogames.shared.networking._NetConnectionService.OneTimeCallback"
	]=OHb;OHb.__name__=
"de.innogames.shared.networking._NetConnectionService.OneTimeCallback";OHb.prototype={__class__:OHb
	};var Yka=function(a,b,c){this._maxRecords=0;xa.call(this);this._serviceName=a;this._maxRecords=b;this._results=[];this.gateway=c
	};h[
		"de.innogames.shared.networking.RecordingNetConnectionService"
	]=Yka;Yka.__name__="de.innogames.shared.networking.RecordingNetConnectionService";Yka.__instantiate=function(a){return new Yka(a.getInstanceForMapping("String"),a.getInstanceForMapping("Int"),a.getInstanceForMapping("de.innogames.shared.networking.NetConnectionGateway"))
	};
Yka.__super__=xa;Yka.prototype=l(xa.prototype,
	{startRecording:function(){this.gateway.addServiceCallback(this._serviceName,m(this,this._onRequestSuccessful))
		},stopRecording:function(){this.gateway.removeServiceCallback(this._serviceName,m(this,this._onRequestSuccessful))
		},forwardRecordedRequests:function(a){if(null!=this._results&&0!=this._results.length)for(var b=0,c=this._results;b<c.length;)a(c[b++
			])
		},setIgnoreList:function(a){this._ignoreList=a
		},dispose:function(){xa.prototype.dispose.call(this);
this._results=null
		},get_serviceName:function(){return this._serviceName
		},_onRequestSuccessful:function(a){xa.prototype._onRequestSuccessful.call(this,a);this._recordResult(a)
		},_recordResult:function(a){this._isIgnored(a.method)||(this._results.length>=this._maxRecords&&this._results.shift(),this._results.push(a))
		},_isIgnored:function(a){return null!=this._ignoreList?-1!=this._ignoreList.indexOf(a):!1
		},__class__:Yka
	});var qC=function(a,b,c){D.call(this,
		"BackendErrorEvent/TYPE");this.title=null==a?
Kf.BASE_ERROR_TITLE:a;null==b&&(b=Kf.BASE_ERROR_TITLE);this.message=b;this.level=c
	};h[
		"de.innogames.shared.networking.events.BackendErrorEvent"
	]=qC;qC.__name__="de.innogames.shared.networking.events.BackendErrorEvent";qC.__super__=D;qC.prototype=l(D.prototype,
	{clone:function(){return new qC(this.title,this.message,this.level)
		},__class__:qC
	});var jN=Ea[
		"de.innogames.shared.networking.events.BackendErrorLogLevel"
	]={__ename__: "de.innogames.shared.networking.events.BackendErrorLogLevel",__constructs__: null,
Warn: {_hx_name: "Warn",_hx_index: 0,__enum__: "de.innogames.shared.networking.events.BackendErrorLogLevel",toString:N
		},Error: {_hx_name: "Error",_hx_index: 1,__enum__: "de.innogames.shared.networking.events.BackendErrorLogLevel",toString:N
		}
	};jN.__constructs__=[jN.Warn,jN.Error
	];jN.__empty_constructs__=[jN.Warn,jN.Error
	];var Zka=function(){D.call(this,
		"ReloadGameEvent/RELOAD_GAME")
	};h[
		"de.innogames.shared.networking.events.ReloadGameEvent"
	]=Zka;Zka.__name__="de.innogames.shared.networking.events.ReloadGameEvent";
Zka.__super__=D;Zka.prototype=l(D.prototype,
	{clone:function(){return new Zka
		},__class__:Zka
	});var v7=function(a){D.call(this,
		"ServerResponsesReceivedEvent/TYPE");this.responses=a
	};h[
		"de.innogames.shared.networking.events.ServerResponsesReceivedEvent"
	]=v7;v7.__name__="de.innogames.shared.networking.events.ServerResponsesReceivedEvent";v7.__super__=D;v7.prototype=l(D.prototype,
	{clone:function(){return new v7(this.responses)
		},__class__:v7
	});var Qz=function(a){D.call(this,a)
	};h[
		"de.innogames.shared.networking.events.ServerUpdateEvent"
	]=
Qz;Qz.__name__="de.innogames.shared.networking.events.ServerUpdateEvent";Qz.__super__=D;Qz.prototype=l(D.prototype,
	{clone:function(){return new Qz(this.type)
		},__class__:Qz
	});var Rz=function(a){D.call(this,a,!1,!1)
	};h[
		"de.innogames.shared.networking.events.SocketConnectionEvent"
	]=Rz;Rz.__name__="de.innogames.shared.networking.events.SocketConnectionEvent";Rz.__super__=D;Rz.prototype=l(D.prototype,
	{clone:function(){return new Rz(this.type)
		},__class__:Rz
	});var CS=function(a){D.call(this,
		"SoftErrorEvent/SOFT_ERROR");
this.errorVO=a
	};h[
		"de.innogames.shared.networking.events.SoftErrorEvent"
	]=CS;CS.__name__="de.innogames.shared.networking.events.SoftErrorEvent";CS.__super__=D;CS.prototype=l(D.prototype,
	{clone:function(){return new CS(this.errorVO)
		},get_message:function(){return this.errorVO.message
		},get_title:function(){return this.errorVO.title
		},get_errorCode:function(){return this.errorVO.error_code
		},__class__:CS,__properties__: {get_errorCode: "get_errorCode",get_title: "get_title",get_message: "get_message"
		}
	});var YWa=
function(a,b){this._disposed=!1;this._sendRetries=0;this._batchQueue=[];this._currentBatchRequests=[];this._maintenanceSignal=$b.trigger();this._requestQueuedSignal=$b.trigger();var c=this;Jb.call(this);this._gatewayUrl=a;this._defaultBatchDelay=b;var d=new Ge(".*\\?h=([0-9a-zA-Z_-]+)(&|$)",
		"");d.match(a);this._signatureHash=d.matched(1);this._batchTimer=new Ih(b,
		1);this._batchTimer.addEventListener("timer",function(e){c._sendAllBufferedRequests()
		})
	};h[
		"de.innogames.shared.networking.providers.RequestConnectionProvider"
	]=
YWa;YWa.__name__="de.innogames.shared.networking.providers.RequestConnectionProvider";YWa.__super__=Jb;YWa.prototype=l(Jb.prototype,
	{send:function(a,b,c){this._currentBatchRequests.push(a);b?this._sendAllBufferedRequests():this._batchTimer.running||(null!=c&&this._batchTimer.set_delay(c),this._batchTimer.start())
		},enqueue:function(a,b){if(b)for(b=this._currentBatchRequests.length;0<b--;){var c=this._currentBatchRequests[b
				];if(c.get_fullName()==a.get_fullName()){a.requestId=c.requestId;this._currentBatchRequests[b
					]=
a;return
				}
			}this._currentBatchRequests.push(a)
		},shutdown:function(){this._sendAllBufferedRequests();this._disposed=!0
		},_sendAllBufferedRequests:function(){if(!this._disposed&&0!=this._currentBatchRequests.length){for(var a=null,b=[],c=0,d=this._currentBatchRequests;c<d.length;){var e=d[c
					];++c;null!=a&&e.requestId<=a.requestId&&(a="Request ["+e.get_fullName()+" id="+e.requestId+"] has ID which is less than or equal to a previous one in a batch ["+a.get_fullName()+" id="+a.requestId+"]",null!=y._reportError&&
y._reportError(Error("[LOGGER] "+a)));a=e;b.push(e.toServerRequestVO());this._requestQueuedSignal.handlers.invoke(e.requestId)
				}this._currentBatchRequests.length=0;c=[];for(d=0;d<b.length;)c.push(b[d++
				].toJSONObject());this._pushBatch(JSON.stringify(c));this._batchTimer.reset();this._batchTimer.set_delay(this._defaultBatchDelay)
			}
		},_pushBatch:function(a){this._batchQueue.push(a);1==this._batchQueue.length&&this._sendNextBatch()
		},_sendNextBatch:function(){this._send(this._batchQueue[
				0
			])
		},_send:function(a){this._sentBatch=
a;var b=new kn(this._gatewayUrl);b.data=a;b.method="POST";this._setUrlRequestHeaders(b);this._loadUrlRequest(b)
		},_setUrlRequestHeaders:function(a){a.requestHeaders=[new DS("Client-Identification",
				[
					"version=1.320",
					"requiredVersion=1.320",
					"platform="+this._getPlatformForClientIdentifiaction(),
					"platformType=html5",
					"platformVersion="+this._getPlatformVersionForClientIdentification()
				].join("; ")),new DS("Signature",this._generateRequestPayloadSignature(a.data)),new DS("Content-Type",
				"application/json")
			];
0<this._sendRetries&&a.requestHeaders.push(new DS("X-RetryCounter",fa.string(this._sendRetries)))
		},_generateRequestPayloadSignature:function(a){return Wa.substr(GZ.encode(this._signatureHash+"Bnp0XMsPo6XOb31LBM077ngUXYTh4x/n5Z56rcy3nsTiyNlh/01HaVApYoCD+HzHU1AfPUo0f2r6uvygJnrXvg=="+a),
			1,
			10)
		},_getPlatformForClientIdentifiaction:function(){return"bro"
		},_getPlatformVersionForClientIdentification:function(){return"web"
		},_loadUrlRequest:function(a){var b=new vZ;b.addEventListener("complete",m(this,this._onUrlRequestSuccess));
b.addEventListener("ioError",m(this,this._onUrlRequestError));b.load(a)
		},_onUrlRequestSuccess:function(a){if(!this._disposed){this._sentBatch=null;this._sendRetries=0;try{var b=q.convertJSON(JSON.parse(a.target.data))
				}catch(d){b=ba.caught(d);this._isRelease()?this._dispatchGenericBackendError():this.dispatchEvent(new qC("Invalid JSON response from server",b.get_message(),jN.Error));return
				}a=b[
					0
				];var c=a instanceof Xka?a:null;null!=c?(this._batchQueue.length=0,this._maintenanceSignal.handlers.invoke(c)):
(c=a instanceof ff?a: null,null!=c?this.dispatchEvent(new qC(c.title,c.message,jN.Warn)):(a=a instanceof ZWa?a: null,null!=a?this.dispatchEvent(new w7(a,!0,!wx.get_configureStartupCommandDone())):(this.dispatchEvent(new v7(b)),this._batchSendSuccess())))
			}
		},_batchSendSuccess:function(){this._batchQueue.shift();0<this._batchQueue.length&&this._sendNextBatch()
		},_onUrlRequestError:function(a){this._disposed||(1>this._sendRetries?(this._sendRetries++,this._send(this._sentBatch)):this._isRelease()?this._dispatchGenericBackendError():
this.dispatchEvent(new qC("Failed to connect to the game server",
			"Retried to establish connection to the server 1 times, but failed.",jN.Error)))
		},_dispatchGenericBackendError:function(){this.dispatchEvent(new qC(Kf.BASE_ERROR_TITLE,r.gettext("Could not connect to the Forge of Empires game server. Please reload the game to continue playing!"),jN.Error))
		},_isRelease:function(){return!0
		},get_requestQueuedSignal:function(){return this._requestQueuedSignal
		},get_maintenanceSignal:function(){return this._maintenanceSignal
		},
__class__:YWa,__properties__: {get_maintenanceSignal: "get_maintenanceSignal",get_requestQueuedSignal: "get_requestQueuedSignal"
		}
	});var HZ=function(a){this._queueMessages=!0;this._connected=!1;Jb.call(this);this._gatewayUrl=a;this._queuedMessages=[]
	};h[
		"de.innogames.shared.networking.providers.SocketConnectionProvider"
	]=HZ;HZ.__name__="de.innogames.shared.networking.providers.SocketConnectionProvider";HZ.__super__=Jb;HZ.prototype=l(Jb.prototype,
	{send:function(a){null==this._websocket?null!=y._reportError&&
y._reportError(Error("[LOGGER] No socket connection established. Not able to request: "+a.methodName)):(a=a.toServerRequestVO(),this._websocket.send(JSON.stringify(a)))
		},isConnected:function(){return this._connected
		},connect:function(){this._connectToSocket()
		},close:function(){this._resetSocket()
		},startHandling:function(){for(var a=0,b=this._queuedMessages;a<b.length;)this.dispatchEvent(b[a++
			]);this._queuedMessages.length=0;this._queueMessages=!1
		},_connectToSocket:function(){this._resetSocket();this._websocket=
new WebSocket(this._gatewayUrl);this._websocket.addEventListener("open",m(this,this._onSocketConnected));this._websocket.addEventListener("close",m(this,this._onSocketDisconnected));this._websocket.addEventListener("error",m(this,this._onSocketConnectionFault));this._websocket.addEventListener("message",m(this,this._onSocketMessage))
		},_resetSocket:function(){null!=this._pingTimer&&(this._pingTimer.reset(),this._pingTimer.removeEventListener("timer",m(this,this._onTimerTick)),this._pingTimer=null);
null!=this._websocket&&(this._websocket.removeEventListener("open",m(this,this._onSocketConnected)),this._websocket.removeEventListener("close",m(this,this._onSocketDisconnected)),this._websocket.removeEventListener("error",m(this,this._onSocketConnectionFault)),this._websocket.removeEventListener("message",m(this,this._onSocketMessage)),this._websocket.close(),this._websocket=null)
		},_onSocketMessage:function(a){a=a.data;if("PONG"!=a){a=q.convertJSON(JSON.parse(a));var b=a[
					0
				];b=b instanceof ff?b:
null;null!=b?this.dispatchEvent(new qC(b.title,b.message,jN.Warn)):(a=new v7(a),this._queueMessages?this._queuedMessages.push(a):this.dispatchEvent(a))
			}
		},_onSocketConnected:function(a){this._connected=!0;this._pingTimer=new Ih(3E4+fc.randomNumber(0,
			1E3));this._pingTimer.addEventListener("timer",m(this,this._onTimerTick));this._pingTimer.start();this.dispatchEvent(new Rz("SocketConnectionEvent/CONNECTED"))
		},_onTimerTick:function(a){this._sendPing()
		},_sendPing:function(){this._connected&&this._websocket.send("PING")
		},
_requestReconnect:function(){this._resetSocket();this._connected=!1;null==this._reconnectCoolDownTimer&&(this._reconnectCoolDownTimer=new Ih(fc.randomNumber(15E3),
			1),this._reconnectCoolDownTimer.addEventListener("timerComplete",m(this,this._onRequestReconnectCoolDownEnded)));this._reconnectCoolDownTimer.running||this._reconnectCoolDownTimer.start()
		},_onRequestReconnectCoolDownEnded:function(a){this._reconnectCoolDownTimer.reset();this._connected=!1;this.dispatchEvent(new Rz("SocketConnectionEvent/DISCONNECTED"))
		},
_onSocketDisconnected:function(a){this._requestReconnect()
		},_onSocketConnectionFault:function(a){this._requestReconnect()
		},__class__:HZ
	});var G=function(){};h[
		"de.innogames.shared.networking.vos.AbstractVO"
	]=G;G.__name__="de.innogames.shared.networking.vos.AbstractVO";G.prototype={toJSONObject:function(){return{__class__:this._getClassName()
			}
		},fromJSONObject:function(a){},__class__:G
	};var al=function(){};h[
		"de.innogames.shared.networking.vos.ClientIdentificationVO"
	]=al;al.__name__="de.innogames.shared.networking.vos.ClientIdentificationVO";
al.__super__=G;al.prototype=l(G.prototype,
	{_getClassName:function(){return"ClientIdentification"
		},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.trackingDevice=this.trackingDevice;a.deviceId=this.deviceId;a.platform=this.platform;a.networkType=this.networkType;a.platformVersion=this.platformVersion;a.clientVersionNumber=this.clientVersionNumber;a.requiredBackendVersion=this.requiredBackendVersion;a.appType=this.appType;a.platformType=this.platformType;a.osVersion=this.osVersion;
a.refMarketingId=this.refMarketingId;a.store=this.store;a.pushDeviceId=this.pushDeviceId;a.pushToken=this.pushToken;a.installId=this.installId;a.clientType=this.clientType;return a
		},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.trackingDevice=q.normalizeString(a.trackingDevice);this.deviceId=q.normalizeString(a.deviceId);this.platform=q.normalizeString(a.platform);this.networkType=q.normalizeString(a.networkType);this.platformVersion=q.normalizeString(a.platformVersion);
this.clientVersionNumber=q.normalizeString(a.clientVersionNumber);this.requiredBackendVersion=q.normalizeString(a.requiredBackendVersion);this.appType=q.normalizeString(a.appType);this.platformType=q.normalizeString(a.platformType);this.osVersion=q.normalizeString(a.osVersion);this.refMarketingId=q.normalizeString(a.refMarketingId);this.store=q.normalizeString(a.store);this.pushDeviceId=q.normalizeString(a.pushDeviceId);this.pushToken=q.normalizeString(a.pushToken);this.installId=q.normalizeString(a.installId);
this.clientType=q.normalizeString(a.clientType)
		},__class__:al
	});var XWa=function(){this.requestId=0
	};h[
		"de.innogames.shared.networking.vos.ServerRequestVO"
	]=XWa;XWa.__name__="de.innogames.shared.networking.vos.ServerRequestVO";XWa.__super__=G;XWa.prototype=l(G.prototype,
	{toString:function(){return this.requestClass+"."+this.requestMethod+"("+this.requestData.toString()+") with id: "+this.requestId
		},_getClassName:function(){return"ServerRequest"
		},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);
a.requestData=q.arrayToJSONObject(this.requestData,q.toJSONObject);a.requestClass=this.requestClass;a.requestMethod=this.requestMethod;a.requestId=this.requestId;return a
		},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.requestData=q.convertArray(a.requestData,q.fromJSONObject,
			[]);this.requestClass=q.normalizeString(a.requestClass);this.requestMethod=q.normalizeString(a.requestMethod);this.requestId=q.normalizeInt(a.requestId)
		},__class__:XWa
	});var gdb=function(){this.requestId=
0
	};h[
		"de.innogames.shared.networking.vos.ServerResponseVO"
	]=gdb;gdb.__name__="de.innogames.shared.networking.vos.ServerResponseVO";gdb.__super__=G;gdb.prototype=l(G.prototype,
	{_getClassName:function(){return"ServerResponse"
		},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.responseData=q.toJSONObject(this.responseData);a.requestClass=this.requestClass;a.requestMethod=this.requestMethod;a.requestId=this.requestId;return a
		},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,
a);this.responseData=q.fromJSONObject(a.responseData);this.requestClass=q.normalizeString(a.requestClass);this.requestMethod=q.normalizeString(a.requestMethod);this.requestId=q.normalizeInt(a.requestId)
		},__class__:gdb
	});var rJ=function(a){this._init(a)
	};h[
		"de.innogames.shared.ui.CursorHoverBehaviour"
	]=rJ;rJ.__name__="de.innogames.shared.ui.CursorHoverBehaviour";rJ.prototype={get_target:function(){return this._target
		},_onOver:function(a){this._target.buttonMode&&-1!=yh.cursor.indexOf("default")&&yh.setIcon("hover")
		},
_onOut:function(a){
			-1!=yh.cursor.indexOf("hover")&&yh.setDefaultIcon()
		},_init:function(a){if(a.buttonMode||a.hasEventListener("click"))this._target=a,this._target.addEventListener("rollOver",m(this,this._onOver)),this._target.addEventListener("rollOut",m(this,this._onOut))
		},__class__:rJ,__properties__: {get_target: "get_target"
		}
	};var ma=function(){};h[
		"de.innogames.shared.ui.FilterFactory"
	]=ma;ma.__name__="de.innogames.shared.ui.FilterFactory";ma.getBitmapScaleFilter=function(){null==ma.getBitmapScaleFilter_filter&&
(ma.getBitmapScaleFilter_filter=[new Gd(0,.75,
			6,
			6,
			2,
			2)
		]);return ma.getBitmapScaleFilter_filter
	};ma.getBeigeBackgroundGlowFilters=function(){null==ma.getBeigeBackgroundGlowFilters_filter&&(ma.getBeigeBackgroundGlowFilters_filter=[new Gd(15719334,.75,
			6,
			6,
			3,
			2)
		]);return ma.getBeigeBackgroundGlowFilters_filter
	};ma.getBrownOutlineFilters=function(){null==ma.getBrownOutlineFilters_filter&&(ma.getBrownOutlineFilters_filter=[new Gd(-12838888,
			1,
			2,
			2,
			6,
			2,!0)
		]);return ma.getBrownOutlineFilters_filter
	};ma.getExpeditionGlowFilters=
function(a){return[new Gd(16777215,.3,
			12,
			12,
			2,
			1,a)
		]
	};ma.getWhiteBitmapOutlineFilter=function(){null==ma.getWhiteBitmapOutlineFilter_filter&&(ma.getWhiteBitmapOutlineFilter_filter=[new Gd(16777215,
			1,
			2,
			2,
			10)
		]);return ma.getWhiteBitmapOutlineFilter_filter
	};ma.getTextOutlineFilterArray=function(){null==ma.getTextOutlineFilterArray_filter&&(ma.getTextOutlineFilterArray_filter=[new Gd(3611400,
			1,
			5,
			5,
			10)
		]);return ma.getTextOutlineFilterArray_filter
	};ma.getGBGBesiegerTextOutlineFilterArray=function(){null==
ma.getGBGBesiegerTextOutlineFilterArray_filter&&(ma.getGBGBesiegerTextOutlineFilterArray_filter=[new Gd(4203536,
			1,
			5,
			5,
			10)
		]);return ma.getGBGBesiegerTextOutlineFilterArray_filter
	};ma.getThinTextOutlineFilterArray=function(){null==ma.getThinTextOutlineFilterArray_filter&&(ma.getThinTextOutlineFilterArray_filter=[new Gd(3611400,
			1,
			3,
			3,
			10)
		]);return ma.getThinTextOutlineFilterArray_filter
	};ma.getForgePlusCyanTextOutlineFilterArray=function(){null==ma.getForgePlusCyanTextOutlineFilterArray_filter&&(ma.getForgePlusCyanTextOutlineFilterArray_filter=
[new Gd(400195,
			1,
			3,
			3,
			10)
		]);return ma.getForgePlusCyanTextOutlineFilterArray_filter
	};ma.getWildlifeEventTextOutlineFilterArray=function(){null==ma.getWildlifeEventTextOutlineFilterArray_filter&&(ma.getWildlifeEventTextOutlineFilterArray_filter=[new Gd(1059876,
			1,
			5,
			5,
			10)
		]);return ma.getWildlifeEventTextOutlineFilterArray_filter
	};ma.getWinterEventTextOutlineFilterArray=function(){null==ma.getWinterEventTextOutlineFilterArray_filter&&(ma.getWinterEventTextOutlineFilterArray_filter=[new Gd(1383185,
			1,
			5,
			5,
			10)
		]);return ma.getWinterEventTextOutlineFilterArray_filter
	};ma.getButtonTextOutlineFilterArray=function(){null==ma.getButtonTextOutlineFilterArray_filter&&(ma.getButtonTextOutlineFilterArray_filter=[new Gd(4129282,
			1,
			3,
			3,
			10)
		]);return ma.getButtonTextOutlineFilterArray_filter
	};ma.getTextOutlineFilterDarkPurple=function(){null==ma.getTextOutlineFilterDarkPurple_filter&&(ma.getTextOutlineFilterDarkPurple_filter=[new Gd(-12765892,
			1,
			5,
			5,
			10)
		]);return ma.getTextOutlineFilterDarkPurple_filter
	};ma.getTextOutlineFilterArrayDarkBlue=
function(){null==ma.getTextOutlineFilterArrayDarkBlue_filter&&(ma.getTextOutlineFilterArrayDarkBlue_filter=[new Gd(202787,
			1,
			5,
			5,
			10)
		]);return ma.getTextOutlineFilterArrayDarkBlue_filter
	};ma.getTextOutlineFilterArrayDeepBlue=function(){null==ma.getTextOutlineFilterArrayDeepBlue_filter&&(ma.getTextOutlineFilterArrayDeepBlue_filter=[new Gd(3027557,
			1,
			5,
			5,
			5)
		]);return ma.getTextOutlineFilterArrayDeepBlue_filter
	};ma.getTextOutlineFilterArrayLightBlue=function(){null==ma.getTextOutlineFilterArrayLightBlue_filter&&
(ma.getTextOutlineFilterArrayLightBlue_filter=[new Gd(4280679,
			1,
			5,
			5,
			5)
		]);return ma.getTextOutlineFilterArrayLightBlue_filter
	};ma.getTextOutlineFilterArrayBlack=function(){null==ma.getTextOutlineFilterArrayBlack_filter&&(ma.getTextOutlineFilterArrayBlack_filter=[new Gd(263172,
			1,
			5,
			5,
			5)
		]);return ma.getTextOutlineFilterArrayBlack_filter
	};ma.getTextOutlineAndDropShadowFilterArrayBlack=function(){null==ma.getTextOutlineAndDropShadowFilterArrayBlack_filter&&(ma.getTextOutlineAndDropShadowFilterArrayBlack_filter=
[new Gd(0,
			1,
			3,
			3,
			5,
			1,!0),new cm(2,
			45,
			0,.4,
			4,
			4,
			2)
		]);return ma.getTextOutlineAndDropShadowFilterArrayBlack_filter
	};ma.getWeakTextOutlineFilterArray=function(){null==ma.getWeakTextOutlineFilterArray_filter&&(ma.getWeakTextOutlineFilterArray_filter=[new Gd(3611400,
			1,
			5,
			5,
			3)
		]);return ma.getWeakTextOutlineFilterArray_filter
	};ma.getShipHighlightFilter=function(){null==ma.getShipHighlightFilter_filter&&(ma.getShipHighlightFilter_filter=[new Gd(14872948,.8,
			10,
			10)
		]);return ma.getShipHighlightFilter_filter
	};ma.getBlueOutlineFilterArray=
function(){null==ma.getBlueOutlineFilterArray_filter&&(ma.getBlueOutlineFilterArray_filter=[new Gd(7721,
			1,
			4,
			4,
			7)
		]);return ma.getBlueOutlineFilterArray_filter
	};ma.getGBGMapAttritionTextOutlineFilterArray=function(){null==ma.getGBGMapAttritionTextOutlineFilterArray_filter&&(ma.getGBGMapAttritionTextOutlineFilterArray_filter=[new Gd(4203536,
			1,
			3,
			3,
			10)
		]);return ma.getGBGMapAttritionTextOutlineFilterArray_filter
	};ma.getGrayscaleFilter=function(){null==ma.getGrayscaleFilter_filter&&(ma.getGrayscaleFilter_filter=
[new kN([.2126,.7152,.0722,
				0,
				0,.2126,.7152,.0722,
				0,
				0,.2126,.7152,.0722,
				0,
				0,
				0,
				0,
				0,
				1,
				0
			])
		]);return ma.getGrayscaleFilter_filter
	};ma.getSepiaFilter=function(){null==ma.getSepiaFilter_filter&&(ma.getSepiaFilter_filter=[new kN([.393,.769,.272,
				0,
				0,.349,.686,.168,
				0,
				0,.272,.534,.131,
				0,
				0,
				0,
				0,
				0,
				1,
				0
			])
		]);return ma.getSepiaFilter_filter
	};ma.validDataGlowFilter=function(){null==ma.validDataGlowFilter_filter&&(ma.validDataGlowFilter_filter=[new Gd(3230976,
			1,
			6,
			6,
			2,
			1,!0)
		]);return ma.validDataGlowFilter_filter
	};ma.invalidDataGlowFilter=
function(){null==ma.invalidDataGlowFilter_filter&&(ma.invalidDataGlowFilter_filter=[new Gd(13766924,
			1,
			6,
			6,
			2,
			1,!0)
		]);return ma.invalidDataGlowFilter_filter
	};ma.getWeakBlackTextShadow=function(){null==ma.getWeakBlackTextShadow_filter&&(ma.getWeakBlackTextShadow_filter=[new Gd(0,.5,
			6,
			6,
			2,
			2)
		]);return ma.getWeakBlackTextShadow_filter
	};ma.getBlackTextDropShadow=function(){null==ma.getBlackTextDropShadow_filter&&(ma.getBlackTextDropShadow_filter=[new cm(2,
			45,
			0,.4,
			4,
			4,
			2)
		]);return ma.getBlackTextDropShadow_filter
	};
ma.getHistoryProgressbarTextOutline=function(){null==ma.getHistoryProgressbarTextOutline_filter&&(ma.getHistoryProgressbarTextOutline_filter=[new Gd(1905961,
			1,
			3,
			3,
			7)
		]);return ma.getHistoryProgressbarTextOutline_filter
	};ma.getHistoryTextOutline=function(){null==ma.getHistoryTextOutline_filter&&(ma.getHistoryTextOutline_filter=[new Gd(1912378,
			1,
			5,
			5,
			10)
		]);return ma.getHistoryTextOutline_filter
	};ma.getHistoryEventDropShadow=function(){null==ma.getHistoryEventDropShadow_filter&&(ma.getHistoryEventDropShadow_filter=
[new Gd(1912378,
			1,
			3,
			3,
			10),new cm(2,
			80,
			1912378,
			1,
			0,
			0,
			3)
		]);return ma.getHistoryEventDropShadow_filter
	};ma.getItemStoreActiveStoreButtonFilter=function(a){return[new Gd(15128675,
			1,a,a,
			1)
		]
	};ma.getBadgeTextDropShadow=function(){null==ma.getBadgeTextDropShadow_filter&&(ma.getBadgeTextDropShadow_filter=[new Gd(2628357,
			1,
			3,
			3,
			10),new cm(2,
			80,
			2628357,
			1,
			0,
			0,
			3)
		]);return ma.getBadgeTextDropShadow_filter
	};ma.getWinterGlowFilter=function(){null==ma.getWinterGlowFilter_filter&&(ma.getWinterGlowFilter_filter=[new Gd(16746511,
.5,
			8,
			8,
			1)
		]);return ma.getWinterGlowFilter_filter
	};ma.getWildlifeTextOutline=function(){null==ma.getWildlifeTextOutline_filter&&(ma.getWildlifeTextOutline_filter=[new Gd(4333321,
			1,
			5,
			5,
			10)
		]);return ma.getWildlifeTextOutline_filter
	};ma.getAlliesTextOutlineFilterArray=function(){null==ma.getAlliesTextOutlineFilterArray_filter&&(ma.getAlliesTextOutlineFilterArray_filter=[new Gd(2168088,
			1,
			3,
			3,
			10)
		]);return ma.getAlliesTextOutlineFilterArray_filter
	};ma.getAlliesDropShadow=function(){null==ma.getAlliesDropShadow_filter&&
(ma.getAlliesDropShadow_filter=[new cm(2,
			90,
			0,.5,
			5,
			5)
		]);return ma.getAlliesDropShadow_filter
	};ma.getGuildRaidsRewardDropShadow=function(){null==ma.getGuildRaidsRewardDropShadow_filter&&(ma.getGuildRaidsRewardDropShadow_filter=[new cm(1,
			90,
			0,.79,
			5,
			5)
		]);return ma.getGuildRaidsRewardDropShadow_filter
	};ma.getAlliesQuestWindowDropShadow=function(){null==ma.getAlliesQuestWindowDropShadow_filter&&(ma.getAlliesQuestWindowDropShadow_filter=[new cm(1,
			90,
			0,.82,
			5,
			5)
		]);return ma.getAlliesQuestWindowDropShadow_filter
	};
ma.getItemStoreSelectionDropShadow=function(){null==ma.getItemStoreSelectionDropShadow_filter&&(ma.getItemStoreSelectionDropShadow_filter=[new cm(1,
			90,
			0,
			1,
			5,
			5)
		]);return ma.getItemStoreSelectionDropShadow_filter
	};ma.getRedTextOutlineFilterArray=function(){null==ma.getRedTextOutlineFilterArray_filter&&(ma.getRedTextOutlineFilterArray_filter=[new Gd(2884869,
			1,
			5,
			5,
			3)
		]);return ma.getRedTextOutlineFilterArray_filter
	};ma.getIgPaymentBonusBlurShadow=function(){null==ma.getIgPaymentBonusBlurShadow_filter&&
(ma.getIgPaymentBonusBlurShadow_filter=[new Gd(0,
			1,
			3,
			3,
			2)
		]);return ma.getIgPaymentBonusBlurShadow_filter
	};var $ka=function(){};h[
		"de.innogames.shared.ui.BaseOnStageHandler"
	]=$ka;$ka.__name__="de.innogames.shared.ui.BaseOnStageHandler";$ka.prototype={add:function(a){null==this._entries&&(this._entries=[],this._init());var b=this._onStage?a():null;this._entries.push({wakeup:a,link:b
			})
		},_onAddedToStage:function(){if(!this._onStage){this._onStage=!0;for(var a=this._entries.length,b=0;b<a;){var c=this._entries[b++
					];
c.link=c.wakeup()
				}
			}
		},_onRemovedFromStage:function(){if(this._onStage){this._onStage=!1;for(var a=0,b=this._entries;a<b.length;){var c=b[a++
					].link;null!=c&&c.cancel()
				}
			}
		},__class__:$ka
	};var Qa=function(a){this._object=a
	};h[
		"de.innogames.shared.ui.OnStageHandler"
	]=Qa;Qa.__name__="de.innogames.shared.ui.OnStageHandler";Qa.__super__=$ka;Qa.prototype=l($ka.prototype,
	{_init:function(){var a=this;this._onStage=null!=this._object.stage;this._object.addEventListener("addedToStage",function(b){a._onAddedToStage()
			});
this._object.addEventListener("removedFromStage",function(b){a._onRemovedFromStage()
			})
		},__class__:Qa
	});var yh=function(){};h[
		"de.innogames.shared.ui.ScMouseCursor"
	]=yh;yh.__name__="de.innogames.shared.ui.ScMouseCursor";yh.setDefaultIcon=function(){yh._setCursor("default")
	};yh.setIcon=function(a){yh._setCursor(a)
	};yh._setCursor=function(a){null==yh._cursors&&yh._init();Lr.set_cursor(rC.fromLimeCursor(Gg.CUSTOM));jn.current.window.backend.element.style.cursor=yh._cursors.h[a
		];yh.cursor=a
	};yh._init=
function(){yh._cursors=new x;for(var a=Va.instance,b=0,c=yh.icons;b<c.length;){var d=c[b
			];++b;var e=a.getAbsoluteUrl("/assets/shared/cursors/cursor_"+d+".cur",te.CHECKSUM_LIST);yh._cursors.h[d
			]="url("+e+"),auto"
		}
	};var bh=function(a,b){D.call(this,a);this.cursor=b
	};h[
		"de.innogames.shared.ui.ScMouseCursorEvent"
	]=bh;bh.__name__="de.innogames.shared.ui.ScMouseCursorEvent";bh.__super__=D;bh.prototype=l(D.prototype,
	{clone:function(){return new bh(this.type,this.cursor)
		},__class__:bh
	});var ES=function(){};
h[
		"de.innogames.shared.ui.ScMouseCursorEventHandler"
	]=ES;ES.__name__="de.innogames.shared.ui.ScMouseCursorEventHandler";ES.__instantiate=function(a){return new ES
	};ES.__super__=vd;ES.prototype=l(vd.prototype,
	{_init:function(){yh.setDefaultIcon();this.get_eventDispatcher().addEventListener("ApplicationModelEvent/MOUSE_MODE_CHANGED",m(this,this._onMouseModeChanged));this.get_eventDispatcher().addEventListener("ScMouseCursorEvent/CHANGE",m(this,this._onMouseCursorChanged));this.get_moduleEventDispatcher().addEventListener("ScMouseCursorEvent/CHANGE",
m(this,this._onMouseCursorChanged))
		},_onMouseCursorChanged:function(a){this._setCursor(a.cursor)
		},_onMouseModeChanged:function(a){this._setCursor(this._applicationModel._mouseMode)
		},_setCursor:function(a){Object.prototype.hasOwnProperty.call(ES._cursorMap.h,a)?yh.setIcon(ES._cursorMap.h[a
			]):yh.setDefaultIcon()
		},__inject:function(a){this._applicationModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationModel")
		},__postConstruct:function(a){this._init()
		},__construct:function(a){vd.prototype.__construct.call(this,
a);this.__inject(a);this.__postConstruct(a);return null
		},__class__:ES
	});var ala=function(a){this._object=a
	};h[
		"de.innogames.shared.ui.StarlingOnStageHandler"
	]=ala;ala.__name__="de.innogames.shared.ui.StarlingOnStageHandler";ala.__super__=$ka;ala.prototype=l($ka.prototype,
	{_init:function(){var a=this;this._onStage=null!=this._object.get_stage();this._object.addEventListener("addedToStage",function(b){a._onAddedToStage()
			});this._object.addEventListener("removedFromStage",function(b){a._onRemovedFromStage()
			})
		},
__class__:ala
	});var x7=function(){};h[
		"de.innogames.shared.util.ArrayTools"
	]=x7;x7.__name__="de.innogames.shared.util.ArrayTools";x7.upcast=function(a){return a
	};x7.downcast=function(a){return a
	};x7.getUnique=function(a){for(var b=[],c=0;c<a.length;){var d=a[c
			];++c;-1==b.indexOf(d)&&b.push(d)
		}return b
	};x7.count=function(a,b){for(var c=0,d=0;d<a.length;)b(a[d++
		])&&++c;return c
	};var bla=function(){};h[
		"de.innogames.shared.util.ButtonTools"
	]=bla;bla.__name__="de.innogames.shared.util.ButtonTools";bla.setTextOutline=
function(a,b){var c=bla._getTextField(a);null!=c?c.set_filters(b):null!=b&&hg.listenOnce(a,
		"initialize",function(d){c=bla._getTextField(a);null!=c&&c.set_filters(b)
		})
	};bla._getTextField=function(a){return a.textField
	};var hg=function(){};h[
		"de.innogames.shared.util.EventDispatcherTools"
	]=hg;hg.__name__="de.innogames.shared.util.EventDispatcherTools";hg.listen=function(a,b,c){return new hdb(a,b,c)
	};hg.listenOnce=function(a,b,c){var d=null;return d=hg.listen(a,b,function(e){null!=d&&d.cancel();c(e)
		})
	};
var hdb=function(a,b,c){this._dispatcher=a;this._type=b;this._listener=c;this._dispatcher.addEventListener(b,c)
	};h[
		"de.innogames.shared.util._EventDispatcherTools.ListenerLink"
	]=hdb;hdb.__name__="de.innogames.shared.util._EventDispatcherTools.ListenerLink";hdb.__interfaces__=[at
	];hdb.prototype={cancel:function(){this._dispatcher.removeEventListener(this._type,this._listener)
		},__class__:hdb
	};var q=function(){};h[
		"de.innogames.shared.util.FoeJsonConverter"
	]=q;q.__name__="de.innogames.shared.util.FoeJsonConverter";
q.registerClass=function(a,b){if(Object.prototype.hasOwnProperty.call(q._classMappingLookup.h,a))throw new ba("Duplicate VO class registration for: "+a);q._classMappingLookup.h[a
		]=b
	};q.registerEnum=function(a,b){q._enumConverters.h[a
		]=b
	};q.toJSONObjectWithPrivacy=function(a){try{q._privacyMode=!0;var b=q.toJSONObject(a);q._privacyMode=!1
		}catch(c){throw a=ba.caught(c),q._privacyMode=!1,ba.thrown(a);
		}return b
	};q.toJSONObject=function(a){return null==a?null: "boolean"==typeof a||"string"==typeof a||"number"==
typeof a?a:a instanceof Array?q.arrayToJSONObject(a,q.toJSONObject):gb.isEnumValue(a)?q._enumToJSONObject(a):q.classObjectToJSONObject(a)
	};q.classObjectToJSONObject=function(a){if(null==a)return null;if(a instanceof G)return a.toJSONObject();null!=y._reportError&&y._reportError(Error("[LOGGER] RawData is not AbstractVO nor it is Array: "+fa.string(a)));return a
	};q.arrayToJSONObject=function(a,b){if(null==a)return null;for(var c=[],d=a.length,e=0;e<d;){var g=e++;c[g
			]=b(a[g
			])
		}return c
	};q.mapToJSONObject=
function(a,b){var c={};if(null!=a)for(a=a.keyValueIterator();a.hasNext();){var d=a.next();c[fa.string(d.key)
			]=b(d.value)
		}return c
	};q.passthrough=function(a){return a
	};q.voToJSON=function(a){return null!=a?a.toJSONObject(): null
	};q.convertJSON=function(a){return a instanceof Array?q.convertArray(a,q.fromJSONObject,
		[]): [q.fromJSONObject(a)
		]
	};q.fromJSONObject=function(a){return null==a?null: "boolean"==typeof a||"string"==typeof a||"number"==typeof a?a:a instanceof Array?q.convertArray(a,q.fromJSONObject,
		[]):q.convertObject(a)
	};q.convertObject=function(a){return null==a?null:Object.prototype.hasOwnProperty.call(a,
		"__class__")?q._createClassObject(a):Object.prototype.hasOwnProperty.call(a,
		"__enum__")?q._createEnumValue(a):a
	};q.convertArray=function(a,b,c){if(null==a)return null;for(var d=a.length,e=0;e<d;){var g=e++;c[g
			]=b(a[g
			])
		}return c
	};q.convertStringMap=function(a,b){if(null==a)return null;var c=gb.fields(a);if(0==c.length)return null;for(var d=new x,e=0;e<c.length;){var g=c[e
			];++e;var k=b(a[g
			]);
d.h[g
			]=k
		}return d
	};q.convertIntMap=function(a,b){if(null==a)return null;var c=gb.fields(a);if(0==c.length)return null;for(var d=new Pb,e=0;e<c.length;){var g=c[e
			];++e;var k=fa.parseInt(g);g=b(a[g
			]);d.h[k
			]=g
		}return d
	};q.normalizeInt=function(a){if(null==a)return 0;if("number"==typeof a&&(a|0)===a)return a;if("string"==typeof a)return null!=y._reportError&&y._reportError(Error("[LOGGER] Received String instead of Int for a VO field: "+(null==a?"null":fa.string(a)))),a=fa.parseInt(a),null==a&&(null!=
y._reportError&&y._reportError(Error("[LOGGER] Could not parse String as Int!")),a=0),a;if("number"==typeof a)return null!=y._reportError&&y._reportError(Error("[LOGGER] Received Float instead of Int for a VO field: "+((null==a?"null":fa.string(a))+", trimming to Int"))),a|0;null!=y._reportError&&y._reportError(Error("[LOGGER] Received an unhandled type instead of Int: "+(null==a?"null":fa.string(a))));return 0
	};q.normalizeBool=function(a){if(null==a)return!1;if("boolean"==typeof a)return a;if("number"==
typeof a&&(a|0)===a)return null!=y._reportError&&y._reportError(Error("[LOGGER] Received Int instead of Bool for a VO field: "+(null==a?"null":fa.string(a)))),
		0!=a;null!=y._reportError&&y._reportError(Error("[LOGGER] Received an unhandled type instead of Bool: "+(null==a?"null":fa.string(a))));return!1
	};q.normalizeFloat=function(a){if(null==a)return 0;if("number"==typeof a)return a;if("string"==typeof a)return null!=y._reportError&&y._reportError(Error("[LOGGER] Received String instead of Float for a VO field: "+
(null==a?"null":fa.string(a)))),a=parseFloat(a),isNaN(a)&&(null!=y._reportError&&y._reportError(Error("[LOGGER] Could not parse String as Float!")),a=0),a;null!=y._reportError&&y._reportError(Error("[LOGGER] Received an unhandled type instead of Float: "+(null==a?"null":fa.string(a))));return 0
	};q.normalizeString=function(a){if(null==a)return null;if("string"==typeof a)return a;null!=y._reportError&&y._reportError(Error("[LOGGER] Received an unhandled type instead of String: "+(null==a?"null":fa.string(a))));
return null
	};q._createClassObject=function(a){var b=a.__class__;if(null==b||"stdClass"==b)return null!=y._reportError&&y._reportError(Error("[LOGGER] Server has sent an empty object, which has been set to null.")),null;var c=q._classMappingLookup.h[b
		];if(null==c)return null!=y._reportError&&y._reportError(Error("[LOGGER] THERE IS NO CLASS MAPPING for: "+b)),a;b=Ie.createInstance(c,
		[]);b.fromJSONObject(a);return b
	};q._createEnumValue=function(a){var b=q._enumConverters.h[a.__enum__
		];return null==b?
(null!=y._reportError&&y._reportError(Error("[LOGGER] THERE IS NO ENUM MAPPING for: "+a.__enum__)),null):b.fromJson(a)
	};q._enumToJSONObject=function(a){var b=Ie.getEnum(a).__ename__;b=b.substring(b.lastIndexOf(".")+1);var c=q._enumConverters.h[b
		];return null==c?(null!=y._reportError&&y._reportError(Error("[LOGGER] THERE IS NO ENUM MAPPING for: "+b)),null):c.toJson(a)
	};var Sz=function(){this._disposer=new kh
	};h[
		"de.innogames.shared.util.FutureFlowHandler"
	]=Sz;Sz.__name__="de.innogames.shared.util.FutureFlowHandler";
Sz.__interfaces__=[gd
	];Sz.prototype={dispose:function(){this._disposer.cancel()
		},_call:function(a){return new cd(new Ro(function(){a();return null
			}))
		},_callThenHandle:function(a,b){var c=this;return new Kc(function(d){var e=a().handle(function(g){null!=b&&b(g);d(null)
				});c._disposer.add(e);return e
			})
		},_withFuture:function(a,b){var c=this;return new Kc(function(d){var e=a.handle(function(g){null!=b&&b(g);d(null)
				});c._disposer.add(e);return e
			})
		},__class__:Sz
	};var xRb=function(){};h[
		"de.innogames.shared.util.FutureTools"
	]=
xRb;xRb.__name__="de.innogames.shared.util.FutureTools";var idb=Ea[
		"de.innogames.shared.util.IntervalNumberMatch"
	]={__ename__: "de.innogames.shared.util.IntervalNumberMatch",__constructs__: null,ValidNumber:(H=function(a){return{_hx_index: 0,number:a,__enum__: "de.innogames.shared.util.IntervalNumberMatch",toString:N
			}
		},H._hx_name="ValidNumber",H.__params__=[
			"number"
		],H),InvalidNumber:(H=function(a){return{_hx_index: 1,number:a,__enum__: "de.innogames.shared.util.IntervalNumberMatch",toString:N
			}
		},H._hx_name=
"InvalidNumber",H.__params__=[
			"number"
		],H)
	};idb.__constructs__=[idb.ValidNumber,idb.InvalidNumber
	];idb.__empty_constructs__=[];var $Wa=function(a,b,c){this._number=a;this._lowerBound=b;this._upperBound=c
	};h[
		"de.innogames.shared.util._IntervalNumber.IntervalNumber"
	]=$Wa;$Wa.__name__="de.innogames.shared.util._IntervalNumber.IntervalNumber";$Wa.prototype={getMatch:function(){return this._number>=this._lowerBound&&this._number<=this._upperBound?idb.ValidNumber(this._number):idb.InvalidNumber(this._number)
		},
__class__:$Wa
	};var jdb=function(a){$Wa.call(this,a,
		2,
		3)
	};h[
		"de.innogames.shared.util.NumberFrom2To3"
	]=jdb;jdb.__name__="de.innogames.shared.util.NumberFrom2To3";jdb.__super__=$Wa;jdb.prototype=l($Wa.prototype,
	{__class__:jdb
	});var QHb=function(){};h[
		"de.innogames.shared.util.LabelTools"
	]=QHb;QHb.__name__="de.innogames.shared.util.LabelTools";QHb.addStrikeThroughLine=function(a,b,c,d){null==d&&(d=0);if(null!=a.get_text()&&0!=a.get_text().length&&null!=a.parent){var e=a.parent;if(null!=(e instanceof
R?e:null)){e=a.get_x();var g=e+a.get_width();a=K.__cast(a.parent,R);a.get_graphics().lineStyle(1,d);a.get_graphics().moveTo(e,b);a.get_graphics().lineTo(g,c)
			}
		}
	};QHb.getTextDimensions=function(a){a.validateNow();return new ln(a._textMeasuredWidth|0,a._textMeasuredHeight|0)
	};var y=function(){};h[
		"de.innogames.shared.util.Logger"
	]=y;y.__name__="de.innogames.shared.util.Logger";var mn=function(){};h[
		"de.innogames.shared.util.MapTools"
	]=mn;mn.__name__="de.innogames.shared.util.MapTools";mn.count=function(a){var b=
0;for(a=a.iterator();a.hasNext();)a.next(),++b;return b
	};mn.isEmpty=function(a){for(a=a.iterator();a.hasNext();)return a.next(),!1;return!0
	};mn.equals=function(a,b){if(mn.count(a)!=mn.count(b))return!1;for(a=a.keyValueIterator();a.hasNext();){var c=a.next(),d=c.key;c=c.value;if(!b.exists(d)||b.get(d)!=c)return!1
		}return!0
	};mn.getOrDefault=function(a,b,c){a=a.get(b);return null!=a?a:c
	};mn.keysArray=function(a){var b=[];for(a=a.keys();a.hasNext();)b.push(a.next());return b
	};var sC=Ea[
		"de.innogames.shared.util.NumberRounding"
	]=
{__ename__: "de.innogames.shared.util.NumberRounding",__constructs__: null,Ceil: {_hx_name: "Ceil",_hx_index: 0,__enum__: "de.innogames.shared.util.NumberRounding",toString:N
		},Floor: {_hx_name: "Floor",_hx_index: 1,__enum__: "de.innogames.shared.util.NumberRounding",toString:N
		},Round: {_hx_name: "Round",_hx_index: 2,__enum__: "de.innogames.shared.util.NumberRounding",toString:N
		}
	};sC.__constructs__=[sC.Ceil,sC.Floor,sC.Round
	];sC.__empty_constructs__=[sC.Ceil,sC.Floor,sC.Round
	];var ja=function(){};h[
		"de.innogames.shared.util.NumberUtil"
	]=
ja;ja.__name__="de.innogames.shared.util.NumberUtil";ja.addLeadingZero=function(a,b){null==b&&(b=2);for(a=fa.string(a|0);a.length<b;)a="0"+a;return a
	};ja.randomIntBetween=function(a,b){return(Math.floor(Math.random()*(b-a+1))+a)%2147483647|0
	};ja.numberFormat=function(a,b,c){null==c&&(c=!1);null==b&&(b=2);var d=0,e=Math.pow(10,b);a=fa.string(Math.round(e*a)/e);var g=(e=-1==a.indexOf("."))?a.length:a.indexOf("."),k=(e&&!c?"":ja.DECIMAL_SEPARATOR)+Wa.substr(a,g+1,null);if(c)for(c=0;c<=b-(a.length-(e?
g-1:g));)k+="0",++c;for(;d+3<("-"==Wa.substr(a,
		0,
		1)?g-1:g);)k=ja.THOUSANDS_SEPARATOR+Wa.substr(a,g-(d+=3),
		3)+k;return Wa.substr(a,
		0,g-d)+k
	};ja.smartNumber=function(a,b,c){null==c&&(c=!1);null==b&&(b=5);b=Math.pow(10,b);if(a<b&&a>-b)return ja.numberFormat(a,
		0);b=0<=a?1: -1;var d=a*b,e=Math.log(d)/Math.log(1E3)|0;e=Math.min(e,ja.SMART_NUMBER_TRANSLATIONS.length)|0;var g=Math.pow(1E3,e);a=d/g*b|0;c=(c?Math.ceil:fa.int)((d-a*g)/g*10*b);10<=c&&(++a,c=0);b=ja.SMART_NUMBER_TRANSLATIONS[e-1
		];a=ja.numberFormat(a,
		0);return 1<=c?U.printf(r.gettext("SmartNumbers|number, separator, number, abbreviation, e.g. 1.1K, 2.3M|%s.%d%s"),a,c,b):U.printf(r.gettext("SmartNumbers|number, separator, number, abbreviation, e.g. 1K, 2M|%s%s"),a,b)
	};ja.setPrecision=function(a,b,c){b=Math.pow(10,b)|0;switch(c._hx_index){case 0:return Math.ceil(a*b)/b;case 1:return Math.floor(a*b)/b;case 2:return Math.round(a*b)/b
		}
	};ja.formatWithSmartNumberThreshold=function(a){return 1E12>a?ja.numberFormat(a):ja.smartNumber(a)
	};var COb=function(){};
h[
		"de.innogames.shared.util.ObservableMapTools"
	]=COb;COb.__name__="de.innogames.shared.util.ObservableMapTools";COb.forceInvalidation=function(a){a.valid=!1;a.fire()
	};var Or=function(){};h[
		"de.innogames.shared.util.ObservableTools"
	]=Or;Or.__name__="de.innogames.shared.util.ObservableTools";Or.bindWithInitial=function(a,b,c,d){var e=!0;return F.bind(a,function(g){var k=e;e=!1;b(g,k)
		},c,d)
	};Or.bindWithOldValue=function(a,b,c,d){var e=F.get_value(a);return F.bind(a,function(g){var k=e;e=g;b(g,k)
		},c,
d)
	};Or.bindWithInitialAndOldValue=function(a,b,c,d){var e=!0,g=F.get_value(a);return F.bind(a,function(k){var t=e;e=!1;var u=g;g=k;b(k,t,u)
		},c,d)
	};var HQb=function(){};h[
		"de.innogames.shared.util.PromiseTools"
	]=HQb;HQb.__name__="de.innogames.shared.util.PromiseTools";HQb.then=function(a,b,c,d){return a.handle(function(e){switch(e._hx_index){case 0:za.invoke(b,e.data);break;case 1:e=e.failure,null!=c?za.invoke(c,e):null!=y._reportError&&y._reportError(Error("[LOGGER] "+e.message))
			}
		})
	};var TSb={__properties__: {get_y: "get_y",
get_x: "get_x"
		},distance:function(a,b){return p.distance(a,b)
		},get_x:function(a){return a.x
		},get_y:function(a){return a.y
		}
	},RHb=function(a){this._index=0;this._sources=a;this._index=fc.randomNumber(0,a.length-1)|0
	};h[
		"de.innogames.shared.util.SoundQueue"
	]=RHb;RHb.__name__="de.innogames.shared.util.SoundQueue";RHb.prototype={getNextSoundId:function(){this._index>=this._sources.length&&(this._index=0);return this._sources[this._index++
			]
		},__class__:RHb
	};var oa=function(){};h[
		"de.innogames.shared.util.ezcommand.EzCommand"
	]=
oa;oa.__name__="de.innogames.shared.util.ezcommand.EzCommand";oa.__super__=M;oa.prototype=l(M.prototype,
	{__class__:oa
	});var FS=function(a){this._isDirty=!1;this._originX=this._originY=this._tweenedOffsetX=this._tweenedOffsetY=NaN;this._target=a
	};h[
		"de.innogames.shared.util.frameanimation.AnimationTargetData"
	]=FS;FS.__name__="de.innogames.shared.util.frameanimation.AnimationTargetData";FS.prototype={initializeProperties:function(a){this._transformedPoint=new p;this._transformMatrix=new Eb;this._initialTransformPoint=
new p;this._tweenedOffsetY=this._tweenedOffsetX=0;this._isDirty=!0;this._originX=this._target.get_x();this._originY=this._target.get_y();this._getTransformedPoint(this._initialTransformPoint);-1!=a.indexOf("x")&&(this._initialTransformPoint.x+=this._originX);-1!=a.indexOf("y")&&(this._initialTransformPoint.y+=this._originY)
		},setRegistrationPoint:function(a){a.x*=this._target.get_width();a.y*=this._target.get_height();this._transformPoint=a
		},update:function(){this._isDirty&&(this._isDirty=!1,this._getTransformedPoint(this._transformedPoint),
this._subtractPointsTo(this._initialTransformPoint,this._transformedPoint,this._transformedPoint),this._target.set_x(this._originX+this._transformedPoint.x+this._tweenedOffsetX),this._target.set_y(this._originY+this._transformedPoint.y+this._tweenedOffsetY))
		},dispose:function(){this._transformedPoint=this._initialTransformPoint=this._transformPoint=this._transformMatrix=null
		},applyProperty:function(a,b){switch(a){case "alpha":this._setAlpha(b);break;case "rotation":this._setRotation(b);break;case "scaleX":this._setScaleX(b);
break;case "scaleY":this._setScaleY(b);break;case "x":this._setX(b);break;case "y":this._setY(b)
			}
		},_setX:function(a){this._tweenedOffsetX=a-this._originX;this._isDirty=!0
		},_setY:function(a){this._tweenedOffsetY=a-this._originY;this._isDirty=!0
		},_setScaleX:function(a){this._target.set_scaleX(a);this._isDirty=!0
		},_setScaleY:function(a){this._target.set_scaleY(a);this._isDirty=!0
		},_setRotation:function(a){this._target.set_rotation(a);this._isDirty=!0
		},_setAlpha:function(a){this._target.set_alpha(a)
		},
_getTransformedPoint:function(a){this._transformMatrix.identity();this._transformMatrix.scale(this._target.get_scaleX(),this._target.get_scaleY());this._transformMatrix.rotate(this._target.get_rotation()*Math.PI/180);a.copyFrom(this._transformPoint);this._transformPointWithMatrix(a,this._transformMatrix)
		},_transformPointWithMatrix:function(a,b){var c=a.x,d=a.y;a.x=c*b.a+d*b.c+b.tx;a.y=c*b.b+d*b.d+b.ty
		},_subtractPointsTo:function(a,b,c){null==c&&(c=new p);c.x=a.x-b.x;c.y=a.y-b.y;return c
		},__class__:FS
	};
var GS=function(){this._segments=[]
	};h[
		"de.innogames.shared.util.frameanimation.SegmentIterator"
	]=GS;GS.__name__="de.innogames.shared.util.frameanimation.SegmentIterator";GS.prototype={getPropertyValue:function(a){null!=this._currentSegment&&this._currentSegment.isActiveOn(a)||this._setNextSegment(a);if(null==this._currentSegment){if(null!=this._lastSegment)return this._lastSegment.getLast();throw ba.thrown(new wb("Unknown iterator state "));
			}return this._currentSegment.valueOn(a)
		},dispose:function(){this._lastSegment=
this._currentSegment=this._segments=null
		},set_dataPoints:function(a){this._createSegmentsFromDataPoints(a);return a
		},_createSegmentsFromDataPoints:function(a){null==this._segments&&(this._segments=[]);for(var b=a.length-1,c=0;c<b;){var d=c++;this._segments.push(new SHb(a[d
				],a[d+1
				]))
			}
		},_setNextSegment:function(a){null!=this._currentSegment&&(this._lastSegment=this._currentSegment);for(var b=0,c=this._segments;b<c.length;){var d=c[b
				];++b;if(d.isActiveOn(a)){this._currentSegment=d;return
				}
			}this._currentSegment=
null
		},__class__:GS,__properties__: {set_dataPoints: "set_dataPoints"
		}
	};var aXa=function(a,b){this._segments=[];this._type=a;this._strength=b
	};h[
		"de.innogames.shared.util.frameanimation.CustomEasing"
	]=aXa;aXa.__name__="de.innogames.shared.util.frameanimation.CustomEasing";aXa.__super__=GS;aXa.prototype=l(GS.prototype,
	{getEaseModifier:function(a){a=this.getPropertyValue(a);return 0<a?a: 0
		},__class__:aXa
	});var HS=function(a,b){this._repeat=this._delay=this._startTime=this._lastTime=this._repeatCount=this._state=
0;this._duration=this._timescale=NaN;C.call(this);this._target=new FS(a);bXa.parseAnimationDefinition(this,b,m(this,this._setConfiguration))
	};h[
		"de.innogames.shared.util.frameanimation.ExportedTweenPlayer"
	]=HS;HS.__name__="de.innogames.shared.util.frameanimation.ExportedTweenPlayer";HS.__super__=C;HS.prototype=l(C.prototype,
	{play:function(a){
			1==this._state&&5!=this._state&&(this._state=3,
			0!=this._delay&&(this._state=2),this._onComplete=a,this._repeatCount=0,this._startTime=qb.getTimer(),this.addEventListener("enterFrame",
m(this,this._updateEnterFrame)),this._updateTo(0))
		},kill:function(){this._state=4;this.dispose()
		},dispose:function(){if(5!=this._state){this._state=5;this.removeEventListener("enterFrame",m(this,this._updateEnterFrame));null!=this._target&&(this._target.dispose(),this._target=null);if(null!=this._tweens){for(var a=0,b=this._tweens;a<b.length;)b[a++
					].dispose();this._tweens=null
				}this._onComplete=null
			}
		},set_repeat:function(a){return this._repeat=a
		},set_delay:function(a){return this._delay=a
		},_setConfiguration:function(a,
b,c,d,e,g,k){this._timescale=a;this._duration=b;this._repeat=c;this._delay=d;this._target.setRegistrationPoint(e);this._target.initializeProperties(g);this._tweens=k;0!=k.length&&(this._state=1)
		},_updateEnterFrame:function(a){if(4!=this._state&&5!=this._state){var b=this.get__elapsedTime();b!=this._lastTime&&(this._lastTime=b,
				2==this._state?b>=this._delay&&(this._delay=this._lastTime=0,this._state=3,this._startTime=qb.getTimer(),this._updateEnterFrame(a)):b<this._duration?this._updateTo(b):(this._updateTo(this._duration),
this._onTweenEnd(),this._shouldRepeat()?(this._startTime=qb.getTimer(),this._updateEnterFrame(a)):(this._state=4,this.removeEventListener("enterFrame",m(this,this._updateEnterFrame)))))
			}
		},_updateTo:function(a){for(var b=0,c=this._tweens;b<c.length;){var d=c[b
				];++b;this._target.applyProperty(d.get_property(),d.getPropertyValue(a))
			}this._target.update()
		},_shouldRepeat:function(){return-1==this._repeat||this._repeatCount++<this._repeat?!0:!1
		},_onTweenEnd:function(){null!=this._onComplete&&(this._onComplete(),
this._onComplete=null)
		},get__elapsedTime:function(){return qb.getTimer()-this._startTime
		},__class__:HS,__properties__:l(C.prototype.__properties__,
		{get__elapsedTime: "get__elapsedTime",set_delay: "set_delay",set_repeat: "set_repeat"
		})
	});var bXa=function(){};h[
		"de.innogames.shared.util.frameanimation.FrameAnimationBuilder"
	]=bXa;bXa.__name__="de.innogames.shared.util.frameanimation.FrameAnimationBuilder";bXa.parseAnimationDefinition=function(a,b,c){if(null!=a&&null!=b&&0!=b.length){a=JSON.parse(b);var d=
a.registration;b=new p(0,
			0);null!=d&&b.setTo(d.x,d.y);d=a.data;if(null!=d){for(var e=[],g=[],k=0;k<d.length;){var t=bXa.parseTweenDefinition(d[k++
					]);g.push(t.get_property());e.push(t)
				}c(a.timescale,a.duration,a.repeat,a.delay,b,g,e)
			}
		}
	};bXa.parseTweenDefinition=function(a){var b=new kdb;b.set_property(a.tween);var c=[],d=0;for(a=a.keyframes;d<a.length;)c.push(lN.fromObject(a[d++
		]));b.initialize(c);b.set_easing(null);return b
	};bXa.parseCustomEasing=function(a){if(null==a||"Custom"!=a.type)return null;
var b=new aXa("Custom",parseFloat(a.strength));a=a.points;if(null==a||0==a.length)return null;for(var c=[],d=a.length,e=0;e<d;){var g=e++;0<g&&c.push(lN.fromAnchor(a[g
			].previous));c.push(lN.fromAnchor(a[g
			].anchor));g<d-1&&c.push(lN.fromAnchor(a[g
			].next))
		}b.set_dataPoints(c);return b
	};var kdb=function(){this._maxValue=NaN;this._maxTimeValue=0;this._segments=[]
	};h[
		"de.innogames.shared.util.frameanimation.PropertyTweenData"
	]=kdb;kdb.__name__="de.innogames.shared.util.frameanimation.PropertyTweenData";
kdb.__super__=GS;kdb.prototype=l(GS.prototype,
	{initialize:function(a){var b=a[a.length-1
			];this._maxTimeValue=b.time;this._maxValue=b.value;this._createSegmentsFromDataPoints(a)
		},getPropertyValue:function(a){return this._applyEasing(GS.prototype.getPropertyValue.call(this,a),a)
		},dispose:function(){GS.prototype.dispose.call(this);null!=this._easing&&(this._easing.dispose(),this._easing=null)
		},_applyEasing:function(a,b){return null!=this._easing?a*this._easing.getEaseModifier(b|0):a
		},get_property:function(){return this._property
		},
set_property:function(a){return this._property=a
		},set_easing:function(a){return this._easing=a
		},__class__:kdb,__properties__:l(GS.prototype.__properties__,
		{set_easing: "set_easing",set_property: "set_property",get_property: "get_property"
		})
	});var lN=function(a,b){this.time=a;this.value=b
	};h[
		"de.innogames.shared.util.frameanimation.TweenDataPoint"
	]=lN;lN.__name__="de.innogames.shared.util.frameanimation.TweenDataPoint";lN.fromObject=function(a){return new lN(a.time,a.value)
	};lN.fromAnchor=function(a){a=
a.split(",");return new lN(fa.parseInt(a[
			0
		]),parseFloat(a[
			1
		]))
	};lN.prototype={isValidAt:function(a){return a<=this.time
		},__class__:lN
	};var SHb=function(a,b){this._fromTime=this._fromValue=this._toTime=this._toValue=this._delta=this._duration=NaN;this._fromTime=a.time;this._fromValue=a.value;this._toTime=b.time;this._toValue=b.value;this._initializeSegment()
	};h[
		"de.innogames.shared.util.frameanimation.TweenDataSegment"
	]=SHb;SHb.__name__="de.innogames.shared.util.frameanimation.TweenDataSegment";SHb.prototype=
{valueOn:function(a){return this._fromValue+(a-this._fromTime)/this._duration*this._delta
		},getLast:function(){return this.valueOn(this._toTime)
		},isActiveOn:function(a){return a>=this._fromTime?a<this._toTime:!1
		},_initializeSegment:function(){this._duration=this._toTime-this._fromTime;this._delta=this._toValue-this._fromValue
		},__class__:SHb
	};var cXa=function(a,b,c){am.call(this,a,b,c)
	};h[
		"de.innogames.shared.util.pools.GenericPool"
	]=cXa;cXa.__name__="de.innogames.shared.util.pools.GenericPool";cXa.__super__=
am;cXa.prototype=l(am.prototype,
	{getObject:function(){return this.get()
		},releaseObject:function(a){this.release(a)
		},__class__:cXa
	});var Hk=function(a){for(var b=[],c=0;c<a;)++c,b.push(new p);this._pool=b
	};h[
		"de.innogames.shared.util.pools.PointPool"
	]=Hk;Hk.__name__="de.innogames.shared.util.pools.PointPool";Hk.__properties__={get_instance: "get_instance"
	};Hk.get_instance=function(){null==Hk._instance&&(Hk._instance=new Hk(0));return Hk._instance
	};Hk.prototype={getPoint:function(){return 0<this._pool.length?
this._pool.pop():new p
		},getInitializedPoint:function(a,b){var c=this.getPoint();c.setTo(a,b);return c
		},returnPoint:function(a){null!=Hk.get_instance()&&this._pool.push(a)
		},returnArrayOfPoints:function(a){if(null!=a)for(;0<a.length;)this.returnPoint(a.pop())
		},__class__:Hk
	};var THb=function(a){for(var b=[],c=0;c<a;)++c,b.push([]);this._pool=b
	};h[
		"de.innogames.shared.util.pools.PoolIntArray"
	]=THb;THb.__name__="de.innogames.shared.util.pools.PoolIntArray";THb.prototype={getInstance:function(){return 0<
this._pool.length?this._pool.pop(): []
		},returnInstance:function(a){null!=a&&(a.length=0,this._pool.push(a))
		},__class__:THb
	};var lC=function(a){this.viewportSize=I._new(a);F.bind(this.viewportSize,window.applyViewportSizeVariant,
		null,null);this._changeRequested=!1
	};h[
		"de.innogames.strategycity.ViewportSizeController"
	]=lC;lC.__name__="de.innogames.strategycity.ViewportSizeController";lC.initialize=function(a){null==lC.instance?lC.instance=new lC(a):lC.instance.requestChange(a);return lC.instance
	};lC.prototype=
{requestChange:function(a){I.set_value(this.viewportSize,a);null!=this._userDataModel?this._updateSettings():this._changeRequested=!0
		},connect:function(a,b){var c=this;this._userDataModel=a;this._settingsService=b;F.bind(this.viewportSize,function(d){c._userDataModel.get_settingsVO().viewportSize=d
			},
			null,null);this._changeRequested&&(this._updateSettings(),this._changeRequested=!1)
		},_updateSettings:function(){var a=this._userDataModel.get_settingsVO();a.viewportSize=I.get_value(this.viewportSize);
this._settingsService.updateSettings(a,!0)
		},get_options:function(){return window.availableViewportSizes
		},__class__:lC,__properties__: {get_options: "get_options"
		}
	};var cla=function(){this.isShown=!1
	};h[
		"de.innogames.strategycity.ageoutlook.model.SlideShowModel"
	]=cla;cla.__name__="de.innogames.strategycity.ageoutlook.model.SlideShowModel";cla.__interfaces__=[kc
	];cla.__instantiate=function(a){return new cla
	};cla.prototype={__construct:function(a){return null
		},__class__:cla
	};var dla=function(){};h[
		"de.innogames.strategycity.ageoutlook.controller.ShowSlideShowCommand"
	]=
dla;dla.__name__="de.innogames.strategycity.ageoutlook.controller.ShowSlideShowCommand";dla.__instantiate=function(a){return new dla
	};dla.__super__=M;dla.prototype=l(M.prototype,
	{execute:function(){var a=this._event.slideShowData;a=a instanceof dXa?a:null;null!=a&&(this.dispatch(new IS("ToggleTutorialViewEvent/TOGGLE",!1)),this._showOutlookAgesSlideShow(a),this._trackingService.trackPopupAction("age_outlook",
			"open"))
		},_showOutlookAgesSlideShow:function(a){this.dispatch(new ha("WindowEvent/ADD_WINDOW",
new hF(a)));this._slideShowModel.isShown=!0
		},__construct:function(a){M.prototype.__construct.call(this,a);this._event=a.getInstanceForMapping("de.innogames.strategycity.ageoutlook.controller.SlideShowEvent");this._trackingService=a.getInstanceForMapping("de.innogames.strategycity.main.service.TrackingService");this._slideShowModel=a.getInstanceForMapping("de.innogames.strategycity.ageoutlook.model.SlideShowModel");return null
		},__class__:dla
	});var ela=function(){};h[
		"de.innogames.strategycity.ageoutlook.controller.HideSlideShowCommand"
	]=
ela;ela.__name__="de.innogames.strategycity.ageoutlook.controller.HideSlideShowCommand";ela.__instantiate=function(a){return new ela
	};ela.__super__=M;ela.prototype=l(M.prototype,
	{execute:function(){this._crmContentModel.get_crmInterstitialShown()||(this.dispatch(new IS("ToggleTutorialViewEvent/TOGGLE",!0)),this._trackingService.trackPopupAction("age_outlook",
			"close"),this._slideShowModel.isShown=!1)
		},__construct:function(a){M.prototype.__construct.call(this,a);this._trackingService=a.getInstanceForMapping("de.innogames.strategycity.main.service.TrackingService");
this._slideShowModel=a.getInstanceForMapping("de.innogames.strategycity.ageoutlook.model.SlideShowModel");this._crmContentModel=a.getInstanceForMapping("de.innogames.strategycity.crm.model.CrmContentModel");return null
		},__class__:ela
	});var y7=function(){};h[
		"de.innogames.strategycity.shared.ui.window.IShortcutWindow"
	]=y7;y7.__name__="de.innogames.strategycity.shared.ui.window.IShortcutWindow";y7.__isInterface__=!0;y7.prototype={__class__:y7
	};var qk=function(){};h[
		"de.innogames.strategycity.shared.ui.window.IWindow"
	]=
qk;qk.__name__="de.innogames.strategycity.shared.ui.window.IWindow";qk.__isInterface__=!0;qk.__interfaces__=[Yj
	];qk.prototype={__class__:qk,__properties__: {get_isQueueable: "get_isQueueable",get_requiresModal: "get_requiresModal"
		}
	};var Qf=function(){this._closeWhenClickedOutside=!0;this._requiresModal=!1;this._contentWidth=this._contentHeight=this._fixedContentWidth=this._fixedContentHeight=0;L.call(this);this._init()
	};h[
		"de.innogames.strategycity.shared.ui.window.AbstractWindow"
	]=Qf;Qf.__name__="de.innogames.strategycity.shared.ui.window.AbstractWindow";
Qf.__interfaces__=[y7,qk
	];Qf.__super__=L;Qf.prototype=l(L.prototype,
	{addContent:function(a,b,c){null==c&&(c=0);null==b&&(b=0);null!=this._skin&&null!=a&&(this._content=a,this._skin.addChild(this._content),this._setContentSize(b,c))
		},update:function(){this._setContentSize(this._fixedContentWidth,this._fixedContentHeight)
		},resizeWindow:function(){null!=this._content&&this._repositionWindow()
		},getShortcutContext:function(){if(null==this._shortcutContext){this._shortcutContext=new Ik(m(this,this._closeViaShortcut));
var a=this._getSpecialCloseShortcutKey();0!=a&&this._shortcutContext.addSpecialCloseKeyMapping(a)
			}return this._shortcutContext
		},onStageResize:function(){this._repositionWindow()
		},setModalVisible:function(a){this._requiresModal=a;this.dispatchEvent(new zu("ModalWindowEvent/CHANGE"))
		},modalLayerClick:function(a){this._closeWhenClickedOutside&&this.dispose()
		},show:function(){},focusIn:function(){},focusOut:function(){},get_isQueueable:function(){return!1
		},get_closeWhenClickedOutside:function(){return this._closeWhenClickedOutside
		},
set_closeWhenClickedOutside:function(a){return this._closeWhenClickedOutside=a
		},get_requiresModal:function(){return this._requiresModal
		},_onResize:function(a){this._repositionWindow()
		},_onAddedToStage:function(a){L.prototype._onAddedToStage.call(this,a);this._repositionWindow()
		},_getSpecialCloseShortcutKey:function(){return 0
		},_closeViaShortcut:function(){this.modalLayerClick(null)
		},_setContentSize:function(a,b){null==b&&(b=0);0!=a?this._fixedContentWidth=this._contentWidth=a:null!=this._content&&
(this._contentWidth=this._content.get_width()|0);0!=b?this._fixedContentHeight=this._contentHeight=b:null!=this._content&&(this._contentHeight=this._content.get_height()|0);null!=this.stage&&this.resizeWindow()
		},_init:function(){this._requiresModal=!0;this._skin=new C;this.addChild(this._skin)
		},_repositionWindow:function(){var a=null==this._positionOffset?new p(0,
			0):this._positionOffset;this._skin.set_x((.5*(this.stage.stageWidth-(0!=this._fixedContentWidth?this._fixedContentWidth:this._skin.get_width()))|
0)+a.x);this._skin.set_y((.5*(this.stage.stageHeight-(0!=this._fixedContentHeight?this._fixedContentHeight:this._skin.get_height()))|0)+a.y)
		},_getContentRect:function(){return new Z(this._content.get_x(),this._content.get_y(),this._contentWidth,this._contentHeight)
		},__class__:Qf,__properties__:l(L.prototype.__properties__,
		{get_requiresModal: "get_requiresModal",set_closeWhenClickedOutside: "set_closeWhenClickedOutside",get_closeWhenClickedOutside: "get_closeWhenClickedOutside",get_isQueueable: "get_isQueueable"
		})
	});
var ca=function(){this._frameShadow=!0;this._backgroundLayerOffsetX=this._backgroundLayerOffsetY=this._frontLayerOffsetX=this._frontLayerOffsetY=0;this._topLeftButtons=[];this._padding=[
			7,
			7,
			7,
			7
		];Qf.call(this)
	};h[
		"de.innogames.strategycity.shared.ui.window.BaseWindow"
	]=ca;ca.__name__="de.innogames.strategycity.shared.ui.window.BaseWindow";ca.__super__=Qf;ca.prototype=l(Qf.prototype,
	{dispose:function(){this.mouseChildren=this.mouseEnabled=!1;this._abortAssetLoading();O._to(this,.15,
			{alpha: 0,onComplete:m(this,
this.finalDispose)
			})
		},resizeWindow:function(){null!=this._content&&null!=this._windowReflib&&(this._drawFrame(),this._repositionChildren(),this._repositionWindow(),this._repositionHeadline(),this.show())
		},modalLayerClick:function(a){this._closeWhenClickedOutside&&this.get_assetsLoaded()&&null!=this._closeButton&&this._closeButton.get_visible()&&this._onCloseClicked(a)
		},show:function(){this.set_alpha(1)
		},onStageResize:function(){this._repositionWindow();this._repositionChildren()
		},finalDispose:function(){null!=
this.stage&&this.stage.set_focus(null);null!=this._windowFrame&&this._windowFrame._disposeQuads();null!=this._windowBackground&&this._windowBackground.dispose();this._closeButton=this._frontLayer=this._backgroundLayer=this._skin=null;for(var a=0,b=this._topLeftButtons;a<b.length;)b[a++
			].dispose();this._topLeftButtons.length=0;this._headline=this._windowReflib=this._content=this._helpButton=null;Qf.prototype.dispose.call(this)
		},addBackgroundContent:function(a){this._backgroundLayer.addChild(a);this._backgroundLayerOffsetX=
this._backgroundLayer.get_x()-this._skin.get_x()|0;this._backgroundLayerOffsetY=this._backgroundLayer.get_y()-this._skin.get_y()|0;this._repositionFrontAndBackgroundLayers()
		},addFrontContent:function(a){this._frontLayer.addChild(a);this._frontLayerOffsetX=this._frontLayer.get_x()-this._skin.get_x()|0;this._frontLayerOffsetY=this._frontLayer.get_y()-this._skin.get_y()|0;this._repositionFrontAndBackgroundLayers()
		},addFrontContentRelativeToBorder:function(a,b,c){this._frontLayer.addChild(a);this._frontLayerOffsetX=
ca.FRAME_BORDER.left-9+b|0;this._frontLayerOffsetY=ca.FRAME_BORDER.top-9+c|0;this._repositionFrontAndBackgroundLayers()
		},addTopLeftButton:function(a,b){null==b&&(b="close");a=new qi(a,b);null!=a&&a.get_isButtonCreated()&&(a.set_y(12+(30-a.get_height())/2),a.set_x(20+this._topLeftButtons.length*(a.get_width()+3)),this._topLeftButtons.push(a),null!=this._skin&&this._skin.addChild(a));return a
		},addHelpButton:function(a){null==this._helpButton&&(this._helpButton=new mN(a,
			"help_button"),this._helpButton.set_y(15),
null!=this._skin&&this._skin.addChild(this._helpButton),this._repositionChildren())
		},showHelpButton:function(){null!=this._helpButton&&(this._helpButton.mouseEnabled=!0,this._helpButton.set_visible(!0))
		},hideHelpButton:function(){null!=this._helpButton&&(this._helpButton.mouseEnabled=!1,this._helpButton.set_visible(!1))
		},setPadding:function(a,b,c,d){this._padding=[a,b,c,d
			]
		},set_headline:function(a){null!=a&&null!=this._headline&&(this._headline.set_text(a),this._headline.get_text(),this._headline.get_text());
this._repositionHeadline();return a
		},get_headlineField:function(){return this._headline
		},get_helpButton:function(){return this._helpButton
		},set_frameShadow:function(a){if(this._frameShadow==a)return a;this._frameShadow=a;null!=this._windowFrame&&(this._windowFrame.set_bitmapData(this._getWindowFrameBitmapData()),this._drawFrame());return a
		},get_frameShadow:function(){return this._frameShadow
		},_onAssetsLoaded:function(){this._initRefLibs()
		},_init:function(){this._requiresModal=!0;this.set_alpha(0);
this._backgroundLayer=new C;this._backgroundLayer.mouseEnabled=!1;this.addChild(this._backgroundLayer);this._skin=new C;this.addChild(this._skin);this._frontLayer=new C;this._frontLayer.mouseEnabled=!1;this.addChild(this._frontLayer);this._addWindowCloseButton();this._addWindowHeadline()
		},_initRefLibs:function(){var a=this._assets.h[
				"shared/gui/window/window"
			];null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER
			] Failed to get library "shared/gui/window/window" from LoadedReflibs.'));this._windowReflib=
a;null!=this.stage&&null!=this._content&&this.resizeWindow()
		},_hideCloseButton:function(){null!=this._closeButton&&(this._closeButton.mouseEnabled=!1,this._closeButton.set_visible(!1))
		},_addWindowCloseButton:function(){this._closeButton=new qi(m(this,this._onCloseClicked),
			"close");this._closeButton.set_y(15);this._skin.addChild(this._closeButton);this.addEventListener("ButtonEvent/clicked",m(this,this._onCloseButtonClicked),!0,
			0,!0)
		},_addWindowHeadline:function(){this._headline=P.createDynamicFontSizeArialTextfield(15980192,
!0,
			21,
			0);this._headline.set_height(30);this._headline.set_wordWrap(!1);this.addChild(this._headline)
		},_drawFrame:function(){if(0!=this._contentWidth&&0!=this._contentHeight){var a=this._padding[
					0
				],b=this._padding[
					1
				],c=this._padding[
					2
				],d=this._padding[
					3
				];this._content.set_x(ca.FRAME_BORDER.left+d);this._content.set_y(this._getRelativeContentSkinPositionY()+a);b=this._contentWidth+d+b;a=this._contentHeight+a+c;c=b+ca.FRAME_BORDER.left+ca.FRAME_BORDER.right;d=a+ca.FRAME_BORDER.bottom+this._getRelativeContentSkinPositionY();
if(null==this._windowFrame){this._windowFrame=this._createWindowFrame();this._skin.addChildAt(this._windowFrame,
					0);var e=this._windowFrame;e.set_width(c);e.set_height(d)
				}else if(c!=this._windowFrame.get_width()||d!=this._windowFrame.get_height())e=this._windowFrame,e.set_width(c),e.set_height(d);null==this._windowBackground?(this._windowBackground=this._createWindowBackground(),this._windowBackground.setSize(b,a),this._windowBackground.set_x(ca.FRAME_BORDER.left),this._windowBackground.set_y(this._getRelativeContentSkinPositionY()),
this._skin.addChildAt(this._windowBackground,
				0)):b==this._windowBackground.get_width()&&a==this._windowBackground.get_height()||this._windowBackground.setSize(b,a)
			}
		},_createWindowBackground:function(){return new IZ(this._windowReflib)
		},_createWindowFrame:function(){return new ua(this._getWindowFrameBitmapData(),ca.SCALE_RECT)
		},_getWindowFrameBitmapData:function(){return this._frameShadow?this._windowReflib.getImage("windowsprite"):this._windowReflib.getImage("windowsprite_without_shadow")
		},_getRelativeContentSkinPositionY:function(){return 46
		},
_repositionWindow:function(){this._skin.set_x(.5*(this.stage.stageWidth-this._getEffectiveContentWidth())|0);this._skin.set_y(.5*(this.stage.stageHeight-(0!=this._fixedContentHeight?this._fixedContentHeight:this._skin.get_height()))|0);this._repositionFrontAndBackgroundLayers()
		},_repositionFrontAndBackgroundLayers:function(){
			0<this._backgroundLayer.get_numChildren()&&(this._backgroundLayer.set_x(this._skin.get_x()+this._backgroundLayerOffsetX),this._backgroundLayer.set_y(this._skin.get_y()+this._backgroundLayerOffsetY));
0<this._frontLayer.get_numChildren()&&(this._frontLayer.set_x(this._skin.get_x()+this._frontLayerOffsetX),this._frontLayer.set_y(this._skin.get_y()+this._frontLayerOffsetY))
		},_repositionChildren:function(){null!=this._content&&this._repositionCloseButton();null!=this._content&&null!=this._helpButton&&null!=this._closeButton&&this._helpButton.set_x(this._closeButton.get_x()-this._closeButton.get_width()-3);this._repositionHeadline()
		},_repositionCloseButton:function(){null!=this._closeButton&&this._closeButton.set_x(this._getContentRect().width-
12+this._padding[
				3
			]+this._padding[
				1
			])
		},_repositionHeadline:function(){null!=this._headline&&(this._headline.set_width(this._getEffectiveContentWidth()-30-(null!=this._closeButton?2*this._closeButton.get_width(): 0)),this._headline.set_x(this._skin.get_x()+15+(null!=this._closeButton?this._closeButton.get_width(): 0)),this._headline.set_y(this._skin.get_y()+ca.FRAME_BORDER.top+(this._headline.get_height()-this._headline.get_textHeight())/2-2))
		},_getEffectiveContentWidth:function(){return 0!=this._fixedContentWidth?
this._skin.get_width()>=this._fixedContentWidth?this._fixedContentWidth+24:Math.max(this._fixedContentWidth,this._skin.get_width())|0:Math.min(this._skin.get_width(),null!=this._windowFrame?this._windowFrame.get_width():this._skin.get_width())|0
		},_onAddedToStage:function(a){Qf.prototype._onAddedToStage.call(this,a);this._requireAssets([
				"shared/gui/window/window"
			])
		},_onCloseButtonClicked:function(a){
			"Close"==a.id&&this._onCloseClicked(null)
		},_onCloseClicked:function(a){this.dispose()
		},_onResize:function(a){this._repositionWindow();
this._repositionHeadline()
		},__class__:ca,__properties__:l(Qf.prototype.__properties__,
		{set_frameShadow: "set_frameShadow",get_frameShadow: "get_frameShadow",get_helpButton: "get_helpButton",get_headlineField: "get_headlineField",set_headline: "set_headline"
		})
	});var zq=function(a){this._changeSlideButtonsY=this._previousButtonX=this._nextButtonX=0;this._slideChanged=!1;this._numSlides=this._currentSlideIndex=0;ca.call(this);this._numSlides=a.getNumberOfSlides();this._data=a;this._setupVars()
	};h[
		"de.innogames.strategycity.ageoutlook.view.HorizontalSlideShowWindow"
	]=
zq;zq.__name__="de.innogames.strategycity.ageoutlook.view.HorizontalSlideShowWindow";zq.__super__=ca;zq.prototype=l(ca.prototype,
	{dispose:function(){null!=this._slidesContent&&(this._slidesContent.length=0);null!=this._shine&&this._shine.dispose();null!=this._previousSlideButton&&this._previousSlideButton.dispose();null!=this._nextSlideButton&&this._nextSlideButton.dispose();null!=this._windowBackground&&this._windowBackground.dispose();this.removeChildren();this.dispatchEvent(new xh("ViewCreationEvent/VIEW_DISPOSED"));
ca.prototype.dispose.call(this)
		},modalLayerClick:function(a){this._onCloseClicked(a)
		},isOnLastSlide:function(){return this._currentSlideIndex==this._numSlides-1
		},isOnFirstSlide:function(){return 0==this._currentSlideIndex
		},setSlide:function(a){this._currentSlideIndex=a;this._slideChanged=!0;for(var b=0;b<this._numSlides;)this._slidesContent[b
			].set_visible(b==a),++b;b=0;for(var c=this._textFields;b<c.length;)this._contentInlet.removeContent(c[b++
			]);this._textFields=[];b=0;for(c=this._data.getSlides()[a
			].texts;b<
c.length;)this._createAndAddTextfieldFromTextFieldData(c[b++
			]);null!=this._nextSlideButton&&this._shine.set_visible(this._nextSlideButton.set_visible(!this.isOnLastSlide()));null!=this._previousSlideButton&&this._shine.set_visible(this._previousSlideButton.set_visible(!this.isOnFirstSlide()))
		},get_currentSlide:function(){return this._data.getSlides()[this._currentSlideIndex
			]
		},_onNextSlideClicked:function(a){this.isOnLastSlide()||this.setSlide(this._currentSlideIndex+1)
		},_onPreviousSlideClicked:function(a){this.isOnFirstSlide()||
this.setSlide(this._currentSlideIndex-1)
		},_repositionWindow:function(){ca.prototype._repositionWindow.call(this);var a=this._skin;a.set_y(a.get_y()-50)
		},_setupVars:function(){this._setContentSize(693,
			518);this._contentWidth=693;this._contentHeight=518;this._changeSlideButtonsY=215;this._previousButtonX=12;this._nextButtonX=630
		},_initContent:function(){this._shine=new z7(170,
			5);this._headline.set_text(this._data.windowTitle);this._addSlidesContent();this._addButtons();this._textFields=[]
		},_addButtons:function(){this._createAndAddNextSlideButton();
this._createAndAddPreviousSlideButton()
		},_createAndAddTextfieldFromTextFieldData:function(a){var b=kb.createInfoScreenDescriptionText(this.get_x(),this.get_y(),this.get_width()|0,a.text,
			16,
			0);b.set_width(a.width);b.set_text(a.text);b.set_x(a.position.x);this._centerTextFieldInTextBox(b,a);this._textFields.push(b);this._contentInlet.addContent(b)
		},_centerTextFieldInTextBox:function(a,b){a.set_y(b.position.y+(b.height-a.get_textHeight())/2)
		},_createAndAddNextSlideButton:function(){this._nextSlideButton=
new bt;this._nextSlideButton.set_x(this._nextButtonX);this._nextSlideButton.set_y(this._changeSlideButtonsY);this._nextSlideButton.set_id("next_button");this._contentInlet.addContent(this._nextSlideButton);this._shine.updateMaskWithDisplayObject(this._nextSlideButton,new p(this._nextSlideButton.get_x(),this._nextSlideButton.get_y()));this._shine.resume();this._contentInlet.addContent(this._shine);this._nextSlideButton.addEventListener("click",m(this,this._onNextSlideClicked))
		},_createAndAddPreviousSlideButton:function(){this._previousSlideButton=
new Au;this._previousSlideButton.set_x(this._previousButtonX);this._previousSlideButton.set_y(this._changeSlideButtonsY);this._previousSlideButton.set_id("previous_button");this._contentInlet.addContent(this._previousSlideButton);this._shine.updateMaskWithDisplayObject(this._previousSlideButton,new p(this._previousSlideButton.get_x(),this._previousSlideButton.get_y()));this._shine.resume();this._contentInlet.addContent(this._shine);this._previousSlideButton.addEventListener("click",m(this,this._onPreviousSlideClicked))
		},
_addSlidesContent:function(){this._contentInlet=new Ua;this._contentInlet.set_paddingLeft(this._contentInlet.set_paddingTop(4));this._slidesHolder=new C;this._slidesContent=[];for(var a=0,b=this._data.getSlides();a<b.length;){var c=new B(this._reflib.getImage(b[a++
				].name));c.set_visible(!1);this._slidesHolder.addChild(c);this._slidesContent.push(c)
			}this._contentInlet.setSize(this._contentWidth+8,this._contentHeight+8);this._contentInlet.addContent(this._slidesHolder);this.addContent(this._contentInlet)
		},
__class__:zq,__properties__:l(ca.prototype.__properties__,
		{get_currentSlide: "get_currentSlide"
		})
	});var hF=function(a){zq.call(this,a)
	};h[
		"de.innogames.strategycity.ageoutlook.view.OutlookAgesWindow"
	]=hF;hF.__name__="de.innogames.strategycity.ageoutlook.view.OutlookAgesWindow";hF.__super__=zq;hF.prototype=l(zq.prototype,
	{setSlide:function(a){zq.prototype.setSlide.call(this,a);this.isOnLastSlide()&&(Ta.delayedCallBySeconds(this._data.getSlides()[a
			].closeAfterSeconds,m(this,this._delayedCloseWindow),
null),this._slideChanged=!1)
		},dispose:function(){null!=this._topButtonContainer&&this._topButtonContainer.removeChildren(0);null!=this._startPlayingButton&&this._startPlayingButton.dispose();zq.prototype.dispose.call(this)
		},progressToNextSlide:function(){var a=fa.parseInt(this._radioGroup.get_selectedButtonId())+1;this._radioGroup.selectButtonById(null==a?"null": ""+a)
		},get_startPlayingButton:function(){return this._startPlayingButton
		},get_currentRadioButton:function(){return this._radioGroup.get_selectedButtonId()
		},
get_radioGroup:function(){return this._radioGroup
		},_onNextSlideClicked:function(a){this.progressToNextSlide()
		},_setupVars:function(){this._setContentSize(789,
			444);this._contentWidth=789;this._contentHeight=444;this._changeSlideButtonsY=152;this._nextButtonX=719
		},_requireAssets:function(a){zq.prototype._requireAssets.call(this,a.concat([
				"city/gui/age_outlook_slideshow/age_outlook_slideshow",
				"shared/buttons/buttons"
			]))
		},_initRefLibs:function(){zq.prototype._initRefLibs.call(this);var a=this._assets.h[
				"city/gui/age_outlook_slideshow/age_outlook_slideshow"
			];
null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER
			] Failed to get library "city/gui/age_outlook_slideshow/age_outlook_slideshow" from LoadedReflibs.'));this._reflib=a;a=this._assets.h[
				"shared/buttons/buttons"
			];null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER
			] Failed to get library "shared/buttons/buttons" from LoadedReflibs.'));this._buttonLib=a;this._initContent()
		},_addButtons:function(){this._createAndAddTopRadioButtons();this._createAndAddNextSlideButton();this._createAndAddBottomStartPlayingbutton(hF.CLOSE_AND_PLAY_BUTTON_STRING)
		},
_createAndAddTextfieldFromTextFieldData:function(a){var b=kb.createInfoScreenDescriptionText(this.get_x(),this.get_y(),this.get_width()|0,a.text,
			16,
			0);b.set_width(a.width);b.set_text(a.text);b.set_x(a.position.x);this._centerTextFieldInTextBox(b,a);2<b.get_numLines()&&this._decreaseFontSizeUntilTextFieldHasTwoLines(b,a);""!=a.replacementString&&Ta.delayedCallBySeconds(a.showForSeconds,m(this,this._changeText),
			[b,a
			]);this._textFields.push(b);this._contentInlet.addContent(b)
		},_createAndAddTopRadioButtons:function(){this._topButtonContainer=
new C;this._radioGroup=new iF;for(var a=0,b=0;b<this._numSlides;){var c=this._createTopButton(b);c.set_x(a);this._topButtonContainer.addChild(c);a+=c.get_width()|0;this._radioGroup.addRadioButton(c);++b
			}this._radioGroup.addEventListener("change",m(this,this.dispatchEvent),!1,
			0,!0);this._topButtonContainer.set_x(350);this._topButtonContainer.set_y(30);this._contentInlet.addContent(this._topButtonContainer)
		},_createAndAddBottomStartPlayingbutton:function(a){this._startPlayingButton=new pc(this._buttonLib.getImage("greenUp"),
this._buttonLib.getImage("greenDown"),this._buttonLib.getImage("greenOver"));this._startPlayingButton.setSize(190,
			40);this._startPlayingButton.setText(a,
			15719334);this._startPlayingButton.set_x(301);this._startPlayingButton.set_y(396);this._contentInlet.addContent(this._startPlayingButton)
		},_createTopButton:function(a){var b=new Bm(this._reflib.getImage("tab_btn_inactive"),this._reflib.getImage("tab_btn_active"),this._reflib.getImage("tab_btn_hover"));b.set_id(null==a?"null": ""+a);b.setText(fa.string(a+
1),
			10260593,!0,
			12,
			0);b.setSelectedColor(15719334);b.set_enabled(b.set_radioEnabled(!0));return b
		},_decreaseFontSizeUntilTextFieldHasTwoLines:function(a,b){bl.decreaseFontSizeUntilTextFieldHasACertainLineNumber(a,
			2);this._centerTextFieldInTextBox(a,b)
		},_changeText:function(a,b){null!=a&&(a.set_text(b.replacementString),
			2<a.get_numLines()&&this._decreaseFontSizeUntilTextFieldHasTwoLines(a,b))
		},_delayedCloseWindow:function(){this.isOnLastSlide()&&!this._slideChanged&&zq.prototype._onCloseClicked.call(this,
null)
		},__class__:hF,__properties__:l(zq.prototype.__properties__,
		{get_radioGroup: "get_radioGroup",get_currentRadioButton: "get_currentRadioButton",get_startPlayingButton: "get_startPlayingButton"
		})
	});var fla=function(){};h[
		"de.innogames.strategycity.ageoutlook.view.OutlookAgesWindowMediator"
	]=fla;fla.__name__="de.innogames.strategycity.ageoutlook.view.OutlookAgesWindowMediator";fla.__instantiate=function(a){return new fla
	};fla.__super__=V;fla.prototype=l(V.prototype,
	{onRegister:function(){this.addViewListener("ViewCreationEvent/VIEW_INITIALIZED",
m(this,this._onViewComplete));this.addViewListener("ViewCreationEvent/VIEW_DISPOSED",m(this,this._onViewDisposed));this.addViewListener("change",m(this,this._onSlideChangeButtonClicked));this._crmContentModel.get_enabled()&&this._crmContentModel.get_crmInterstitialShown()&&this._view.set_visible(!1)
		},_onSlideChangeButtonClicked:function(a){a=fa.parseInt(this._view.get_currentRadioButton());this._trackingService.trackPopupAction("age_outlook_"+a,
			"open");this._view.setSlide(a);this._setPlayButtonText()
		},
_onViewComplete:function(a){this._view.get_startPlayingButton().setClickCallback(m(this,this._startPlayingButtonCallback));this._view.get_radioGroup().selectButtonById("0");this._view.setSlide(0);this._setPlayButtonText()
		},_setPlayButtonText:function(){this._view.isOnLastSlide()?this._view.get_startPlayingButton().get_textField().set_text(hF.CLOSE_AND_PLAY_BUTTON_STRING):this._view.get_startPlayingButton().get_textField().set_text(r.gettext("Next"))
		},_onViewDisposed:function(a){this.removeViewListener("ViewCreationEvent/VIEW_DISPOSED",
m(this,this._onViewDisposed));this.dispatch(new JZ("SlideShowEvent/HIDE_SLIDESHOW"))
		},_startPlayingButtonCallback:function(a){this._view.isOnLastSlide()?this._view.dispose():this._view.progressToNextSlide()
		},__construct:function(a){V.prototype.__construct.call(this,a);this._view=a.getInstanceForMapping("de.innogames.strategycity.ageoutlook.view.OutlookAgesWindow");this._model=a.getInstanceForMapping("de.innogames.strategycity.ageoutlook.model.SlideShowModel");this._trackingService=a.getInstanceForMapping("de.innogames.strategycity.main.service.TrackingService");
this._crmContentModel=a.getInstanceForMapping("de.innogames.strategycity.crm.model.CrmContentModel");return null
		},__class__:fla
	});var nn=function(a){this._config=a
	};h[
		"de.innogames.strategycity.main.controller.features.eventconfigs.FeatureMappingsConfiguration"
	]=nn;nn.__name__="de.innogames.strategycity.main.controller.features.eventconfigs.FeatureMappingsConfiguration";nn.prototype={mapConfig:function(a){this._mapSingletons(this._config.singletons,a);this._mapViews(this._config.views,a);null!=this._config.events&&
this._mapEvents(this._config.events,a)
		},unmapConfig:function(a){this._unmapSingletons(this._config.singletons,a);this._unmapViews(this._config.views,a);null!=this._config.events&&this._unmapEvents(this._config.events,a);null!=this._valuesToUnmap&&this._unmapValues(this._valuesToUnmap,a)
		},mapValue:function(a,b,c){a.hasMapping(b)&&a.unmap(b);a.mapValue(b,c);if(null!=this._valuesToUnmap)for(a=0,c=this._valuesToUnmap;a<c.length;)if(c[a++
			]==b)return;null==this._valuesToUnmap?this._valuesToUnmap=[b
			]:this._valuesToUnmap.push(b)
		},
_mapSingletons:function(a,b){for(var c=0;c<a.length;){var d=a[c
				];++c;var e=null==d.mappingClass?d.singletonClass:d.mappingClass;this._canMapSingleton(e,b,d.condition)&&(b.mapSingletonOf(e,d.singletonClass),null!=d.createInstance&&d.createInstance&&b.getInstance(e))
			}
		},_canMapSingleton:function(a,b,c){null==c&&(c=JS.NotMapped);switch(c._hx_index){case 0:return b.hasMapping(a)?(a="Attempting to map Singleton that was already mapped: "+a.__name__,null!=y._reportError&&y._reportError(Error("[LOGGER] "+
a)),!1):!0;case 1:return b.hasMapping(a);case 2:return sa.isFeatureEnabled(c.featureFlagId);case 3:return sJ.isABTestEnabled(c.abTestId);case 4:c=c.conditions;for(var d=0;d<c.length;)if(!this._canMapSingleton(a,b,c[d++
				]))return!1;return!0;case 5:return a=c.handler,null==a?!1:a()
			}
		},_mapViews:function(a,b){for(var c=b.getInstance(KZ),d=null,e=0;e<a.length;){var g=a[e
				];++e;g.mapToStarling?(null==d&&(d=b.getInstance(nN)),d.hasMapping(g.viewClass)?g.viewClass.__name__:d.mapView(g.viewClass,g.mediatorClass,
g.injectViewAs)):c.hasMapping(g.viewClass)?g.viewClass.__name__:c.mapView(g.viewClass,g.mediatorClass,g.injectViewAs)
			}
		},_mapEvents:function(a,b){var c=b.getInstance(tJ);b=b.getInstance(gla);for(var d=0;d<a.length;){var e=a[d
				];++d;switch((null!=e.mapType?e.mapType:bo.Local)._hx_index){case 0:this._mapEventIfNotMapped(e,c);break;case 1:this._mapEventIfNotMapped(e,b);break;case 2:this._mapEventIfNotMapped(e,c),this._mapEventIfNotMapped(e,b)
				}
			}
		},_mapEventIfNotMapped:function(a,b){b.hasEventCommand(a.eventType,
a.commandClass,a.eventClass)?a.commandClass.__name__:b.mapEvent(a.eventType,a.commandClass,a.eventClass)
		},_unmapSingletons:function(a,b){for(var c=0;c<a.length;){var d=a[c
				];++c;d=null==d.mappingClass?d.singletonClass:d.mappingClass;b.hasMapping(d)&&b.unmap(d)
			}
		},_unmapViews:function(a,b){var c=b.getInstance(KZ),d=null;b.getInstance(nN);for(var e=0;e<a.length;){var g=a[e
				];++e;g.mapToStarling?(null==d&&(d=b.getInstance(nN)),d.hasMapping(g.viewClass)&&d.unmapView(g.viewClass)):c.hasMapping(g.viewClass)&&
c.unmapView(g.viewClass)
			}
		},_unmapEvents:function(a,b){var c=b.getInstance(tJ);b=b.getInstance(gla);for(var d=0;d<a.length;){var e=a[d
				];++d;switch((null!=e.mapType?e.mapType:bo.Local)._hx_index){case 0:this._unmapEventIfNotMapped(e,c);break;case 1:this._unmapEventIfNotMapped(e,b);break;case 2:this._unmapEventIfNotMapped(e,c),this._unmapEventIfNotMapped(e,b)
				}
			}
		},_unmapValues:function(a,b){for(var c=0;c<a.length;){var d=a[c
				];++c;b.hasMapping(d)&&b.unmap(d)
			}
		},_unmapEventIfNotMapped:function(a,b){b.hasEventCommand(a.eventType,
a.commandClass,a.eventClass)&&b.unmapEvent(a.eventType,a.commandClass,a.eventClass)
		},_mapViewToDisplayList:function(a,b){b.hasMapping(a.viewClass)?a.viewClass.__name__:b.mapView(a.viewClass,a.mediatorClass,a.injectViewAs)
		},_mapViewToStarling:function(a,b){b.hasMapping(a.viewClass)?a.viewClass.__name__:b.mapView(a.viewClass,a.mediatorClass,a.injectViewAs)
		},_unmapViewFromDisplayList:function(a,b){b.hasMapping(a.viewClass)&&b.unmapView(a.viewClass)
		},_unmapViewFromStarling:function(a,b){b.hasMapping(a.viewClass)&&
b.unmapView(a.viewClass)
		},_logDuplicateMediatorMapping:function(a){a.__name__
		},__class__:nn
	};var DOb=function(){};h[
		"de.innogames.strategycity.ageoutlook.AgeOutlookConfig"
	]=DOb;DOb.__name__="de.innogames.strategycity.ageoutlook.AgeOutlookConfig";var JZ=function(a,b){D.call(this,a);this.slideShowData=b
	};h[
		"de.innogames.strategycity.ageoutlook.controller.SlideShowEvent"
	]=JZ;JZ.__name__="de.innogames.strategycity.ageoutlook.controller.SlideShowEvent";JZ.__super__=D;JZ.prototype=l(D.prototype,
	{clone:function(){return new JZ(this.type,
this.slideShowData)
		},__class__:JZ
	});var LZ=function(){};h[
		"de.innogames.strategycity.ageoutlook.model.AgeOutlookTrackingVO"
	]=LZ;LZ.__name__="de.innogames.strategycity.ageoutlook.model.AgeOutlookTrackingVO";LZ.__super__=G;LZ.prototype=l(G.prototype,
	{_getClassName:function(){return"AgeOutlookTracking"
		},__class__:LZ
	});var ldb=function(){};h[
		"de.innogames.strategycity.ageoutlook.model.SlideShowData"
	]=ldb;ldb.__name__="de.innogames.strategycity.ageoutlook.model.SlideShowData";ldb.prototype={getSlides:function(){null==
this._slides&&(this._slides=[]);return this._slides
		},getNumberOfSlides:function(){return null==this._slides?0:this._slides.length
		},__class__:ldb
	};var dXa=function(){this.windowTitle=r.gettext("Welcome to Forge of Empires");var a=new MZ("slide_0");a.name="age_outlook_0";var b=new KS(r.gettext("Welcome to Forge of Empires!"),new p(138,
		306),
		180,
		41,!1,
		12,
		10260593,
		5,r.gettext("Build the city of your dreams..."));a.addText(b);var c=new MZ("slide_1");c.name="age_outlook_1";b=new KS(r.gettext("...and lead it through the ages of mankind."),
new p(145,
		306),
		170,
		41);c.addText(b);var d=new MZ("slide_2");d.name="age_outlook_2";b=new KS(r.gettext("Construct powerful legendary buildings."),new p(157,
		306),
		165,
		41);d.addText(b);var e=new MZ("slide_3");e.name="age_outlook_3";b=new KS(r.gettext("Become a fighter..."),new p(154,
		306),
		165,
		41);e.addText(b);b=new KS(r.gettext("...or a trader."),new p(463,
		306),
		170,
		41);e.addText(b);var g=new MZ("slide_4",
		10);g.name="age_outlook_4";b=new KS(r.gettext("Play with your friends and form a guild."),new p(149,
		306),
		170,
		41);g.addText(b);this._slides=[a,c,d,e,g
		]
	};h[
		"de.innogames.strategycity.ageoutlook.model.OutlookAgesSlideShowData"
	]=dXa;dXa.__name__="de.innogames.strategycity.ageoutlook.model.OutlookAgesSlideShowData";dXa.__super__=ldb;dXa.prototype=l(ldb.prototype,
	{__class__:dXa
	});var MZ=function(a,b){null==b&&(b=-1);this.id=a;this.closeAfterSeconds=b;this.texts=[]
	};h[
		"de.innogames.strategycity.ageoutlook.model.SlideShowSlide"
	]=MZ;MZ.__name__="de.innogames.strategycity.ageoutlook.model.SlideShowSlide";
MZ.prototype={addText:function(a){this.texts.push(a)
		},getAmountOfTexts:function(){return this.texts.length
		},__class__:MZ
	};var KS=function(a,b,c,d,e,g,k,t,u,A){null==u&&(u="");null==t&&(t=-1);null==k&&(k=10260593);null==g&&(g=12);null==e&&(e=!1);this.text=a;this.width=c;this.height=d;this.showForSeconds=t;this.replacementString=u;this.position=b;this.bold=e;this.size=g;this.color=k;this.filters=A
	};h[
		"de.innogames.strategycity.ageoutlook.model.SlideShowText"
	]=KS;KS.__name__="de.innogames.strategycity.ageoutlook.model.SlideShowText";
KS.prototype={__class__:KS
	};var hla=function(){};h[
		"de.innogames.strategycity.allies.controller.AllyAutoLevelUpCommand"
	]=hla;hla.__name__="de.innogames.strategycity.allies.controller.AllyAutoLevelUpCommand";hla.__instantiate=function(a){return new hla
	};hla.__super__=oa;hla.prototype=l(oa.prototype,
	{run:function(a){this._ally=a;this._userModel.get_settingsVO().showMultipleManualsConfirmDialog?this.dispatch(new ha("WindowEvent/ADD_WINDOW",new Ya(this._createLevelUpDialogConfig()))):this._allyController.autoLevelUp(a.id)
		},
_createLevelUpDialogConfig:function(){for(var a=this,b=[],c=[],d=this._allyController.getAutoLevelUpResourcesIfPossible(this._ally).h,e=Object.keys(d),g=e.length,k=0;k<g;){var t=e[k++
				],u=d[t
				];0<u&&c.push({resourceId:t,amount:u,kind:$n.Lose
				})
			}b.push(Ma.TextAndImage(r.gettext("HA|Do you want to use multiple Scrolls to level up this ally?"),Dc.Bitmap(Qe.next(Va.instance.loadImageLibrary("shared/gui/trade/trade",
			null,null),function(z){return new cd(new dd(Ha.Success(z.getImage("icon_trade_offer_created"))))
			}))));
b.push(Ma.Resources(null,c));var A=I._new(!1);b.push(Ma.Checkbox(Ya.NEVER_ASK_AGAIN_LABEL,A));return{title:r.gettext("Level Up"),closeable:hb.Yes,content:Ma.Multiple(b),buttons:eb.TwoButtons({kind:Ia.Orange,text:r.gettext("Cancel")
				},
				{kind:Ia.Green,text:r.gettext("Confirm"),callback:Rb.fromSimple(function(){a._userModel.get_settingsVO().showMultipleManualsConfirmDialog=!I.get_value(A);a._settingsService.updateSettings(a._userModel.get_settingsVO());return a._allyController.autoLevelUp(a._ally.id)
					})
				})
			}
		},
execute:function(){this.run(this._event.ally)
		},__construct:function(a){oa.prototype.__construct.call(this,a);this._userModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.UserDataModel");this._settingsService=a.getInstanceForMapping("de.innogames.strategycity.main.service.SettingsService");this._allyController=a.getInstanceForMapping("de.innogames.strategycity.allies.controller.AllyController");this._event=a.getInstanceForMapping("de.innogames.strategycity.allies.controller.AllyAutoLevelUpCommand_Event");
return null
		},__class__:hla
	});var eXa=function(a){D.call(this,
		"de.innogames.strategycity.allies.controller.AllyAutoLevelUpCommand/EVENT_TYPE");this.ally=a
	};h[
		"de.innogames.strategycity.allies.controller.AllyAutoLevelUpCommand_Event"
	]=eXa;eXa.__name__="de.innogames.strategycity.allies.controller.AllyAutoLevelUpCommand_Event";eXa.__super__=D;eXa.prototype=l(D.prototype,
	{clone:function(){return new eXa(this.ally)
		},__class__:eXa
	});var ila=function(){this._allyMetadataReceivedTrigger=$b.trigger()
	};h[
		"de.innogames.strategycity.allies.controller.AllyController"
	]=
ila;ila.__name__="de.innogames.strategycity.allies.controller.AllyController";ila.__interfaces__=[kc
	];ila.__instantiate=function(a){return new ila
	};ila.prototype={getAllies:function(){return this._allyService.getAllies()
		},assignAlly:function(a,b,c){a=Da.withGenericLoader(this._allyService.assignAlly(a,b,c));a.eager();return a
		},unassignAlly:function(a){a=Da.withGenericLoader(this._allyService.unassignAlly(a));a.eager();return a
		},useScroll:function(a,b){a=Da.withGenericLoader(this._allyService.useTrainingManual(a,
b));a.eager();return a
		},autoLevelUp:function(a){a=Da.withGenericLoader(this._allyService.autoLevelUp(a));a.eager();return a
		},getAutoLevelUpResourcesIfPossible:function(a){if(null==a)return new x;var b=F.get_value(a.getExperience());a=F.get_value(a.getNextLevelExperience())-b;b=0;for(var c=new x,d=this.getScrolls().keyValueIterator();d.hasNext();){var e=d.next(),g=e.key;e=e.value;for(var k=this.getXPFromScroll(new Gk(g,e)),t=0;b<a&&0<e;)--e,b+=k,++t;c.h[g
				]=t
			}return c
		},getXPFromScroll:function(a){return K.__cast(jF.getAbility(Vb.getResourceDefinition(a.get_id()),
			"allyExperience"),jla).experience
		},getScrolls:function(){return this._resourcesModel.getSliceObservable([
				"historical_allies_train_manual_1",
				"historical_allies_train_manual_2",
				"historical_allies_train_manual_3",
				"historical_allies_train_manual_4",
				"historical_allies_train_manual_5"
			])
		},showHelp:function(){this._dispatcher.dispatchEvent(new vc("ShowInfoScreenEvent/SHOW_GENERIC_INFO_SCREEN",
			"historical_allies",!0,!0))
		},triggerAllyContentDisplayPoint:function(){this._dispatcher.dispatchEvent(new Fp("CrmInterstitialShowEvent/TRIGGER_INTERSTITIAL",
			"historical_ally_offer"));this._dispatcher.dispatchEvent(new xx("historical_ally_offer"))
		},switchToAllyAssignmentMode:function(){this._dispatcher.dispatchEvent(new ha("WindowEvent/CLOSE_ALL_WINDOW"));this._dispatcher.dispatchEvent(new be("ChangeApplicationModeEvent/CHANGE_APPLICATION_MODE",
			"ally_assignment"))
		},showAllyQuestPeriodWindow:function(){this._dispatcher.dispatchEvent(new A7)
		},_postConstruct:function(a){this._dispatcher=a.getInstanceForMapping("openfl.events.IEventDispatcher");this._allyModel=
a.getInstanceForMapping("de.innogames.strategycity.allies.model.allies.AllyModel");this._allyService=a.instantiate(kla);this._listen()
		},_onMetadataReceived:function(){this._allyMetadataReceivedTrigger.handlers.invoke(null)
		},_listen:function(){var a=this;this._allyService._assignedAlliesReceived.listen(m(this,this._setAssignedAllies));this._allyService._allyUpdated.listen(function(b){a._allyModel.updateAlly(b);a._dispatcher.dispatchEvent(new lla("AllyUpdateEvent/UPDATE",b))
			})
		},_setAssignedAllies:function(a){var b=
this;this._allyMetadataReceivedTrigger.listen(function(){b._allyModel.setAssignedAllies(a);b._allyMetadataReceivedTrigger.handlers.clear()
			})
		},__inject:function(a){this._resourcesModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ResourcesModel")
		},__postConstruct:function(a){this._postConstruct(a.getInstanceForMapping("innodi.Injector"))
		},__construct:function(a){this.__inject(a);this.__postConstruct(a);return null
		},__class__:ila
	};var kla=function(){this._allyRarityMetadataReceived=
$b.trigger();this._allyUpdated=$b.trigger();this._assignedAlliesReceived=$b.trigger();xa.call(this)
	};h[
		"de.innogames.strategycity.allies.controller._AllyController.AllyService"
	]=kla;kla.__name__="de.innogames.strategycity.allies.controller._AllyController.AllyService";kla.__instantiate=function(a){return new kla
	};kla.__super__=Hb;kla.prototype=l(Hb.prototype,
	{getAllies:function(){return this._callWithFuture("getAllies",
			null,!0)
		},assignAlly:function(a,b,c){return this._callWithNoiseFuture("assignAlly",
			[a,b,c
			],!0)
		},unassignAlly:function(a){return this._callWithNoiseFuture("unassignAlly",
			[a
			],!0)
		},useTrainingManual:function(a,b){return this._callWithNoiseFuture("useTrainingManual",
			[a,b
			],!0)
		},autoLevelUp:function(a){return this._callWithNoiseFuture("autoLevelUp",
			[a
			],!0)
		},get_serviceName:function(){return"AllyService"
		},get_assignedAlliesReceived:function(){return this._assignedAlliesReceived
		},get_allyUpdated:function(){return this._allyUpdated
		},get_allyRarityMetadataReceived:function(){return this._allyRarityMetadataReceived
		},
_onRequestSuccessful:function(a){Hb.prototype._onRequestSuccessful.call(this,a);switch(a.method){case "getAllyRarityMetadata":this._allyRarityMetadataReceived.handlers.invoke(a.result);break;case "getAssignedAllies":this._assignedAlliesReceived.handlers.invoke(a.result);break;case "updateAlly":this._allyUpdated.handlers.invoke(a.result)
			}
		},__class__:kla,__properties__:l(Hb.prototype.__properties__,
		{get_allyRarityMetadataReceived: "get_allyRarityMetadataReceived",get_allyUpdated: "get_allyUpdated",get_assignedAlliesReceived: "get_assignedAlliesReceived"
		})
	});
var mla=function(){this._assignedAllies=tC._new(new Pb);this.lastAlliesInfoTabId="effects"
	};h[
		"de.innogames.strategycity.allies.model.allies.AllyModel"
	]=mla;mla.__name__="de.innogames.strategycity.allies.model.allies.AllyModel";mla.__interfaces__=[kc
	];mla.__instantiate=function(a){return new mla
	};mla.prototype={updateAlly:function(a){this._addOrUpdateAssignedAlly(a)
		},setAssignedAllies:function(a){this._assignedAllies.clear();for(var b=0;b<a.length;){var c=a[b
				];++b;this._assignedAllies.set(c.id,this._createAlly(c))
			}
		},
getAssignedAllies:function(){return this._assignedAllies
		},_addOrUpdateAssignedAlly:function(a){this._assignedAllies.exists(a.id)?0>=a.mapEntityId?this._assignedAllies.remove(a.id):this._assignedAllies.get(a.id).update(a): 0<a.mapEntityId&&this._assignedAllies.set(a.id,this._createAlly(a))
		},_createAlly:function(a){return UHb.create(a,Lj.getAllyMetadata(a.allyId))
		},__construct:function(a){return null
		},__class__:mla
	};var mdb=function(){};h[
		"de.innogames.strategycity.main.view.citysector.mode.entityItemSelect.IUsableItemModel"
	]=
mdb;mdb.__name__="de.innogames.strategycity.main.view.citysector.mode.entityItemSelect.IUsableItemModel";mdb.__isInterface__=!0;mdb.prototype={__class__:mdb
	};var LS=function(){this._selectedItem=I._new(null)
	};h[
		"de.innogames.strategycity.main.view.citysector.mode.entityItemSelect.UsableItemModel"
	]=LS;LS.__name__="de.innogames.strategycity.main.view.citysector.mode.entityItemSelect.UsableItemModel";LS.__interfaces__=[mdb
	];LS.prototype={setSelectedItem:function(a){I.set_value(this._selectedItem,a)
		},
getObservableItem:function(){return this._selectedItem
		},getItem:function(){return I.get_value(this._selectedItem)
		},hasUsableItem:function(){return null!=I.get_value(this._selectedItem)
		},clearItem:function(){I.set_value(this._selectedItem,null)
		},__class__:LS
	};var NZ=function(){LS.call(this)
	};h[
		"de.innogames.strategycity.allies.model.allies.UsableAllyModel"
	]=NZ;NZ.__name__="de.innogames.strategycity.allies.model.allies.UsableAllyModel";NZ.__interfaces__=[kc
	];NZ.__instantiate=function(a){return new NZ
	};
NZ.__super__=LS;NZ.prototype=l(LS.prototype,
	{getItemAmount:function(){return null==I.get_value(this._selectedItem)?0: 1
		},getItemView:function(){this._itemIcon=new Ed;this._applyScaling(this._itemIcon,.75);var a=m(this,this._handleAssetsLoaded);yb.getInstance().load([
				"historical_allies/window/historical_allies_window",
				"historical_allies/portraits/historical_allies_portraits"
			]).handle(function(b){switch(b._hx_index){case 0:za.invoke(a,b.data);break;case 1:b=b.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+
b.message))
				}
			});return this._itemIcon
		},_handleAssetsLoaded:function(a){var b="historical_allies/window/historical_allies_window",c=a.h[b
			];null==c&&null!=y._reportError&&y._reportError(Error('[LOGGER
			] Failed to get library "'+(b+'" from LoadedReflibs.')));b="historical_allies/portraits/historical_allies_portraits";a=a.h[b
			];null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER
			] Failed to get library "'+(b+'" from LoadedReflibs.')));b=new yx(new MS(B7.createFromAlly(I.get_value(this._selectedItem))),
a,c,!1);this._itemIcon.addChild(b)
		},_applyScaling:function(a,b){a.set_scaleX(a.set_scaleY(b));if(1!=b){b=0;for(var c=a.get_numChildren();b<c;){var d=a.getChildAt(b++);d instanceof B&&(K.__cast(d,B).smoothing=!0)
				}
			}
		},__construct:function(a){return null
		},__class__:NZ
	});var nla=function(){this._occupiedRooms=[];this._allyRooms=tC._new(new Pb)
	};h[
		"de.innogames.strategycity.allies.model.rooms.AllyRoomModel"
	]=nla;nla.__name__="de.innogames.strategycity.allies.model.rooms.AllyRoomModel";nla.__interfaces__=
[kc
	];nla.__instantiate=function(a){return new nla
	};nla.prototype={init:function(){var a=this;this._dispatcher.addEventListener("CityEntitiesEvent/ENTITIES_FULLY_INITIALIZED",m(this,this._onEntitiesFullyInitialized));F.autorun(function(){var b=a._allyModel.getAssignedAllies();a._occupiedRooms.length=0;for(b=b.keyValueIterator();b.hasNext();){var c=b.next().value;a._occupiedRooms.push(F.get_value(c.getMapEntityId()))
				}
			})
		},getAllyBoostsForCityMapEntity:function(a){var b=[];if(null!=this.getAllyRoomsByEntityId(a)&&
-1!=this._occupiedRooms.indexOf(a)){var c=0;for(a=this.getAttachedAlliesInCityMapEntity(a);c<a.length;)for(var d=0,e=a[c++
				].getCurrentLevelBoosts();d<e.length;)b.push(e[d++
				])
			}return b
		},hasRoomForAllyInCityMapEntity:function(a,b){b=this.getAllyRoomsByEntityId(b);if(null!=b)for(var c=0;c<b.length;)if(b[c++
			].canFitAlly(a))return!0;return!1
		},hasAvailableRoomForAllyInCityMapEntity:function(a,b){return cf.exists(this.getAllyRoomRecordsInCityMapEntity(b),function(c){switch(c.roomType._hx_index){case 0:return c.room.canFitAlly(a);
case 1:return!1
				}
			})
		},hasRoomForAllyInCity:function(a){for(var b=this._allyRooms.iterator();b.hasNext();)for(var c=b.next(),d=0;d<c.length;)if(c[d++
			].canFitAlly(a))return!0;return!1
		},hasAvailableRoomForAllyInCity:function(a){for(var b=this._allyRooms.keyValueIterator();b.hasNext();){var c=b.next(),d=c.value;if(-1==this._occupiedRooms.indexOf(c.key))for(c=0;c<d.length;)if(d[c++
				].canFitAlly(a))return!0
			}return!1
		},getAttachedAlliesInCityMapEntity:function(a){for(var b=[],c=this._allyModel.getAssignedAllies().keyValueIterator();c.hasNext();){var d=
c.next().value;F.get_value(d.getMapEntityId())==a&&b.push(d)
			}return b
		},getAttachedAlliesWithRarityOrInDefaultRooms:function(a,b){var c=this.getAllyRoomRecordsInCityMapEntity(a);a=[];for(var d=0;d<c.length;){var e=c[d
				];++d;var g=e.roomType;switch(g._hx_index){case 0:var k=!1;break;case 1:k=g.attachedAlly.rarity==b||null==e.room.rarity
				}k&&a.push(e)
			}b=Array(a.length);d=0;for(g=a.length;d<g;){c=d++;e=a[c
				].roomType;switch(e._hx_index){case 0:k=null;break;case 1:k=e.attachedAlly
				}b[c
				]=k
			}return b
		},getAllyRoomRecordsInCityMapEntity:function(a){var b=
[],c=this.getAllyRoomsByEntityId(a);if(null==c)return b;var d=function(A){return cf.exists(b,function(z){return z.room==A
				})
			},e=function(A){return cf.exists(b,function(z){z=z.roomType;switch(z._hx_index){case 0:return!1;case 1:return z.attachedAlly==A
					}
				})
			},g=0;for(a=this.getAttachedAlliesInCityMapEntity(a);g<a.length;){var k=a[g
				];++g;for(var t=0;t<c.length;){var u=c[t
					];++t;d(u)||e(k)||u.canFitAlly(k)&&b.push({roomType:fXa.OccupiedRoom(k),room:u
					})
				}
			}for(g=0;g<c.length;)e=c[g
			],++g,d(e)||b.push({roomType:fXa.EmptyRoom,
room:e
			});return b
		},getAllyRoomsByEntityId:function(a){return this._allyRooms.exists(a)?this._allyRooms.get(a): null
		},_onEntitiesFullyInitialized:function(a){var b=this;F.autorun(function(){b._constructAllyRooms()
			})
		},_constructAllyRooms:function(){if(null!=I.get_value(this._cityModel._activeCity)){var a=la.cur;la.cur=null;this._allyRooms.clear();la.cur=a;for(a=I.get_value(this._cityModel._activeCity).storage._entities.iterator();a.hasNext();){var b=a.next();if(b._env.ownCity){var c=this._entityConfigModel.getEntityConfigById(b._vo.cityentity_id);
if(c instanceof Gp&&(c=K.__cast(c,Gp).getComponent("ally",b._vo.level),null!=c)){var d=b.connection;null!=F.get_value(b.construction)||null!=d&&!F.get_value(d._connected)||this._createAllyRoom(b,c)
						}
					}
				}
			}
		},_createAllyRoom:function(a,b){var c=la.cur;la.cur=null;var d=this._allyRooms,e=a._vo.id;b=b.rooms;for(var g=Array(b.length),k=0,t=b.length;k<t;){var u=k++,A=b[u
				];g[u
				]=C7.fromTypeMetadata(Lj.getTypeMetadata(A.allyType),A.rarity)
			}d.set(e,g);this._allyRooms.get(a._vo.id).sort(function(z,J){return null==
z.rarity&&null!=J.rarity?1:null!=z.rarity&&null==J.rarity?-1: 0
			});la.cur=c
		},__inject:function(a){this._allyModel=a.getInstanceForMapping("de.innogames.strategycity.allies.model.allies.AllyModel");this._dispatcher=a.getInstanceForMapping("openfl.events.IEventDispatcher");this._cityModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.CityModel");this._entityConfigModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.EntityConfigModel")
		},__postConstruct:function(a){this.init()
		},
__construct:function(a){this.__inject(a);this.__postConstruct(a);return null
		},__class__:nla
	};var ola=function(){this._questSeasonUpdated=$b.trigger();this._questPeriodsReceived=$b.trigger();xa.call(this)
	};h[
		"de.innogames.strategycity.allies.service.QuestPeriodService"
	]=ola;ola.__name__="de.innogames.strategycity.allies.service.QuestPeriodService";ola.__instantiate=function(a){return new ola
	};ola.__super__=Hb;ola.prototype=l(Hb.prototype,
	{getQuestPeriods:function(){return this._callWithFuture("getQuestPeriods",
			null,!0)
		},getSeasonUpdate:function(){return this._callWithFuture("getSeasonUpdate",
			null,!0)
		},get_serviceName:function(){return"QuestService"
		},get_questPeriodsReceived:function(){return this._questPeriodsReceived
		},get_questSeasonUpdated:function(){return this._questSeasonUpdated
		},_onRequestSuccessful:function(a){Hb.prototype._onRequestSuccessful.call(this,a);switch(a.method){case "getQuestPeriods":this._questPeriodsReceived.handlers.invoke(a.result);break;case "getSeasonUpdate":this._questSeasonUpdated.handlers.invoke(a.result)
			}
		},
__class__:ola,__properties__:l(Hb.prototype.__properties__,
		{get_questSeasonUpdated: "get_questSeasonUpdated",get_questPeriodsReceived: "get_questPeriodsReceived"
		})
	});var D7=function(){this._questPeriods=[]
	};h[
		"de.innogames.strategycity.shared.model.quests.QuestPeriodModel"
	]=D7;D7.__name__="de.innogames.strategycity.shared.model.quests.QuestPeriodModel";D7.__interfaces__=[kc
	];D7.prototype={postConstruct:function(){var a=this;this._questPeriodService._questPeriodsReceived.listen(function(b){for(var c=
[],d=0;d<b.length;)c.push(new VHb(b[d++
				]));a._questPeriods=c;a._onQuestPeriodsReceived(a._questPeriods)
			});this._questPeriodService._questSeasonUpdated.listen(function(b){b=new ndb(b);a._onQuestSeasonUpdated(b)
			})
		},__inject:function(a){this._questModel=a.getInstanceForMapping("de.innogames.strategycity.shared.model.quests.QuestModel");this._questPeriodService=a.getInstanceForMapping("de.innogames.strategycity.allies.service.QuestPeriodService");this._dispatcher=a.getInstanceForMapping("openfl.events.IEventDispatcher")
		},
__postConstruct:function(a){this.postConstruct()
		},__construct:function(a){this.__inject(a);this.__postConstruct(a);return null
		},__class__:D7
	};var pla=function(){this._questPeriodsRequested=!1;this._questPeriod=I._new(null);this._currentQuestStates=I._new([]);this.questPeriodWindowOpened=!1;this._questPeriods=[]
	};h[
		"de.innogames.strategycity.allies.model.quests.AllyQuestPeriodModel"
	]=pla;pla.__name__="de.innogames.strategycity.allies.model.quests.AllyQuestPeriodModel";pla.__instantiate=function(a){return new pla
	};
pla.__super__=D7;pla.prototype=l(D7.prototype,
	{get_currentQuests:function(){return F.map(this._currentQuestStates,OZ.plain(function(a){for(var b=Array(a.length),c=0,d=a.length;c<d;){var e=c++;b[e
					]=a[e
					]
				}return b
			}))
		},postConstruct:function(){var a=this;D7.prototype.postConstruct.call(this);this._dispatcher.addEventListener("QuestOverviewModelEvent/INIT",function(b){a._updateCurrentQuests()
			});this._dispatcher.addEventListener("QuestOverviewModelEvent/UPDATE",function(b){a._updateCurrentQuests()
			});this._dispatcher.addEventListener("QuestOverviewModelEvent/NEW_QUESTS",
function(b){a._updateCurrentQuests()
			})
		},hasQuestPeriod:function(){return null!=I.get_value(this._questPeriod)
		},getQuestSeasons:function(){return I.get_value(this._questPeriod).questSeasons
		},getQuestSeason:function(a){var b=this;return new la(ra.sync(function(){return I.get_value(b._questPeriod).getQuestSeasonByType(a)
			}),null)
		},getQuestSeasonIndex:function(a){return cf.findIndex(this.getQuestSeasons(),function(b){return b.type==a
			})
		},getQuestByType:function(a){return cf.exists(I.get_value(this._currentQuestStates),
function(b){return I.get_value(b).get_type()==a
			})?I.get_value(cf.find(I.get_value(this._currentQuestStates),function(b){return I.get_value(b).get_type()==a
			})): null
		},getPeriodRemainingTime:function(){var a=this;return new la(ra.sync(function(){return I.get_value(a._questPeriod).endsAt-F.get_value(a._applicationModel._timestamp)|0
			}),null)
		},pushCompletedQuestSeasonsToBack:function(){this.getQuestSeasons().sort(function(a,b){return a.isQuestSeasonCompleted()!=b.isQuestSeasonCompleted()?a.isQuestSeasonCompleted()?
1: -1: 0
			})
		},_updateCurrentQuests:function(){if(null!=I.get_value(this._questPeriod)){for(var a=I.get_value(this._questPeriod).questSeasons,b=this._questModel.getQuestsByCategory("allies"),c=[],d=0;d<b.length;){var e=b[d++
					];null!=cf.find(a,function(t){return t.type==t.type
					})&&c.push(e)
				}a=Array(c.length);d=0;for(e=c.length;d<e;){b=d++;var g=c[b
					];a[b
					]=g instanceof zx?g: null
				}d={};e=I.get_value(this._currentQuestStates).slice();for(c=0;c<a.length;){b=[a[c
						]
					];++c;g=cf.findIndex(e,function(t){return function(u){return I.get_value(u).get_id()==
t[
								0
							].get_id()
						}
					}(b));if(-1!=g){var k=I.get_value(e[g
						]);b[
							0
						].isDifferentStateOf(k)&&I.set_value(e[g
						],b[
							0
						])
					}else e.push(I._new(b[
						0
					]));d[b[
							0
						].get_id()
					]=!0
				}for(b=e.length-1;0<=b;)c=I.get_value(e[b
				]).get_id(),d.hasOwnProperty(c)||e.splice(b,
				1),--b;this._sortQuestStatesBasedOnQuestSeasons(e);I.set_value(this._currentQuestStates,e)
			}
		},_sortQuestStatesBasedOnQuestSeasons:function(a){var b=this;a.sort(function(c,d){return b.getQuestSeasonIndex(I.get_value(c).get_type())-b.getQuestSeasonIndex(I.get_value(d).get_type())
			})
		},
_onQuestPeriodsReceived:function(a){this._questPeriodsRequested=!1;a=cf.find(a,function(b){return"ally"==b.type
			});null==a?null!=y._reportError&&y._reportError(Error("[LOGGER] [AllyQuestPeriodModel] No ally quest period found")):(this._setQuestPeriod(a),this._startQuestPeriodEndTimers(),this._updateCurrentQuests())
		},_onQuestSeasonUpdated:function(a){for(var b=0,c=I.get_value(this._questPeriod).questSeasons;b<c.length;){var d=c[b
				];++b;d.type==a.type&&(d.update(a),d.isQuestSeasonCompleted()&&this._updateCurrentQuests())
			}
		},
_setQuestPeriod:function(a){I.set_value(this._questPeriod,a)
		},_startQuestPeriodEndTimers:function(){var a=this,b=this._questPeriodEndTimerSubscription;null!=b&&null!=b&&b.cancel();this._questPeriodEndTimerSubscription=F.bind(this.getPeriodRemainingTime(),function(c){
				0>=c&&!a._questPeriodsRequested&&(a._questPeriodService.getQuestPeriods(),a._questPeriodsRequested=!0)
			})
		},__inject:function(a){D7.prototype.__inject.call(this,a);this._applicationModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationModel")
		},
__class__:pla,__properties__: {get_currentQuests: "get_currentQuests"
		}
	});var qla=function(){};h[
		"de.innogames.strategycity.allies.controller.ShowAllyWindowCommand"
	]=qla;qla.__name__="de.innogames.strategycity.allies.controller.ShowAllyWindowCommand";qla.__instantiate=function(a){return new qla
	};qla.__super__=oa;qla.prototype=l(oa.prototype,
	{run:function(){var a=rb.map(yb.getInstance().load("historical_allies/window/historical_allies_window historical_allies/portraits/historical_allies_portraits shared/gui/window/window shared/icons/icons shared/gui/mainmenu/mainmenu shared/buttons/buttons historical_allies/animation/historical_allies_animations".split(" ")),
function(c){return Cm.sure(c)
			});var b=this._allyController.getAllies();Da.withGenericLoader(new Kc(function(c){var d=2,e={};return zc.fromMany([b.handle(function(g){e.allies=g;0==--d&&c(e)
					}),a.handle(function(g){e.assetLibraries=g;0==--d&&c(e)
					})
				])
			})).handle(m(this,this._handleAssetsAndDataLoaded))
		},_handleAssetsAndDataLoaded:function(a){var b=new WHb(this._usableAllyModel);this._allyWindowModel=new XHb(this._convertAllies(a.allies),this._allyModel,this._usableAllyModel,this._allyRoomModel,b,this._allyController,
this._noticeIndicatorModel,m(this,this._removeAllyNoticeIndicator),m(this,this._shouldShowInfoScreen),this._cityMapEntityViewManager,m(this,this._showAutoLevelUpConfirmationWindow));a=new NS(this._allyWindowModel,a.assetLibraries);this.dispatch(new ha("WindowEvent/ADD_WINDOW",a));this.eventDispatcher.addEventListener("AllyUpdateEvent/UPDATE",m(this,this._onAllyUpdated));a.addEventListener("ViewCreationEvent/VIEW_DISPOSED",m(this,this._onAllyWindowDisposed))
		},_onAllyWindowDisposed:function(a){this.eventDispatcher.removeEventListener("AllyUpdateEvent/UPDATE",
m(this,this._onAllyUpdated));a.target.removeEventListener("ViewCreationEvent/VIEW_DISPOSED",m(this,this._onAllyWindowDisposed))
		},_onAllyUpdated:function(a){this._allyWindowModel.updateAlly(a.allyVO)
		},_removeAllyNoticeIndicator:function(a){this.dispatch(new gXa(a))
		},_shouldShowInfoScreen:function(){return this._userDataModel.get_settingsVO().showHistoricalAlliesInfoScreen?(this._userDataModel.get_settingsVO().showHistoricalAlliesInfoScreen=!1,this._settingsService.updateSettings(this._userDataModel.get_settingsVO(),
!0),!0):!1
		},_showAutoLevelUpConfirmationWindow:function(a){this.dispatch(new eXa(a))
		},_convertAllies:function(a){for(var b=new Pb,c=0;c<a.length;){var d=a[c
				];++c;var e=d.id;d=UHb.create(d,Lj.getAllyMetadata(d.allyId));b.h[e
				]=d
			}return b
		},execute:function(){this.run()
		},__construct:function(a){oa.prototype.__construct.call(this,a);this._allyModel=a.getInstanceForMapping("de.innogames.strategycity.allies.model.allies.AllyModel");this._allyRoomModel=a.getInstanceForMapping("de.innogames.strategycity.allies.model.rooms.AllyRoomModel");
this._usableAllyModel=a.getInstanceForMapping("de.innogames.strategycity.allies.model.allies.UsableAllyModel");this._allyController=a.getInstanceForMapping("de.innogames.strategycity.allies.controller.AllyController");this._noticeIndicatorModel=a.getInstanceForMapping("de.innogames.strategycity.shared.ui.window.noticeIndicator.NoticeIndicatorModel");this._userDataModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.UserDataModel");this._settingsService=a.getInstanceForMapping("de.innogames.strategycity.main.service.SettingsService");
this._cityMapEntityViewManager=a.getInstanceForMapping("de.innogames.strategycity.city.view.CityMapEntityViewManager");this._event=a.getInstanceForMapping("de.innogames.strategycity.allies.controller.ShowAllyWindowCommand_Event");return null
		},__class__:qla
	});var rla=function(){};h[
		"de.innogames.strategycity.allies.controller.RemoveAllyNoticeIndicatorsCommand"
	]=rla;rla.__name__="de.innogames.strategycity.allies.controller.RemoveAllyNoticeIndicatorsCommand";rla.__instantiate=function(a){return new rla
	};
rla.__super__=oa;rla.prototype=l(oa.prototype,
	{run:function(a){this._noticeIndicatorService.remove("ally",
			[a
			]);this._noticeIndicatorModel.removeAllyNoticeById(a);this.dispatch(new ak("NoticeIndicatorEvent/NOTICES_UPDATED"))
		},execute:function(){this.run(this._event.allySerialId)
		},__construct:function(a){oa.prototype.__construct.call(this,a);this._noticeIndicatorModel=a.getInstanceForMapping("de.innogames.strategycity.shared.ui.window.noticeIndicator.NoticeIndicatorModel");this._noticeIndicatorService=
a.getInstanceForMapping("de.innogames.strategycity.shared.ui.window.noticeIndicator.NoticeIndicatorService");this._event=a.getInstanceForMapping("de.innogames.strategycity.allies.controller.RemoveAllyNoticeIndicatorsCommand_Event");return null
		},__class__:rla
	});var sla=function(){};h[
		"de.innogames.strategycity.allies.controller.ShowReplaceAllyWindowCommand"
	]=sla;sla.__name__="de.innogames.strategycity.allies.controller.ShowReplaceAllyWindowCommand";sla.__instantiate=function(a){return new sla
	};sla.__super__=
oa;sla.prototype=l(oa.prototype,
	{run:function(a,b){this._cityMapEntity=a;this._onReplaceConfirmedCallback=b;var c=this,d=function(e){c._handleAssetsLoaded(e,a)
			};yb.getInstance().load([
				"shared/gui/window/window",
				"historical_allies/window/historical_allies_window",
				"historical_allies/portraits/historical_allies_portraits",
				"shared/buttons/buttons"
			]).handle(function(e){switch(e._hx_index){case 0:za.invoke(d,e.data);break;case 1:e=e.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+e.message))
				}
			})
		},
_handleAssetsLoaded:function(a,b){var c=this._usableAllyModel.getItem();c=this._allyRoomModel.getAttachedAlliesWithRarityOrInDefaultRooms(b._vo.id,c.rarity);var d="historical_allies/window/historical_allies_window",e=a.h[d
			];null==e&&null!=y._reportError&&y._reportError(Error('[LOGGER
			] Failed to get library "'+(d+'" from LoadedReflibs.')));d="historical_allies/portraits/historical_allies_portraits";var g=a.h[d
			];null==g&&null!=y._reportError&&y._reportError(Error('[LOGGER
			] Failed to get library "'+
(d+'" from LoadedReflibs.')));d=a.h["shared/gui/window/window"];null==d&&null!=y._reportError&&y._reportError(Error('[LOGGER] Failed to get library "shared/gui/window/window" from LoadedReflibs.'));a=a.h["shared/buttons/buttons"];null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER] Failed to get library "shared/buttons/buttons" from LoadedReflibs.'));this._allyReplaceView=new odb(c,g,e,d,a);this.dispatch(new ha("WindowEvent/ADD_WINDOW",new Ya({title:b._vo.get_entityConfig().name,closeable:hb.Yes,
content:Ma.CustomDisplayObject(this._allyReplaceView),buttons:eb.TwoButtons({kind:Ia.Red,text:r.gettext("No")
			},
			{kind:Ia.Green,text:r.gettext("Yes"),callback:Rb.fromSimple(m(this,this._onReplaceConfirmed))
			})
		})))
	},_onReplaceConfirmed:function(){this._onReplaceConfirmedCallback({allyId:this._allyReplaceView.getSelectedAllyId(),cityMapEntity:this._cityMapEntity
		})
	},execute:function(){this.run(this._event.cityMapEntity,this._event.onReplaceConfirmedCallback)
	},__construct:function(a){oa.prototype.__construct.call(this,
a);this._allyRoomModel=a.getInstanceForMapping("de.innogames.strategycity.allies.model.rooms.AllyRoomModel");this._usableAllyModel=a.getInstanceForMapping("de.innogames.strategycity.allies.model.allies.UsableAllyModel");this._event=a.getInstanceForMapping("de.innogames.strategycity.allies.controller.ShowReplaceAllyWindowCommand_Event");return null
	},__class__:sla
});var tla=function(){};h[
	"de.innogames.strategycity.allies.controller.ShowAllyQuestPeriodWindowCommand"
]=tla;tla.__name__="de.innogames.strategycity.allies.controller.ShowAllyQuestPeriodWindowCommand";
tla.__instantiate=function(a){return new tla
};tla.__super__=oa;tla.prototype=l(oa.prototype,
{run:function(){var a=m(this,this._handleAssetsLoaded);Da.withGenericLoader(yb.getInstance().load("historical_allies/window/historical_allies_window shared/icons/icons shared/gui/window/window shared/quests/gui/quests_gui shared/buttons/buttons historical_allies/animation/historical_allies_animations".split(" "))).handle(function(b){switch(b._hx_index){case 0:za.invoke(a,b.data);break;case 1:b=b.failure,null!=
y._reportError&&y._reportError(Error("[LOGGER] "+b.message))
			}
		})
	},_handleAssetsLoaded:function(a){var b=oN.getInstance();b.initialize(a);var c=new YHb(this._applicationModel,this._dispatcher,m(this,this._shouldShowInfoScreen));b.setAllyQuestPeriodWindowModel(c);this.dispatch(new ha("WindowEvent/ADD_WINDOW",new PZ(this._allyQuestPeriodModel,c,a)))
	},_shouldShowInfoScreen:function(){return this._userDataModel.get_settingsVO().showHistoricalAlliesTasksInfoScreen?(this._userDataModel.get_settingsVO().showHistoricalAlliesTasksInfoScreen=
!1,this._settingsService.updateSettings(this._userDataModel.get_settingsVO(),!0),!0):!1
	},execute:function(){this.run()
	},__construct:function(a){oa.prototype.__construct.call(this,a);this._applicationModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationModel");this._allyQuestPeriodModel=a.getInstanceForMapping("de.innogames.strategycity.allies.model.quests.AllyQuestPeriodModel");this._dispatcher=a.getInstanceForMapping("openfl.events.IEventDispatcher");this._userDataModel=
a.getInstanceForMapping("de.innogames.strategycity.main.model.UserDataModel");this._settingsService=a.getInstanceForMapping("de.innogames.strategycity.main.service.SettingsService");this._event=a.getInstanceForMapping("de.innogames.strategycity.allies.controller.ShowAllyQuestPeriodWindowCommand_Event");return null
	},__class__:tla
});var EOb=function(){};h[
	"de.innogames.strategycity.allies.controller.AllyFeatureConfig"
]=EOb;EOb.__name__="de.innogames.strategycity.allies.controller.AllyFeatureConfig";
var lla=function(a,b){D.call(this,a);this.allyVO=b
};h[
	"de.innogames.strategycity.allies.controller.AllyUpdateEvent"
]=lla;lla.__name__="de.innogames.strategycity.allies.controller.AllyUpdateEvent";lla.__super__=D;lla.prototype=l(D.prototype,
{clone:function(){return new lla(this.type,this.allyVO)
	},__class__:lla
});var gXa=function(a){D.call(this,
	"de.innogames.strategycity.allies.controller.RemoveAllyNoticeIndicatorsCommand/EVENT_TYPE");this.allySerialId=a
};h[
	"de.innogames.strategycity.allies.controller.RemoveAllyNoticeIndicatorsCommand_Event"
]=
gXa;gXa.__name__="de.innogames.strategycity.allies.controller.RemoveAllyNoticeIndicatorsCommand_Event";gXa.__super__=D;gXa.prototype=l(D.prototype,
{clone:function(){return new gXa(this.allySerialId)
	},__class__:gXa
});var A7=function(){D.call(this,
	"de.innogames.strategycity.allies.controller.ShowAllyQuestPeriodWindowCommand/EVENT_TYPE")
};h[
	"de.innogames.strategycity.allies.controller.ShowAllyQuestPeriodWindowCommand_Event"
]=A7;A7.__name__="de.innogames.strategycity.allies.controller.ShowAllyQuestPeriodWindowCommand_Event";
A7.__super__=D;A7.prototype=l(D.prototype,
{clone:function(){return new A7
	},__class__:A7
});var hXa=function(){D.call(this,
	"de.innogames.strategycity.allies.controller.ShowAllyWindowCommand/EVENT_TYPE")
};h[
	"de.innogames.strategycity.allies.controller.ShowAllyWindowCommand_Event"
]=hXa;hXa.__name__="de.innogames.strategycity.allies.controller.ShowAllyWindowCommand_Event";hXa.__super__=D;hXa.prototype=l(D.prototype,
{clone:function(){return new hXa
	},__class__:hXa
});var iXa=function(a,b){D.call(this,
	"de.innogames.strategycity.allies.controller.ShowReplaceAllyWindowCommand/EVENT_TYPE");
this.cityMapEntity=a;this.onReplaceConfirmedCallback=b
};h[
	"de.innogames.strategycity.allies.controller.ShowReplaceAllyWindowCommand_Event"
]=iXa;iXa.__name__="de.innogames.strategycity.allies.controller.ShowReplaceAllyWindowCommand_Event";iXa.__super__=D;iXa.prototype=l(D.prototype,
{clone:function(){return new iXa(this.cityMapEntity,this.onReplaceConfirmedCallback)
	},__class__:iXa
});var ZHb=function(a,b){this._mapEntityId=I._new(null);this._nextLevelExperience=I._new(0);this._currentLevelExperience=
I._new(0);this._experience=I._new(0);this._nextLevel=I._new(0);this._currentLevel=I._new(0);this.id=a.id;this.allyId=a.allyId;this.rarity=a.rarity;this.allyMetadata=b;I.set_value(this._currentLevel,a.currentLevel.level);I.set_value(this._nextLevel,a.nextLevel.level);I.set_value(this._mapEntityId,a.mapEntityId);this._currentLevelBoosts=a.currentLevel.boosts;this._nextLevelBoosts=a.nextLevel.boosts;I.set_value(this._experience,a.experience);I.set_value(this._currentLevelExperience,a.currentLevel.experience);
I.set_value(this._nextLevelExperience,a.nextLevel.experience);this._allyUpdatedSignalTrigger=$b.trigger()
};h[
	"de.innogames.strategycity.allies.model.allies.Ally"
]=ZHb;ZHb.__name__="de.innogames.strategycity.allies.model.allies.Ally";ZHb.prototype={isAttached:function(){return 0<I.get_value(this._mapEntityId)
	},update:function(a){I.set_value(this._currentLevel,a.currentLevel.level);I.set_value(this._nextLevel,a.nextLevel.level);I.set_value(this._mapEntityId,a.mapEntityId);I.set_value(this._currentLevelExperience,
a.currentLevel.experience);I.set_value(this._nextLevelExperience,a.nextLevel.experience);I.set_value(this._experience,a.experience);this._currentLevelBoosts=a.currentLevel.boosts;this._nextLevelBoosts=a.nextLevel.boosts;this._allyUpdatedSignalTrigger.handlers.invoke(null)
	},getCurrentLevel:function(){return this._currentLevel
	},getNextLevel:function(){return this._nextLevel
	},getMapEntityId:function(){return this._mapEntityId
	},getExperience:function(){return this._experience
	},getCurrentLevelExperience:function(){return this._currentLevelExperience
	},
getNextLevelExperience:function(){return this._nextLevelExperience
	},getCurrentLevelBoosts:function(){return this._currentLevelBoosts
	},getNextLevelBoosts:function(){return this._nextLevelBoosts
	},get_allyUpdatedSignal:function(){return this._allyUpdatedSignalTrigger
	},__class__:ZHb,__properties__: {get_allyUpdatedSignal: "get_allyUpdatedSignal"
	}
};var UHb=function(){};h[
	"de.innogames.strategycity.allies.model.allies.AllyFactory"
]=UHb;UHb.__name__="de.innogames.strategycity.allies.model.allies.AllyFactory";
UHb.create=function(a,b){return new ZHb(a,b)
};var B7=function(){};h[
	"de.innogames.strategycity.allies.model.allies.AllyInformationFactory"
]=B7;B7.__name__="de.innogames.strategycity.allies.model.allies.AllyInformationFactory";B7.createFromAlly=function(a){return{allyId:a.allyId,rarity:a.rarity,level:F.get_value(a.getCurrentLevel()),isAttached:a.isAttached(),boosts:a.getCurrentLevelBoosts()
	}
};B7.createFromReward=function(a){a=K.__cast(a instanceof So?K.__cast(a,So).assembledReward:a,jXa);return{allyId:a.iconAssetName,
rarity:a.rarity,level:a.level,isAttached:!1,boosts:a.boosts
	}
};var C7=function(a,b,c){this._allyType=a;this.name=b;this.rarity=c
};h[
	"de.innogames.strategycity.allies.model.allies.AllyRoom"
]=C7;C7.__name__="de.innogames.strategycity.allies.model.allies.AllyRoom";C7.fromTypeMetadata=function(a,b){return new C7(a.id,a.name,b)
};C7.prototype={canFitAlly:function(a){return this._allyType==a.allyMetadata.allyType?null!=this.rarity?this.rarity==a.rarity:!0:!1
	},__class__:C7
};var $Hb=function(a,b,c,d){this.id=
a;this.name=b;this.description=c;this.allyType=d
};h[
	"de.innogames.strategycity.allies.model.metadata.AllyMetadata"
]=$Hb;$Hb.__name__="de.innogames.strategycity.allies.model.metadata.AllyMetadata";$Hb.prototype={__class__:$Hb
};var ula=function(){};h[
	"de.innogames.strategycity.allies.model.metadata.AllyMetadataFactory"
]=ula;ula.__name__="de.innogames.strategycity.allies.model.metadata.AllyMetadataFactory";ula.createAllyMetadata=function(a){return new $Hb(a.id,a.name,a.description,a.allyType)
};ula.createAllyRarityMetadata=
function(a){return new aIb(a.id,a.name,a.iconAssetName,a.maxLevel)
};ula.createAllyTypeMetadata=function(a){return new bIb(a.id,a.name,a.iconAssetName)
};var Lj=function(){};h[
	"de.innogames.strategycity.allies.model.metadata.AllyMetadataModel"
]=Lj;Lj.__name__="de.innogames.strategycity.allies.model.metadata.AllyMetadataModel";Lj.__interfaces__=[kc
];Lj._setup=function(a,b,c){for(var d=0;d<a.length;){var e=a[d
		];++d;Lj._allyMetadata.h[e.id
		]=ula.createAllyMetadata(e)
	}for(d=0;d<b.length;)e=b[d
	],++d,Lj._rarityMetadata.set(e.id,
ula.createAllyRarityMetadata(e));for(d=0;d<c.length;)e=c[d
	],++d,Lj._typeMetadata.h[e.id
	]=ula.createAllyTypeMetadata(e)
};Lj.getAllyMetadata=function(a){var b=Lj._allyMetadata.h[a
	];null==b&&null!=y._reportError&&y._reportError(Error("[LOGGER] No Ally metadata available for allyId "+a));return b
};Lj.getRarityMetadata=function(a){var b=Lj._rarityMetadata.get(a);null==b&&null!=y._reportError&&y._reportError(Error("[LOGGER] No Ally rarity metadata available for rarity "+Ea[a.__enum__
	].__constructs__[a._hx_index
	]._hx_name));
return b
};Lj.getTypeMetadata=function(a){var b=Lj._typeMetadata.h[a
	];null==b&&null!=y._reportError&&y._reportError(Error("[LOGGER] No Ally type metadata available for type "+a));return b
};Lj.prototype={__construct:function(a){return null
	},__class__:Lj
};var aIb=function(a,b,c,d){this.id=a;this.name=b;this.iconAssetName=c;this.maxLevel=d
};h[
	"de.innogames.strategycity.allies.model.metadata.AllyRarityMetadata"
]=aIb;aIb.__name__="de.innogames.strategycity.allies.model.metadata.AllyRarityMetadata";aIb.prototype=
{__class__:aIb
};var bIb=function(a,b,c){this.id=a;this.name=b;this.iconAssetName=c
};h[
	"de.innogames.strategycity.allies.model.metadata.AllyTypeMetadata"
]=bIb;bIb.__name__="de.innogames.strategycity.allies.model.metadata.AllyTypeMetadata";bIb.prototype={__class__:bIb
};var YHb=function(a,b,c){this._applicationModel=a;this._dispatcher=b;c()&&this.showHelp()
};h[
	"de.innogames.strategycity.allies.model.quests.AllyQuestPeriodWindowModel"
]=YHb;YHb.__name__="de.innogames.strategycity.allies.model.quests.AllyQuestPeriodWindowModel";
YHb.prototype={showHelp:function(){this._dispatcher.dispatchEvent(new vc("ShowInfoScreenEvent/SHOW_GENERIC_INFO_SCREEN",
		"historical_allies_tasks",!0,!0))
	},activateQuestRequirement:function(a,b,c,d){var e=this;this._questRequirement=b;b=this._questRequirement.id;switch(a){case "QuestRequirementFightButtonActuator/FIGHT_BUTTON":this._dispatcher.dispatchEvent(new pN("QuestActionEvent/ATTACK",c,b,
			"quest"));break;case "QuestRequirementNegotiateButtonActuator/NEGOTIATE_BUTTON":this._dispatcher.dispatchEvent(new pN("QuestActionEvent/NEGOTIATE",
c,b,
			"quest"));break;case "QuestRequirementPayButtonActuator/PAY_BUTTON":a=new vla(this._questRequirement.getConditionPayload(qN).cost,function(){d();e._dispatcher.dispatchEvent(new E7(c,e._questRequirement.id,
				"quest"))
			},null);this._dispatcher.dispatchEvent(a);break;default:null!=y._reportError&&y._reportError(Error("[LOGGER] Unexpected button actuator id: "+a))
		}
	},__class__:YHb
};var fXa=Ea[
	"de.innogames.strategycity.allies.model.rooms.AllyRoomType"
]={__ename__: "de.innogames.strategycity.allies.model.rooms.AllyRoomType",
__constructs__: null,EmptyRoom: {_hx_name: "EmptyRoom",_hx_index: 0,__enum__: "de.innogames.strategycity.allies.model.rooms.AllyRoomType",toString:N
	},OccupiedRoom:(H=function(a){return{_hx_index: 1,attachedAlly:a,__enum__: "de.innogames.strategycity.allies.model.rooms.AllyRoomType",toString:N
		}
	},H._hx_name="OccupiedRoom",H.__params__=[
		"attachedAlly"
	],H)
};fXa.__constructs__=[fXa.EmptyRoom,fXa.OccupiedRoom
];fXa.__empty_constructs__=[fXa.EmptyRoom
];var cIb=function(){};h[
	"de.innogames.strategycity.allies.tools.AllyLargeAllyPortraitTools"
]=
cIb;cIb.__name__="de.innogames.strategycity.allies.tools.AllyLargeAllyPortraitTools";cIb.loadLargeAllyPortrait=function(a){return Va.instance.loadImage("/assets/historical_allies/allies_large/historical_allies_"+a+".png")
};cIb.loadLargerAllyPortrait=function(a){return Va.instance.loadImage("/assets/historical_allies/allies_large/historical_allies_big_"+a+".png")
};var wla=function(){};h[
	"de.innogames.strategycity.allies.tools.AllyPortraitsAssetsTools"
]=wla;wla.__name__="de.innogames.strategycity.allies.tools.AllyPortraitsAssetsTools";
wla.getAllyCardBorder=function(a,b){switch(b._hx_index){case 0:return a.getImage("historical_allies_portrait_border_common");case 1:return a.getImage("historical_allies_portrait_border_uncommon");case 2:return a.getImage("historical_allies_portrait_border_rare");case 3:return a.getImage("historical_allies_portrait_border_epic");case 4:return a.getImage("historical_allies_portrait_border_legendary")
	}
};wla.getAllyLevelBorder=function(a,b){switch(b._hx_index){case 0:return a.getImage("historical_allies_portrait_border_lv_common");
case 1:return a.getImage("historical_allies_portrait_border_lv_uncommon");case 2:return a.getImage("historical_allies_portrait_border_lv_rare");case 3:return a.getImage("historical_allies_portrait_border_lv_epic");case 4:return a.getImage("historical_allies_portrait_border_lv_legendary")
	}
};wla.getAllyMultiCardBackground=function(a,b){switch(b._hx_index){case 0:return a.getImage("historical_allies_portrait_multiple_cards_common");case 1:return a.getImage("historical_allies_portrait_multiple_cards_uncommon");
case 2:return a.getImage("historical_allies_portrait_multiple_cards_rare");case 3:return a.getImage("historical_allies_portrait_multiple_cards_epic");case 4:return a.getImage("historical_allies_portrait_multiple_cards_legendary")
	}
};var FOb=function(){};h[
	"de.innogames.strategycity.allies.tools.AllyWindowInfoViewTools"
]=FOb;FOb.__name__="de.innogames.strategycity.allies.tools.AllyWindowInfoViewTools";FOb.getRarityBanner=function(a,b){switch(b._hx_index){case 0:return a.getImage("historical_allies_ally_banner_common");
case 1:return a.getImage("historical_allies_ally_banner_uncommon");case 2:return a.getImage("historical_allies_ally_banner_rare");case 3:return a.getImage("historical_allies_ally_banner_epic");case 4:return a.getImage("historical_allies_ally_banner_legendary")
	}
};var Ra=function(){};h[
	"feathers.core.IValidating"
]=Ra;Ra.__name__="feathers.core.IValidating";Ra.__isInterface__=!0;Ra.prototype={__class__:Ra,__properties__: {get_depth: "get_depth"
	}
};var rN=function(){this._ignoreInvalidationFlags=this._setInvalidationFlagsOnly=
!1;this._depth=-1;this._validationQueue=null;this._setInvalidCount=0;this._delayedInvalidationFlags=new wc;this._invalidationFlags=new wc;this._validating=this._allInvalid=this._allInvalidDelayed=!1;C.call(this);this.addEventListener("addedToStage",m(this,this.validatingSprite_addedToStageHandler));this.addEventListener("removedFromStage",m(this,this.validatingSprite_removedFromStageHandler))
};h[
	"feathers.core.ValidatingSprite"
]=rN;rN.__name__="feathers.core.ValidatingSprite";rN.__interfaces__=[Ra
];
rN.__super__=C;rN.prototype=l(C.prototype,
{get_validating:function(){return this._validating
	},get_depth:function(){return this._depth
	},isInvalid:function(a){return this._allInvalid?!0:null==a?this._invalidationFlags.keys().hasNext():this._invalidationFlags.exists(a)
	},runWithoutInvalidation:function(a){var b=this._ignoreInvalidationFlags;this._ignoreInvalidationFlags=!0;a();this._ignoreInvalidationFlags=b
	},runWithInvalidationFlagsOnly:function(a){var b=this._setInvalidationFlagsOnly;this._setInvalidationFlagsOnly=
!0;a();this._setInvalidationFlagsOnly=b
	},setInvalid:function(a){if(!this._ignoreInvalidationFlags)if(this._setInvalidationFlagsOnly)null==a?this._allInvalid=!0:this.setInvalidationFlag(a);else{var b=this.isInvalid(),c=!1;this._validating&&(c=this._delayedInvalidationFlags.keys().hasNext());null==a?this._validating?this._allInvalidDelayed=!0:this._allInvalid=!0:this._validating?this._delayedInvalidationFlags.set(a,!0):null==a||this._invalidationFlags.exists(a)||this._invalidationFlags.set(a,!0);if(null!=
this._validationQueue)if(this._validating){if(!c){this._setInvalidCount++;if(10<=this._setInvalidCount)throw a=K.getClass(this),ba.thrown(new ld(a.__name__+" returned to validation queue too many times during validation. This may be an infinite loop. Try to avoid doing anything that calls setInvalid() during validation."));this._validationQueue.addControl(this)
				}
			}else b||(this._setInvalidCount=0,this._validationQueue.addControl(this))
		}
	},validateNow:function(){if(this.isInvalid()&&!this._validating){this._validating=
!0;this.update();this._allInvalid=this._allInvalidDelayed;this._allInvalidDelayed=!1;this._invalidationFlags.clear();for(var a=this._delayedInvalidationFlags.keys();a.hasNext();){var b=a.next();this._invalidationFlags.set(b,!0)
			}this._delayedInvalidationFlags.clear();this._validating=!1
		}
	},setInvalidationFlag:function(a){this._ignoreInvalidationFlags||this._invalidationFlags.exists(a)||this._invalidationFlags.set(a,!0)
	},update:function(){},validatingSprite_addedToStageHandler:function(a){this._depth=
uC.getDisplayObjectDepthFromStage(this);this._validationQueue=sN.forStage(this.stage);null!=this._validationQueue&&this.isInvalid()&&(this._setInvalidCount=0,this._validationQueue.addControl(this))
	},validatingSprite_removedFromStageHandler:function(a){this._depth=-1;this._validationQueue=null
	},__class__:rN,__properties__:l(C.prototype.__properties__,
	{get_depth: "get_depth",get_validating: "get_validating"
	})
});var F7=function(){};h[
	"feathers.core.IDisplayObject"
]=F7;F7.__name__="feathers.core.IDisplayObject";
F7.__isInterface__=!0;F7.__interfaces__=[Yj
];F7.prototype={__class__:F7,__properties__: {set_visible: "set_visible",get_visible: "get_visible",set_scaleY: "set_scaleY",get_scaleY: "get_scaleY",set_scaleX: "set_scaleX",get_scaleX: "get_scaleX",set_height: "set_height",get_height: "get_height",set_width: "set_width",get_width: "get_width",set_alpha: "set_alpha",get_alpha: "get_alpha",set_y: "set_y",get_y: "get_y",set_x: "set_x",get_x: "get_x"
	}
};var Fc=function(){};h[
	"feathers.core.IMeasureObject"
]=Fc;Fc.__name__="feathers.core.IMeasureObject";
Fc.__isInterface__=!0;Fc.__interfaces__=[F7
];Fc.prototype={__class__:Fc,__properties__: {set_maxHeight: "set_maxHeight",get_maxHeight: "get_maxHeight",set_maxWidth: "set_maxWidth",get_maxWidth: "get_maxWidth",set_minHeight: "set_minHeight",get_minHeight: "get_minHeight",set_minWidth: "set_minWidth",get_minWidth: "get_minWidth",get_explicitMaxHeight: "get_explicitMaxHeight",get_explicitMaxWidth: "get_explicitMaxWidth",get_explicitMinHeight: "get_explicitMinHeight",get_explicitMinWidth: "get_explicitMinWidth",get_explicitHeight: "get_explicitHeight",
get_explicitWidth: "get_explicitWidth"
	}
};var ce=function(){this._explicitWidth=this._explicitHeight=this._explicitMinWidth=this._explicitMinHeight=this._explicitMaxWidth=this._explicitMaxHeight=null;this.scaledActualMaxHeight=1/0;this.scaledActualMaxWidth=1/0;this.scaledActualWidth=this.scaledActualHeight=this.scaledActualMinWidth=this.scaledActualMinHeight=0;this.actualMaxHeight=1/0;this.actualMaxWidth=1/0;this.actualWidth=this.actualHeight=this.actualMinWidth=this.actualMinHeight=0;rN.call(this)
};
h[
	"feathers.core.MeasureSprite"
]=ce;ce.__name__="feathers.core.MeasureSprite";ce.__interfaces__=[Fc
];ce.__super__=rN;ce.prototype=l(rN.prototype,
{get_width:function(){return this.scaledActualWidth
	},set_width:function(a){
		1!=this.get_scaleX()&&(a/=this.get_scaleX());this.set_explicitWidth(a);return this.scaledActualWidth
	},get_height:function(){return this.scaledActualHeight
	},set_height:function(a){
		1!=this.get_scaleY()&&(a/=this.get_scaleY());this.set_explicitHeight(a);return this.scaledActualHeight
	},
set_scaleX:function(a){rN.prototype.set_scaleX.call(this,a);this.saveMeasurements(this.actualWidth,this.actualHeight,this.actualMinWidth,this.actualMinHeight,this.actualMaxWidth,this.actualMaxHeight);return this.get_scaleX()
	},set_scaleY:function(a){rN.prototype.set_scaleY.call(this,a);this.saveMeasurements(this.actualWidth,this.actualHeight,this.actualMinWidth,this.actualMinHeight,this.actualMaxWidth,this.actualMaxHeight);return this.get_scaleY()
	},get_explicitWidth:function(){return this._explicitWidth
	},
set_explicitWidth:function(a){if(this._explicitWidth==a)return this._explicitWidth;this._explicitWidth=a;null==a?(this.scaledActualWidth=this.actualWidth=0,this.setInvalid(ea.SIZE)):this.saveMeasurements(a,this.actualHeight,this.actualMinWidth,this.actualMinHeight,this.actualMaxWidth,this.actualMaxHeight)&&this.setInvalid(ea.SIZE);return this._explicitWidth
	},get_explicitHeight:function(){return this._explicitHeight
	},set_explicitHeight:function(a){if(this._explicitHeight==a)return this._explicitHeight;
this._explicitHeight=a;null==a?(this.scaledActualHeight=this.actualHeight=0,this.setInvalid(ea.SIZE)):this.saveMeasurements(this.actualWidth,a,this.actualMinWidth,this.actualMinHeight,this.actualMaxWidth,this.actualMaxHeight)&&this.setInvalid(ea.SIZE);return this._explicitHeight
	},get_explicitMinWidth:function(){return this._explicitMinWidth
	},set_explicitMinWidth:function(a){if(this._explicitMinWidth==a)return this._explicitMinWidth;var b=this._explicitMinWidth;this._explicitMinWidth=a;if(null==a)this.scaledActualMinWidth=
this.actualMinWidth=0,this.setInvalid(ea.SIZE);else{var c=this.actualWidth;this.saveMeasurements(this.actualWidth,this.actualHeight,a,this.actualMinHeight,this.actualMaxWidth,this.actualMaxHeight);null==this._explicitWidth&&(c<a||c==b)&&this.setInvalid(ea.SIZE)
		}return this._explicitMinWidth
	},get_explicitMinHeight:function(){return this._explicitMinHeight
	},set_explicitMinHeight:function(a){if(this._explicitMinHeight==a)return this._explicitMinHeight;var b=this._explicitMinHeight;this._explicitMinHeight=
a;if(null==a)this.scaledActualMinHeight=this.actualMinHeight=0,this.setInvalid(ea.SIZE);else{var c=this.actualHeight;this.saveMeasurements(this.actualWidth,this.actualHeight,this.actualMinWidth,a,this.actualMaxWidth,this.actualMaxHeight);null==this._explicitHeight&&(c<a||c==b)&&this.setInvalid(ea.SIZE)
		}return this._explicitMinHeight
	},get_minWidth:function(){return this.scaledActualMinWidth
	},set_minWidth:function(a){
		1!=this.get_scaleX()&&(a/=this.get_scaleX());this.set_explicitMinWidth(a);return this.scaledActualMinWidth
	},
get_minHeight:function(){return this.scaledActualMinHeight
	},set_minHeight:function(a){
		1!=this.get_scaleY()&&(a/=this.get_scaleY());this.set_explicitMinHeight(a);return this.scaledActualMinHeight
	},get_explicitMaxWidth:function(){return this._explicitMaxWidth
	},set_explicitMaxWidth:function(a){if(this._explicitMaxWidth==a)return this._explicitMaxWidth;var b=this._explicitMaxWidth;this._explicitMaxWidth=a;if(null==a)this.actualMaxWidth=1/0,this.scaledActualMaxWidth=1/0,this.setInvalid(ea.SIZE);else{var c=
this.actualWidth;this.saveMeasurements(this.actualWidth,this.actualHeight,this.actualMinWidth,this.actualMinHeight,a,this.actualMaxHeight);null==this._explicitWidth&&(c>a||c==b)&&this.setInvalid(ea.SIZE)
		}return this._explicitMaxWidth
	},get_explicitMaxHeight:function(){return this._explicitMaxHeight
	},set_explicitMaxHeight:function(a){if(this._explicitMaxHeight==a)return this._explicitMaxHeight;var b=this._explicitMaxHeight;this._explicitMaxHeight=a;if(null==a)this.actualMaxHeight=1/0,this.scaledActualMaxHeight=
1/0,this.setInvalid(ea.SIZE);else{var c=this.actualHeight;this.saveMeasurements(this.actualWidth,this.actualHeight,this.actualMinWidth,this.actualMinHeight,this.actualMaxWidth,a);null==this._explicitHeight&&(c>a||c==b)&&this.setInvalid(ea.SIZE)
		}return this._explicitMaxHeight
	},get_maxWidth:function(){return this.scaledActualMaxWidth
	},set_maxWidth:function(a){
		1!=this.get_scaleX()&&(a/=this.get_scaleX());this.set_explicitMaxWidth(a);return this.scaledActualMaxWidth
	},get_maxHeight:function(){return this.scaledActualMaxHeight
	},
set_maxHeight:function(a){
		1!=this.get_scaleY()&&(a/=this.get_scaleY());this.set_explicitMaxHeight(a);return this.scaledActualMaxHeight
	},resetWidth:function(){this.set_explicitWidth(null)
	},resetHeight:function(){this.set_explicitHeight(null)
	},resetMinWidth:function(){this.set_explicitMinWidth(null)
	},resetMinHeight:function(){this.set_explicitMinHeight(null)
	},resetMaxWidth:function(){this.set_explicitMaxWidth(null)
	},resetMaxHeight:function(){this.set_explicitMaxHeight(null)
	},getBounds:function(a){null==
this.__getBoundsHelperMatrix1?this.__getBoundsHelperMatrix1=new Eb:this.__getBoundsHelperMatrix1.identity();if(null!=a&&a!=this){null==this.__getBoundsHelperMatrix2&&(this.__getBoundsHelperMatrix2=new Eb);var b=this.__getWorldTransform();this.__getBoundsHelperMatrix1.copyFrom(b);a=a.__getWorldTransform();this.__getBoundsHelperMatrix2.copyFrom(a);this.__getBoundsHelperMatrix2.invert();this.__getBoundsHelperMatrix1.concat(this.__getBoundsHelperMatrix2);this.__getBoundsHelperMatrix2.identity()
		}a=this.__getBoundsHelperMatrix1.tx;
b=this.__getBoundsHelperMatrix1.ty;var c=this.actualWidth*this.__getBoundsHelperMatrix1.a+this.actualHeight*this.__getBoundsHelperMatrix1.c+this.__getBoundsHelperMatrix1.tx-a,d=this.actualWidth*this.__getBoundsHelperMatrix1.b+this.actualHeight*this.__getBoundsHelperMatrix1.d+this.__getBoundsHelperMatrix1.ty-b;this.__getBoundsHelperMatrix1.identity();return new Z(a,b,c,d)
	},saveMeasurements:function(a,b,c,d,e,g){null==d&&(d=0);null==c&&(c=0);null==e&&(e=1/0);null==g&&(g=1/0);null!=this._explicitMinWidth&&
(c=this._explicitMinWidth);null!=this._explicitMinHeight&&(d=this._explicitMinHeight);null!=this._explicitMaxWidth?e=this._explicitMaxWidth:null==e&&(e=1/0);null!=this._explicitMaxHeight?g=this._explicitMaxHeight:null==g&&(g=1/0);null==this._explicitMaxWidth&&e<c&&(e=c);null==this._explicitMinWidth&&c>e&&(c=e);null==this._explicitMaxHeight&&g<d&&(g=d);null==this._explicitMinHeight&&d>g&&(d=g);null!=this._explicitWidth?a=this._explicitWidth:a<c?a=c:a>e&&(a=e);null!=this._explicitHeight?b=this._explicitHeight:
b<d?b=d:b>g&&(b=g);var k=this.get_scaleX();0>k&&(k=-k);var t=this.get_scaleY();0>t&&(t=-t);var u=!1;this.actualWidth!=a&&(this.actualWidth=a,u=!0);this.actualHeight!=b&&(this.actualHeight=b,u=!0);this.actualMinWidth!=c&&(this.actualMinWidth=c,u=!0);this.actualMinHeight!=d&&(this.actualMinHeight=d,u=!0);this.actualMaxWidth!=e&&(this.actualMaxWidth=e,u=!0);this.actualMaxHeight!=g&&(this.actualMaxHeight=g,u=!0);a=this.scaledActualWidth;b=this.scaledActualHeight;this.scaledActualWidth=this.actualWidth*
k;this.scaledActualHeight=this.actualHeight*t;this.scaledActualMinWidth=this.actualMinWidth*k;this.scaledActualMinHeight=this.actualMinHeight*t;this.scaledActualMaxWidth=this.actualMaxWidth*k;this.scaledActualMaxHeight=this.actualMaxHeight*t;if(a!=this.scaledActualWidth||b!=this.scaledActualHeight)u=!0,bb.dispatch(this,
		"resize");return u
	},__class__:ce,__properties__:l(rN.prototype.__properties__,
	{set_maxHeight: "set_maxHeight",get_maxHeight: "get_maxHeight",set_maxWidth: "set_maxWidth",get_maxWidth: "get_maxWidth",
set_explicitMaxHeight: "set_explicitMaxHeight",get_explicitMaxHeight: "get_explicitMaxHeight",set_explicitMaxWidth: "set_explicitMaxWidth",get_explicitMaxWidth: "get_explicitMaxWidth",set_minHeight: "set_minHeight",get_minHeight: "get_minHeight",set_minWidth: "set_minWidth",get_minWidth: "get_minWidth",set_explicitMinHeight: "set_explicitMinHeight",get_explicitMinHeight: "get_explicitMinHeight",set_explicitMinWidth: "set_explicitMinWidth",get_explicitMinWidth: "get_explicitMinWidth",set_explicitHeight: "set_explicitHeight",
get_explicitHeight: "get_explicitHeight",set_explicitWidth: "set_explicitWidth",get_explicitWidth: "get_explicitWidth"
	})
});var Ac=function(){};h[
	"feathers.layout.ILayoutObject"
]=Ac;Ac.__name__="feathers.layout.ILayoutObject";Ac.__isInterface__=!0;Ac.__interfaces__=[Yj
];Ac.prototype={__class__:Ac,__properties__: {set_layoutData: "set_layoutData",get_layoutData: "get_layoutData",set_includeInLayout: "set_includeInLayout",get_includeInLayout: "get_includeInLayout"
	}
};var xla=function(){};h[
	"feathers.style.IStyleObject"
]=
xla;xla.__name__="feathers.style.IStyleObject";xla.__isInterface__=!0;xla.prototype={__class__:xla,__properties__: {set_themeEnabled: "set_themeEnabled",get_themeEnabled: "get_themeEnabled"
	}
};var co=function(){};h[
	"feathers.style.IVariantStyleObject"
]=co;co.__name__="feathers.style.IVariantStyleObject";co.__isInterface__=!0;co.__interfaces__=[xla
];co.prototype={__class__:co,__properties__: {set_variant: "set_variant",get_variant: "get_variant",get_styleContext: "get_styleContext"
	}
};var Mc=function(){};h[
	"feathers.core.IUIControl"
]=
Mc;Mc.__name__="feathers.core.IUIControl";Mc.__isInterface__=!0;Mc.__interfaces__=[F7
];Mc.prototype={__class__:Mc,__properties__: {set_toolTip: "set_toolTip",get_toolTip: "get_toolTip",set_enabled: "set_enabled",get_enabled: "get_enabled"
	}
};var Lc=function(){this._restrictedStyles=[];this._styleProviderStyles=[];this._applyingStyles=this._clearingStyles=!1;this._focusPaddingTop=this._focusPaddingRight=this._focusPaddingBottom=this._focusPaddingLeft=0;this._focusRectSkin=null;this._focusEnabled=!0;this.disabledAlpha=
this._focusManager=null;this._explicitAlpha=1;this._includeInLayout=!0;this._currentStyleProvider=this._customStyleProvider=null;this._themeEnabled=!0;this._toolTip=null;this._enabled=!0;this._waitingToApplyStyles=this._initializing=this._initialized=this._created=!1;ce.call(this);this.set_tabEnabled(K.__implements(this,eo));this.addEventListener("addedToStage",m(this,this.feathersControl_addedToStageHandler));this.addEventListener("removedFromStage",m(this,this.feathersControl_removedFromStageHandler));
this.addEventListener("focusIn",m(this,this.feathersControl_focusInHandler));this.addEventListener("focusOut",m(this,this.feathersControl_focusOutHandler))
};h[
	"feathers.core.FeathersControl"
]=Lc;Lc.__name__="feathers.core.FeathersControl";Lc.__interfaces__=[Ac,co,Mc
];Lc.__super__=ce;Lc.prototype=l(ce.prototype,
{get_initialized:function(){return this._initialized
	},get_created:function(){return this._created
	},get_enabled:function(){return this._enabled
	},set_enabled:function(a){if(this._enabled==a)return this._enabled;
(this._enabled=a)||null==this.disabledAlpha?ce.prototype.set_alpha.call(this,this._explicitAlpha):this._enabled||null==this.disabledAlpha||ce.prototype.set_alpha.call(this,this.disabledAlpha);this.setInvalid(ea.STATE);this._enabled?bb.dispatch(this,
		"enable"):bb.dispatch(this,
		"disable");return this._enabled
	},get_toolTip:function(){return this._toolTip
	},set_toolTip:function(a){return this._toolTip==a?this._toolTip:this._toolTip=a
	},get_themeEnabled:function(){return this._themeEnabled
	},set_themeEnabled:function(a){if(this._themeEnabled==
a)return this._themeEnabled;this._themeEnabled=a;this._initialized&&null!=this.stage?this.applyStyles():this._waitingToApplyStyles=!0;this.setInvalid(ea.STYLES);return this._themeEnabled
	},get_styleProvider:function(){return null!=this._customStyleProvider?this._customStyleProvider:this._currentStyleProvider
	},set_styleProvider:function(a){if(this._customStyleProvider==a)return this._customStyleProvider;null!=this._customStyleProvider&&this._customStyleProvider.removeEventListener("clear",m(this,this.customStyleProvider_clearHandler));
this._customStyleProvider=a;null!=this._customStyleProvider&&this._customStyleProvider.addEventListener("clear",m(this,this.customStyleProvider_clearHandler),!1,
		0,!0);this._initialized&&null!=this.stage?this.applyStyles():this._waitingToApplyStyles=!0;this.setInvalid(ea.STYLES);return this._customStyleProvider
	},get_styleContext:function(){return null
	},get_includeInLayout:function(){return this._includeInLayout
	},set_includeInLayout:function(a){if(this._includeInLayout==a)return this._includeInLayout;
this._includeInLayout=a;bb.dispatch(this,
		"layoutDataChange");return this._includeInLayout
	},get_layoutData:function(){return this._layoutData
	},set_layoutData:function(a){if(!this.setStyle("layoutData"))return this._layoutData;this._previousClearStyle=m(this,this.clearStyle_layoutData);return this.setLayoutDataInternal(a)
	},set_alpha:function(a){this._explicitAlpha=a;(this._enabled||null==this.disabledAlpha)&&ce.prototype.set_alpha.call(this,a);return this._explicitAlpha
	},get_focusManager:function(){return this._focusManager
	},
set_focusManager:function(a){if(this._focusManager==a)return this._focusManager;null!=this._focusManager&&this.showFocus(!1);return this._focusManager=a
	},get_focusOwner:function(){return this._focusOwner
	},set_focusOwner:function(a){return this._focusOwner==a?this._focusOwner:this._focusOwner=a
	},get_rawTabEnabled:function(){return ce.prototype.get_tabEnabled.call(this)
	},get_focusEnabled:function(){return this._enabled?this._focusEnabled:!1
	},set_focusEnabled:function(a){return this._focusEnabled==a?
this._focusEnabled:this._focusEnabled=a
	},get_tabEnabled:function(){return this._enabled?ce.prototype.get_tabEnabled.call(this):!1
	},get_focusRectSkin:function(){return this._focusRectSkin
	},set_focusRectSkin:function(a){if(!this.setStyle("focusRectSkin"))return this._focusRectSkin;this.showFocus(!1);this._previousClearStyle=m(this,this.clearStyle_focusRectSkin);return this._focusRectSkin=a
	},get_focusPaddingTop:function(){return this._focusPaddingTop
	},set_focusPaddingTop:function(a){if(!this.setStyle("focusPaddingTop"))return this._focusPaddingTop;
this._previousClearStyle=m(this,this.clearStyle_focusPaddingTop);return this._focusPaddingTop=a
	},get_focusPaddingRight:function(){return this._focusPaddingRight
	},set_focusPaddingRight:function(a){if(!this.setStyle("focusPaddingRight"))return this._focusPaddingRight;this._previousClearStyle=m(this,this.clearStyle_focusPaddingRight);return this._focusPaddingRight=a
	},get_focusPaddingBottom:function(){return this._focusPaddingBottom
	},set_focusPaddingBottom:function(a){if(!this.setStyle("focusPaddingBottom"))return this._focusPaddingBottom;
this._previousClearStyle=m(this,this.clearStyle_focusPaddingBottom);return this._focusPaddingBottom=a
	},get_focusPaddingLeft:function(){return this._focusPaddingLeft
	},set_focusPaddingLeft:function(a){if(!this.setStyle("focusPaddingLeft"))return this._focusPaddingLeft;this._previousClearStyle=m(this,this.clearStyle_focusPaddingLeft);return this._focusPaddingLeft=a
	},setFocusPadding:function(a){this.set_focusPaddingTop(a);this.set_focusPaddingRight(a);this.set_focusPaddingBottom(a);this.set_focusPaddingLeft(a)
	},
showFocus:function(a){null!=this._focusManager&&null!=this._focusRectSkin&&(a?(this._focusManager.get_focusPane().addChild(this._focusRectSkin),this.addEventListener("enterFrame",m(this,this.feathersControl_focusRect_enterFrameHandler)),this.positionFocusRect()):null!=this._focusRectSkin.parent&&(this.removeEventListener("enterFrame",m(this,this.feathersControl_focusRect_enterFrameHandler)),this._focusRectSkin.parent.removeChild(this._focusRectSkin)))
	},clearStyle_layoutData:function(){return this.setLayoutDataInternal(null)
	},
clearStyle_focusRectSkin:function(){this.showFocus(!1);return this._focusRectSkin=null
	},clearStyle_focusPaddingTop:function(){return this._focusPaddingTop=0
	},clearStyle_focusPaddingRight:function(){return this._focusPaddingRight=0
	},clearStyle_focusPaddingBottom:function(){return this._focusPaddingBottom=0
	},clearStyle_focusPaddingLeft:function(){return this._focusPaddingLeft=0
	},positionFocusRect:function(){if(null!=this._focusManager&&null!=this._focusRectSkin&&null!=this._focusRectSkin.parent){var a=
new p(-this._focusPaddingLeft,-this._focusPaddingTop);a=this.localToGlobal(a);a=this._focusManager.get_focusPane().globalToLocal(a);this._focusRectSkin.set_x(a.x);this._focusRectSkin.set_y(a.y);a.setTo(this.actualWidth+this._focusPaddingRight,this.actualHeight+this._focusPaddingBottom);a=this.localToGlobal(a);a=this._focusManager.get_focusPane().globalToLocal(a);this._focusRectSkin.set_width(a.x-this._focusRectSkin.get_x());this._focusRectSkin.set_height(a.y-this._focusRectSkin.get_y())
		}
	},setLayoutDataInternal:function(a){if(this._layoutData==
a)return this._layoutData;null!=this._layoutData&&this._layoutData.removeEventListener("change",m(this,this.layoutData_changeHandler));this._layoutData=a;null!=this._layoutData&&this._layoutData.addEventListener("change",m(this,this.layoutData_changeHandler),!1,
		0,!0);bb.dispatch(this,
		"layoutDataChange");return this._layoutData
	},get_variant:function(){return this._variant
	},set_variant:function(a){if(this._variant==a)return this._variant;this._variant=a;this._initialized&&null!=this.stage?this.applyStyles():
this._waitingToApplyStyles=!0;this.setInvalid(ea.STYLES);return this._variant
	},validateNow:function(){if(!this._initialized){if(this._initializing)throw ba.thrown(new ld("A component cannot validate until after it has finished initializing."));this.initializeNow()
		}this._waitingToApplyStyles&&this.applyStyles();ce.prototype.validateNow.call(this);this._created||(this._created=!0,bb.dispatch(this,
		"creationComplete"))
	},initializeNow:function(){this._initialized||this._initializing||(this._initializing=
this._waitingToApplyStyles=!0,this.initialize(),this.setInvalid(),this._initializing=!1,this._initialized=!0,bb.dispatch(this,
		"initialize"))
	},move:function(a,b){this.set_x(a);this.set_y(b)
	},setSize:function(a,b){this.set_width(a);this.set_height(b)
	},dispose:function(){this.clearStyles();for(var a=0,b=this.get_numChildren();a<b;){var c=this.getChildAt(a++);K.__implements(c,Mc)&&K.__cast(c,Mc).dispose()
		}
	},initialize:function(){},setStyle:function(a,b){a=null==b?yla.Name(a):yla.NameAndState(a,b);b=this.containsStyleDef(this._restrictedStyles,
a);if(this._applyingStyles&&b)return!1;this._applyingStyles?this._clearingStyles||this.containsStyleDef(this._styleProviderStyles,a)||this._styleProviderStyles.push(a):b||(!this._clearingStyles&&this.containsStyleDef(this._styleProviderStyles,a)&&Wa.remove(this._styleProviderStyles,a),this._restrictedStyles.push(a));return!0
	},isStyleRestricted:function(a,b){return this.containsStyleDef(this._restrictedStyles,null==b?yla.Name(a):yla.NameAndState(a,b))
	},containsStyleDef:function(a,b){for(var c=0;c<
a.length;)if(Ie.enumEq(b,a[c++
		]))return!0;return!1
	},applyStyles:function(){if(!this._initialized)throw ba.thrown(new ld("Cannot apply styles until after a Feathers UI component has initialized."));this._waitingToApplyStyles=!1;var a=this._customStyleProvider;if(null==a){var b=fo.getTheme(this);null!=b&&(a=b.getStyleProvider(this))
		}this._themeEnabled&&null==a&&(b=fo.get_fallbackTheme(),null!=b&&(a=b.getStyleProvider(this)));null==a&&(a=this._currentStyleProvider);this._currentStyleProvider!=a&&(null!=
this._currentStyleProvider&&(this._currentStyleProvider.removeEventListener("stylesChange",m(this,this.styleProvider_stylesChangeHandler)),this._currentStyleProvider.removeEventListener("clear",m(this,this.styleProvider_clearHandler))),this._currentStyleProvider=a,null!=this._currentStyleProvider&&(this._currentStyleProvider.addEventListener("stylesChange",m(this,this.styleProvider_stylesChangeHandler),!1,
		0,!0),this._currentStyleProvider.addEventListener("clear",m(this,this.styleProvider_clearHandler),
!1,
		0,!0)));a=this._applyingStyles;this._applyingStyles=!0;this.clearStyles();null!=this._currentStyleProvider&&this._currentStyleProvider.applyStyles(this);this._applyingStyles=a
	},clearStyles:function(){var a=this._clearingStyles;this._clearingStyles=!0;for(var b=0,c=this._styleProviderStyles;b<c.length;){var d=c[b
			];++b;switch(d._hx_index){case 0:d="clearStyle_"+d.name;var e=gb.field(this,d);if(null==e)throw ba.thrown(new oc("Missing @style method: '"+d+"'"));e.apply(this,
				[]);break;case 1:gb.field(this,
d.name).apply(this,
				[d.state,
					null
				])
			}
		}this._styleProviderStyles=[];this._clearingStyles=a
	},clearStyleProvider:function(){null!=this._currentStyleProvider&&(this._currentStyleProvider.removeEventListener("stylesChange",m(this,this.styleProvider_stylesChangeHandler)),this._currentStyleProvider.removeEventListener("clear",m(this,this.styleProvider_clearHandler)),this._currentStyleProvider=null,this._waitingToApplyStyles=!0)
	},feathersControl_addedToStageHandler:function(a){this._initialized||this.initializeNow();
this._waitingToApplyStyles&&this.applyStyles()
	},feathersControl_removedFromStageHandler:function(a){this.showFocus(!1);this.clearStyleProvider()
	},feathersControl_focusInHandler:function(a){a=null;K.__implements(this,eo)&&(a=K.__cast(this,eo));null!=this._focusManager&&this._focusManager.get_showFocusIndicator()&&this._focusManager.get_focus()==a&&this.showFocus(!0)
	},feathersControl_focusOutHandler:function(a){null!=this._focusManager&&this.showFocus(!1)
	},styleProvider_stylesChangeHandler:function(a){a.affectsTarget(this)&&
(null!=this.stage?this.applyStyles():this._waitingToApplyStyles=!0)
	},customStyleProvider_clearHandler:function(a){this._customStyleProvider.removeEventListener("clear",m(this,this.customStyleProvider_clearHandler));this._customStyleProvider=null
	},styleProvider_clearHandler:function(a){this.clearStyleProvider();null!=this.stage&&this.applyStyles()
	},layoutData_changeHandler:function(a){bb.dispatch(this,
		"layoutDataChange")
	},feathersControl_focusRect_enterFrameHandler:function(a){this.positionFocusRect()
	},
__class__:Lc,__properties__:l(ce.prototype.__properties__,
	{set_variant: "set_variant",get_variant: "get_variant",set_focusPaddingLeft: "set_focusPaddingLeft",get_focusPaddingLeft: "get_focusPaddingLeft",set_focusPaddingBottom: "set_focusPaddingBottom",get_focusPaddingBottom: "get_focusPaddingBottom",set_focusPaddingRight: "set_focusPaddingRight",get_focusPaddingRight: "get_focusPaddingRight",set_focusPaddingTop: "set_focusPaddingTop",get_focusPaddingTop: "get_focusPaddingTop",set_focusRectSkin: "set_focusRectSkin",
get_focusRectSkin: "get_focusRectSkin",set_focusEnabled: "set_focusEnabled",get_focusEnabled: "get_focusEnabled",get_rawTabEnabled: "get_rawTabEnabled",set_focusOwner: "set_focusOwner",get_focusOwner: "get_focusOwner",set_focusManager: "set_focusManager",get_focusManager: "get_focusManager",set_layoutData: "set_layoutData",get_layoutData: "get_layoutData",set_includeInLayout: "set_includeInLayout",get_includeInLayout: "get_includeInLayout",get_styleContext: "get_styleContext",set_styleProvider: "set_styleProvider",
get_styleProvider: "get_styleProvider",set_themeEnabled: "set_themeEnabled",get_themeEnabled: "get_themeEnabled",set_toolTip: "set_toolTip",get_toolTip: "get_toolTip",set_enabled: "set_enabled",get_enabled: "get_enabled",get_created: "get_created",get_initialized: "get_initialized"
	})
});var R=function(){this.__layout=this.__backgroundSkin=this.__disabledBackgroundSkin=this.__maskSkin=null;this._layoutActive=this._layoutChanged=!1;this._xmlContent=null;this._autoSizeMode=To.CONTENT;this._currentBackgroundSkin=
this._backgroundSkinMeasurements=this._currentMaskSkin=null;this._ignoreChildChanges=this._ignoreChangesButSetFlags=this._ignoreLayoutChanges=!1;this._layoutMeasurements=new Jh;this._layoutResult=new Bu;this.items=[];this.initializeLayoutGroupTheme();Lc.call(this);this.addEventListener("addedToStage",m(this,this.layoutGroup_addedToStageHandler))
};h[
	"feathers.controls.LayoutGroup"
]=R;R.__name__="feathers.controls.LayoutGroup";R.__super__=Lc;R.prototype=l(Lc.prototype,
{get_autoSizeMode:function(){return this._autoSizeMode
	},
set_autoSizeMode:function(a){if(this._autoSizeMode==a)return this._autoSizeMode;this._autoSizeMode=a;this.setInvalid(ea.SIZE);null!=this.stage&&(this._autoSizeMode==To.STAGE?(this.stage.addEventListener("resize",m(this,this.layoutGroup_stage_resizeHandler),!1,
		0,!0),this.addEventListener("removedFromStage",m(this,this.layoutGroup_removedFromStageHandler))):(this.stage.removeEventListener("resize",m(this,this.layoutGroup_stage_resizeHandler)),this.removeEventListener("removedFromStage",m(this,this.layoutGroup_removedFromStageHandler))));
return this._autoSizeMode
	},get_numChildren:function(){return this.items.length
	},get__numChildren:function(){return Lc.prototype.get_numChildren.call(this)
	},addChildAt:function(a,b){var c=this.items.indexOf(a);if(c==b)return a;var d=this.getPrivateIndexForPublicIndex(b);0<=c&&this.items.splice(c,
		1);this.items.splice(b,
		0,a);b=this._addChildAt(a,d);a.addEventListener("resize",m(this,this.layoutGroup_child_resizeHandler));K.__implements(a,Ac)&&a.addEventListener("layoutDataChange",m(this,this.layoutGroup_child_layoutDataChangeHandler),
!1,
		0,!0);this._ignoreChangesButSetFlags?this.setInvalidationFlag(ea.LAYOUT):this.setInvalid(ea.LAYOUT);return b
	},_addChild:function(a){return Lc.prototype.addChildAt.call(this,a,this.get__numChildren())
	},_addChildAt:function(a,b){return Lc.prototype.addChildAt.call(this,a,b)
	},removeChild:function(a){if(null==a||a.parent!=this)return a;Wa.remove(this.items,a);var b=this._removeChild(a);a.removeEventListener("resize",m(this,this.layoutGroup_child_resizeHandler));K.__implements(a,Ac)&&a.removeEventListener("layoutDataChange",
m(this,this.layoutGroup_child_layoutDataChangeHandler));this._ignoreChangesButSetFlags?this.setInvalidationFlag(ea.LAYOUT):this.setInvalid(ea.LAYOUT);return b
	},_removeChild:function(a){return Lc.prototype.removeChild.call(this,a)
	},removeChildAt:function(a){return 0<=a&&a<this.items.length?this.removeChild(this.items[a
		]): null
	},_removeChildAt:function(a){return Lc.prototype.removeChildAt.call(this,a)
	},getChildIndex:function(a){return this.items.indexOf(a)
	},_getChildIndex:function(a){return Lc.prototype.getChildIndex.call(this,
a)
	},getChildByName:function(a){for(var b=0,c=this.items;b<c.length;){var d=c[b
			];++b;if(d.get_name()==a)return d
		}return null
	},_getChildByName:function(a){return Lc.prototype.getChildByName.call(this,a)
	},removeChildren:function(a,b){null==b&&(b=2147483647);null==a&&(a=0);if(2147483647==b&&(b=this.items.length-1,
		0>b))return;if(!(a>this.items.length-1)){if(b<a||0>a||b>this.items.length)throw ba.thrown(new vq("The supplied index is out of bounds."));for(b-=a;0<=b;)this.removeChildAt(a),--b
		}
	},_removeChildren:function(a,
b){null==b&&(b=2147483647);null==a&&(a=0);Lc.prototype.removeChildren.call(this,a,b)
	},setChildIndex:function(a,b){this.getChildIndex(a)!=b&&(this._setChildIndex(a,this.getPrivateIndexForPublicIndex(b)),Wa.remove(this.items,a),this.items.splice(b,
		0,a),this._ignoreChangesButSetFlags?this.setInvalidationFlag(ea.LAYOUT):this.setInvalid(ea.LAYOUT))
	},_setChildIndex:function(a,b){Lc.prototype.setChildIndex.call(this,a,b)
	},getChildAt:function(a){return this.items[a
		]
	},_getChildAt:function(a){return Lc.prototype.getChildAt.call(this,
a)
	},initializeLayoutGroupTheme:function(){},getPrivateIndexForPublicIndex:function(a){return 0<this.items.length?a+this._getChildIndex(this.items[
			0
		]): 0<this.get__numChildren()?a+this.get__numChildren():a
	},get_xmlContent:function(){return this._xmlContent
	},set_xmlContent:function(a){if(this._xmlContent==a)return this._xmlContent;if(null!=this._xmlContent)for(var b=0,c=this._xmlContent;b<c.length;)this.removeChild(c[b++
		]);this._xmlContent=a;if(null!=this._xmlContent)for(b=0,c=this._xmlContent;b<c.length;)this.addChild(c[b++
		]);
this.setInvalid(ea.STYLES);return this._xmlContent
	},validateNow:function(){var a=this._ignoreChangesButSetFlags;this._ignoreChangesButSetFlags=!0;Lc.prototype.validateNow.call(this);this._ignoreChangesButSetFlags=a
	},update:function(){var a=this;this._ignoreChangesButSetFlags=!1;var b=this.isInvalid(ea.LAYOUT),c=this.isInvalid(ea.SIZE),d=this.isInvalid(ea.STYLES),e=this.isInvalid(ea.STATE);(d||e)&&this.refreshBackgroundSkin();d&&(this.refreshMaskSkin(),this.refreshLayout());if(c||b||d||e)this.refreshViewPortBounds(),
this.runWithInvalidationFlagsOnly(function(){a._layoutActive=!0;var g=0;do if(a._layoutChanged=!1,a.handleLayout(),++g,
			10<=g){a._layoutActive=!1;g=K.getClass(a).__name__;var k=null!=a.get_layout()?K.getClass(a.get_layout()).__name__: "The layout";throw ba.thrown(new ld(""+g+" is stuck in an infinite loop during layout. "+k+" may be dispatching Event.CHANGE too frequently."));
			}while(a._layoutChanged);a._layoutActive=!1
		}),this.refreshBackgroundLayout(),this.refreshDisabledOverlay(),this.refreshMaskLayout(),
this.validateChildren()
	},refreshDisabledOverlay:function(){this._enabled||(null==this._disabledOverlay?(this._disabledOverlay=new C,this._disabledOverlay.get_graphics().beginFill(16711935,
		0),this._disabledOverlay.get_graphics().drawRect(0,
		0,
		1,
		1),this._disabledOverlay.get_graphics().endFill(),this._addChild(this._disabledOverlay)):this._setChildIndex(this._disabledOverlay,this.get__numChildren()-1));null!=this._disabledOverlay&&(this._disabledOverlay.set_visible(!this._enabled),this._disabledOverlay.set_x(0),
this._disabledOverlay.set_y(0),this._disabledOverlay.set_width(this.actualWidth),this._disabledOverlay.set_height(this.actualHeight))
	},refreshLayout:function(){var a=this.get_layout();this._currentLayout!=a&&(null!=this._currentLayout&&this._currentLayout.removeEventListener("change",m(this,this.layoutGroup_layout_changeHandler)),this._currentLayout=a,null!=this._currentLayout&&this._currentLayout.addEventListener("change",m(this,this.layoutGroup_layout_changeHandler)))
	},refreshBackgroundSkin:function(){var a=
this._currentBackgroundSkin;this._currentBackgroundSkin=this.getCurrentBackgroundSkin();this._currentBackgroundSkin!=a&&(this.removeCurrentBackgroundSkin(a),this.addCurrentBackgroundSkin(this._currentBackgroundSkin))
	},getCurrentBackgroundSkin:function(){return this._enabled||null==this.get_disabledBackgroundSkin()?this.get_backgroundSkin():this.get_disabledBackgroundSkin()
	},addCurrentBackgroundSkin:function(a){null==a?this._backgroundSkinMeasurements=null:(K.__implements(a,Mc)&&K.__cast(a,Mc).initializeNow(),
null==this._backgroundSkinMeasurements?this._backgroundSkinMeasurements=new Jh(a):this._backgroundSkinMeasurements.save(a),K.__implements(a,Gc)&&K.__cast(a,Gc).set_uiContext(this),this._addChildAt(a,
		0))
	},removeCurrentBackgroundSkin:function(a){null!=a&&(K.__implements(a,Gc)&&K.__cast(a,Gc).set_uiContext(null),this._backgroundSkinMeasurements.restore(a),a.parent==this&&this._removeChild(a))
	},refreshMaskSkin:function(){var a=this._currentMaskSkin;this._currentMaskSkin=this.getCurrentMaskSkin();this._currentMaskSkin!=
a&&(this.removeCurrentMaskSkin(a),this.addCurrentMaskSkin(this._currentMaskSkin))
	},getCurrentMaskSkin:function(){return this.get_maskSkin()
	},addCurrentMaskSkin:function(a){null!=a&&(K.__implements(a,Mc)&&K.__cast(a,Mc).initializeNow(),K.__implements(a,Gc)&&K.__cast(a,Gc).set_uiContext(this),this._addChild(a),this.set_mask(a))
	},removeCurrentMaskSkin:function(a){null!=a&&(K.__implements(a,Gc)&&K.__cast(a,Gc).set_uiContext(null),a.parent==this&&this._removeChild(a),this.set_mask(null))
	},refreshViewPortBounds:function(){var a=
null==this.get_explicitWidth(),b=null==this.get_explicitHeight(),c=null==this.get_explicitMinWidth(),d=null==this.get_explicitMinHeight(),e=null==this.get_explicitMaxWidth(),g=null==this.get_explicitMaxHeight();null!=this._currentBackgroundSkin&&(Pr.resetFluidlyWithParent(this._backgroundSkinMeasurements,this._currentBackgroundSkin,this),K.__implements(this._currentBackgroundSkin,Ra)&&K.__cast(this._currentBackgroundSkin,Ra).validateNow());var k=this._autoSizeMode==To.CONTENT||null==this.stage,t=
0,u=0;if(!k){u=this.globalToLocal(new p);var A=this.globalToLocal(new p(this.stage.stageWidth,this.stage.stageHeight));t=A.x-u.x;u=A.y-u.y
		}this._layoutMeasurements.width=a&&!k?t:this.get_explicitWidth();this._layoutMeasurements.height=b&&!k?u:this.get_explicitHeight();a=this.get_explicitMinWidth();c&&(a=0);c=this.get_explicitMinHeight();d&&(c=0);d=this.get_explicitMaxWidth();e&&(d=1/0);e=this.get_explicitMaxHeight();g&&(e=1/0);null!=this._backgroundSkinMeasurements&&(null!=this._backgroundSkinMeasurements.width?
this._backgroundSkinMeasurements.width>a&&(a=this._backgroundSkinMeasurements.width):null!=this._backgroundSkinMeasurements.minWidth&&this._backgroundSkinMeasurements.minWidth>a&&(a=this._backgroundSkinMeasurements.minWidth),null!=this._backgroundSkinMeasurements.height?this._backgroundSkinMeasurements.height>c&&(c=this._backgroundSkinMeasurements.height):null!=this._backgroundSkinMeasurements.minHeight&&this._backgroundSkinMeasurements.minHeight>c&&(c=this._backgroundSkinMeasurements.minHeight));
this._layoutMeasurements.minWidth=a;this._layoutMeasurements.minHeight=c;this._layoutMeasurements.maxWidth=d;this._layoutMeasurements.maxHeight=e
	},handleLayout:function(){null!=this._currentLayout?this.handleCustomLayout():this.handleManualLayout();this.handleLayoutResult()
	},handleCustomLayout:function(){var a=this._ignoreChildChanges;this._ignoreChildChanges=!0;this._layoutResult.reset();this._currentLayout.layout(this.items,this._layoutMeasurements,this._layoutResult);this._ignoreChildChanges=a
	},
handleManualLayout:function(){var a=this._layoutMeasurements.width;null==a&&(a=0);var b=this._layoutMeasurements.height;null==b&&(b=0);var c=this._ignoreChildChanges;this._ignoreChildChanges=!0;for(var d=0,e=this.items;d<e.length;){var g=e[d
			];++d;if(!K.__implements(g,Ac)||K.__cast(g,Ac).get_includeInLayout()){K.__implements(g,Ra)&&K.__cast(g,Ra).validateNow();var k=g.get_x()+g.get_width();g=g.get_y()+g.get_height();a<k&&(a=k);b<g&&(b=g)
			}
		}this._ignoreChildChanges=c;this._layoutResult.contentX=0;this._layoutResult.contentY=
0;this._layoutResult.contentWidth=a;this._layoutResult.contentHeight=b;null!=this._layoutMeasurements.width?this._layoutResult.viewPortWidth=this._layoutMeasurements.width:(null!=this._layoutMeasurements.minWidth&&a<this._layoutMeasurements.minWidth?a=this._layoutMeasurements.minWidth:null!=this._layoutMeasurements.maxWidth&&a>this._layoutMeasurements.maxWidth&&(a=this._layoutMeasurements.maxWidth),this._layoutResult.viewPortWidth=a);null!=this._layoutMeasurements.height?this._layoutResult.viewPortHeight=
this._layoutMeasurements.height:(null!=this._layoutMeasurements.minHeight&&b<this._layoutMeasurements.minHeight?b=this._layoutMeasurements.minHeight:null!=this._layoutMeasurements.maxHeight&&b>this._layoutMeasurements.maxHeight&&(b=this._layoutMeasurements.maxHeight),this._layoutResult.viewPortHeight=b)
	},handleLayoutResult:function(){var a=this._layoutResult.viewPortWidth,b=this._layoutResult.viewPortHeight;this.saveMeasurements(a,b,a,b)
	},refreshMaskLayout:function(){null!=this._currentMaskSkin&&
(this._currentMaskSkin.set_x(0),this._currentMaskSkin.set_y(0),this._currentMaskSkin.set_width(this.actualWidth),this._currentMaskSkin.set_height(this.actualHeight),K.__implements(this._currentMaskSkin,Ra)&&K.__cast(this._currentMaskSkin,Ra).validateNow())
	},refreshBackgroundLayout:function(){null!=this._currentBackgroundSkin&&(this._currentBackgroundSkin.set_x(0),this._currentBackgroundSkin.set_y(0),this._currentBackgroundSkin.get_width()!=this.actualWidth&&this._currentBackgroundSkin.set_width(this.actualWidth),
this._currentBackgroundSkin.get_height()!=this.actualHeight&&this._currentBackgroundSkin.set_height(this.actualHeight),K.__implements(this._currentBackgroundSkin,Ra)&&K.__cast(this._currentBackgroundSkin,Ra).validateNow())
	},validateChildren:function(){K.__implements(this._currentBackgroundSkin,Ra)&&K.__cast(this._currentBackgroundSkin,Ra).validateNow();for(var a=0,b=this.items;a<b.length;){var c=b[a
			];++a;K.__implements(c,Ra)&&K.__cast(c,Ra).validateNow()
		}
	},layoutGroup_addedToStageHandler:function(a){this._autoSizeMode==
To.STAGE&&(this.setInvalid(ea.SIZE),this.addEventListener("removedFromStage",m(this,this.layoutGroup_removedFromStageHandler)),this.stage.addEventListener("resize",m(this,this.layoutGroup_stage_resizeHandler),!1,
		0,!0))
	},layoutGroup_removedFromStageHandler:function(a){this.removeEventListener("removedFromStage",m(this,this.layoutGroup_removedFromStageHandler));this.stage.removeEventListener("resize",m(this,this.layoutGroup_stage_resizeHandler))
	},layoutGroup_stage_resizeHandler:function(a){this.setInvalid(ea.SIZE)
	},
layoutGroup_child_resizeHandler:function(a){this._ignoreChildChanges||(this._ignoreChangesButSetFlags?this.setInvalidationFlag(ea.LAYOUT):this.setInvalid(ea.LAYOUT))
	},layoutGroup_child_layoutDataChangeHandler:function(a){this._ignoreChildChanges||(this._ignoreChangesButSetFlags?this.setInvalidationFlag(ea.LAYOUT):this.setInvalid(ea.LAYOUT))
	},layoutGroup_layout_changeHandler:function(a){this._ignoreLayoutChanges||(this._layoutActive?this._layoutChanged=!0:this._ignoreChangesButSetFlags?this.setInvalidationFlag(ea.LAYOUT):
this.setInvalid(ea.LAYOUT))
	},get_layout:function(){return this.__layout
	},set_layout:function(a){if(!this.setStyle("layout")||this.__layout==a)return this.__layout;this._previousClearStyle=m(this,this.clearStyle_layout);this.__layout=a;this.setInvalid(ea.STYLES);return this.__layout
	},clearStyle_layout:function(){this.set_layout(null);return this.get_layout()
	},get_backgroundSkin:function(){return this.__backgroundSkin
	},set_backgroundSkin:function(a){if(!this.setStyle("backgroundSkin")||this.__backgroundSkin==
a)return this.__backgroundSkin;this._previousClearStyle=m(this,this.clearStyle_backgroundSkin);this.__backgroundSkin=a;this.setInvalid(ea.STYLES);return this.__backgroundSkin
	},clearStyle_backgroundSkin:function(){this.set_backgroundSkin(null);return this.get_backgroundSkin()
	},get_disabledBackgroundSkin:function(){return this.__disabledBackgroundSkin
	},set_disabledBackgroundSkin:function(a){if(!this.setStyle("disabledBackgroundSkin")||this.__disabledBackgroundSkin==a)return this.__disabledBackgroundSkin;
this._previousClearStyle=m(this,this.clearStyle_disabledBackgroundSkin);this.__disabledBackgroundSkin=a;this.setInvalid(ea.STYLES);return this.__disabledBackgroundSkin
	},clearStyle_disabledBackgroundSkin:function(){this.set_disabledBackgroundSkin(null);return this.get_disabledBackgroundSkin()
	},get_maskSkin:function(){return this.__maskSkin
	},set_maskSkin:function(a){if(!this.setStyle("maskSkin")||this.__maskSkin==a)return this.__maskSkin;this._previousClearStyle=m(this,this.clearStyle_maskSkin);this.__maskSkin=
a;this.setInvalid(ea.STYLES);return this.__maskSkin
	},clearStyle_maskSkin:function(){this.set_maskSkin(null);return this.get_maskSkin()
	},get_styleContext:function(){return R
	},__class__:R,__properties__:l(Lc.prototype.__properties__,
	{set_xmlContent: "set_xmlContent",get_xmlContent: "get_xmlContent",get__numChildren: "get__numChildren",set_autoSizeMode: "set_autoSizeMode",get_autoSizeMode: "get_autoSizeMode",set_maskSkin: "set_maskSkin",get_maskSkin: "get_maskSkin",set_disabledBackgroundSkin: "set_disabledBackgroundSkin",
get_disabledBackgroundSkin: "get_disabledBackgroundSkin",set_backgroundSkin: "set_backgroundSkin",get_backgroundSkin: "get_backgroundSkin",set_layout: "set_layout",get_layout: "get_layout"
	})
});var OS=function(a,b){R.call(this);this._questSeason=a;this._assetLibraries=b;a="historical_allies/animation/historical_allies_animations";var c=b.h[a
	];null==c&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "'+(a+'" from LoadedReflibs.')));this._animations=c;a="historical_allies/window/historical_allies_window";
c=b.h[a
	];null==c&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "'+(a+'" from LoadedReflibs.')));this._allyWindowAssets=c;c=this._assetLibraries.h[
		"shared/buttons/buttons"
	];null==c&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "shared/buttons/buttons" from LoadedReflibs.'));this._buttonReflib=c;this._init()
};h[
	"de.innogames.strategycity.allies.view.AllyQuestSeasonItem"
]=OS;OS.__name__="de.innogames.strategycity.allies.view.AllyQuestSeasonItem";
OS.__super__=R;OS.prototype=l(R.prototype,
{getType:function(){return this._questSeason.type
	},animateIn:function(){var a=this,b=new p(this._progressIcon.get_width()/2,this._progressIcon.get_height()/2);O._to(this._progressIcon,.1,
		{transformAroundPoint: {pointIsLocal:!0,point:b,scaleX: 1.2,scaleY: 1.2
			},onComplete:function(){O._to(a._progressIcon,.15,
				{transformAroundPoint: {scaleX: 1,scaleY: 1,point:b,pointIsLocal:!0
					}
				})
			}
		})
	},animateOut:function(a){var b=this.getCompleteAnimation(),c=new R;c.addChild(b);b.set_x(5);
this._questRewardContainer.addChild(c);b.playDefaultAndDestroy(a,.5);this._questItemReward.animateOut()
	},getCompleteAnimation:function(){var a=new Wi("historical_allies_monthly_tasks_task_complete"),b=this._animations;a.setAnimationSequence("historical_allies_monthly_tasks_task_complete",
		[b.getImage("historical_allies_weekly_task_reward_animation_1"),b.getImage("historical_allies_weekly_task_reward_animation_2"),b.getImage("historical_allies_weekly_task_reward_animation_3"),b.getImage("historical_allies_weekly_task_reward_animation_4"),
b.getImage("historical_allies_weekly_task_reward_animation_5"),b.getImage("historical_allies_weekly_task_reward_animation_6"),b.getImage("historical_allies_weekly_task_reward_animation_7"),b.getImage("historical_allies_weekly_task_reward_animation_8"),b.getImage("historical_allies_weekly_task_reward_animation_9"),b.getImage("historical_allies_weekly_task_reward_animation_10"),b.getImage("historical_allies_weekly_task_reward_animation_11"),b.getImage("historical_allies_weekly_task_reward_animation_12"),
b.getImage("historical_allies_weekly_task_reward_animation_13"),b.getImage("historical_allies_weekly_task_reward_animation_14"),b.getImage("historical_allies_weekly_task_reward_animation_15"),b.getImage("historical_allies_weekly_task_reward_animation_16"),b.getImage("historical_allies_weekly_task_reward_animation_17"),b.getImage("historical_allies_weekly_task_reward_animation_18"),b.getImage("historical_allies_weekly_task_reward_animation_19"),b.getImage("historical_allies_weekly_task_reward_animation_20")
		]);
return a
	},_init:function(){this._backgroundContainer=new R;this._backgroundContainer.set_layout(new Ib);this._backgroundContainer.addChild(new B(this._allyWindowAssets.getImage("historical_allies_monthly_tasks_task_background")));this.addChild(this._backgroundContainer);var a=new B(this._allyWindowAssets.getImage("historical_allies_monthly_tasks_task_amount_flap"));a.set_x(8);a.set_y(-3);this._backgroundContainer.addChild(a);this._progressIcon=new C;this._progressIcon.set_x(a.get_x());var b=new B(this._allyWindowAssets.getImage("historical_allies_monthly_tasks_task_amount_flap_icon"));
b.set_x(b.get_x()+((a.get_width()-b.get_width())/2+5));b.set_y(3);this._progressIcon.addChild(b);this._backgroundContainer.addChild(this._progressIcon);a=new va;a.set_text(U.printf("%d/%d",F.get_value(this._questSeason.progress),this._questSeason.count));a.set_textFormat(Lf.fromSimpleTextFormat(P.getTextFormat(15655360,
		16,!0,
		0)));a.set_y(17);a.set_width(50);a.set_filters(ma.getAlliesQuestWindowDropShadow());this._progressIcon.addChild(a);this._questContentContainer=new R;this._questContentContainer.set_x(50);
this._questContentContainer.set_width(526);a=this._questContentContainer;b=new Xb;b.set_horizontalAlign(Sa.CENTER);b.set_paddingTop(10);b.set_paddingBottom(5);a.set_layout(b);this._backgroundContainer.addChild(this._questContentContainer);this._questTextContainer=new R;this._questContentContainer.addChild(this._questTextContainer);a=new B(this._allyWindowAssets.getImage("historical_allies_monthly_tasks_divider"));a.set_x(17);a.set_y(65);a.set_width(622);this._questContentContainer.addChild(a);this._createQuestTextBox();
this._createCollectedButton();this._questRewardContainer=new R;this._questRewardContainer.set_layoutData(qa.topRight(-2,
		-10));this._backgroundContainer.addChild(this._questRewardContainer);this._createReward()
	},_createQuestTextBox:function(){null!=this._questTextBox&&this._questTextContainer.removeChild(this._questTextBox);this._questTextBox=new va;this._questTextBox.set_textFormat(Lf.fromSimpleTextFormat(P.getTextFormat(4203536,
		16,!1,
		0)));this._questTextBox.set_verticalAlign(ta.MIDDLE);this._questTextBox.set_wordWrap(!0);
this._questTextBox.set_height(65);this._questTextContainer.addChild(this._questTextBox);this._questTextBox.set_text(this._questSeason.isQuestSeasonCompleted()?r.gettext("HA|Reward obtained!\nThis quest group is finished."): "")
	},_createCollectedButton:function(){if(this._questSeason.isQuestSeasonCompleted()){var a=new pc(this._buttonReflib.getImage("smallDefaultDisabled"),this._buttonReflib.getImage("smallDefaultDisabled"),this._buttonReflib.getImage("smallDefaultDisabled"),this._buttonReflib.getImage("smallDefaultDisabled"));
a.set_y(86);a.set_x(247);a.setSize(136,
			35);a.setText(r.gettext("Collected"),
			14412231,!0,
			13);a.set_enabled(!1);this._backgroundContainer.addChild(a);a=new aa("checkmark_big",
			41);a.set_x(361);a.set_y(78);this._backgroundContainer.addChild(a)
		}
	},_createReward:function(){this._questItemReward=new pdb(this._assetLibraries,this._questSeason.isQuestSeasonCompleted());this._questRewardContainer.addChild(this._questItemReward);this._questRewardContainer.validateNow()
	},__class__:OS
});var G7=function(){};h[
	"de.innogames.strategycity.shared.ui.questoverview.IQuestItem"
]=
G7;G7.__name__="de.innogames.strategycity.shared.ui.questoverview.IQuestItem";G7.__isInterface__=!0;G7.prototype={__class__:G7,__properties__: {get_isViewReady: "get_isViewReady",get_quest: "get_quest",get_questId: "get_questId",get_buttonOk: "get_buttonOk"
	}
};var tN=function(a,b,c,d){null==d&&(d=!1);this._questId=0;OS.call(this,b,c);this._assetLibraries=c;b=this._assetLibraries.h[
		"shared/quests/gui/quests_gui"
	];null==b&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "shared/quests/gui/quests_gui" from LoadedReflibs.'));
this._questReflib=b;this._quest=a;this._buttonContainer=new R;this._questContentContainer.addChild(this._buttonContainer);this._createContent();d&&this.animateIn()
};h[
	"de.innogames.strategycity.allies.view.AllyQuestItem"
]=tN;tN.__name__="de.innogames.strategycity.allies.view.AllyQuestItem";tN.__interfaces__=[G7
];tN.__super__=OS;tN.prototype=l(OS.prototype,
{updateQuest:function(a){this._quest=a;this._createRequirements();this._createQuestText();this._createCollectButton()
	},enableButtons:function(a){this.enableOkButton(a)
	},
enableAbortButton:function(a){},enableChildButtons:function(a){},enableOkButton:function(a){null!=this._buttonOk&&this._buttonOk.set_enabled(a)
	},remove:function(){},get_buttonOk:function(){return this._buttonOk
	},get_questId:function(){return this._quest.get_id()
	},get_quest:function(){return this._quest
	},get_isViewReady:function(){return!0
	},_createContent:function(){this._createQuestText();this._createRequirements();this._createCollectButton();this._questContentContainer.validateNow();this._questItemReward.setRewards(this._quest.get_rewards())
	},
_createQuestText:function(){var a=this._quest;a=a instanceof zx?a:null;if(null!=a&&"collectReward"==a.get_state()&&!a.get_isAutoCompleted()&&Mj.isCounterQuest(this._quest))a=r.gettext("HA|Collect your reward!");else{
			1<this._quest.get_conditionGroups().length&&(a="Quest ("+this._quest.get_id()+") unexpectedly have more than 1 condition group",null!=y._reportError&&y._reportError(Error("[LOGGER] "+a)));a=this._quest.get_conditionGroups()[
				0
			];for(var b=this._quest.get_requirements(),c=Array(b.length),
d=0,e=b.length;d<e;){var g=d++;c[g
				]=b[g
				].description
			}a=c.join(" "+Mj.getQuestConditionConnectorText(a)+" ")
		}this._questTextBox.set_text(a)
	},_createRequirements:function(){this._disposeRequirementGroups();if(!(this._canShowCollectButton()&&Mj.isCounterQuest(this._quest)||null==this._quest.get_requirements()))for(var a=0,b=this._quest.get_conditionGroups();a<b.length;)this._requirementGroup=new zla(b[a++
		],this._quest,this._allyWindowAssets),this._requirementGroup.hasAnyRequirementItem()&&this._buttonContainer.addChild(this._requirementGroup)
	},
_disposeRequirementGroups:function(){null!=this._buttonContainer&&this._buttonContainer.removeChildren()
	},_canShowCollectButton:function(){return this._quest instanceof zx?"accepted"!=this._quest.get_state():!1
	},_createCollectButton:function(){null!=this._buttonOk&&this._buttonContainer.contains(this._buttonOk)&&this._buttonContainer.removeChild(this._buttonOk);this._canShowCollectButton()&&Mj.isCounterQuest(this._quest)&&(this._buttonOk=new pc(this._buttonReflib.getImage("greenUp"),this._buttonReflib.getImage("greenDown"),
this._buttonReflib.getImage("greenOver")),this._buttonOk.setSize(136,
		35),this._buttonOk.set_id("collect"),this._buttonOk.setText(r.gettext("Collect"),
		14412231,!0,
		13),this._buttonOk.set_y(15),this._buttonContainer.addChild(this._buttonOk))
	},__class__:tN,__properties__:l(OS.prototype.__properties__,
	{get_isViewReady: "get_isViewReady",get_quest: "get_quest",get_questId: "get_questId",get_buttonOk: "get_buttonOk"
	})
});var Ga=function(){};h[
	"org.robotlegs.utilities.modular.mvcs.ModuleMediator"
]=Ga;Ga.__name__=
"org.robotlegs.utilities.modular.mvcs.ModuleMediator";Ga.__instantiate=function(a){return new Ga
};Ga.__super__=V;Ga.prototype=l(V.prototype,
{addModuleListener:function(a,b,c,d,e,g){null==g&&(g=!0);null==e&&(e=0);null==d&&(d=!1);this.get_eventMap().mapListener(this.moduleDispatcher,a,b,c,d,e,g)
	},dispatchToModules:function(a){return this.moduleDispatcher.hasEventListener(a.type)?this.moduleDispatcher.dispatchEvent(a):!1
	},__construct:function(a){V.prototype.__construct.call(this,a);this.moduleDispatcher=
a.getInstanceForMapping("org.robotlegs.utilities.modular.core.IModuleEventDispatcher");this.moduleCommandMap=a.getInstanceForMapping("org.robotlegs.utilities.modular.core.IModuleCommandMap");return null
	},__class__:Ga
});var PS=function(){this._aborted=!1
};h[
	"de.innogames.strategycity.shared.ui.questoverview.QuestItemMediator"
]=PS;PS.__name__="de.innogames.strategycity.shared.ui.questoverview.QuestItemMediator";PS.__instantiate=function(a){return new PS
};PS.__super__=Ga;PS.prototype=l(Ga.prototype,
{onRegister:function(){this.addViewListener("ButtonEvent/clicked",m(this,this._onButtonClicked));this.addContextListener("QuestOverviewModelEvent/UPDATE",m(this,this._onQuestUpdate));this.addModuleListener("QuestOverviewModelEvent/UPDATE",m(this,this._onQuestUpdate));this.addModuleListener("QuestOverviewModelEvent/REMOVED_QUESTS",m(this,this._onQuestsRemoved));this.addModuleListener("QuestAbortLimitReachedEvent/TYPE",m(this,this._onQuestAbortFailed));this.addContextListener("ChallengeEvent/CHALLENGE_UPDATED",
m(this,this._onChallengeUpdated));this._view.get_isViewReady()?this._onViewReady(null):this.addViewListener("QuestItem/VIEW_READY",m(this,this._onViewReady))
	},_onChallengeUpdated:function(a){a.get_challengeId()==this._view.get_questId()&&(a=this._challengeModel.getChallengeById(a.get_challengeId()),this._view.updateQuest(a),this._view.enableButtons(!0))
	},_onQuestUpdate:function(a){var b=0;for(a=a.quests;b<a.length;){var c=a[b
			];++b;if(c.get_id()==this._view.get_questId()){this._view.updateQuest(c);
this._view.enableButtons(!0);break
			}
		}
	},_onQuestsRemoved:function(a){var b=0;for(a=a.quests;b<a.length;)a[b++
		].get_id()==this._view.get_questId()&&this._view.remove()
	},_onQuestAbortFailed:function(a){this._aborted&&(this._aborted=!1,this._questModel.addLastAbortedQuestToCollections(),this._view.enableButtons(!0))
	},_onButtonClicked:function(a){switch(a.id){case "abort":this._buttonAbortClicked();break;case "collect":this._view.enableButtons(!1);this._buttonCollectClicked();break;case "open":this._buttonOpenClicked();
break;case "pay":this._view.enableButtons(!1),this._buttonPayClicked()
		}
	},_onViewReady:function(a){var b=this;a=this._view.get_buttonOk();this._tutorialModel.get_isFirstSessionTutorialRunning()&&null!=a&&(a.set_enabled(!1),a.set_clickDelayEnabled(!1),hg.listenOnce(this.get_eventDispatcher(),
		"QuestOverview/ANIMATION_COMPLETE",function(c){b._view.enableOkButton(!0)
		}))
	},_buttonOpenClicked:function(){this._view.get_quest().hasSuccessConditionFlag("name_change")&&this.dispatch(new Ala("RevealYourselfPopupEvent/SHOW",
this._view.get_quest().get_title()))
	},_buttonCollectClicked:function(){if(this._view.get_quest()instanceof zx){var a=[],b=0,c=this._view.get_quest();for(c=(c instanceof zx?c:null).get_rewards();b<c.length;)a.push(c[b++
			].get_genericRewardVo());this._handleCollectionRestictedRewards(a)&&(this._view.remove(),this.dispatch(new Tv("QuestItemEvent/QUEST_ADVANCED",this._view.get_questId())))
		}else if(this._view.get_quest()instanceof Ax){a=[];b=0;c=this._view.get_quest();for(c=(c instanceof Ax?c:null).get_rewards();b<
c.length;)a.push(c[b++
			].get_genericRewardVo());this._handleCollectionRestictedRewards(a)&&(this._view.remove(),this.dispatch(new dm("ChallengeEvent/COLLECT_REWARD",this._view.get_quest().get_id())))
		}
	},_handleCollectionRestictedRewards:function(a){for(var b=0;b<a.length;){var c=a[b
			];++b;if("chest"==c.type){for(var d=[],e=0,g=(c instanceof Uv?c:null).possible_rewards;e<g.length;)d.push(g[e++
				].reward);if(!this._handleCollectionRestictedRewards(d))return!1
			}if("resource"==c.type&&(d=this._resourcesModel.getActiveAbilityForResource("collectingRestricted",
c.subType),null!=d&&!d.overflowAllowed&&(e=d.maxAmount,this._resourcesModel.getResourceValueById(c.subType)+c.amount>e)))return this._displayCollectionRestrictedRewardDialog(d.overflowErrorMessageTitle,d.overflowErrorMessage),!1
		}return!0
	},_displayCollectionRestrictedRewardDialog:function(a,b){var c=r.gettext("OK"),d=this._view;this.dispatch(new ha("WindowEvent/ADD_WINDOW",new Ya({title:a,content:Ma.Text(b),buttons:eb.SingleButton({kind:Ia.Orange,text:c,callback:Rb.fromSimple(function(){d.enableButtons(!0)
				})
			}),
closeable:hb.No
		})))
	},_buttonPayClicked:function(){this.dispatch(new Tv("QuestItemEvent/QUEST_ADVANCED",this._view.get_questId()))
	},_buttonAbortClicked:function(){var a=this;if(this._userDataModel.get_settingsVO().requireQuestAbortConfirmation){var b="generic"==this._view.get_quest().get_type()?r.gettext("Do you really want to abort this Quest? You will be able to complete it another time."):r.gettext("Do you really want to abort this Quest? You cannot undo this action!"),c=I._new(!1);this.dispatch(new ha("WindowEvent/ADD_WINDOW",
new Ya({title:r.gettext("Abort Quest"),closeable:hb.Yes,content:Ma.Multiple([Ma.TextAndImage(b,Dc.Url("/assets/shared/icons/dialog/cancel.jpg")),Ma.Checkbox(Ya.NEVER_ASK_AGAIN_LABEL,c)
				]),buttons:eb.TwoButtons({kind:Ia.Orange,text:r.gettext("Keep Quest")
				},
				{kind:Ia.Red,text:r.gettext("Abort Quest"),callback:Rb.fromSimple(function(){a._commenceAbort(I.get_value(c))
					})
				})
			})))
		}else this._commenceAbort(!1)
	},_commenceAbort:function(a){a&&(this._userDataModel.get_settingsVO().requireQuestAbortConfirmation=
!1,this._settingsService.updateSettings(this._userDataModel.get_settingsVO()));this._aborted=!0;O.killTweensOf(this._view);this._view.enableButtons(!1);this.dispatch(new ue("CityUiEvent/SHOW_LOADER"));this.dispatch(new Tv("QuestItemEvent/QUEST_ITEM_ABORTED",this._view.get_questId()));this._view.remove()
	},_removeQuest:function(){this._view.remove()
	},__construct:function(a){Ga.prototype.__construct.call(this,a);this._view=a.getInstanceForMapping("de.innogames.strategycity.shared.ui.questoverview.IQuestItem");
this._questModel=a.getInstanceForMapping("de.innogames.strategycity.shared.model.quests.QuestModel");this._questService=a.getInstanceForMapping("de.innogames.strategycity.shared.service.IQuestDataService");this._tutorialModel=a.getInstanceForMapping("de.innogames.strategycity.shared.model.ContextBasedTutorialDataModel");this._challengeModel=a.getInstanceForMapping("de.innogames.strategycity.shared.model.ChallengeModel");this._userDataModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.UserDataModel");
this._settingsService=a.getInstanceForMapping("de.innogames.strategycity.main.service.SettingsService");this._resourcesModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ResourcesModel");return null
	},__class__:PS
});var Bla=function(){this._aborted=!1
};h[
	"de.innogames.strategycity.allies.view.AllyQuestItemMediator"
]=Bla;Bla.__name__="de.innogames.strategycity.allies.view.AllyQuestItemMediator";Bla.__instantiate=function(a){return new Bla
};Bla.__super__=PS;Bla.prototype=l(PS.prototype,
{_onQuestUpdate:function(a){var b=0;for(a=a.quests;b<a.length;){var c=a[b
			];++b;if(c.get_id()==this._view.get_questId()){this._view.updateQuest(c);Mj.isCounterQuest(c)||"collectReward"!=c.get_state()?this._view.enableButtons(!0):this._autoCollectQuest();break
			}
		}
	},_onViewReady:function(a){PS.prototype._onViewReady.call(this,a);a=this._view.get_quest();Mj.isCounterQuest(a)||"collectReward"!=a.get_state()||this._autoCollectQuest()
	},_autoCollectQuest:function(){this._view.remove();this.dispatch(new Tv("QuestItemEvent/QUEST_ADVANCED",
this._view.get_questId()))
	},_isAutoCollectable:function(a){return Mj.isCounterQuest(a)?!1: "collectReward"==a.get_state()
	},__class__:Bla
});var Hp=function(){this._requirementButtonPadding=14;this._isRequirementDone=this._hasProgressbar=this._hasTimer=this._drawBackground=this._initialized=!1;this._questId=0;C.call(this);this._init()
};h[
	"de.innogames.strategycity.shared.ui.questoverview.requirement.QuestItemRequirement"
]=Hp;Hp.__name__="de.innogames.strategycity.shared.ui.questoverview.requirement.QuestItemRequirement";
Hp.__super__=C;Hp.prototype=l(C.prototype,
{prepareInstance:function(a,b,c,d,e){this._initialized?(this._quest=b,this._questId=b.get_id(),this._requirementType=c,this._drawBackground=d,this.update(a,b)):this._initializeData(a,b,c,d,e)
	},update:function(a,b){this._quest=b;this._questId=b.get_id();this._requirement=a;this._setFlagsAndProperties();this._background.setBackground(this._drawBackground,this._isRequirementDone,this._questReflib);this._requirementActuator.setRequirement(a,this._questId);this._updateDescription();
this._updateProgressBar();this._updateTimer();this._updateIcon();this._reposition();this.dispatchEvent(new D("QuestItemRequirement/REQUIREMENT_UPDATED"))
	},dispose:function(){null!=this.parent&&this.parent.removeChild(this);null!=this._requirementContainer&&(this._requirementContainer.removeChildren(),this._requirementContainer=null);null!=this._progressBar&&(ct.releaseInstance(this._progressBar),this._progressBar=null);null!=this._icon&&(this.removeChild(this._icon),this._icon=null);null!=this._background&&
(this._background.dispose(),this._background=null);null!=this._requirementActuator&&(this._requirementActuator.dispose(),this._requirementActuator=null);this._timer=this._description=this._iconReflib=this._questReflib=null
	},reset:function(){this._isRequirementDone=!1
	},get_requirement:function(){return this._requirement
	},get_timer:function(){return this._timer
	},get_questId:function(){return this._questId
	},get_requirementType:function(){return this._requirementType
	},get_requirementActuator:function(){return this._requirementActuator
	},
_init:function(){this._requirementContainer=new C;this.addChild(this._requirementContainer)
	},_initializeData:function(a,b,c,d,e){this._drawBackground=d;this._requirement=a;this._questId=b.get_id();this._quest=b;this._requirementType=c;a=e.h[
			"shared/quests/gui/quests_gui"
		];null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "shared/quests/gui/quests_gui" from LoadedReflibs.'));this._questReflib=a;a=e.h[
			"shared/icons/icons"
		];null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "shared/icons/icons" from LoadedReflibs.'));
this._iconReflib=a;this._setFlagsAndProperties();this._createContent();this._initialized=!0;this.dispatchEvent(new D("QuestItemRequirement/REQUIREMENT_UPDATED"))
	},_setFlagsAndProperties:function(){this._isRequirementDone=this._requirement.isConditionFullfilled();this._hasProgressbar=1<this._requirement.maxProgress&&0>=this._requirement.waitUntil;this._hasTimer=0<this._requirement.waitUntil
	},_createContent:function(){this._createBackground();this._createDescription();this._createIcon();this._createProgressBar();
this._requirementActuator=new Cla(this);this._requirementActuator.setRequirement(this._requirement,this._questId);this._createTimer();this._addAdditionalContent();this._reposition()
	},_addAdditionalContent:function(){},_reposition:function(){var a=this.getContentHeight();this._background.setSize(this._getWidth(),a);this._hasProgressbar?(this._description.set_y(6),this._progressBar.set_x(this._description.get_x()),this._progressBar.set_y(this._description.get_y()+this._description.get_height()+5)):
this._hasTimer?(this._description.set_y(4),this._timer.set_y(this._description.get_y()+this._description.get_height()+5)):this._description.set_y(Math.round(.5*(a-this._description.get_height())));this._icon.set_y(Math.round(.5*a));this._requirementActuator.repositionTo(this._getWidth()-this._requirementButtonPadding,this._requirementContainer.get_height())
	},_getWidth:function(){return 383
	},getContentHeight:function(){var a=this._description.get_height()+15;null!=this._progressBar&&(a+=this._progressBar.get_height());
return Math.max(a,
		59)
	},_createDescription:function(){this._description=P.createArialTextfield(this._isRequirementDone?16446953: 4203536,!0);this._description.set_x(50);this._description.set_width(285);this._description.set_height(80);this._description.set_autoSize(1);this._description.set_multiline(this._description.set_wordWrap(!0));0==this._requirement.waitUntil?this._description.set_text(this._requirement.description):this._description.set_text(r.gettext("QUEST|Come back in:"));this._requirementContainer.addChild(this._description)
	},
_updateDescription:function(){var a=this._isRequirementDone?16446953: 4203536;0==this._requirement.waitUntil?this._description.set_text(this._requirement.description):this._description.set_text(r.gettext("QUEST|Come back in:"));var b=this._description.getTextFormat();b.color=a;this._description.setTextFormat(b)
	},_createTimer:function(){this._hasTimer&&(null!=this._timer?this._requirementContainer.contains(this._timer)||this._requirementContainer.addChild(this._timer):(this._timer=P.createArialTextfield(4203536,
!0),this._timer.set_x(50),this._timer.set_width(285),this._timer.set_height(80),this._timer.set_autoSize(1),this._requirementContainer.addChild(this._timer)))
	},_updateTimer:function(){this._hasTimer||null==this._timer?this._createTimer():this._requirementContainer.contains(this._timer)&&this._requirementContainer.removeChild(this._timer)
	},_createBackground:function(){this._background=new qdb(this._drawBackground,this._isRequirementDone,this._questReflib);this._requirementContainer.addChild(this._background)
	},
_createIcon:function(){this._icon=new Ed;this._updateIcon();this.addChild(this._icon)
	},_updateIcon:function(){var a=this._requirement.iconType;this._iconReflib.hasImage(a)?(a=new B(this._iconReflib.getImage(a)),a.set_y(Math.round(.5*-a.get_height())),this._icon.setPicture(a),this._icon.addChild(a),this._icon.set_x(10)):(0<this._requirement.waitUntil?this._icon.loadPicture("/assets/shared/icons/icon_time.png",m(this,this._onIconAdded)):this._icon.loadPicture("/assets/shared/icons/quest_icons/"+a+".png",
m(this,this._onIconAdded)),this._icon.set_x(25))
	},_onIconAdded:function(){this._reposition()
	},_createProgressBar:function(){this._hasProgressbar&&null==this._progressBar&&(this._progressBar=ct.getInstance(),this._progressBar.updateProgress(this._requirement.currentProgress,this._requirement.maxProgress),this._requirementContainer.addChild(this._progressBar))
	},_updateProgressBar:function(){this._hasProgressbar?(this._createProgressBar(),this._progressBar.updateProgress(this._requirement.currentProgress,
this._requirement.maxProgress)):null!=this._progressBar&&(this._requirementContainer.removeChild(this._progressBar),ct.releaseInstance(this._progressBar),this._progressBar=null)
	},__class__:Hp,__properties__:l(C.prototype.__properties__,
	{get_requirementActuator: "get_requirementActuator",get_requirementType: "get_requirementType",get_questId: "get_questId",get_timer: "get_timer",get_requirement: "get_requirement"
	})
});var Dla=function(a){this._allyWindowAssets=a;Hp.call(this)
};h[
	"de.innogames.strategycity.allies.view.AllyQuestItemRequirement"
]=
Dla;Dla.__name__="de.innogames.strategycity.allies.view.AllyQuestItemRequirement";Dla.__super__=Hp;Dla.prototype=l(Hp.prototype,
{setAllyQuestPeriodWindowModel:function(a){this._allyQuestPeriodWindowModel=a
	},_createContent:function(){this._allyRequirementActuator=new rdb(this);this._allyRequirementActuator.setRequirement(this._requirement,this._questId);this._allyRequirementActuator.setAllyQuestPeriodWindowModel(this._allyQuestPeriodWindowModel);this._requirementActuator=this._allyRequirementActuator
	},
getButtonWidth:function(){return this._allyRequirementActuator.get_width()
	},getButtonHeight:function(){return this._allyRequirementActuator.get_height()
	},__class__:Dla
});var pdb=function(a,b){this._rewardContainer=new C;this._container=new C;R.call(this);a=a.h[
		"historical_allies/window/historical_allies_window"
	];null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "historical_allies/window/historical_allies_window" from LoadedReflibs.'));this._allyWindowAssets=a;this._isRewardsObtained=
b;this._createContent();this.addChild(this._container)
};h[
	"de.innogames.strategycity.allies.view.AllyQuestItemRewards"
]=pdb;pdb.__name__="de.innogames.strategycity.allies.view.AllyQuestItemRewards";pdb.__super__=R;pdb.prototype=l(R.prototype,
{setRewards:function(a){this._rewards=a;this._createTitle();this._createRewards()
	},_createContent:function(){var a=new B(this._allyWindowAssets.getImage("historical_allies_monthly_tasks_task_reward_flap"));this.set_width(a.get_width());this.set_height(a.get_height());
this.set_backgroundSkin(a);this._isRewardsObtained&&(a=new va,a.set_text(r.gettext("HA|Reward obtained")),a.set_textFormat(new Mb("_sans",
		18,
		15655360,!0,
		null,
		null,
		null,
		null,
		0)),a.set_filters(ma.getAlliesQuestWindowDropShadow()),a.set_width(this.get_width()),a.set_y(31),a.set_wordWrap(!0),this._container.addChild(a))
	},_createTitle:function(){var a=new va;a.set_y(3);a.set_width(this.get_width());a.set_textFormat(new Mb("_sans",
		16,
		15655360,!0,
		null,
		null,
		null,
		null,
		0));a.set_filters(ma.getAlliesQuestWindowDropShadow());
a.set_text(r.ngettext("Reward",
		"Rewards",this._rewards.length));this._container.addChild(a);a=new B(this._allyWindowAssets.getImage("historical_allies_monthly_tasks_banner_underscore"));a.set_x(20);a.set_y(28);this._container.addChild(a)
	},animateOut:function(){for(var a=.7/this._rewards.length,b=0,c=this._rewards.length;b<c;){var d=b++;O._to(this._rewardContainer.getChildAt(this._rewards.length-d-1),a,
			{alpha: 0,delay:d*a
			})
		}
	},_createRewards:function(){for(var a=(this.get_width()-60)/2,b=1==this._rewards.length?
50: 25,c=0,d=this._rewards;c<d.length;){var e=new kXa(d[c++
			]);e.set_x(a);e.set_y(b);this._rewardContainer.addChild(e);b+=60
		}this._container.addChild(this._rewardContainer);this._animateIn(a,
		50)
	},_animateIn:function(a,b){var c=this,d=new p(a+30,b+30);O._to(this._rewardContainer,.1,
		{transformAroundPoint: {pointIsLocal:!0,point:d,scaleX: 1.2,scaleY: 1.2
			},onComplete:function(){O._to(c._rewardContainer,.15,
				{transformAroundPoint: {scaleX: 1,scaleY: 1,point:d,pointIsLocal:!0
					}
				})
			}
		})
	},__class__:pdb
});var PZ=function(a,
b,c){this._questBindings=new Pb;this._firstTimeRender=!0;this._questItems=[];this._questContainer=new R;this._periodQuestsContainer=new C;this._contentContainer=new C;var d=this;ca.call(this);this._allyQuestPeriodModel=a;this._allyQuestPeriodWindowModel=b;this._assetLibraries=c;a=c.h[
		"historical_allies/window/historical_allies_window"
	];null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "historical_allies/window/historical_allies_window" from LoadedReflibs.'));this._allyWindowAssets=
a;this._onStageHandler=new Qa(this);this.set_headline(r.gettext("HA|Heroic Endeavors"));this.addHelpButton(function(e){d._allyQuestPeriodWindowModel.showHelp()
	});this._contentContainer.addChild(new B(this._allyWindowAssets.getImage("historical_allies_pillar_wallpaper")));this._setContentSize(846,
	522);this._contentContainer.addEventListener("resize",function(e){d._setContentSize(846,
		522)
	});a=new Ua;a.set_paddingLeft(a.set_paddingTop(2));a.addContent(this._contentContainer);a.setSize(850,
	526);this.addContent(a);
this._allyQuestPeriodModel.hasQuestPeriod()&&this._addContent()
};h[
	"de.innogames.strategycity.allies.view.AllyQuestPeriodWindow"
]=PZ;PZ.__name__="de.innogames.strategycity.allies.view.AllyQuestPeriodWindow";PZ.__super__=ca;PZ.prototype=l(ca.prototype,
{_addContent:function(){this._addPeriodQuestsContainer()
	},_addPeriodQuestsContainer:function(){var a=this;this._periodQuestsContainer.set_x(22);this._periodQuestsContainer.set_y(12);var b=new sc(this._allyWindowAssets.getImage("historical_allies_ally_inventory_background_slice"),
new Z(6,
		6,
		16,
		16));b.set_width(800);b.set_height(510);this._periodQuestsContainer.addChild(b);this._scrollContainer=new sdb(new R,
		800,
		510,this._allyWindowAssets);this._addQuests();this._periodQuestsContainer.addChild(this._scrollContainer);this._contentContainer.addChild(this._periodQuestsContainer);this._onStageHandler.add(function(){return F.bind(a._allyQuestPeriodModel.getPeriodRemainingTime(),function(c){a._scrollContainer.get_timeLeftLabel().set_text(xb.timerCountdownFormat(c))
			})
		})
	},_addQuests:function(){var a=
this,b=this._questContainer,c=new Xb;c.set_horizontalAlign(Sa.CENTER);c.set_gap(10);b.set_layout(c);this._questContainer.set_x(36);this._scrollContainer.setContent(this._questContainer);this._allyQuestPeriodModel.pushCompletedQuestSeasonsToBack();this._questItems=[];this._questContainer.removeChildren();this._onStageHandler.add(function(){return F.bind(a._allyQuestPeriodModel.get_currentQuests(),m(a,a._onAllyQuestsUpdated))
		})
	},_onAllyQuestsUpdated:function(a){for(var b=this,c=[],d=this._questBindings.keys();d.hasNext();)c.push(d.next());
d=[];for(var e=0;e<c.length;){var g=c[e
			];++e;cf.exists(a,function(t){return function(u){return F.get_value(u).get_id()==t[
						0
					]
				}
			}([g
			]))||d.push(g)
		}var k=d.length;for(c=0;c<d.length;)e=[d[c
			]
		],++c,g=this._questBindings.h[e[
				0
			]
		],null!=g&&g.cancel(),this._questBindings.remove(e[
			0
		]),e=[cf.find(this._questItems,function(t){return function(u){return u instanceof tN?K.__cast(u,tN).get_quest().get_id()==t[
						0
					]:!1
				}
			}(e))
		],null!=e[
			0
		]&&e[
			0
		].animateOut(function(t){return function(){Wa.remove(b._questItems,t[
					0
				]);b._questContainer.removeChild(t[
					0
				]);
--k;0==k&&b._processNewOrCompletedQuests(a)
			}
		}(e));0==k&&this._processNewOrCompletedQuests(a);this._scrollContainer.update();this._firstTimeRender=!1
	},_processNewOrCompletedQuests:function(a){this._processNewQuests(a);this._processCompletedSeasons();this._resortQuestItems()
	},_processNewQuests:function(a){for(var b=[],c=0;c<a.length;){var d=a[c
			];++c;var e=this._questBindings,g=F.get_value(d).get_id();e.h.hasOwnProperty(g)||b.push(d)
		}for(c=0;c<b.length;)this._updateQuestWithBinding(b[c++
		])
	},_processCompletedSeasons:function(){for(var a=
0,b=this._allyQuestPeriodModel.getQuestSeasons();a<b.length;){var c=[b[a
				]
			];++a;!cf.exists(this._questItems,function(d){return function(e){return e.getType()==d[
						0
					].type
				}
			}(c))&&c[
				0
			].isQuestSeasonCompleted()&&this._createQuestSeasonItem(c[
				0
			].type,!1)
		}
	},_updateQuestWithBinding:function(a){var b=this,c=this._questBindings,d=F.get_value(a).get_id();if(c.h.hasOwnProperty(d))F.get_value(a).get_id();else{c=this._questBindings;d=F.get_value(a).get_id();var e=F.bind(a,function(g){b._onQuestUpdated(a,!b._firstTimeRender)
			});
c.h[d
			]=e
		}
	},_onQuestUpdated:function(a,b){null==cf.find(this._questItems,function(c){return c instanceof tN?K.__cast(c,tN).get_quest()==F.get_value(a):!1
		})&&this._createQuestSeasonItem(F.get_value(a).get_type(),b)
	},_createQuestSeasonItem:function(a,b){var c=this._allyQuestPeriodModel.getQuestSeason(a);b=F.get_value(c).isQuestSeasonCompleted()?new OS(F.get_value(c),this._assetLibraries):new tN(this._allyQuestPeriodModel.getQuestByType(a),F.get_value(c),this._assetLibraries,b);a=this._allyQuestPeriodModel.getQuestSeasonIndex(a);
a=Math.min(a,this._questItems.length)|0;this._questItems.splice(a,
		0,b);a=Math.min(a,this._questContainer.get_numChildren())|0;this._questContainer.addChildAt(b,a);this._resortQuestItems()
	},_resortQuestItems:function(){var a=this,b=this._questItems.slice();b.sort(function(k,t){return a._allyQuestPeriodModel.getQuestSeasonIndex(k.getType())-a._allyQuestPeriodModel.getQuestSeasonIndex(t.getType())
		});for(var c=0,d=b.length;c<d;){var e=c++,g=b[e
			];g.parent==this._questContainer&&this._questContainer.getChildIndex(g)!=
e&&this._questContainer.setChildIndex(g,e)
		}this._questItems=b;this._questContainer.validateNow()
	},dispose:function(){for(var a=this._questBindings.iterator();a.hasNext();){var b=a.next();null!=b&&b.cancel()
		}this._questBindings.h={};ca.prototype.dispose.call(this)
	},__class__:PZ
});var Cla=function(a){this._stage=a
};h[
	"de.innogames.strategycity.shared.ui.questoverview.requirement.actuators.QuestRequirementActuatorManager"
]=Cla;Cla.__name__="de.innogames.strategycity.shared.ui.questoverview.requirement.actuators.QuestRequirementActuatorManager";
Cla.prototype={_initializeMappings:function(){this._actuatorMappings=[new Ela,new H7,new I7,new J7,new K7,new L7
		]
	},setRequirement:function(a,b){var c=this._getActuatorForRequirement(a);null!=this._activeActuator&&(this._stage.removeChild(this._activeActuator.get_asDisplayObject()),this._activeActuator.dispose(),this._activeActuator=null);null!=c&&(this._activeActuator=c,this._activeActuator.setData(a,b),this._stage.addChild(this._activeActuator.get_asDisplayObject()))
	},repositionTo:function(a,b){null!=
this._activeActuator&&this._activeActuator.repositionTo(a,b)
	},enableButtons:function(a){null!=this.get_activeActuator()&&(this.get_activeActuator()instanceof L7||this.get_activeActuator().set_enabled(a))
	},enableParentGroupButtons:function(a){null!=this._stage&&null!=this._stage.parent&&K.__cast(this._stage.parent,QS).enableButtons(a)
	},dispose:function(){null!=this._activeActuator&&this._activeActuator.dispose();this._stage=this._activeActuator=null
	},get_activeActuator:function(){return this._activeActuator
	},
_getActuatorForRequirement:function(a){null==this._actuatorMappings&&this._initializeMappings();for(var b=0,c=this._actuatorMappings;b<c.length;){var d=c[b
			];++b;if(d.appliesToRequirement(a))return d.getInstance()
		}return null
	},__class__:Cla,__properties__: {get_activeActuator: "get_activeActuator"
	}
};var rdb=function(a){this._stage=a
};h[
	"de.innogames.strategycity.allies.view.AllyQuestRequirementActuatorManager"
]=rdb;rdb.__name__="de.innogames.strategycity.allies.view.AllyQuestRequirementActuatorManager";
rdb.__super__=Cla;rdb.prototype=l(Cla.prototype,
{_initializeMappings:function(){this._actuatorMappings=[new Fla,new lXa,new mXa,new vC
		]
	},setAllyQuestPeriodWindowModel:function(a){if(null!=this._activeActuator){var b=this._activeActuator;b=b instanceof dt?b:null;null!=b&&b.setAllyQuestPeriodWindowModel(a)
		}
	},get_width:function(){var a=this._activeActuator;return(null!=a?a.get_actuatorWidth(): 0)|0
	},get_height:function(){var a=this._activeActuator;return(null!=a?a.get_actuatorHeight(): 0)|0
	},__class__:rdb,
__properties__:l(Cla.prototype.__properties__,
	{get_height: "get_height",get_width: "get_width"
	})
});var zla=function(a,b,c){R.call(this);this._groupCondition=a;this._questReflib=yb.getInstance().getGUIReflib("shared/quests/gui/quests_gui");this._quest=b;this._factory=oN.getInstance();this.set_height(65);this._initializeRequirements();this._createRequirements()
};h[
	"de.innogames.strategycity.allies.view.AllyQuestRequirementGroup"
]=zla;zla.__name__="de.innogames.strategycity.allies.view.AllyQuestRequirementGroup";
zla.__super__=R;zla.prototype=l(R.prototype,
{hasAnyRequirementItem:function(){return 0<this._requirementItems.length
	},_initializeRequirements:function(){this._requirements=[];for(var a=0,b=this._groupCondition.conditionIds;a<b.length;){var c=this._quest.getRequirementById(b[a++
			]);null!=c&&(0==this._requirements.length?this._groupRequirementsFullfilled=c.isConditionFullfilled():this._applyGroupCondition(c),this._requirements.push(c))
		}
	},_applyGroupCondition:function(a){a=a.isConditionFullfilled();switch(this._groupCondition.type){case "and":a=
a&&this._groupRequirementsFullfilled;break;case "none":break;case "or":a=a||this._groupRequirementsFullfilled;break;default:a=!1
		}this._groupRequirementsFullfilled=a
	},_createRequirements:function(){if(null!=this._requirementItems)for(var a=0,b=this._requirementItems;a<b.length;){var c=b[a
			];++a;this._factory.returnQuestRequirementItem(c);c.parent==this&&this.removeChild(c)
		}this._requirementItems=[];a=0;b=this._requirements;for(c=0;c<b.length;){var d=b[c++
			],e=c-1==this._requirements.length-1;d=this._factory.getQuestRequirementsItem(d,
this._quest,
			"quest",!1);d.set_x(a);var g=d instanceof Dla?d:null;d.set_y((this.get_height()-g.getButtonHeight())/2);this.addChild(d);this._requirementItems.push(d);a+=g.getButtonWidth();e||(a+=this._addConditionSeparator(a))
		}this.set_width(a);this.validateNow()
	},_addConditionSeparator:function(a){if("none"==this._groupCondition.type)return 5;var b=new va;b.set_text(Mj.getQuestConditionConnectorText(this._groupCondition));b.set_textFormat(Lf.fromSimpleTextFormat(P.getTextFormat(4203536,
		13,!0,
		0)));
b.set_verticalAlign(ta.MIDDLE);b.set_width(50);b.set_height(35);b.set_x(a+5);b.set_y((this.get_height()-b.get_height())/2);this.addChild(b);return 60
	},__class__:zla
});var Qr=function(){this._initialized=!1
};h[
	"de.innogames.strategycity.shared.ui.questoverview.requirement.QuestRequirementsFactory"
]=Qr;Qr.__name__="de.innogames.strategycity.shared.ui.questoverview.requirement.QuestRequirementsFactory";Qr.__properties__={get_instance: "get_instance"
};Qr.get_instance=function(){null==Qr._instance&&(Qr._instance=
new Qr);return Qr._instance
};Qr.prototype={initialize:function(a){this._initialized||(this._assetLibraries=a,a=a.h[
			"shared/quests/gui/quests_gui"
		],null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "shared/quests/gui/quests_gui" from LoadedReflibs.')),this._questRefLib=a,this._initialized=!0,this._questRequirementPool=new cXa(function(){return new Hp
		},function(b){b.reset()
		}))
	},getQuestRequirementsItem:function(a,b,c,d){var e=qb.as(this._questRequirementPool.get(),
Hp);e.prepareInstance(a,b,c,d,this._assetLibraries);return e
	},returnQuestRequirementItem:function(a){this._questRequirementPool.release(a)
	},get_questReflib:function(){return this._questRefLib
	},__class__:Qr,__properties__: {get_questReflib: "get_questReflib"
	}
};var oN=function(){this._initialized=!1
};h[
	"de.innogames.strategycity.allies.view.AllyQuestRequirementsFactory"
]=oN;oN.__name__="de.innogames.strategycity.allies.view.AllyQuestRequirementsFactory";oN.getInstance=function(){null==oN._allyFactory&&
(oN._allyFactory=new oN);return oN._allyFactory
};oN.__super__=Qr;oN.prototype=l(Qr.prototype,
{initialize:function(a){this._assetLibraries=a
	},setAllyQuestPeriodWindowModel:function(a){this._allyQuestPeriodWindowModel=a
	},getQuestRequirementsItem:function(a,b,c,d){var e=this._assetLibraries.h[
			"historical_allies/window/historical_allies_window"
		];null==e&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "historical_allies/window/historical_allies_window" from LoadedReflibs.'));
e=new Dla(e);(e instanceof Dla?e:null).setAllyQuestPeriodWindowModel(this._allyQuestPeriodWindowModel);e.prepareInstance(a,b,c,d,this._assetLibraries);return e
	},returnQuestRequirementItem:function(a){a.dispose()
	},__class__:oN
});var kXa=function(a,b){null==b&&(b=60);this._iconSize=0;C.call(this);this._questReward=a;this._iconSize=b;this._iconContainer=new C;this.addChild(this._iconContainer);this._createTextfields();this._addGenericRewardIcon()
};h[
	"de.innogames.strategycity.allies.view.AllyQuestRewardItem"
]=
kXa;kXa.__name__="de.innogames.strategycity.allies.view.AllyQuestRewardItem";kXa.__super__=C;kXa.prototype=l(C.prototype,
{_createTextfields:function(){var a=new va;a.set_textFormat(new Mb("_sans",
		18,
		16580054,!0,
		null,
		null,
		null,
		null,
		3));a.set_text(this._questReward.getAmount());a.set_filters(ma.getTextOutlineFilterArray());a.set_width(47);a.set_x(35);a.set_y(28);a.mouseEnabled=!1;a.mouseChildren=!1;this.addChild(a)
	},_addGenericRewardIcon:function(){this._genericRewardIcon=new gc(this._questReward.get_genericRewardVo(),
this._iconSize,!0);this._genericRewardIcon.enableTooltip();this._iconContainer.addChild(this._genericRewardIcon)
	},__class__:kXa
});var rk=function(a){this._isAtEnd=I._new(!1);this._disabled=!1;this._containerHeight=this._containerWidth=0;this._height=this._width=120;this._minHeight=60;this._scrollOffsets=[
		0,
		0,
		0
	];this._scrollGap=0;this._snapping=!1;this._autoScroll=!0;this._mainContainer=new C;this._scrollStep=1;this._scrollIndex=this._scrollMax=0;L.call(this);this._containerHeight=this._height;this._containerWidth=
this._width;this.addChild(this._mainContainer);this._mainContainer.addChild(a);this._container=a;this._createContainerMask()
};h[
	"de.innogames.strategycity.shared.ui.components.lists.Scroller"
]=rk;rk.__name__="de.innogames.strategycity.shared.ui.components.lists.Scroller";rk.__super__=L;rk.prototype=l(L.prototype,
{setScroll:function(a){null!=this._scroll&&this.get_mainContainer().removeChild(this._scroll);this._scroll=a;this._mainContainer.addChild(this._scroll);this._mainContainer.addEventListener("mouseWheel",
m(this,this._onMouseWheel),!1,
		0,!0);this._updateDisplay();this._scroll.addEventListener("scrollDown",m(this,this._onScrollDown),!1,
		0,!0);this._scroll.addEventListener("scrollUp",m(this,this._onScrollUp),!1,
		0,!0);this._scroll.addEventListener("dragMove",m(this,this._onDragMove),!1,
		0,!0);this._disabled&&(this._scroll.mouseEnabled=this._scroll.mouseChildren=!1,this._scroll.set_filters(ma.getGrayscaleFilter()))
	},setScrollOffsets:function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this._scrollOffsets=
[a,b,c
		];this._updateDisplay()
	},scrollToValue:function(a){this._scrollIndex=a;this._updateScroll();this._updateDisplay()
	},scrollToTop:function(){this._scrollIndex=0;null!=this._scroll&&this._scroll.set_value(0);this._updateDisplay()
	},scrollToTheEnd:function(a){null==a&&(a=!1);var b=this._getMaxScroll();0<b&&(this._scrollIndex=b,a?(this._moveContent(),this._updateScroll()):(this._updateScroll(),this._updateDisplay()))
	},get_width:function(){return this._width
	},set_width:function(a){this._width=a|0;this._updateDisplay();
return a
	},get_height:function(){return this._height
	},set_height:function(a){this._height=a|0;this._updateDisplay();return a
	},get_scrollBarVisible:function(){return null!=this._scroll?this._scroll.get_visible():!1
	},get_scrollIndex:function(){return this._scrollIndex
	},get_scrollStep:function(){return this._scrollStep
	},set_scrollStep:function(a){return this._scrollStep=a
	},get_snapping:function(){return this._snapping
	},set_snapping:function(a){this._snapping=a;this._update();return a
	},set_disabled:function(a){return this._disabled=
a
	},get_autoScroll:function(){return this._autoScroll
	},set_autoScroll:function(a){this._autoScroll=a;this._updateDisplay();return a
	},get_minHeight:function(){return this._minHeight
	},set_minHeight:function(a){return this._minHeight=a
	},get_scrollGap:function(){return this._scrollGap
	},set_scrollGap:function(a){this._scrollGap=a;this._updateDisplay();return a
	},get_isAtEnd:function(){return this._isAtEnd
	},get_containerWidth:function(){return this._containerWidth
	},set_containerWidth:function(a){return this._containerWidth=
a
	},get_containerHeight:function(){return this._containerHeight
	},set_containerHeight:function(a){return this._containerHeight=a
	},get_mainContainer:function(){return this._mainContainer
	},get_container:function(){return this._container
	},_update:function(){this._updateDisplay()
	},_getMaxScroll:function(){return this.get_containerHeight()-this.get_height()|0
	},_onDragMove:function(a){
		0<this._scrollMax&&(this._scrollIndex=Math.round(this._scrollMax*a.get_scroll()),this._moveContent(!0),this._updateScroll())
	},
_onScrollDown:function(a){this._scrollDown()
	},_onScrollUp:function(a){this._scrollUp()
	},_onMouseWheel:function(a){
		0<a.delta?this._scrollUp(): 0>a.delta&&this._scrollDown()
	},_moveContent:function(a){null==a&&(a=!1);var b=(this._snapping?this._scrollStep: 1)*-this._scrollIndex;a?this._container.set_y(b):O._to(this._container,.2,
		{y:b
		});return b
	},_updateDisplay:function(){var a=!this.get_autoScroll()||this.get_containerHeight()>this.get_height();this._disabled&&(a=!0);if(a&&null==this._scroll)this.setScroll(new wC);
else{this._scrollMax=Math.max(this._getMaxScroll(),
			0)|0;this._scrollIndex=Math.min(this._scrollIndex,this._scrollMax)|0;var b=this._width;null!=this._scroll&&(a&&(this._scroll.set_allowScroll(0<this._scrollMax),this._scroll.get_visible()||this._scroll.set_value(0),b-=this._scroll.get_width()+this._scrollGap-this._scrollOffsets[
				0
			],this._scroll.set_x(b+this._scrollGap+this._scrollOffsets[
				0
			]),this._scroll.set_y(this._scrollOffsets[
				1
			]),this._scroll.set_height(this._height+this._scrollOffsets[
				2
			])),this._scroll.set_visible(a));
this.set_containerWidth(b|0);this._drawContainerMask();this._moveContent(!0);this._updateScroll()
		}
	},_createContainerMask:function(){this._containerMask=Ob.createBlackRectangle(1,
		1);this.get_mainContainer().addChild(this._containerMask);this._container.set_mask(this._containerMask)
	},_updateScroll:function(){if(null!=this._scroll){var a=this._scrollIndex/this._scrollMax;this._scroll.set_value(a);I.set_value(this._isAtEnd,
			0==this._scrollMax||1<=a)
		}
	},_drawContainerMask:function(){this._containerMask.set_width(this.get_containerWidth()+
1);this._containerMask.set_height(this.get_height())
	},_scrollUp:function(){
		0<this._scrollIndex&&(this._scrollIndex-=this._snapping?1:this._scrollStep,this._scrollIndex=Math.max(this._scrollIndex,
		0)|0,this._moveContent(),this._updateScroll())
	},_scrollDown:function(){this._scrollIndex<this._scrollMax&&(this._scrollIndex+=this._snapping?1:this._scrollStep,this._scrollIndex=Math.min(this._scrollIndex,this._scrollMax)|0,this._moveContent(),this._updateScroll())
	},__class__:rk,__properties__:l(L.prototype.__properties__,
	{get_container: "get_container",get_mainContainer: "get_mainContainer",set_containerHeight: "set_containerHeight",get_containerHeight: "get_containerHeight",set_containerWidth: "set_containerWidth",get_containerWidth: "get_containerWidth",get_isAtEnd: "get_isAtEnd",get_scrollIndex: "get_scrollIndex",get_scrollBarVisible: "get_scrollBarVisible",set_scrollGap: "set_scrollGap",get_scrollGap: "get_scrollGap",set_minHeight: "set_minHeight",get_minHeight: "get_minHeight",set_autoScroll: "set_autoScroll",get_autoScroll: "get_autoScroll",
set_disabled: "set_disabled",set_snapping: "set_snapping",get_snapping: "get_snapping",set_scrollStep: "set_scrollStep",get_scrollStep: "get_scrollStep"
	})
});var Kh=function(a,b,c,d){this._originalHeight=this._bottomPadding=this._topPadding=0;rk.call(this,a);this.set_autoScroll(!0);this.set_scrollStep(60);null==d&&(d=new on);this.setScroll(d);this.setScrollOffsets(0,
	0,
	1);this.set_width(b);this.set_height(c);this._originalHeight=this.get_height()|0;this._background=new ub(1,
	1)
};h[
	"de.innogames.strategycity.shared.ui.window.tavern.view.components.shop.ScrollContainer"
]=
Kh;Kh.__name__="de.innogames.strategycity.shared.ui.window.tavern.view.components.shop.ScrollContainer";Kh.__super__=rk;Kh.prototype=l(rk.prototype,
{setContent:function(a){var b=this.get_container();this.removeContent();this._currentContent=a;a.set_y(this._topPadding);b.addChild(this._background);b.addChild(a);this.set_containerHeight(this._currentContent.get_height()|0);this._update()
	},removeContent:function(){var a=this.get_container();null!=this._currentContent&&a.contains(this._currentContent)&&
a.removeChild(this._currentContent)
	},update:function(){if(null!=this._currentContent){var a=this._currentContent.get_height()|0;a>this._originalHeight&&(a+=this._bottomPadding+this._topPadding);this.set_containerHeight(a);this._update()
		}
	},_update:function(){rk.prototype._update.call(this);this._updateBackground()
	},_updateBackground:function(){this._background.set_x(this._currentContent.get_x());this._background.set_y(this._currentContent.get_y());this._background.set_width(this._currentContent.get_width());
this._background.set_height(this._currentContent.get_height())
	},get_containerHeight:function(){return rk.prototype.get_containerHeight.call(this)+this._bottomPadding
	},set_containerHeight:function(a){return rk.prototype.set_containerHeight.call(this,a)
	},_getContainer:function(){return this.get_container()
	},set_bottomPadding:function(a){return this._bottomPadding=a
	},set_topPadding:function(a){this._topPadding=a;null!=this.get_container()&&this.get_container().set_y(a);return a
	},__class__:Kh,__properties__:l(rk.prototype.__properties__,
	{set_topPadding: "set_topPadding",set_bottomPadding: "set_bottomPadding"
	})
});var sdb=function(a,b,c,d){Kh.call(this,a,b,c);this._allyWindowAssets=d;this.set_topPadding(55);this.set_bottomPadding(5);this.setScrollOffsets(3);a=new sc(this._allyWindowAssets.getImage("historical_allies_monthly_tasks_wood_closure"),new Z(1,
	1,
	60,
	3));a.set_width(565);a.set_height(5);a.set_x(105);this._mainContainer.addChild(a);this._addPeriodFlap();a=new B(this._allyWindowAssets.getImage("historical_allies_ally_monthly_task_deco"));
a.set_x(-7);a.set_y(-6);this._mainContainer.addChild(a);a=new B(this._allyWindowAssets.getImage("historical_allies_ally_monthly_task_deco"));a.set_x(b);a.set_y(-6);a.set_scaleX(-1);this._mainContainer.addChild(a);null!=this._scroll&&this._mainContainer.setChildIndex(this._scroll,this._mainContainer.get_numChildren()-1)
};h[
	"de.innogames.strategycity.allies.view.AllyQuestScrollContainer"
]=sdb;sdb.__name__="de.innogames.strategycity.allies.view.AllyQuestScrollContainer";sdb.__super__=Kh;sdb.prototype=
l(Kh.prototype,
{_addPeriodFlap:function(){var a=new C;a.addChild(new B(this._allyWindowAssets.getImage("historical_allies_monthly_tasks_week_flap")));this._mainContainer.addChild(a);var b=new va;b.set_textFormat(new Mb("_sans",
		16,
		16711640,!0,
		null,
		null,
		null,
		null,
		3));b.set_filters(ma.getAlliesQuestWindowDropShadow());b.set_text(r.gettext("HA|Weekly task change:"));b.set_x(50);b.set_y(10);b.validateNow();a.addChild(b);var c=new aa("time_large",
		30);c.set_x(b.get_x()+b.get_width());c.set_y(8);a.addChild(c);
this._timeLeftLabel=new va;this._timeLeftLabel.set_textFormat(new Mb("_sans",
		16,
		16711640,!0,
		null,
		null,
		null,
		null,
		3));this._timeLeftLabel.set_filters(ma.getTextOutlineFilterArray());this._timeLeftLabel.set_x(c.get_x()+c.get_width());this._timeLeftLabel.set_y(10);a.addChild(this._timeLeftLabel)
	},get_timeLeftLabel:function(){return this._timeLeftLabel
	},__class__:sdb,__properties__:l(Kh.prototype.__properties__,
	{get_timeLeftLabel: "get_timeLeftLabel"
	})
});var odb=function(a,b,c,d,e){R.call(this);this._allies=
a;this._allyPortraitsAssets=b;this._allyWindowAssets=c;this._windowAssets=d;this._buttonsAssets=e;this.set_width(358);this._toggleGroup=new Gla;this._createContent()
};h[
	"de.innogames.strategycity.allies.view.AllyReplaceView"
]=odb;odb.__name__="de.innogames.strategycity.allies.view.AllyReplaceView";odb.__super__=R;odb.prototype=l(R.prototype,
{getSelectedAllyId:function(){return 1==this._allies.length?this._allies[
			0
		].id:this._allies[this._toggleGroup.get_selectedIndex()
		].id
	},_createContent:function(){this.set_layout(new Xb);
var a=new va;a.set_textFormat(Lf.fromSimpleTextFormat(P.getTextFormat(4203536,
		16,!0,
		0)));a.set_text(r.gettext("HA|This building is full!"));a.set_verticalAlign(ta.MIDDLE);a.set_width(this.get_width());a.set_height(24);this.addChild(a);a=new va;a.set_textFormat(Lf.fromSimpleTextFormat(P.getTextFormat(4203536,
		14,!1,
		0)));a.set_text(r.gettext("HA|Do you want to exchange an ally? They get sorted back into your ally library."));a.set_verticalAlign(ta.MIDDLE);a.set_wordWrap(!0);a.set_width(this.get_width());
a.set_height(42);this.addChild(a);a=new R;a.set_width(this.get_width());var b=new fb;b.set_horizontalAlign(Sa.CENTER);b.set_paddingTop(17);b.set_gap(2==this._allies.length?55: 6);a.set_layout(b);this.addChild(a);b=0;for(var c=this._allies;b<c.length;)a.addChild(new tdb(c[b++
		],this._allyPortraitsAssets,this._allyWindowAssets,this._windowAssets,this._buttonsAssets,
		1<this._allies.length,this._toggleGroup));this.validateNow()
	},__class__:odb
});var tdb=function(a,b,c,d,e,g,k){Re.call(this);d=new sc(d.getImage("window_paper_content_white_bg"),
new Z(6,
	6,
	16,
	16));d.set_width(116);d.set_height(g?160: 128);this.addChild(d);a=new yx(new MS(B7.createFromAlly(a)),b,c);a.set_x(11);a.set_y(11);this.addChild(a);a=new B(e.getImage("radio_button_big"));e=new B(e.getImage("radio_button_icon_big"));g&&(g=new uJ,g.set_icon(a),g.set_selectedIcon(e),g.set_x(45),g.set_y(125),g.set_toggleGroup(k),this.addChild(g))
};h[
	"de.innogames.strategycity.allies.view.AllyButton"
]=tdb;tdb.__name__="de.innogames.strategycity.allies.view.AllyButton";tdb.__super__=Re;tdb.prototype=
l(Re.prototype,
{__class__:tdb
});var M7=Ea[
	"de.innogames.strategycity.allies.view.AllyRewardViewScale"
]={__ename__: "de.innogames.strategycity.allies.view.AllyRewardViewScale",__constructs__: null,Scaled:(H=function(a){return{_hx_index: 0,scale:a,__enum__: "de.innogames.strategycity.allies.view.AllyRewardViewScale",toString:N
		}
	},H._hx_name="Scaled",H.__params__=[
		"scale"
	],H),Original: {_hx_name: "Original",_hx_index: 1,__enum__: "de.innogames.strategycity.allies.view.AllyRewardViewScale",toString:N
	}
};M7.__constructs__=
[M7.Scaled,M7.Original
];M7.__empty_constructs__=[M7.Original
];var Hla=function(a,b,c){null==c&&(c=M7.Original);var d=this;R.call(this);this._rewardVO=a;var e=Va.instance.loadImageLibrary("historical_allies/portraits/historical_allies_portraits",
	null,null);var g=Va.instance.loadImageLibrary("historical_allies/window/historical_allies_window",
	null,null);var k=function(t){d._createContent(t.allyPortraits,t.allyWindow,c);null!=b&&b(d)
	};this._assetLoadingCallback=(new Kc(function(t){var u=2,A={},z=null,
J=function(T,W){switch(T._hx_index){case 0:W(T.data);0==--u&&t(Ha.Success(A));break;case 1:u=0,null!=z&&z.cancel(),t(Ha.Failure(T.failure))
			}
		};return z=zc.fromMany([e.handle(function(T){J(T,function(W){A.allyPortraits=W
				})
			}),g.handle(function(T){J(T,function(W){A.allyWindow=W
				})
			})
		])
	})).handle(function(t){switch(t._hx_index){case 0:za.invoke(k,t.data);break;case 1:t=t.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+t.message))
		}
	});this.addEventListener("removedFromStage",m(this,this._onRemovedFromStage))
};
h[
	"de.innogames.strategycity.allies.view.AllyRewardView"
]=Hla;Hla.__name__="de.innogames.strategycity.allies.view.AllyRewardView";Hla.__super__=R;Hla.prototype=l(R.prototype,
{_createContent:function(a,b,c){var d=this._rewardVO instanceof So?this._createFragmentIcon(this._rewardVO):null;a=this._createAllyView(a,b);a.set_x(-47);a.set_y(-53);this.addChildAt(a,
		0);switch(c._hx_index){case 0:this._applyScaling(a,d,c.scale);break;case 1:this._applyScaling(a,d,
			1)
		}
	},_createFragmentIcon:function(a){a=Bx.getFragmentIconBitmap(a.iconAssetName,
		75);this.addChild(a);return a
	},_createAllyView:function(a,b){return new yx(new MS(B7.createFromReward(this._rewardVO)),a,b,!1,
		1<this._rewardVO.amount)
	},_applyScaling:function(a,b,c){var d=1!=c;a.set_scaleX(a.set_scaleY(c));a.set_x(a.get_x()*c);a.set_y(a.get_y()*c);if(d)for(var e=0,g=a.get_numChildren();e<g;){var k=a.getChildAt(e++);k instanceof B&&(K.__cast(k,B).smoothing=!0)
		}null!=b&&(b.set_scaleX(b.set_scaleY(c)),b.set_x(a.get_x()+b.get_width()/4),b.set_y(a.get_y()+b.get_height()/4),b.smoothing=
d)
	},_onRemovedFromStage:function(a){this.removeEventListener("removedFromStage",m(this,this._onRemovedFromStage));a=this._assetLoadingCallback;null!=a&&a.cancel()
	},__class__:Hla
});var La=function(){this._enabled=!0;this._forcedLayout="";this._arrowDirection=this._paddingTop=this._paddingRight=this._paddingBottom=this._paddingLeft=0;this._showDelay=500;L.call(this);this._initAbstractTooltip()
};h[
	"de.innogames.strategycity.main.view.components.AbstractTooltip"
]=La;La.__name__="de.innogames.strategycity.main.view.components.AbstractTooltip";
La.__properties__={set_CURRENT_TOOLTIP: "set_CURRENT_TOOLTIP",get_CURRENT_TOOLTIP: "get_CURRENT_TOOLTIP"
};La.get_CURRENT_TOOLTIP=function(){return La._currentTooltip
};La.set_CURRENT_TOOLTIP=function(a){return La._currentTooltip=a
};La.__super__=L;La.prototype=l(L.prototype,
{addContent:function(a){return this._contentContainer.addChild(a)
	},removeContent:function(a){this._contentContainer.removeChild(a)
	},show:function(){this._enabled&&(null!=La._currentTooltip&&La._currentTooltip.hide(),La._currentTooltip=
this,
		0<this._showDelay?(null!=this._delayTimer&&this._delayTimer.running&&this._delayTimer.stop(),this._delayTimer=new Ih(this._showDelay,
		1),this._delayTimer.addEventListener("timerComplete",m(this,this._show)),this._delayTimer.start()):this._show())
	},hide:function(){this.set_visible(!1);this._killDelayTimer()
	},setPadding:function(a,b,c,d){this._paddingTop=a;this._paddingRight=b;this._paddingBottom=c;this._paddingLeft=d;this._setContentContainerPosition();this.invalidate()
	},invalidate:function(){null!=
this.stage&&(this._drawBackground(),this._applyLayout())
	},dispose:function(){L.prototype.dispose.call(this);this._killDelayTimer()
	},_onAddedToStage:function(a){L.prototype._onAddedToStage.call(this,a);this._requireAssets(this._getRequiredAssets());this.invalidate();this.dispatchEvent(new D("showComplete"))
	},_getRequiredAssets:function(){return[
			"shared/gui/tooltip/tooltip"
		]
	},_createHeadline:function(a,b,c,d,e){null==e&&(e=3);null==d&&(d=0);null==c&&(c=0);null==b&&(b=280);a=new ig(a,b,!1,!1,e);a.set_x(c);
a.set_y(d);a.forceValidation();this.addContent(a);return a
	},_show:function(a){this.invalidate();this.set_visible(!0)
	},_killDelayTimer:function(){null!=this._delayTimer&&(this._delayTimer.removeEventListener("timerComplete",m(this,this._show)),this._delayTimer.stop(),this._delayTimer=null)
	},_createChildren:function(){this._initLayoutFunctions();this._createBackgroundContainer();this._createContentContainer();this._createContent();this._createArrow()
	},_initLayoutFunctions:function(){var a=new x;a.h.LAYOUT_TOP_LEFT=
m(this,this._applyTopLeftLayout);a.h.LAYOUT_TOP_RIGHT=m(this,this._applyTopRightLayout);a.h.LAYOUT_TOP_MIDDLE=m(this,this._applyTopMiddleLayout);a.h.LAYOUT_BOTTOM_LEFT=m(this,this._applyBottomLeftLayout);a.h.LAYOUT_BOTTOM_RIGHT=m(this,this._applyBottomRightLayout);a.h.LAYOUT_LEFT=m(this,this._applyLeftLayout);a.h.LAYOUT_SIDE=m(this,this._applySideLayout);this._layoutFunctions=a
	},_createBackgroundContainer:function(){this._backgroundContainer=new C;this.addChild(this._backgroundContainer);this._scaledBackground=
new ua(this._reflib.getImage("background_tooltip_sc"),new Z(12,
		12,
		26,
		26));this._backgroundContainer.addChild(this._scaledBackground)
	},_createContentContainer:function(){this._contentContainer=new C;this._setContentContainerPosition();this._backgroundContainer.addChild(this._contentContainer)
	},_setContentContainerPosition:function(){this._contentContainer.set_x(9+this._paddingLeft);this._contentContainer.set_y(9+this._paddingTop)
	},_createContent:function(){},_createArrow:function(){this._arrow=new C;
var a=new B(this._reflib.getImage("arrow_tooltip"),
		0);a.set_rotation(270);a.set_y(12);this._arrow.addChild(a);this._arrowDirection=1;this._backgroundContainer.addChild(this._arrow)
	},_applyLayout:function(){this._arrow.set_rotation(0);this._applyBottomLeftLayout();this._layout="LAYOUT_BOTTOM_LEFT";this._layout=this._getLayoutDependingOnPosition();this._setLayout()
	},_setLayout:function(){var a=this._layoutFunctions.h[this._layout
		];null!=a&&a()
	},_getLayoutDependingOnPosition:function(){if(""!=this._forcedLayout)return this._forcedLayout;
var a=this._getTopOrBottomLayout(),b=this._layoutFunctions.h[a
		];null!=b&&b();return(new Z(0,
		0,this.stage.stageWidth,this.stage.stageHeight)).containsRect(this.getBounds(this.stage))?a: "LAYOUT_SIDE"
	},_getTopOrBottomLayout:function(){var a=new Z(0,
		30,this.stage.stageWidth,this.stage.stageHeight-30),b=this.getBounds(this.stage);return b.get_top()<a.get_top()?b.get_right()>a.get_right()?"LAYOUT_TOP_RIGHT": "LAYOUT_TOP_LEFT":b.get_bottom()>a.get_bottom()?b.get_right()>a.get_right()?"LAYOUT_BOTTOM_RIGHT": "LAYOUT_BOTTOM_LEFT":b.get_right()>a.get_right()?b.get_top()<a.get_top()?"LAYOUT_TOP_RIGHT": "LAYOUT_BOTTOM_RIGHT": "LAYOUT_BOTTOM_LEFT"
	},_applyLayoutFunction:function(a){a=this._layoutFunctions.h[a
		];null!=a&&a()
	},_applySideLayout:function(){this._setArrowDirection(1);this._arrow.set_rotation(0);this._applyRightLayout();var a=new Z(0,
		0,this.stage.stageWidth,this.stage.stageHeight);this.getBounds(this.stage).get_right()>a.get_right()&&this._applyLeftLayout()
	},_applyRightLayout:function(){this._arrow.set_rotation(90);
this._setArrowPosition(0,.5*(this._scaledBackground.get_height()-29)|0);this._backgroundContainer.set_x(12);this._backgroundContainer.set_y(.5*-this._scaledBackground.get_height());this._correctPositionsIfOutOfStage();this._arrow.set_y(Math.min(this._scaledBackground.get_height()-8-29,Math.max(8,this._arrow.get_y())))
	},_applyLeftLayout:function(){this._arrow.set_rotation(-90);this._setArrowPosition(this._scaledBackground.get_width()|0,.5*(this._scaledBackground.get_height()+29)|0);this._backgroundContainer.set_x(-this.get_width()-
12);this._backgroundContainer.set_y(.5*-this._scaledBackground.get_height());this._correctPositionsIfOutOfStage();this._arrow.set_y(Math.min(this._scaledBackground.get_height()-8,Math.max(37,this._arrow.get_y())))
	},_correctPositionsIfOutOfStage:function(){var a=new Z(0,
		10,this.stage.stageWidth,this.stage.stageHeight-20),b=this.getBounds(this.stage);if(!a.containsRect(b)){if(a.get_top()>b.get_top()){var c=a.get_top()-b.get_top(),d=this._backgroundContainer;d.set_y(d.get_y()+c);d=this._arrow;d.set_y(d.get_y()-
c)
			}a.get_bottom()<b.get_bottom()&&(c=b.get_bottom()-a.get_bottom(),d=this._backgroundContainer,d.set_y(d.get_y()-c),d=this._arrow,d.set_y(d.get_y()+c))
		}
	},_applyTopLeftLayout:function(){this._setArrowDirection(0);this._setArrowPosition(12,
		0);this._backgroundContainer.set_x(-24);this._backgroundContainer.set_y(12)
	},_applyTopMiddleLayout:function(){this._setArrowDirection(0);this._setArrowPosition((this._scaledBackground.get_width()-this._arrow.get_width())/2|0,
		0);this._backgroundContainer.set_x(-this._backgroundContainer.get_width()/
2);this._backgroundContainer.set_y(12)
	},_applyTopRightLayout:function(){this._setArrowDirection(0);this._setArrowPosition(this._scaledBackground.get_width()-this._arrow.get_width()-12|0,
		0);this._backgroundContainer.set_x(-this._backgroundContainer.get_width()+24);this._backgroundContainer.set_y(12)
	},_applyBottomLeftLayout:function(){this._setArrowDirection(1);this._setArrowPosition(12,this._scaledBackground.get_height()|0);this._backgroundContainer.set_y(-this._backgroundContainer.get_height());this._backgroundContainer.set_x(-24)
	},
_applyBottomRightLayout:function(){this._setArrowDirection(1);this._setArrowPosition(this._scaledBackground.get_width()-this._arrow.get_width()-12|0,this._scaledBackground.get_height()|0);this._backgroundContainer.set_x(-this._backgroundContainer.get_width()+24);this._backgroundContainer.set_y(-this._backgroundContainer.get_height())
	},_setArrowPosition:function(a,b){this._arrow.set_x(a);this._arrow.set_y(b)
	},_setArrowDirection:function(a){this._arrowDirection!=a&&(this._arrowDirection=a,this._flipArrowVertical())
	},
_flipArrowVertical:function(){var a=this._arrow;a.set_scaleY(-1*a.get_scaleY())
	},getContentContainerWidth:function(){return this._contentContainer.get_width()|0
	},getContentContainerHeight:function(){return this._contentContainer.get_height()|0
	},_drawBackground:function(){if(null!=this.stage){var a=this.getContentContainerWidth()+18+this._paddingLeft+this._paddingRight,b=this.getContentContainerHeight()+18+this._paddingTop+this._paddingBottom,c=this._scaledBackground;c.set_width(a);c.set_height(b)
		}
	},
_createTextfield:function(a,b,c){null==c&&(c=13);null==b&&(b=!0);a=P.createArialTextfield(a,b,c);a.set_multiline(!0);a.set_wordWrap(!0);a.set_autoSize(1);return a
	},addLabelWithIconAndBG:function(a,b,c,d,e,g,k){null==k&&(k=!1);null==e&&(e=16446953);null==d&&(d=0);k=new Fe(!0,
		null,k);k.set_textColor(e);k.set_x(d);k.addIcon(a);k.set_text(b);k.setBackgroundSize(c,
		30);null!=g&&k.content.addChild(g);return k
	},_createMultilineLabelWithBGIconTextAndValue:function(a,b,c,d,e,g){null==g&&(g=180);null==e&&(e=
16446953);null==d&&(d=16446953);null==c&&(c="");var k=new QZ;a&&k.addIcon(new aa(a));k.setMaxWidth(g);k.set_text(b);k.set_value(c);k.set_textColor(d);k.set_valueColor(e);return k
	},_createMultilineLabelWithBGAndText:function(a,b,c){null==c&&(c=180);null==b&&(b=16446953);var d=new QZ;d.setMaxWidth(c);d.set_text(a);d.set_textColor(b);return d
	},addComponent:function(a,b){null==b&&(b=0);a.set_y(this._contentContainer.get_height()+b);this.addContent(a)
	},_createTextComponent:function(a,b,c,d,e,g,k){null==
k&&(k=!1);null==g&&(g=2);null==e&&(e=4);var t=new RS(this._reflib);t.init(a,b,c,d,e,g,k);this.addContent(t);return t.get_textField()
	},_getScale9Image:function(a){return new ua(this._reflib.getImage(a),Dm.createScale9Rect(a))
	},_initAbstractTooltip:function(){this._reflib=yb.getInstance().getGUIReflib("shared/gui/tooltip/tooltip");null==this._reflib&&null!=y._reportError&&y._reportError(Error("[LOGGER] The TOOLTIP reflib should be loaded in configuration sequence. It is either not loaded there or the AbstractTooltip is created before ConfigureViewCommand!"));
this.hide();this._createChildren();this.mouseChildren=this.mouseEnabled=!1
	},set_visible:function(a){this._enabled&&L.prototype.set_visible.call(this,a);return a
	},get_layout:function(){return this._layout
	},get_forcedLayout:function(){return this._forcedLayout
	},set_forcedLayout:function(a){return this._forcedLayout=a
	},set_showDelay:function(a){return this._showDelay=a
	},set_enabled:function(a){(this._enabled=a)||L.prototype.set_visible.call(this,!1);return a
	},get_enabled:function(){return this._enabled
	},
__class__:La,__properties__:l(L.prototype.__properties__,
	{set_enabled: "set_enabled",get_enabled: "get_enabled",set_showDelay: "set_showDelay",set_forcedLayout: "set_forcedLayout",get_forcedLayout: "get_forcedLayout",get_layout: "get_layout"
	})
});var pg=function(){La.call(this)
};h[
	"de.innogames.strategycity.main.view.cityui.buildingTooltip.AbstractTextTooltip"
]=pg;pg.__name__="de.innogames.strategycity.main.view.cityui.buildingTooltip.AbstractTextTooltip";pg.__super__=La;pg.prototype=l(La.prototype,
{invalidate:function(){this._setContentContainerPosition();
La.prototype.invalidate.call(this)
	},addPossibleRewardRowComponent:function(a,b,c){null==b&&(b=2);this._addToTextPanel(new vJ(Em.GenericReward(a.reward),a.drop_chance,
		239,
		null,c),b)
	},addHeadline:function(a,b,c){this._tooltipHeadline=this._createHeadline(a,b);this._tooltipHeadline.set_x(this._contentContainer.get_x());this._tooltipHeadline.set_y(this._contentContainer.get_y());null!=c&&this._tooltipHeadline.setIcon(c);this._backgroundContainer.addChild(this._tooltipHeadline);return this._tooltipHeadline
	},
addLabel:function(a,b,c){null==c&&(c=!0);null==b&&(b=16446953);b=this._createTextfield(b,c);b.set_width(this._getTextFieldWidth());b.set_text(a);this._addToTextPanel(b);return b
	},addScrollingLabelWithBG:function(a,b,c,d){d=new Fe(!0,d,!0);var e=this._getTextFieldWidth();null!=b&&d.addIcon(b);d.set_textColor(c);d.set_text(a);d.setBackgroundSize(e,
		30);this._addToTextPanel(d);return d
	},addTextFieldWithBG:function(a,b,c,d,e){null==e&&(e=!0);null==d&&(d=!0);d=new Fe(d);null!=b&&d.addIcon(b);d.set_textColor(c);
d.set_text(a);d.setBackgroundSize(this._getTextFieldWidth(),
		30);d.set_alpha(e?1:.3);this._addToTextPanel(d);return d
	},addLabelAndTextFieldWithBG:function(a,b,c,d,e){var g=new nXa;g.addLabel(a,this._getTextFieldWidth(),b);g.addTextFieldWithBG(c,d,e,this._getTextFieldWidth());this._addToTextPanel(g);return g
	},addPermanentEffectsComponent:function(a,b){this._addToTextPanel(new Cx(a,this._getTextFieldWidth(),Cx.NON_LIMITED_BUILDING_LABEL,b))
	},addSetBonusComponent:function(a,b,c,d,e,g){null==g&&(g=!0);
var k=new C,t=new Fe;t.set_alpha(g?1:.3);t.addIcon(new aa(a));a=this._textfieldContainer.get_width();0==a&&(a=this._getTextFieldWidth());if("0"!=b){var u=a/4|0;t.set_text(b)
		}else u=a/6|0;t.setBackgroundSize(u,
		30);k.addChild(t);t=new Fe;t.set_textColor(e);t.set_text(d);t.addIcon(new aa(c));t.setBackgroundSize(a-u-4|0,
		30);t.set_x(u+4);t.set_alpha(g?1:.3);k.addChild(t);this._addToTextPanel(k)
	},_setContentContainerPosition:function(){null!=this._tooltipHeadline?(this._tooltipHeadline.set_x(this._contentContainer.get_x()),
this._tooltipHeadline.set_y(9+this._paddingTop),this._contentContainer.set_y(this._tooltipHeadline.get_y()+this._tooltipHeadline.get_textHeight()+11)):this._contentContainer.set_y(9+this._paddingTop)
	},getContentContainerHeight:function(){return null!=this._tooltipHeadline?this._contentContainer.get_height()+this._tooltipHeadline.get_textHeight()+11|0:this._contentContainer.get_height()|0
	},getContentContainerWidth:function(){return null!=this._tooltipHeadline?this._tooltipHeadline.get_width()|0:this._contentContainer.get_width()|
0
	},_createChildren:function(){La.prototype._createChildren.call(this);this._contentContainer.set_x(9+this._paddingLeft);this._contentContainer.set_y(9+this._paddingTop)
	},_createHeadline:function(a,b,c,d,e){null==e&&(e=3);null==d&&(d=0);null==c&&(c=0);null==b&&(b=280);a=new ig(a,b,!1,!1,e);a.set_x(c);a.set_y(d);a.forceValidation();return a
	},_createContent:function(){La.prototype._createContent.call(this);this._textfieldContainer=new C;this._textfieldContainer.set_x(5);this._contentContainer.addChild(this._textfieldContainer)
	},
_getTextFieldWidth:function(){return this.getContentContainerWidth()-this._textfieldContainer.get_x()-5|0
	},_addToTextPanel:function(a,b){null==b&&(b=0);a.set_y(this._textfieldContainer.get_height()+b);this._textfieldContainer.addChild(a)
	},_updateTextPanelLayout:function(){for(var a,b=0,c=this._textfieldContainer.get_numChildren(),d=0;d<c;)a=this._textfieldContainer.getChildAt(d++),a.set_y(b),b+=a.get_height()|0
	},__class__:pg
});var N7=function(a,b,c,d){this.allyId=a;this.allyRarity=b;this._allyLevel=
c;this._boosts=d;La.call(this);this.setPadding(0,
	1,
	5,
	1);this._showDelay=200
};h[
	"de.innogames.strategycity.allies.view.AllyTooltip"
]=N7;N7.__name__="de.innogames.strategycity.allies.view.AllyTooltip";N7.__super__=pg;N7.prototype=l(pg.prototype,
{init:function(a,b,c){this._allyMetadata=a;this._allyTypeMetadata=b;this._allyrarityMetadata=c;this.addHeadline(this._getHeadlineText(a),
		280);this._addRoomsInfo();this._addBoostsInfo();this.show()
	},_createHeadline:function(a,b,c,d,e){null==e&&(e=3);null==d&&
(d=0);null==c&&(c=0);a=new ig(a,
		280,!1,!0,e);a.set_x(c);a.set_y(d);a.forceValidation();return a
	},_getHeadlineText:function(a){var b=this._allyrarityMetadata.name,c=U.printf(r.gettext("HA|Lv. %s"),this._allyLevel);return""+a.name+" ("+b+") - "+c
	},_addRoomsInfo:function(){var a=P.createArialTextfield(16446953,!0);a.set_autoSize(1);a.set_text(r.gettext("HA|Can be placed in:"));a.set_width(280);this.addComponent(a,
		1);this.addComponent(new RZ(wJ.createWithMockRoom(C7.fromTypeMetadata(this._allyTypeMetadata,
this.allyRarity),
		280)),
		4)
	},_addBoostsInfo:function(){var a=P.createArialTextfield(16446953,!0);a.set_autoSize(1);a.set_text(r.gettext("HA|Effects when placed:"));a.set_width(280);this.addComponent(a,
		9);a=0;for(var b=this._boosts;a<b.length;){var c=od.getBoostHintData(b[a++
			]);this.addComponent(this.addLabelWithIconAndBG(new aa(c.icon),c.text,
			280,
			0,
			8772638,
			null,!0),
			3)
		}
	},__class__:N7
});var Ila=function(){};h[
	"de.innogames.strategycity.allies.view.AllyTooltipMediator"
]=Ila;Ila.__name__="de.innogames.strategycity.allies.view.AllyTooltipMediator";
Ila.__instantiate=function(a){return new Ila
};Ila.__super__=V;Ila.prototype=l(V.prototype,
{onRegister:function(){var a=Lj.getAllyMetadata(this._view.allyId),b=Lj.getTypeMetadata(a.allyType),c=Lj.getRarityMetadata(this._view.allyRarity);this._view.init(a,b,c)
	},__construct:function(a){V.prototype.__construct.call(this,a);this._view=a.getInstanceForMapping("de.innogames.strategycity.allies.view.AllyTooltip");return null
	},__class__:Ila
});var Wf=function(){};h[
	"de.innogames.strategycity.shared.ui.tooltips.ToolTipProvider"
]=
Wf;Wf.__name__="de.innogames.strategycity.shared.ui.tooltips.ToolTipProvider";Wf.__isInterface__=!0;Wf.prototype={__class__:Wf
};var yx=function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=!0);R.call(this);this._model=a;this._allyPortraitsAssets=b;this._allyWindowAssets=c;this._showMultiCardBackground=d;this._showAssignmentInfo=e;this._onStageHandler=new Qa(this);this._ignoreLayoutChanges=!0;this._addContent()
};h[
	"de.innogames.strategycity.allies.view.AllyView"
]=yx;yx.__name__="de.innogames.strategycity.allies.view.AllyView";
yx.__interfaces__=[Wf
];yx.__super__=R;yx.prototype=l(R.prototype,
{createToolTip:function(){return{tooltip:new N7(this._model.allyId,this._model.rarity,this._model.level,this._model.boosts),position:Rf.Cursor
		}
	},_addContent:function(){this._addBackgroundAndPortrait();this._addRarityStars();this._addLevelLabels();this._showAssignmentInfo&&this._addAssignmentInfo()
	},_addBackgroundAndPortrait:function(){var a=new B(this._allyPortraitsAssets.getImage("historical_allies_portrait_bg"));this.addChild(a);this._backgroundIndex=
this.getChildIndex(a);this.addChild(new B(this._allyPortraitsAssets.getImage("historical_allies_portrait_ally_"+this._model.allyId)));this.addChild(new B(wla.getAllyCardBorder(this._allyPortraitsAssets,this._model.rarity)))
	},_addRarityStars:function(){var a=this;if(0!=this._model.rarity._hx_index){var b=new R,c=new Xb;c.set_verticalAlign(ta.MIDDLE);b.set_layout(c);b.set_y(20);b.set_height(80);this.addChild(b);var d=new R;c=new Xb;c.set_gap(-7);c.set_verticalAlign(ta.MIDDLE);d.set_layout(c);c=new qa;
c.set_horizontalCenter(0);c.set_verticalCenter(0);d.set_layoutData(c);b.addChild(d);b=function(e){for(var g=0;g<e;)++g,d.addChild(new B(a._allyPortraitsAssets.getImage("historical_allies_portrait_rarity_icon")))
			};switch(this._model.rarity._hx_index){case 1:b(1);break;case 2:b(2);break;case 3:b(3);break;case 4:b(4)
			}
		}
	},_addLevelLabels:function(){var a=new B(wla.getAllyLevelBorder(this._allyPortraitsAssets,this._model.rarity));a.set_x(1);this.addChild(a);a=new va;a.set_x(2);a.set_y(5);a.set_width(37);
a.set_textFormat(new Mb(null,
		16,
		16711640));a.get_textFormat().set_align(0);a.set_text(fa.string(this._model.level));this.addChild(a)
	},_addAssignmentInfo:function(){if(this._model.isAttached){var a=new B(this._allyWindowAssets.getImage("historical_allies_ally_filter_used"));a.set_x(70);a.set_y(-4);this.addChild(a)
		}
	},__class__:yx
});var udb=function(a,b,c){var d=this;yx.call(this,a,b,c,!0,!0);this._selected=!1;this.addEventListener("click",function(e){d._model.onAllySelected()
	})
};h[
	"de.innogames.strategycity.allies.view.SelectableAllyView"
]=
udb;udb.__name__="de.innogames.strategycity.allies.view.SelectableAllyView";udb.__super__=yx;udb.prototype=l(yx.prototype,
{get_selected:function(){return this._selected
	},get_id:function(){return this._model.id
	},set_selected:function(a){if(this._selected=a)this._model.onAllySelected();this._updateBackground();return this._selected
	},_updateBackground:function(){this.removeChildAt(this._backgroundIndex);this.addChildAt(new B(this._selected?this._allyWindowAssets.getImage("historical_allies_portrait_bg_selected"):
this._allyPortraitsAssets.getImage("historical_allies_portrait_bg")),this._backgroundIndex)
	},__class__:udb,__properties__:l(yx.prototype.__properties__,
	{get_id: "get_id",set_selected: "set_selected",get_selected: "get_selected"
	})
});var MS=function(a){this.allyId=a.allyId;this.rarity=a.rarity;this.level=a.level;this.isAttached=a.isAttached;this.boosts=a.boosts
};h[
	"de.innogames.strategycity.allies.view.AllyViewModel"
]=MS;MS.__name__="de.innogames.strategycity.allies.view.AllyViewModel";MS.prototype={__class__:MS
};
var vdb=function(a,b){MS.call(this,B7.createFromAlly(a));this.onAllySelected=b;this.id=a.id
};h[
	"de.innogames.strategycity.allies.view.SelectableAllyViewModel"
]=vdb;vdb.__name__="de.innogames.strategycity.allies.view.SelectableAllyViewModel";vdb.__super__=MS;vdb.prototype=l(MS.prototype,
{__class__:vdb
});var NS=function(a,b){this._hasLevelUp=!1;this._currentAllyPortraitContainer=new R;this._bottomContainer=new R;this._contentContainer=new C;var c=this;ca.call(this);this._model=a;a="historical_allies/window/historical_allies_window";
var d=b.h[a
	];null==d&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "'+(a+'" from LoadedReflibs.')));this._allyWindowAssets=d;a="shared/gui/window/window";d=b.h[a
	];null==d&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "'+(a+'" from LoadedReflibs.')));this._windowAssets=d;a="historical_allies/portraits/historical_allies_portraits";d=b.h[a
	];null==d&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "'+(a+'" from LoadedReflibs.')));
this._allyPortraitsAssets=d;d=b.h[
		"shared/icons/icons"
	];null==d&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "shared/icons/icons" from LoadedReflibs.'));this._iconAssets=d;a="shared/gui/mainmenu/mainmenu";d=b.h[a
	];null==d&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "'+(a+'" from LoadedReflibs.')));this._mainMenuReflib=d;a="shared/buttons/buttons";d=b.h[a
	];null==d&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "'+
(a+'" from LoadedReflibs.')));this._buttonAssets=d;a="historical_allies/animation/historical_allies_animations";d=b.h[a];null==d&&null!=y._reportError&&y._reportError(Error('[LOGGER] Failed to get library "'+(a+'" from LoadedReflibs.')));this._animations=d;this._onStageHandler=new Qa(this);this.set_headline(r.gettext("HA|Historical Allies"));this.addHelpButton(function(e){c._model.showHelp()});this._contentContainer.addChild(new B(this._allyWindowAssets.getImage("historical_allies_pillar_wallpaper")));
this._setContentSize(846,
	522);this._contentContainer.addEventListener("resize",function(e){c._setContentSize(846,
		522)
	});this._addContent();b=new Ua;b.set_paddingLeft(b.set_paddingTop(2));b.addContent(this._contentContainer);b.setSize(850,
	526);this.addContent(b)
};h[
	"de.innogames.strategycity.allies.view.AllyWindow"
]=NS;NS.__name__="de.innogames.strategycity.allies.view.AllyWindow";NS.__super__=ca;NS.prototype=l(ca.prototype,
{_onAddedToStage:function(a){ca.prototype._onAddedToStage.call(this,a);this._model.shouldShowInfoScreen||
this._model.triggerAllyContentDisplayPoint()
	},_addContent:function(){this._addCurrentAllyPortrait();this._addAllies();this._addTabView()
	},_addAllies:function(){this._allyContainerView=new Rr(this._model,this._allyWindowAssets,this._allyPortraitsAssets,this._buttonAssets,this._mainMenuReflib,m(this,this._onAllyListExpanded));this._contentContainer.addChild(this._allyContainerView)
	},_onAllyListExpanded:function(a){this._currentAllyPortraitContainer.set_x(a?80: 30)
	},_addCurrentAllyPortrait:function(){var a=
this;this._currentAllyPortraitContainer.set_layout(new Ib);this._currentAllyPortraitContainer.set_height(522);this._contentContainer.addChild(this._currentAllyPortraitContainer);this._onStageHandler.add(function(){return F.bind(a._model.getSelectedAlly(),function(b){if(null!=b){a._hasLevelUp=!1;null!=a._currentAllyLargePortrait&&(a._currentAllyLargePortrait.dispose(),a._currentAllyPortraitContainer.removeChild(a._currentAllyLargePortrait),null!=a._allySpriteAnimation&&(a._allySpriteAnimation.dispose(),
a._currentAllyPortraitContainer.removeChild(a._allySpriteAnimation)));a._currentAllyPortraitContainer.set_x(30);a._currentAllyLargePortrait=new Jla(b.allyId,m(a,a._playLevelUpFrameAnimation));a._currentAllyPortraitContainer.addChild(a._currentAllyLargePortrait);var c=a._levelUpCallbackLink;null!=c&&c.cancel();b=b.getCurrentLevel();a._levelUpCallbackLink=F.bind(b,function(d){a._hasLevelUp&&a._currentAllyLargePortrait.animateAllyLevelUp();a._hasLevelUp=!0
					})
				}
			})
		});this._onStageHandler.add(function(){return a._levelUpCallbackLink
		})
	},
_playLevelUpFrameAnimation:function(){var a=this;this._allySpriteAnimation=this._getCompleteAnimation();this._currentAllyPortraitContainer.addChildAt(this._allySpriteAnimation,
		0);this._allySpriteAnimation.set_x(-58);Ta.delayedCallBySeconds(.9,function(){a._allySpriteAnimation.playDefaultAndDestroy()
		},null)
	},_getCompleteAnimation:function(){var a=new Wi("historical_allies_level_up_animation_complete"),b=this._animations;a.setAnimationSequence("historical_allies_level_up_animation_complete",
		[b.getImage("historical_allies_level_up_animation_1"),
b.getImage("historical_allies_level_up_animation_2"),b.getImage("historical_allies_level_up_animation_3"),b.getImage("historical_allies_level_up_animation_4"),b.getImage("historical_allies_level_up_animation_5"),b.getImage("historical_allies_level_up_animation_6"),b.getImage("historical_allies_level_up_animation_7"),b.getImage("historical_allies_level_up_animation_8"),b.getImage("historical_allies_level_up_animation_9"),b.getImage("historical_allies_level_up_animation_10"),b.getImage("historical_allies_level_up_animation_11"),
b.getImage("historical_allies_level_up_animation_12"),b.getImage("historical_allies_level_up_animation_13"),b.getImage("historical_allies_level_up_animation_14")
		]);return a
	},_addTabView:function(){this._tabView=new Tz(this._model,this._iconAssets,this._mainMenuReflib,this._allyWindowAssets,this._windowAssets,this._buttonAssets,this._allyPortraitsAssets);this._tabView.set_x(480);this._tabView.set_y(58);this._contentContainer.addChild(this._tabView)
	},__class__:NS
});var Rr=function(a,b,c,d,e,g){this._emptySlotBackgrounds=
[];this._isCollapsed=!0;this._scrollComponent=new kF(go.Vertical);C.call(this);this._model=a;this._allyWindowAssets=b;this._allyPortraitsAssets=c;this._buttonAssets=d;this._mainMenuReflib=e;this._allyViews=[];this._onAllyListExpanded=g;this._addScrollContainer();this._addAllies();this._addDecos();this._addScrollButtonsControl();this._addCollapseButton()
};h[
	"de.innogames.strategycity.allies.view.AllyWindowContainerView"
]=Rr;Rr.__name__="de.innogames.strategycity.allies.view.AllyWindowContainerView";
Rr.__super__=C;Rr.prototype=l(C.prototype,
{_addScrollContainer:function(){this._layoutContainer=new R;this._layoutContainer.set_layout(new Ib);this._layoutContainer.set_height(522);this.addChild(this._layoutContainer);this._createBackgrounds();this._scrollComponent.step=456;this._scrollComponent.transitionDuration=.5;this._scrollComponent.set_scrollingFrame(new xC(0,
		0,
		0,
		456));this._scrollComponent.set_y(33);this._scrollMask=Ob.createBlackRectangle(132,
		456);this._scrollMask.set_y(33);this._scrollComponent.set_mask(this._scrollMask);
this.addChild(this._scrollMask);this._scrollButtonsControl=new oXa(this._scrollComponent,(H=this._scrollComponent,m(H,H.up)),(H=this._scrollComponent,m(H,H.down)),m(this,this._getNextButtonEnabled),m(this,this._getPreviousButtonEnabled),
		{up:this._allyWindowAssets.getImage("historical_allies_ally_menu_up_btn"),over:this._allyWindowAssets.getImage("historical_allies_ally_menu_up_btn_hover"),down:this._allyWindowAssets.getImage("historical_allies_ally_menu_up_btn_push"),disabled:this._allyWindowAssets.getImage("historical_allies_ally_menu_up_btn_push")
		},
		{up:this._allyWindowAssets.getImage("historical_allies_ally_menu_down_btn"),over:this._allyWindowAssets.getImage("historical_allies_ally_menu_down_btn_hover"),down:this._allyWindowAssets.getImage("historical_allies_ally_menu_down_btn_push"),disabled:this._allyWindowAssets.getImage("historical_allies_ally_menu_down_btn_push")
		});this._scrollButtonsControl.set_buttonDistance(470);this._scrollButtonsControlAnchor=new R;this._scrollButtonsControlAnchor.set_layoutData(qa.center(0,
		0));this._scrollButtonsControlAnchor.addChild(this._scrollButtonsControl);
new SS(this._scrollComponent);(new dIb(this._scrollComponent)).wheelMultiplier=.25;this._layoutContainer.addChild(this._scrollComponent);this.addChild(this._layoutContainer)
	},_createBackgrounds:function(){this._scrollBackground=new sc(this._allyWindowAssets.getImage("historical_allies_ally_inventory_background_slice"),new Z(9,
		9,
		62,
		62));this._scrollBackground.set_width(132);this._scrollBackground.set_height(522);this._layoutContainer.addChild(this._scrollBackground);this._scrollButtonBackgroundTop=
new sc(this._allyWindowAssets.getImage("historical_allies_ally_inventory_background_slice"),new Z(9,
		9,
		62,
		62));this._scrollButtonBackgroundTop.set_width(132);this._scrollButtonBackgroundTop.set_height(33);this._layoutContainer.addChild(this._scrollButtonBackgroundTop);this._scrollButtonBackgroundBottom=new sc(this._allyWindowAssets.getImage("historical_allies_ally_inventory_background_slice"),new Z(9,
		9,
		62,
		62));this._scrollButtonBackgroundBottom.set_width(132);this._scrollButtonBackgroundBottom.set_height(33);
this._scrollButtonBackgroundBottom.set_y(489);this._layoutContainer.addChild(this._scrollButtonBackgroundBottom)
	},_addDecos:function(){var a=new B(this._allyWindowAssets.getImage("historical_allies_ally_inventory_background_deco_top"));a.set_x(-6);a.set_y(-6);this._layoutContainer.addChild(a);a=new B(this._allyWindowAssets.getImage("historical_allies_ally_inventory_background_deco_bottom"));var b=new R;b.set_layoutData(qa.bottomRight(-6,
		-6));b.addChild(a);this._layoutContainer.addChild(b)
	},_addScrollButtonsControl:function(){this._layoutContainer.addChild(this._scrollButtonsControlAnchor)
	},
_addAllies:function(){var a=this,b=!0,c=new Qa(this);c.add(function(){return F.autorun(function(){a._updateAllies(b);b=!1
			})
		});c.add(function(){return F.autorun(function(){var d=a._model.getSelectedAlly();null!=F.get_value(d)&&a._selectAllyView(a._getAllyViewWithAllyId(F.get_value(d).id))
			})
		})
	},_updateAllies:function(a){null==a&&(a=!1);this._scrollComponent.removeChildren();this._allyViews=[];this._emptySlotBackgrounds=[];for(var b=0,c=this._model.getSortedAllies();b<c.length;){var d=this._createAllyView(c[b++
			],
b-1);this._allyViews.push(d)
		}this._updateLayout(!1);0<this._allyViews.length&&(d=null==this._model.get_lastSelectedAllyId()?this._allyViews[
			0
		]:this._getAllyViewWithAllyId(this._model.get_lastSelectedAllyId()),this._selectAllyView(d),a&&this._scrollComponent.scrollToChildAt(this._allyViews.indexOf(d)))
	},_addEmptySlotBackgrounds:function(){for(var a=0,b=this._emptySlotBackgrounds;a<b.length;)this._scrollComponent.removeChild(b[a++
		]);this._emptySlotBackgrounds=[];b=this._allyViews.length%4;a=this._allyViews.length;
for(b=this._allyViews.length+(0<b||0==this._allyViews.length?4-b: 0);a<b;){var c=a++,d=new B(this._allyWindowAssets.getImage("historical_allies_portrait_slot"));d.set_x(this._getElementPositionX(c));d.set_y(this._getElementPositionY(c));this._scrollComponent.addChild(d);this._emptySlotBackgrounds.push(d)
		}
	},_createAllyView:function(a,b){var c=this;b=new udb(this._model.getAllyViewModel(a),this._allyPortraitsAssets,this._allyWindowAssets);this._scrollComponent.addChild(b);var d=a.id;this._model.hasAllyNotice(d)&&
(a=new B(this._mainMenuReflib.getImage("badge")),a.set_x(70),b.addChild(a));b.addEventListener("mouseOver",function(e){c._model.hasAllyNotice(d)&&c._model.get_removeAllyNoticeIndicator()(d)
		});return b
	},_getAllyViewWithAllyId:function(a){for(var b=0,c=this._allyViews;b<c.length;){var d=c[b
			];++b;if(d.get_id()==a)return d
		}return null
	},_selectAllyView:function(a){if(null!=a){var b=this._getSelectedAllyView();b!=a&&(null!=b&&b.set_selected(!1),a.set_selected(!0),this._scrollButtonsControl.onScrollChildSelected())
		}
	},
_getSelectedAllyView:function(){return cf.find(this._allyViews,function(a){return a.get_selected()
		})
	},_getNextButtonEnabled:function(){var a=this._model.getSortedAllies();return this._scrollComponent.getScrollingFrameState().get_bottomEdgeReached()?!1: 4<a.length
	},_getPreviousButtonEnabled:function(){var a=this._model.getSortedAllies();return this._scrollComponent.getScrollingFrameState().get_topEdgeReached()?!1: 4<a.length
	},_addCollapseButton:function(){var a=this,b=new B(this._allyWindowAssets.getImage("historical_allies_ally_inventory_menu_flap")),
c=new Oa(this._allyWindowAssets.getImage("historical_allies_ally_menu_btn"),this._allyWindowAssets.getImage("historical_allies_ally_menu_btn_push"),this._allyWindowAssets.getImage("historical_allies_ally_menu_btn_hover"));c.addEventListener("click",m(this,this._onCollapseButtonClick));c.set_x(-4);c.set_y(-1);this._expandIcon=new B(this._allyWindowAssets.getImage("historical_allies_expand_icon"));this._expandIcon.set_x(7);this._expandIcon.set_y(9);this._collapseButtonContainer=new R;F.autorun(function(){var d=
a._model.getSortedAllies();a._collapseButtonContainer.set_visible(4<d.length)
		});this._collapseButtonContainer.addChild(b);this._collapseButtonContainer.addChild(c);this._collapseButtonContainer.addChild(this._expandIcon);this._collapseButtonContainer.set_layoutData(qa.topRight(33,-b.get_width()));this._layoutContainer.addChild(this._collapseButtonContainer)
	},_onCollapseButtonClick:function(a){this._isCollapsed=!this._isCollapsed;this._updateLayout(!0);this._onAllyListExpanded(!this._isCollapsed)
	},
_updateLayout:function(a){var b=this._isCollapsed?132: 237;this._layoutContainer.set_width(b);this._scrollBackground.set_width(b);this._scrollButtonBackgroundTop.set_width(b);this._scrollButtonBackgroundBottom.set_width(b);this._expandIcon.set_scaleX(this._isCollapsed?1: -1);this._expandIcon.set_x(this._isCollapsed?7: 6+this._expandIcon.get_width());null!=this._scrollMask&&this._scrollMask.set_width(b);this._updatePositions();this._addEmptySlotBackgrounds();a&&(a=-this._scrollComponent.getScrollableRect().y,
b=this._getElementPositionY((a/114|0)*(this._isCollapsed?2: 1)),this._scrollComponent.moveToFixedY(-(b+a%114|0)))
	},_updatePositions:function(){for(var a=this._allyViews,b=0;b<a.length;){var c=a[b
			],d=b++;c.set_x(this._getElementPositionX(d));c.set_y(this._getElementPositionY(d))
		}
	},_getElementPositionX:function(a){return this._isCollapsed?20: 20+a%2*99
	},_getElementPositionY:function(a){return this._isCollapsed?114*a: 114*(a/2|0)
	},__class__:Rr
});var Jla=function(a,b){var c=this;R.call(this);this._disposer=
new kh;this._playLevelUpFrameAnimation=b;b=cIb.loadLargerAllyPortrait(a).handle(function(d){switch(d._hx_index){case 0:c._portrait=new B(d.data);c._portrait.set_y(c.get_height()-c._portrait.get_height());c.addChild(c._portrait);c.set_layoutData(qa.bottomCenter(0,
			0));c._portrait.set_alpha(0);O._to(c._portrait,.5,
			{alpha: 1
			});break;case 1:null!=y._reportError&&y._reportError(Error("[LOGGER] Failed to load large ally portrait for ally "+a))
		}
	});this._disposer.add(b)
};h[
	"de.innogames.strategycity.allies.view.AllyWindowLargePortraitView"
]=
Jla;Jla.__name__="de.innogames.strategycity.allies.view.AllyWindowLargePortraitView";Jla.__super__=R;Jla.prototype=l(R.prototype,
{animateAllyLevelUp:function(){var a=this;if(null!=this._portrait){this._playLevelUpFrameAnimation();var b=new p(this._portrait.get_width()/2,this._portrait.get_height());O._to(this._portrait,.15,
			{transformAroundPoint: {pointIsLocal:!0,point:b,scaleX: 1.05,scaleY: 1.05
				},delay:.9,onComplete:function(){O._to(a._portrait,.25,
					{transformAroundPoint: {scaleX: 1,scaleY: 1,point:b,pointIsLocal:!0
						}
					})
				}
			})
		}
	},
dispose:function(){R.prototype.dispose.call(this);this._disposer.cancel()
	},__class__:Jla
});var XHb=function(a,b,c,d,e,g,k,t,u,A,z){this._allies=a;this._allyModel=b;this._usableAllyModel=c;this._allyRoomModel=d;this._allyController=g;this._noticeIndicatorModel=k;this._removeAllyNoticeIndicator=t;this._cityMapEntityViewManager=A;this.allyLevelProgressBarViewModel=e;this._showAutoLevelUpConfirmationWindow=z;(this.shouldShowInfoScreen=u())&&this.showHelp()
};h[
	"de.innogames.strategycity.allies.view.AllyWindowModel"
]=
XHb;XHb.__name__="de.innogames.strategycity.allies.view.AllyWindowModel";XHb.prototype={getSortedAllies:function(){for(var a=[],b=this._allies.iterator();b.hasNext();)a.push(b.next());a.sort(function(c,d){if(c.isAttached()&&!d.isAttached())return 1;if(d.isAttached()&&!c.isAttached()||wdb.isBetterThan(c.rarity,d.rarity))return-1;if(wdb.isBetterThan(d.rarity,c.rarity))return 1;if(F.get_value(c.getCurrentLevel())>F.get_value(d.getCurrentLevel()))return-1;if(F.get_value(d.getCurrentLevel())>F.get_value(c.getCurrentLevel()))return 1;
c=c.allyId;d=d.allyId;return c<d?-1:d<c?1: 0
		});return a
	},showHelp:function(){this._allyController.showHelp()
	},triggerAllyContentDisplayPoint:function(){this._allyController.triggerAllyContentDisplayPoint()
	},switchToAllyAssignmentMode:function(){this._allyController.switchToAllyAssignmentMode()
	},hasRoomForAllyInCity:function(a){return this._allyRoomModel.hasRoomForAllyInCity(a)
	},updateAlly:function(a){this._allies.h[a.id
		].update(a)
	},assignAlly:function(a,b){this._allyController.assignAlly(a,b)
	},unassignAlly:function(a){this._allyController.unassignAlly(a)
	},
getSelectedAlly:function(){return this._usableAllyModel.getObservableItem()
	},getAllyViewModel:function(a){var b=this;return new vdb(a,function(){b._usableAllyModel.setSelectedItem(a);b._allyModel.lastSelectedAllyId=a.id
		})
	},getAllyMetadata:function(a){return Lj.getAllyMetadata(a.allyId)
	},getTypeMetadata:function(a){return Lj.getTypeMetadata(this.getAllyMetadata(a).allyType)
	},getRarityName:function(a){return Lj.getRarityMetadata(a).name
	},getScrolls:function(){return this._allyController.getScrolls()
	},
getNumScrolls:function(){var a=this;return new la(ra.sync(function(){for(var b=0,c=a.getScrolls().keyValueIterator();c.hasNext();)b+=c.next().value|0;return b
		}),null)
	},getXPFromScroll:function(a){return this._allyController.getXPFromScroll(a)
	},useScroll:function(a,b){this._allyController.useScroll(a,b.get_id())
	},getAllyMaxLevel:function(a){a=this._allies.h[a
		];return null==a?-1:Lj.getRarityMetadata(a.rarity).maxLevel
	},canAutoLevelUp:function(a){var b=this._allies.h[a
		];if(null==b||F.get_value(b.getCurrentLevel())>=
this.getAllyMaxLevel(a))return!1;a=0;for(var c=this.getScrolls().keyValueIterator();c.hasNext();){var d=c.next(),e=d.value;a+=this._allyController.getXPFromScroll(new Gk(d.key,e))*(e|0)
		}return a>F.get_value(b.getNextLevelExperience())-F.get_value(b.getExperience())
	},autoLevelUp:function(a){this._showAutoLevelUpConfirmationWindow(this._allies.h[a
		])
	},hasAllyNotice:function(a){return this._noticeIndicatorModel.hasAllyNotice(a)
	},showAllyQuestPeriodWindow:function(){this._allyController.showAllyQuestPeriodWindow()
	},
getAllyBuildingTooltipFactory:function(a){return this._cityMapEntityViewManager.getView(a).interaction.getTooltipFactory("CityEntityConstants/defaultMode")
	},get_hasChangedItemNotices:function(){return this._noticeIndicatorModel.get_hasChangedItemNotices()
	},get_removeAllyNoticeIndicator:function(){return this._removeAllyNoticeIndicator
	},get_lastSelectedAllyId:function(){return this._allyModel.lastSelectedAllyId
	},get_lastAlliesInfoTabId:function(){return this._allyModel.lastAlliesInfoTabId
	},set_lastAlliesInfoTabId:function(a){return this._allyModel.lastAlliesInfoTabId=
a
	},__class__:XHb,__properties__: {set_lastAlliesInfoTabId: "set_lastAlliesInfoTabId",get_lastAlliesInfoTabId: "get_lastAlliesInfoTabId",get_lastSelectedAllyId: "get_lastSelectedAllyId",get_removeAllyNoticeIndicator: "get_removeAllyNoticeIndicator",get_hasChangedItemNotices: "get_hasChangedItemNotices"
	}
};var SZ=function(){};h[
	"de.innogames.strategycity.shared.ui.questoverview.requirement.actuators.IQuestRequirementActuator"
]=SZ;SZ.__name__="de.innogames.strategycity.shared.ui.questoverview.requirement.actuators.IQuestRequirementActuator";
SZ.__isInterface__=!0;SZ.prototype={__class__:SZ,__properties__: {get_actuatorHeight: "get_actuatorHeight",get_actuatorWidth: "get_actuatorWidth",get_asDisplayObject: "get_asDisplayObject",set_enabled: "set_enabled"
	}
};var dt=function(){R.call(this);this._questReflib=Qr.get_instance().get_questReflib()
};h[
	"de.innogames.strategycity.allies.view.actuators.AllyQuestRequirementAbstractButtonActuator"
]=dt;dt.__name__="de.innogames.strategycity.allies.view.actuators.AllyQuestRequirementAbstractButtonActuator";
dt.__interfaces__=[SZ
];dt.__super__=R;dt.prototype=l(R.prototype,
{setData:function(a,b){this._requirement=a;this._questId=b;this._icon=new B(this._questReflib.getImage(this.get_requirementIconId()));this._icon.set_width(this._icon.set_height(30));this._button=new gi(this._icon,
		"",this.get_requirementButtonText());this._button.set_paddingTop(3);this._button.setSize(159,
		35);this._button.set_textOffsetY(2);this._button.set_textFormat(new Mb("_sans",
		13,
		16767426,!0));this._button.get_textFormat().set_align(0);
this._button.set_disabledTextFormat(this._button.get_textFormat());this._button.addEventListener("trigger",m(this,this._onButtonTriggered));this.addChild(this._button);this.set_enabled(!a.isConditionFullfilled())
	},setAllyQuestPeriodWindowModel:function(a){this._allyQuestPeriodWindowModel=a
	},repositionTo:function(a,b){},set_enabled:function(a){this._button.set_enabled(a);return R.prototype.set_enabled.call(this,a)
	},get_actuatorHeight:function(){return 35
	},get_asDisplayObject:function(){return this
	},
_onButtonTriggered:function(a){var b=this;this._allyQuestPeriodWindowModel.activateQuestRequirement(this.get_requirementActuatorId(),this._requirement,this._questId,function(){b.set_enabled(!1)
		})
	},__class__:dt,__properties__:l(R.prototype.__properties__,
	{get_requirementButtonText: "get_requirementButtonText",get_requirementActuatorId: "get_requirementActuatorId",get_requirementIconId: "get_requirementIconId",get_asDisplayObject: "get_asDisplayObject",get_actuatorHeight: "get_actuatorHeight",get_actuatorWidth: "get_actuatorWidth"
	})
});
var vC=function(){R.call(this)
};h[
	"de.innogames.strategycity.allies.view.actuators.AllyQuestRequirementCounterActuator"
]=vC;vC.__name__="de.innogames.strategycity.allies.view.actuators.AllyQuestRequirementCounterActuator";vC.__interfaces__=[SZ
];vC.__super__=R;vC.prototype=l(R.prototype,
{appliesToRequirement:function(a){return-1!=a.flags.indexOf("static_counter")
	},setData:function(a,b){b=new Uo(vC.PROGRESS_BAR_WIDTH,vC.PROGRESS_BAR_HEIGHT);b.setProgress(a.currentProgress/a.maxProgress);this.addChild(b);
b=new va;b.set_textFormat(new Mb("_sans",
		16,
		16775138,!0));b.get_textFormat().set_align(0);b.set_filters(ma.getBrownOutlineFilters());b.set_text(U.printf(r.gettext("%s / %s"),a.currentProgress,a.maxProgress));b.set_width(157);b.set_x(vC.PROGRESS_BAR_WIDTH/2-b.get_width()/2);this.addChild(b)
	},repositionTo:function(a,b){},getInstance:function(){return new vC
	},get_actuatorWidth:function(){return vC.PROGRESS_BAR_WIDTH
	},get_actuatorHeight:function(){return vC.PROGRESS_BAR_HEIGHT
	},get_asDisplayObject:function(){return this
	},
__class__:vC,__properties__:l(R.prototype.__properties__,
	{get_asDisplayObject: "get_asDisplayObject",get_actuatorHeight: "get_actuatorHeight",get_actuatorWidth: "get_actuatorWidth"
	})
});var lXa=function(){dt.call(this)
};h[
	"de.innogames.strategycity.allies.view.actuators.AllyQuestRequirementFightButtonActuator"
]=lXa;lXa.__name__="de.innogames.strategycity.allies.view.actuators.AllyQuestRequirementFightButtonActuator";lXa.__super__=dt;lXa.prototype=l(dt.prototype,
{appliesToRequirement:function(a){return-1!=
a.flags.indexOf("fight_condition")
	},getInstance:function(){return new lXa
	},get_requirementIconId:function(){var a=this._requirement.getConditionPayload(TZ);return null!=a&&a.fightType==Uz.Defense?"quests_icon_defense": "quests_icon_fight"
	},get_requirementActuatorId:function(){return"QuestRequirementFightButtonActuator/FIGHT_BUTTON"
	},get_requirementButtonText:function(){var a=this._requirement.getConditionPayload(TZ);return null!=a&&a.fightType==Uz.Defense?r.gettext("Defend"):r.gettext("Attack")
	},get_actuatorWidth:function(){return 159
	},
__class__:lXa
});var mXa=function(){dt.call(this)
};h[
	"de.innogames.strategycity.allies.view.actuators.AllyQuestRequirementNegotiateButtonActuator"
]=mXa;mXa.__name__="de.innogames.strategycity.allies.view.actuators.AllyQuestRequirementNegotiateButtonActuator";mXa.__super__=dt;mXa.prototype=l(dt.prototype,
{appliesToRequirement:function(a){return-1!=a.flags.indexOf("negotiate_condition")
	},getInstance:function(){return new mXa
	},get_requirementIconId:function(){return"quests_icon_trade"
	},get_requirementActuatorId:function(){return"QuestRequirementNegotiateButtonActuator/NEGOTIATE_BUTTON"
	},
get_requirementButtonText:function(){return r.gettext("Negotiate")
	},get_actuatorWidth:function(){return 159
	},__class__:mXa
});var Fla=function(){this._buttonWidth=159;dt.call(this)
};h[
	"de.innogames.strategycity.allies.view.actuators.AllyQuestRequirementPayButtonActuator"
]=Fla;Fla.__name__="de.innogames.strategycity.allies.view.actuators.AllyQuestRequirementPayButtonActuator";Fla.__super__=dt;Fla.prototype=l(dt.prototype,
{appliesToRequirement:function(a){return null!=a.getConditionPayload(qN)
	},getInstance:function(){return new Fla
	},
setData:function(a,b){this._requirement=a;this._questId=b;if(null!=this._getPremiumCost())b=new aa("premium"),this._buttonWidth=83,this._createButton(b),b=this._button,b.set_textOffsetY(b.get_textOffsetY()+2),b=this._button,b.set_textOffsetX(b.get_textOffsetX()+2),this._button.set_variant("spliitButtonPremium");else{var c=this._getCost();null!=c?(b=new aa(c.resourceId),b.set_width(b.set_height(28)),this._createButton(b),this._button.set_paddingTop(3)):dt.prototype.setData.call(this,a,b)
		}this.set_enabled(!a.isConditionFullfilled())
	},
get_requirementIconId:function(){return"quests_icon_pay"
	},get_requirementActuatorId:function(){return"QuestRequirementPayButtonActuator/PAY_BUTTON"
	},get_requirementButtonText:function(){var a=this._getPremiumCost();return null!=a?null==a?"null": ""+a:r.gettext("Donate")
	},get_actuatorWidth:function(){return this._buttonWidth
	},_createButton:function(a){this._button=new gi(a,
		"",this.get_requirementButtonText());this._button.setSize(this._buttonWidth,
		35);this._button.set_textOffsetY(2);this._button.set_textFormat(new Mb("_sans",
		13,
		16767426,!0));this._button.get_textFormat().set_align(0);this._button.set_disabledTextFormat(this._button.get_textFormat());this._button.addEventListener("trigger",m(this,this._onButtonTriggered));this.addChild(this._button)
	},_getCost:function(){var a=this._requirement.getConditionPayload(qN);if(null==a)return null;var b=Object.keys(a.cost.resources.h);return 0<b.length?(b=b[
			0
		],
		{resourceId:b,amount:a.cost.resources.h[b
			]
		}): null
	},_getPremiumCost:function(){var a=this._requirement.getConditionPayload(qN);
return null==a?null:a.cost.resources.h.premium
	},__class__:Fla
});var xdb=function(a,b,c,d,e,g){this._hasLevelUp=!1;R.call(this);this._model=a;this._windowAssets=d;this._allyWindowAssets=e;this._allyPortraitsAssets=g;this._prevLevelLabel=new va;this._nextLevelLabel=new va;this._onStageHandler=new Qa(this);a=new Xb;a.set_verticalAlign(ta.MIDDLE);a.set_horizontalAlign(Sa.CENTER);a.set_gap(10);this.set_layout(a);this.set_backgroundSkin(new sc(this._windowAssets.getImage("window_paper_content_bg"),new Z(5,
	5,
	16,
	16)));this.set_width(b);this.set_height(c);this.validateNow();b=new va;b.set_text(r.gettext("HA|Upgrade Ally Level"));b.set_textFormat(new Mb("_sans",
	16,
	3743232,!0,
	null,
	null,
	null,
	null,
	0));this.addChild(b);this.addChild(this._createProgressBar())
};h[
	"de.innogames.strategycity.allies.view.tabs.AllyLevelProgressBarComponent"
]=xdb;xdb.__name__="de.innogames.strategycity.allies.view.tabs.AllyLevelProgressBarComponent";xdb.__super__=R;xdb.prototype=l(R.prototype,
{dispose:function(){var a=this._experienceCallbackLink;
null!=a&&a.cancel();R.prototype.dispose.call(this)
	},_createProgressBar:function(){var a=this,b=new C;this._levelProgressBar=new ydb(this._allyWindowAssets);this._levelProgressBar.setLabelData("/",
		15,!0,
		16775138);this._levelProgressBar.set_x(25);this._levelProgressBar.set_y(5);b.addChild(this._levelProgressBar);var c=new C,d=new B(this._allyPortraitsAssets.getImage("historical_allies_portrait_border_lv_common"));c.addChild(d);this._prevLevelLabel.set_textFormat(new Mb("_sans",
		16,
		16711640,!0,
		null,
		null,
		null,
		null,
		0));this._prevLevelLabel.set_filters(ma.getThinTextOutlineFilterArray());c.addChild(this._prevLevelLabel);this._prevLevelLabel.set_x(1);this._prevLevelLabel.set_y(4);this._prevLevelLabel.set_width(38);c.set_x(5);c.addEventListener("mouseOver",function(g){a._showAllyLevelTooltip(c,!1)
		});c.addEventListener("mouseOut",function(g){a._hideAllyLevelTooltip()
		});b.addChild(c);this._nextLevelIcon=new C;var e=new B(this._allyPortraitsAssets.getImage("historical_allies_portrait_border_lv_common"));
this._nextLevelIcon.addChild(e);this._nextLevelLabel.set_textFormat(new Mb("_sans",
		16,
		16711640,!0,
		null,
		null,
		null,
		null,
		0));this._nextLevelLabel.set_filters(ma.getThinTextOutlineFilterArray());this._nextLevelIcon.addChild(this._nextLevelLabel);this._nextLevelLabel.set_x(1);this._nextLevelLabel.set_y(4);this._nextLevelLabel.set_width(38);this._nextLevelIcon.set_x(200);this._nextLevelIcon.addEventListener("mouseOver",function(g){a._showAllyLevelTooltip(a._nextLevelIcon,!0)
		});this._nextLevelIcon.addEventListener("mouseOut",
function(g){a._hideAllyLevelTooltip()
		});b.addChild(this._nextLevelIcon);this._onStageHandler.add(function(){return F.bind(a._model.ally,function(g){null!=g&&a._updateAlly(g,d,e)
			})
		});this._onStageHandler.add(function(){return a._levelUpCallbackLink
		});this._onStageHandler.add(function(){return a._experienceCallbackLink
		});return b
	},_updateAlly:function(a,b,c){var d=this;this._hasLevelUp=!1;var e=wla.getAllyLevelBorder(this._allyPortraitsAssets,a.rarity);b.set_bitmapData(e);c.set_bitmapData(e);this._levelProgressBar.setProgress(0,
!1);b=this._levelUpCallbackLink;null!=b&&b.cancel();this._levelUpCallbackLink=F.autorun(function(){var g=F.get_value(a.getCurrentLevel()),k=F.get_value(a.getNextLevel());d._hasLevelUp?d._levelUpAnimation(g,k):(d._prevLevelLabel.set_text(null==g?"null": ""+g),d._nextLevelLabel.set_text(null==k?"null": ""+k));d._hasLevelUp=!0
		});b=this._experienceCallbackLink;null!=b&&b.cancel();this._experienceCallbackLink=F.bind(this._model.currentDeltaExperience,function(g){if(!d._model.hasLevelUp){var k=d._model.neededDeltaExperience;
d._levelProgressBar.setProgress(g/k,!0);d._levelProgressBar.setCopy(U.printf("%s/%s",ja.smartNumber(g),ja.smartNumber(k)))
			}
		})
	},_showAllyLevelTooltip:function(a,b){null==b&&(b=!1);var c=F.get_value(this._model.ally);if(null!=c){var d=Lj.getRarityMetadata(c.rarity).maxLevel;b&&F.get_value(c.getCurrentLevel())>=d?this._allyLevelTooltip=new Gb(r.gettext("HA|Max level for this ally has been reached already!")):this._allyLevelTooltip=new N7(c.allyId,c.rarity,b?F.get_value(c.getNextLevel()):F.get_value(c.getCurrentLevel()),
b?c.getNextLevelBoosts():c.getCurrentLevelBoosts());this._allyLevelTooltip.set_x(a.getRect(a.stage).x+18);this._allyLevelTooltip.set_y(a.getRect(a.stage).y+8);L.getTooltipContainer().addChild(this._allyLevelTooltip);this._allyLevelTooltip.show()
		}
	},_hideAllyLevelTooltip:function(){null!=this._allyLevelTooltip&&(this._allyLevelTooltip.dispose(),this._allyLevelTooltip=null)
	},_levelUpAnimation:function(a,b){var c=this,d=this._experienceCallbackLink;null!=d&&d.cancel();this._levelProgressBar.setProgress(1,
!0,.5);O._to(this._nextLevelIcon,.1,
		{scaleX: 1.1,scaleY: 1.1,delay:.5,onComplete:function(){c._prevLevelLabel.set_text(null==a?"null": ""+a);c._nextLevelLabel.set_text(null==b?"null": ""+b);O._to(c._nextLevelIcon,.25,
				{scaleX: 1,scaleY: 1,onComplete:function(){c._levelProgressBar.setProgress(0);c._levelProgressBar.setProgress(F.get_value(c._model.currentDeltaExperience)/c._model.neededDeltaExperience,!0,.5);c._levelProgressBar.setCopy(U.printf("%s/%s",ja.smartNumber(F.get_value(c._model.currentDeltaExperience)),
ja.smartNumber(c._model.neededDeltaExperience)));c._recreateBindings()
					}
				})
			}
		})
	},_recreateBindings:function(){var a=this,b=this._experienceCallbackLink;null!=b&&b.cancel();this._experienceCallbackLink=F.bind(this._model.currentDeltaExperience,function(c){if(!a._model.hasLevelUp){var d=a._model.neededDeltaExperience;a._levelProgressBar.setProgress(c/d,!0);a._levelProgressBar.setCopy(U.printf("%s/%s",ja.smartNumber(c),ja.smartNumber(d)))
			}
		})
	},__class__:xdb
});var Uo=function(a,b,c,d){this._copy="";this._labelColor=
16446953;this._labelBold=!0;this._labelFontsize=13;this._backgroundVisible=!0;this._resourcesLoaded=!1;this._width=this._height=this._percent=this._xOffset=this._yOffset=0;this._progressPadding=2;L.call(this);this._width=a;this._height=b;this._setProgress(c);this._progressIcon=d
};h[
	"de.innogames.strategycity.main.view.cityui.greatbuildings.components.generic.ProgressBar"
]=Uo;Uo.__name__="de.innogames.strategycity.main.view.cityui.greatbuildings.components.generic.ProgressBar";Uo.__super__=L;Uo.prototype=
l(L.prototype,
{setLabelData:function(a,b,c,d){null==d&&(d=16446953);null==c&&(c=!0);null==b&&(b=13);null==c&&(c=!0);this._copy=a;this._labelFontsize=b;this._labelBold=c;this._labelColor=d
	},setCopy:function(a){this._copy=a;this._resourcesLoaded&&(null!=this._tfLabel?this._tfLabel.set_text(a):this._createTfLabel())
	},updateSize:function(a,b){this._width=a;this._height=b;this._background.set_width(a);this._background.set_height(this._height);this._setProgressSize();null!=this._tfLabel&&this._tfLabel.set_width(this._width);
null!=this._progressIcon&&this._progressIcon.set_x(this._progress.get_x()+this._progress.get_width()-this._progressIcon.get_width()/2)
	},offsetTextXPosition:function(a){this._xOffset=a;null!=this._tfLabel&&(a=this._tfLabel,a.set_x(a.get_x()+this._xOffset))
	},offsetTextYPosition:function(a){this._yOffset=a;null!=this._tfLabel&&(a=this._tfLabel,a.set_y(a.get_y()+this._yOffset))
	},setProgress:function(a,b,c,d){null==d&&(d=!0);null==c&&(c=.2);null==b&&(b=!1);if(0>a||1<a)throw ba.thrown(new wb("Percent values must be between 0 and 1"));
this._percent!=a&&(this._percent=a,this._resourcesLoaded&&(a=(this._width-2*this._progressPadding)*this._percent,b&&d?this._animateProgressEase(c,a|0):b?this._animateProgress(c,a|0):this._updateProgressBarWidth(a|0)))
	},_onAddedToStage:function(a){L.prototype._onAddedToStage.call(this,a);var b=m(this,this._handleAssetsLoaded);yb.getInstance().load(this._getAssetLibraries()).handle(function(c){switch(c._hx_index){case 0:za.invoke(b,c.data);break;case 1:c=c.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+
c.message))
			}
		})
	},_getAssetLibraries:function(){return[
			"shared/gui/tooltip/tooltip"
		]
	},setProgressPadding:function(a){this._progressPadding=a
	},_createLayout:function(){this._background.set_width(this._width);this._background.set_height(this._height);this.addChild(this._background);this._background.set_visible(this._backgroundVisible);this._progress.set_x(this._progress.set_y(this._progressPadding));this._setProgressSize();this.addChild(this._progress);null!=this._copy&&""!=this._copy&&this._createTfLabel();
this._addProgressIcon()
	},_addProgressIcon:function(){null!=this._progressIcon&&(this._progressIcon.set_x(this._getProgressIconPosition(this._progress.get_width()|0)),this._progressIcon.set_y(this._progress.get_height()-this._progressIcon.get_height()+3),this.addChild(this._progressIcon))
	},_createTfLabel:function(){this._tfLabel=P.createArialTextfield(this._labelColor,this._labelBold,this._labelFontsize,
		0);this._tfLabel.set_width(this._width);this._tfLabel.set_x(this._xOffset);this._tfLabel.set_y(1+
this._yOffset);this._tfLabel.set_text(this._copy);this.addChild(this._tfLabel)
	},_handleAssetsLoaded:function(a){this._assets=a;this._background=this._getBackgroundBitmap();null==this._progress&&this._setProgress(this._getProgressBitmap());this._createLayout();this._resourcesLoaded=!0
	},_setProgress:function(a){this._progress=a;null!=this._progress&&this._progress instanceof B&&K.__cast(this._progress,B).set_pixelSnapping(0);null!=this._progress&&this._progress instanceof ua&&K.__cast(this._progress,
ua).set_pixelSnapping(0)
	},_getBackgroundBitmap:function(){var a=this._assets.h[
			"shared/gui/tooltip/tooltip"
		];null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "shared/gui/tooltip/tooltip" from LoadedReflibs.'));return new sc(a.getImage("production_tooltip_progress_bar_bg"),new Z(2,
		2,
		105,
		8))
	},_getProgressBitmap:function(){var a=this._assets.h[
			"shared/gui/tooltip/tooltip"
		];null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "shared/gui/tooltip/tooltip" from LoadedReflibs.'));
return new B(a.getImage("production_tooltip_progress"))
	},_animateProgressEase:function(a,b){O._to(this._progress,a,
		{width:b
		});null!=this._progressIcon&&O._to(this._progressIcon,a,
		{x:this._getProgressIconPosition(b)
		})
	},_animateProgress:function(a,b){O._to(this._progress,a,
		{width:b,ease:lf.easeNone
		});null!=this._progressIcon&&O._to(this._progressIcon,a,
		{x:this._getProgressIconPosition(b),ease:lf.easeNone
		})
	},_updateProgressBarWidth:function(a){this._progress.set_width(a);null!=this._progressIcon&&this._progressIcon.set_x(this._getProgressIconPosition(a))
	},
_getProgressIconPosition:function(a){return null==this._progressIcon?0:this._progress.get_x()+a-this._progressIcon.get_width()/2|0
	},_setProgressSize:function(){var a=2*this._progressPadding,b=(this._width-a)*this._percent;a=this._height-a;var c=this._progress;c=c instanceof ua?c:null;null!=c?(c.set_width(b),c.set_height(a)):(this._progress.set_width(b|0),this._progress.set_height(a))
	},set_backgroundVisible:function(a){this._backgroundVisible=a;null!=this._background&&this._background.set_visible(a);
return a
	},__class__:Uo,__properties__:l(L.prototype.__properties__,
	{set_backgroundVisible: "set_backgroundVisible"
	})
});var ydb=function(a){Uo.call(this,
	193,
	25);this._allyWindowAssets=a;this.setProgressPadding(0)
};h[
	"de.innogames.strategycity.allies.view.tabs._AllyLevelProgressBarComponent.LevelUpProgressBar"
]=ydb;ydb.__name__="de.innogames.strategycity.allies.view.tabs._AllyLevelProgressBarComponent.LevelUpProgressBar";ydb.__super__=Uo;ydb.prototype=l(Uo.prototype,
{_getBackgroundBitmap:function(){return new sc(this._allyWindowAssets.getImage("historical_allies_info_level_bar_empty"),
new Z(2,
		2,
		7,
		21))
	},_getProgressBitmap:function(){return new sc(this._allyWindowAssets.getImage("historical_allies_info_level_bar_fill"),new Z(3,
		3,
		5,
		19))
	},_createTfLabel:function(){this._tfLabel=P.createArialTextfield(this._labelColor,this._labelBold,this._labelFontsize,
		0);this._tfLabel.set_filters(ma.getTextOutlineFilterArray());this._tfLabel.set_width(this._width);this._tfLabel.set_y(1+this._yOffset);this._tfLabel.set_text(this._copy);this.addChild(this._tfLabel)
	},__class__:ydb
});var WHb=function(a){this._cachedLevel=
-1;this.hasLevelUp=!1;var b=this;this.ally=new la(ra.sync(function(){var c=F.get_value(a.getObservableItem());if(null!=c){var d=c.getCurrentLevel();b._cachedLevel=F.get_value(d);d=c.getExperience();b.currentDeltaExperience=F.map(d,OZ.plain(function(e){var g=F.get_value(c.getCurrentLevelExperience()),k=F.get_value(c.getNextLevelExperience());b.neededDeltaExperience=k-g;k=F.get_value(c.getCurrentLevel());b.hasLevelUp=k>b._cachedLevel;return e-g
			}))
		}return c
	}),null)
};h[
	"de.innogames.strategycity.allies.view.tabs.AllyLevelProgressBarViewModel"
]=
WHb;WHb.__name__="de.innogames.strategycity.allies.view.tabs.AllyLevelProgressBarViewModel";WHb.prototype={__class__:WHb
};var lF=function(a){R.call(this);this._model=a;this._onStageHandler=new Qa(this);this._disposer=new kh;this._createLayout();this.set_layoutData(qa.fill());this._observeSelectedAlly()
};h[
	"de.innogames.strategycity.allies.view.tabs.AllyWindowTabContent"
]=lF;lF.__name__="de.innogames.strategycity.allies.view.tabs.AllyWindowTabContent";lF.__super__=R;lF.prototype=l(R.prototype,
{_createLayout:function(){var a=
new Xb;a.set_verticalAlign(ta.TOP);a.set_horizontalAlign(Sa.CENTER);a.set_paddingTop(79);a.set_paddingLeft(a.set_paddingRight(lF.HORIZONTAL_PADDING));this.set_layout(a)
	},_observeSelectedAlly:function(){var a=this;this._onStageHandler.add(function(){return F.bind(a._model.getSelectedAlly(),function(b){a._disposer.cancel();null!=b&&(a._onSelectedAllyChanged(b),a._disposer.add(b.get_allyUpdatedSignal().listen(function(c){a._onAllyUpdated(b)
				})))
			})
		})
	},__class__:lF
});var Vo=function(a){lF.call(this,a);
this._scrollContainer=new Kh(new C,Vo.SCROLL_CONTAINER_WIDTH,Vo.SCROLL_CONTAINER_HEIGHT,new Wo);this.addChild(this._scrollContainer)
};h[
	"de.innogames.strategycity.allies.view.tabs.AllyWindowScrollableTabContent"
]=Vo;Vo.__name__="de.innogames.strategycity.allies.view.tabs.AllyWindowScrollableTabContent";Vo.__super__=lF;Vo.prototype=l(lF.prototype,
{_createLayout:function(){var a=new Xb;a.set_verticalAlign(ta.TOP);a.set_horizontalAlign(Sa.CENTER);a.set_paddingTop(15);a.set_paddingLeft(lF.HORIZONTAL_PADDING);
this.set_layout(a)
	},__class__:Vo
});var TS=function(a){Vo.call(this,a);this._addScrollingContent()
};h[
	"de.innogames.strategycity.allies.view.tabs.AllyWindowBiographyTabContent"
]=TS;TS.__name__="de.innogames.strategycity.allies.view.tabs.AllyWindowBiographyTabContent";TS.__super__=Vo;TS.prototype=l(Vo.prototype,
{_addScrollingContent:function(){this._contentContainer=new R;this._contentContainer.set_layout(new Xb);var a=new ub(TS.DESCRIPTION_WIDTH,Vo.FIRST_ELEMENT_Y-6);this._contentContainer.addChild(a);
a=new va;a.set_text(r.gettext("HA|Biography"));a.set_textFormat(Za.createTextFormat(3743232,
		18,!0,
		0));a.set_width(TS.DESCRIPTION_WIDTH);this._contentContainer.addChild(a);this._description=new va;this._description.set_textFormat(Za.createTextFormat(4203536,
		14,!1,
		0));this._description.set_wordWrap(!0);this._description.set_width(TS.DESCRIPTION_WIDTH);this._contentContainer.addChild(this._description);this._scrollContainer.setContent(this._contentContainer)
	},_onSelectedAllyChanged:function(a){this._description.set_text(this._model.getAllyMetadata(a).description);
this._contentContainer.validateNow();this._scrollContainer.update();this._scrollContainer.scrollToTop()
	},_onAllyUpdated:function(a){},__class__:TS
});var zdb=function(a,b,c,d){Vo.call(this,a);this._windowAssets=b;this._iconAssets=c;this._allyWindowAssets=d;this._scrollContent=new C;this._scrollContainer.setContent(this._scrollContent);this._addRarityAndLevelSection();this._addBoosts();this._addPlaceButton()
};h[
	"de.innogames.strategycity.allies.view.tabs.AllyWindowEffectsTabContent"
]=zdb;zdb.__name__=
"de.innogames.strategycity.allies.view.tabs.AllyWindowEffectsTabContent";zdb.__super__=Vo;zdb.prototype=l(Vo.prototype,
{_onSelectedAllyChanged:function(a){this._rarityLabel.set_text(this._model.getRarityName(a.rarity));this._levelValueLabel.set_text(fa.string(F.get_value(a.getCurrentLevel())));this._onAllyUpdated(a)
	},_onAllyUpdated:function(a){this._unbindPlaceGroupEvents();this._ally=a;this._updateAllyBoosts(a.getCurrentLevelBoosts());this._updatePlacementGroup()
	},_addRarityAndLevelSection:function(){var a=
new C;a.set_y(Vo.FIRST_ELEMENT_Y);this._scrollContent.addChild(a);var b=new R,c=new fb;c.set_verticalAlign(ta.MIDDLE);c.set_horizontalAlign(Sa.CENTER);b.set_layout(c);c=new sc(this._windowAssets.getImage("window_paper_content_white_bg"),new Z(6,
		6,
		16,
		16));c.set_width(245);c.set_height(43);b.set_backgroundSkin(c);a.addChild(b);c=new B(this._allyWindowAssets.getImage("historical_allies_level_border_left"));c.set_x(-2);c.set_y(12);a.addChild(c);c=new B(this._allyWindowAssets.getImage("historical_allies_level_border_right"));
c.set_x(177);c.set_y(-2);a.addChild(c);this._rarityLabel=new va;this._rarityLabel.set_textFormat(Lf.fromSimpleTextFormat(P.getTextFormat(4203536,
		18,!0,
		0)));this._rarityLabel.set_verticalAlign(ta.MIDDLE);this._rarityLabel.set_width(145);b.addChild(this._rarityLabel);c=new B(this._allyWindowAssets.getImage("historical_allies_level_divider"));c.set_x(145);c.set_y(9);a.addChild(c);a=new va;a.set_textFormat(Lf.fromSimpleTextFormat(P.getTextFormat(4203536,
		18,!0,
		4)));a.set_text(r.gettext("HA|Lv"));a.set_verticalAlign(ta.MIDDLE);
a.set_width(40);b.addChild(a);this._levelValueLabel=new va;this._levelValueLabel.set_textFormat(Lf.fromSimpleTextFormat(P.getTextFormat(4203536,
		25,!0,
		0)));this._levelValueLabel.set_verticalAlign(ta.MIDDLE);this._levelValueLabel.set_width(60);b.addChild(this._levelValueLabel)
	},_addBoosts:function(){var a=this._boostsContainer=new R,b=new Xb;b.set_verticalAlign(ta.MIDDLE);b.set_horizontalAlign(Sa.CENTER);b.set_gap(9);a.set_layout(b);this._boostsContainer.set_y(Vo.FIRST_ELEMENT_Y+65);this._addAllyBoosts();
this._scrollContent.addChild(this._boostsContainer)
	},_addSpecialBoosts:function(){var a=new va;a.set_text(r.gettext("HA|Special Effects"));a.set_textFormat(Lf.fromSimpleTextFormat(P.getTextFormat(4203536,
		18,!0,
		0)));a.set_verticalAlign(ta.MIDDLE);this._boostsContainer.addChild(a);a=this._specialBoostsContainer=new R;var b=new Xb;b.set_verticalAlign(ta.MIDDLE);b.set_gap(10);a.set_layout(b);this._specialBoostsContainer.set_height(25);this._boostsContainer.addChild(this._specialBoostsContainer)
	},_addAllyBoosts:function(){var a=
new va;a.set_text(r.gettext("HA|Ally Boosts"));a.set_textFormat(Lf.fromSimpleTextFormat(P.getTextFormat(4203536,
		18,!0,
		0)));a.set_verticalAlign(ta.MIDDLE);this._boostsContainer.addChild(a);a=this._allyBoostsContainer=new R;var b=new Xb;b.set_verticalAlign(ta.MIDDLE);b.set_gap(10);a.set_layout(b);this._allyBoostsContainer.set_height(25);this._boostsContainer.addChild(this._allyBoostsContainer)
	},_updateAllyBoosts:function(a){this._allyBoostsContainer.removeChildren();for(var b=0;b<a.length;){var c=this._createBoostComponent(a[b++
			]);
this._allyBoostsContainer.addChild(c)
		}this._allyBoostsContainer.validateNow();this._boostsContainer.validateNow();this._scrollContainer.update()
	},_updatePlacementGroup:function(){var a=this._model.hasRoomForAllyInCity(this._ally),b=this._ally.isAttached();this._placeButton.set_enabled(b||a);this._description.set_text(b?r.gettext("HA|Call ally back"):a?r.gettext("HA|Place ally"):r.gettext("HA|No military rooms available"));this._placeButton.set_tooltipText(this._placeButton.get_enabled()?null:r.gettext("HA|No building with a room of the required type available in your city"));
b&&this._bindPlaceGroupMouseEvents();a=b?this._allyWindowAssets.getImage("historical_allies_recall_icon"):this._allyWindowAssets.getImage("historical_allies_place_icon");this._placeButton.setOverlayIcon(new B(a))
	},_bindPlaceGroupMouseEvents:function(){this._placeButtonHoverTarget.addEventListener("mouseOver",m(this,this._onPlaceGroupMouseOver));this._placeButtonHoverTarget.addEventListener("mouseOut",m(this,this._onPlaceGroupMouseOut));this._placeButton.addEventListener("mouseOver",m(this,this._onPlaceGroupMouseOver));
this._placeButton.addEventListener("mouseOut",m(this,this._onPlaceGroupMouseOut))
	},_unbindPlaceGroupEvents:function(){this._placeButtonHoverTarget.removeEventListener("mouseOver",m(this,this._onPlaceGroupMouseOver));this._placeButtonHoverTarget.removeEventListener("mouseOut",m(this,this._onPlaceGroupMouseOut));this._placeButton.removeEventListener("mouseOver",m(this,this._onPlaceGroupMouseOver));this._placeButton.removeEventListener("mouseOut",m(this,this._onPlaceGroupMouseOut));this._removeAllyBuildingTooltip()
	},
_onPlaceGroupMouseOver:function(a){a=this._model.getAllyBuildingTooltipFactory(F.get_value(this._ally.getMapEntityId()));if(null!=a){var b=L.getTooltipContainer();this._allyBuildingTooltip=a();this._allyBuildingTooltip.set_x(b.stage.get_mouseX());this._allyBuildingTooltip.set_y(b.stage.get_mouseY());this._allyBuildingTooltip.set_showDelay(300);b.addChild(this._allyBuildingTooltip)
		}
	},_onPlaceGroupMouseOut:function(a){this._removeAllyBuildingTooltip()
	},_removeAllyBuildingTooltip:function(){null!=this._allyBuildingTooltip&&
(L.getTooltipContainer().removeChild(this._allyBuildingTooltip),this._allyBuildingTooltip=null)
	},_createBoostComponent:function(a){var b=new R,c=new fb;c.set_verticalAlign(ta.MIDDLE);c.set_horizontalAlign(Sa.CENTER);c.set_gap(5);b.set_layout(c);c=new sc(this._windowAssets.getImage("window_paper_content_white_bg"),new Z(6,
		6,
		16,
		16));c.set_width(245);c.set_height(30);b.set_backgroundSkin(c);a=od.getBoostHintData(a);b.addChild(new B(this._iconAssets.getImage(a.icon)));c=P.createScrollingTextfield(4203536,
!1,
		14,
		3);c.set_width(205);c.set_text(a.text);b.addChild(c);return b
	},_addPlaceButton:function(){var a=this,b=new R;b.set_includeInLayout(!1);b.set_x(8);b.set_y(370);this.addChild(b);var c=new fb;c.set_verticalAlign(ta.MIDDLE);c.set_horizontalAlign(Sa.CENTER);c.set_gap(10);c.set_paddingLeft(7);b.set_layout(c);b.set_backgroundSkin(new B(this._allyWindowAssets.getImage("historical_allies_ally_place_banner")));this._description=new va;this._description.set_text(r.gettext("HA|Place ally"));this._description.set_width(160);
this._description.set_wordWrap(!0);this._description.set_textFormat(Lf.fromSimpleTextFormat(new mj("_sans",
		14,
		16182986,!1,
		null,
		null,
		null,
		null,
		0)));this._description.set_filters(ma.getAlliesDropShadow());b.addChild(this._description);this._placeButtonHoverTarget=new R;this._placeButtonHoverTarget.set_includeInLayout(!1);this._placeButtonHoverTarget.set_x(8);this._placeButtonHoverTarget.set_y(15);this._placeButtonHoverTarget.addChild(Ob.createWhiteRectangle(280,
		70,
		0));b.addChild(this._placeButtonHoverTarget);
this._placeButton=Bb.createResizableButton(69,
		60);this._placeButton.setOverlayIcon(new B(this._allyWindowAssets.getImage("historical_allies_place_icon")));this._placeButton.setClickCallback(function(d){d=F.get_value(a._model.getSelectedAlly());null!=d&&(d.isAttached()?(a._unbindPlaceGroupEvents(),a._model.unassignAlly(d.id)):a._model.hasRoomForAllyInCity(d)&&a._model.switchToAllyAssignmentMode())
		});b.addChild(this._placeButton)
	},__class__:zdb
});var ho=function(a,b,c,d,e){this._buttons=[];Vo.call(this,
a);this._windowAssets=b;this._buttonAssets=c;this._allyPortraitsAssets=d;this._allyWindowAssets=e;this._addScrollingContent();this._createAutoLevelUpGroup()
};h[
	"de.innogames.strategycity.allies.view.tabs.AllyWindowLevelUpTabContent"
]=ho;ho.__name__="de.innogames.strategycity.allies.view.tabs.AllyWindowLevelUpTabContent";ho.__super__=Vo;ho.prototype=l(Vo.prototype,
{_onSelectedAllyChanged:function(a){this._scrollContainer.update();this._scrollContainer.scrollToTop();this._updateButtons(a)
	},_onAllyUpdated:function(a){this._updateButtons(a)
	},
_updateButtons:function(a){if(null!=a){this._autoLevelUpButton.set_enabled(this._model.canAutoLevelUp(a.id));for(var b=0,c=this._buttons;b<c.length;)c[b++
			].set_enabled(F.get_value(a.getCurrentLevel())<this._model.getAllyMaxLevel(a.id))
		}
	},_addScrollingContent:function(){var a=this,b=new C,c=new xdb(this._model.allyLevelProgressBarViewModel,ho.CONTENT_WIDTH,ho.LEVEL_CONTAINER_HEIGHT,this._windowAssets,this._allyWindowAssets,this._allyPortraitsAssets);c.set_y(Vo.FIRST_ELEMENT_Y);b.addChild(c);var d=
new va;d.set_text(r.gettext("HA|Training"));d.set_textFormat(new Mb("_sans",
		16,
		3743232,!0,
		null,
		null,
		null,
		null,
		0));d.set_width(ho.CONTENT_WIDTH);d.set_y(c.get_height()+Vo.FIRST_ELEMENT_Y+20);d.validateNow();b.addChild(d);this._createTrainingContainer();this._trainingContainer.set_y(ho.TRAINING_CONTAINER_Y);b.addChild(this._trainingContainer);this._buffer=new ub(1,
		90);b.addChild(this._buffer);this._scrollContainer.setContent(b);this._onStageHandler.add(function(){return F.autorun(function(){var e=a._model.getScrolls();
a._updateTrainingContainer(e);a._scrollContainer.update();e=F.get_value(a._model.getSelectedAlly());null!=e&&(a._updateButtons(e),a._autoLevelUpButtonDescription.set_text(F.get_value(e.getCurrentLevel())>=a._model.getAllyMaxLevel(e.id)?r.gettext("HA|Max level for this ally has been reached already!"):a._model.canAutoLevelUp(e.id)?r.gettext("HA|Use multiple Scrolls to level up!"):r.gettext("HA|You don't have enough Scrolls to level up.")))
			})
		})
	},_createTrainingContainer:function(){var a=this._trainingContainer=
new R,b=new Xb;b.set_verticalAlign(ta.MIDDLE);b.set_horizontalAlign(Sa.CENTER);b.set_gap(-71);a.set_layout(b);this._trainingContainer.set_width(ho.CONTENT_WIDTH)
	},_updateTrainingContainer:function(a){this._trainingContainer.removeChildren();for(var b=this._buttons.length=0,c=[],d=a.keys();d.hasNext();)c.push(d.next());c.reverse();for(d=0;d<c.length;){var e=c[d
			];++d;var g=a.get(e);0<g&&(b+=g|0,e=this._createTrainingScrollEntry(new Gk(e,g)),this._trainingContainer.addChild(e))
		}0==b?(this._trainingContainer.set_y(ho.TRAINING_CONTAINER_Y),
this._trainingContainer.addChild(this._createTrainingScrollEmptyState()),this._autoLevelUpGroup.set_visible(!1)):(this._trainingContainer.addChild(this._createHeroicEndeavorsButton()),this._trainingContainer.set_y(ho.TRAINING_CONTAINER_Y+5),this._autoLevelUpGroup.set_visible(!0),this._trainingContainer.validateNow(),this._buffer.set_y(this._trainingContainer.get_y()+this._trainingContainer.get_height()))
	},_createHeroicEndeavorsButton:function(){var a=this,b=Bb.createResizableButton(180,
		50,
		"orange");
b.setText(r.gettext("Heroic Endeavors"),
		16767426,!0,
		16);b.get_textField().set_width(180);b.get_textField().set_wordWrap(!0);b.alignTextNoCeil();b.setClickCallback(function(c){a._onHeroicEndeavorsClicked()
		});return b
	},_createTrainingScrollEmptyState:function(){var a=new R,b=new Xb;b.set_verticalAlign(ta.MIDDLE);b.set_horizontalAlign(Sa.CENTER);b.set_gap(20);a.set_layout(b);a.set_width(ho.CONTENT_WIDTH);b=new va;b.set_text(r.gettext("No resources available. Complete Heroic Endeavors to acquire them."));
b.set_textFormat(new Mb("_sans",
		16,
		3743232,!1,
		null,
		null,
		null,
		null,
		0));b.set_wordWrap(!0);b.set_layoutData(xd.fillHorizontal());a.addChild(b);a.addChild(this._createHeroicEndeavorsButton());return a
	},_onHeroicEndeavorsClicked:function(){this._model.showAllyQuestPeriodWindow()
	},_createTrainingScrollEntry:function(a){var b=new C,c=new ua(this._windowAssets.getImage("window_paper_content_white_bg"),new Z(5,
		5,
		16,
		16));c.set_width(ho.CONTENT_WIDTH);c.set_height(ho.TRAINING_ENTRY_HEIGHT);b.addChild(c);c=
new va;c.set_text(U.printf(r.gettext("HA|%s XP"),ja.smartNumber(this._model.getXPFromScroll(a))));c.set_textFormat(new Mb("_sans",
		14,
		3743232,!1,
		null,
		null,
		null,
		null,
		3));c.set_layoutData(ne.fillHorizontal());c.set_x(35);c.set_y(12);b.addChild(c);b.addChild(this._createTrainingButtonComponent(a));return b
	},_createTrainingButtonComponent:function(a){var b=this,c=new C,d=new R,e=new fb;e.set_verticalAlign(ta.MIDDLE);e.set_horizontalAlign(Sa.CENTER);e.set_paddingLeft(3);e.set_paddingBottom(2);d.set_layout(e);
e=new B(this._allyWindowAssets.getImage("historical_allies_trainings_manual_amount_flap"));d.set_backgroundSkin(e);d.set_x(131);d.set_y(5);d.set_width(e.get_width());e=new va;e.set_textFormat(new Mb("_sans",
		15,
		16182986,!0,
		null,
		null,
		null,
		null,
		0));e.set_text(1E4<=a.get_value()?ja.smartNumber(a.get_value(),
		0):fa.string(a.get_value()));e.set_toolTip(ja.smartNumber(a.get_value()));e.set_verticalAlign(ta.MIDDLE);e.set_filters(ma.getAlliesTextOutlineFilterArray());d.addChild(e);c.addChild(d);d=Bb.createResizableButton(ho.TRAINING_BUTTON_WIDTH,
		44);d.setOverlayIcon(this._getIconFromScroll(a),
		-10,
		-11);d.setText("1",
		16767426,!1,
		16);d.setMargin(0,
		0,
		0,ho.TRAINING_BUTTON_WIDTH/2|0);e=F.get_value(this._model.getSelectedAlly());d.setEnabledImmediately(null!=e&&F.get_value(e.getCurrentLevel())<this._model.getAllyMaxLevel(e.id));this._buttons.push(d);d.setClickCallback(function(g){g=F.get_value(b._model.getSelectedAlly());null!=g&&b._model.useScroll(g.id,a)
		});d.set_x(176);c.addChild(d);return c
	},_createAutoLevelUpGroup:function(){var a=this;this._autoLevelUpGroup=
new R;this._autoLevelUpGroup.set_includeInLayout(!1);this._autoLevelUpGroup.set_x(8);this._autoLevelUpGroup.set_y(370);this.addChild(this._autoLevelUpGroup);var b=this._autoLevelUpGroup,c=new fb;c.set_verticalAlign(ta.MIDDLE);c.set_horizontalAlign(Sa.CENTER);c.set_gap(10);c.set_paddingLeft(7);b.set_layout(c);this._autoLevelUpGroup.set_backgroundSkin(new B(this._allyWindowAssets.getImage("historical_allies_ally_place_banner")));this._autoLevelUpButtonDescription=new va;this._autoLevelUpButtonDescription.set_width(160);
this._autoLevelUpButtonDescription.set_wordWrap(!0);this._autoLevelUpButtonDescription.set_textFormat(new Mb("_sans",
		14,
		16182986,!1,
		null,
		null,
		null,
		null,
		0));this._autoLevelUpButtonDescription.set_filters(ma.getAlliesDropShadow());this._autoLevelUpGroup.addChild(this._autoLevelUpButtonDescription);this._autoLevelUpButton=Bb.createResizableButton(ho.TRAINING_BUTTON_WIDTH,
		60);this._autoLevelUpButton.setOverlayIcon(new B(this._allyWindowAssets.getImage("historical_allies_use_all_icon")));this._autoLevelUpButton.setClickCallback(function(d){d=
F.get_value(a._model.getSelectedAlly());null!=d&&a._model.autoLevelUp(d.id)
		});this._autoLevelUpGroup.addChild(this._autoLevelUpButton)
	},_getIconFromScroll:function(a){switch(a.get_id()){case "historical_allies_train_manual_1":return new B(this._allyWindowAssets.getImage("historical_allies_trainings_manual_1"));case "historical_allies_train_manual_2":return new B(this._allyWindowAssets.getImage("historical_allies_trainings_manual_2"));case "historical_allies_train_manual_3":return new B(this._allyWindowAssets.getImage("historical_allies_trainings_manual_3"));
case "historical_allies_train_manual_4":return new B(this._allyWindowAssets.getImage("historical_allies_trainings_manual_4"));case "historical_allies_train_manual_5":return new B(this._allyWindowAssets.getImage("historical_allies_trainings_manual_5"));default:return null
		}
	},__class__:ho
});var Adb=function(a){lF.call(this,a);a=new va;a.set_text(r.gettext("HA|Coming soon!"));a.set_textFormat(new Mb("_sans",
	18,
	3743232,!0,
	null,
	null,
	null,
	null,
	0));this.addChild(a);a=new va;a.set_width(250);a.set_text(r.gettext("HA|Once an ally gains access to special skills, you can choose from 3 random skills. Selecting the same skill multiple times increases its level and strength."));
a.set_textFormat(new Mb("_sans",
	14,
	3743232,!1,
	null,
	null,
	null,
	null,
	0));a.set_wordWrap(!0);this.addChild(a)
};h[
	"de.innogames.strategycity.allies.view.tabs.AllyWindowSkillsTabContent"
]=Adb;Adb.__name__="de.innogames.strategycity.allies.view.tabs.AllyWindowSkillsTabContent";Adb.__super__=lF;Adb.prototype=l(lF.prototype,
{_onSelectedAllyChanged:function(a){},_onAllyUpdated:function(a){},__class__:Adb
});var US=function(a){this._width=this._tabImageWidth=0;L.call(this);this._width=a;this._createTabContainer()
};
h[
	"de.innogames.strategycity.shared.ui.BaseTabBar"
]=US;US.__name__="de.innogames.strategycity.shared.ui.BaseTabBar";US.__super__=L;US.prototype=l(L.prototype,
{addTab:function(a,b,c,d,e,g){null==e&&(e=!0);null==g&&(g=this._tabContainer.get_numChildren());a=this._getRadioButton(a,b,c,d,e,g);this._tabContainer.addChildAt(a,g);this._radioGroup.addRadioButton(a,g);this._radioGroup.addEventListener("change",m(this,this._onRadioGroupChanged),!1,
		0,!0);this._invalidateTabNavigation()
	},removeTab:function(a){a=
this._radioGroup.getButtonById(a);null!=a&&(this._tabContainer.removeChild(K.__cast(a,jc)),this._radioGroup.removeRadioButton(a),this._invalidateTabNavigation(),a.get_selected()&&(a=this._radioGroup.get_buttons(),
		0<a.length?this.selectTab(a[
			0
		].get_id()):this._selectedTab=null))
	},selectTab:function(a){this._selectedTab=a;this._radioGroup.selectButtonById(a)
	},selectNextTab:function(){var a=this._radioGroup.get_buttons(),b=a.indexOf(this._radioGroup.get_selectedButton());b>a.length-2?b=0:++b;this.selectTab(a[b
		].get_id())
	},
getTabById:function(a){a=this._radioGroup.getButtonById(a);return a instanceof Bm?a: null
	},_onRadioGroupChanged:function(a){this.dispatchEvent(new D("change"))
	},_createTabContainer:function(){this._tabContainer=new C;this._tabContainer.set_y(6);this.addChild(this._tabContainer);this._radioGroup=new iF
	},_invalidateTabNavigation:function(){for(var a=this._getTabMarginLeft(),b=this._radioGroup.get_buttons(),c=0;c<b.length;){var d=b[c
			],e=c++;d=d instanceof Bm?d:null;var g=(this._width-14-(this._radioGroup.get_numButtons()-
1)*a)/this._radioGroup.get_numButtons();d.setSize(g|0,d.get_height()|0);d.set_x(e*(g+a));null!=d.get_textField()&&d.alignText()
		}this._tabContainer.set_x(this._width/2-this._tabContainer.get_width()/2)
	},_getTabMarginLeft:function(){return 6
	},get_selectedTabId:function(){return this._radioGroup.get_selectedButtonId()
	},__class__:US,__properties__:l(L.prototype.__properties__,
	{get_selectedTabId: "get_selectedTabId"
	})
});var Bdb=function(a,b){this._allyWindowAssets=a;US.call(this,b)
};h[
	"de.innogames.strategycity.allies.view.tabs.AllyWindowTabBar"
]=
Bdb;Bdb.__name__="de.innogames.strategycity.allies.view.tabs.AllyWindowTabBar";Bdb.__super__=US;Bdb.prototype=l(US.prototype,
{_getRadioButton:function(a,b,c,d,e,g){b=new Kla(a,this._allyWindowAssets);0==this._tabImageWidth&&null!=c&&(this._tabImageWidth=c.get_width()|0);b.set_id(a);null!=c&&b.addCenteredIcon(c);d&&b.set_tooltipText(d);b.set_enabled(e);return b
	},_createTabContainer:function(){this._tabContainer=new C;this._tabContainer.set_y(35);this._tabContainer.set_x(-20);this.addChild(this._tabContainer);
this._radioGroup=new iF
	},_invalidateTabNavigation:function(){for(var a=this._getTabMarginTop(),b=this._radioGroup.get_buttons(),c=0;c<b.length;){var d=b[c
			],e=c++;d=d instanceof Kla?d:null;d.set_y(e*(d.get_height()+a));d.set_alpha(d.get_selected()?1:.5);d.get_selected()?d.applyGlowEffect():d.set_filters([])
		}
	},_getTabMarginTop:function(){return-8
	},__class__:Bdb
});var mF=function(){};h[
	"de.innogames.strategycity.shared.ui.IDisableableView"
]=mF;mF.__name__="de.innogames.strategycity.shared.ui.IDisableableView";
mF.__isInterface__=!0;mF.prototype={__class__:mF,__properties__: {set_enabled: "set_enabled",get_enabled: "get_enabled"
	}
};var Oa=function(a,b,c,d){this._smoothing=!1;this._clickDelayEnabled=!0;this._textMarginLeft=this._textMarginRight=this._textMarginTop=this._textMarginBottom=this._normalFontcolor=0;this._textField=null;this._transitionSpeed=.2;this._transitionSpeedNormal=.3;this._transitionSpeedFast=.5;this._isMouseDown=this._isMouseInside=!1;L.call(this);this._tooltipVisibleSignal=$b.trigger();this._init(a,
b,c,d)
};h[
	"de.innogames.strategycity.shared.ui.ImageButton"
]=Oa;Oa.__name__="de.innogames.strategycity.shared.ui.ImageButton";Oa.__interfaces__=[mF
];Oa.__super__=L;Oa.prototype=l(L.prototype,
{dispose:function(){this._removeMouseListener();this.removeEventListener("removedFromStage",m(this,this._onButtonRemovedFromStage));L.prototype.dispose.call(this);gg.instance.stage.get_focus()==this&&gg.instance.stage.set_focus(null);this._tooltipVisibleSignal.handlers.clear()
	},init:function(a,b,c,d){this._init(a,
b,c,d)
	},setClickCallback:function(a){this._callback=a;return this
	},setEnabledImmediately:function(a){a!=this.get_enabled()&&(this.set_enabled(a),this.removeEventListener("enterFrame",m(this,this._render)),null!=this._hover&&this._hover.set_alpha(0),null!=this._pressed&&this._pressed.set_alpha(0),null!=this._disabled&&this._disabled.set_alpha(0),this._activeState.set_alpha(1))
	},setId:function(a){this._id=a;return this
	},setText:function(a,b,c,d,e){null==d&&(d=13);null==c&&(c=!0);null==b&&(b=0);null==
a&&(a="");null==e&&(e=0);null!=this._textField&&(this.removeChild(this._textField),this._textField=null);if(!a)return this;this._textAlignHorizontal=e;this._normalFontcolor=b;this.addChild(this._textField=P.createArialTextfield(b,c,d,e));this._textField.set_text(a);this._textField.set_autoSize(0);this.alignText();return this
	},updateText:function(a){null==this._textField?this.setText(a):(this._textField.set_text(a),this.alignText())
	},rollOver:function(){this.get_enabled()&&this._setActiveState(this._hover);
this._onMouseOver(null)
	},rollOut:function(){this.get_enabled()&&this._setActiveState(this._normal);this._onMouseOut(null)
	},clickDown:function(){this.get_enabled()&&this._setActiveState(this._pressed);this._onMouseDown(null)
	},forceClick:function(){this._onMouseDown(null);this._onMouseUp(null)
	},alignText:function(){if(null!=this._normal){var a=this._normal.get_height()-this._textMarginTop-this._textMarginBottom|0,b=this._normal.get_width()-this._textMarginLeft-this._textMarginRight|0;this._textField.set_x(this._textMarginLeft);
0==this._textAlignHorizontal&&this._textField.set_x(this._textMarginLeft+b/2-this._textField.get_width()/2|0);4==this._textAlignHorizontal&&this._textField.set_x(this._textMarginLeft+b-this._textField.get_width()|0);this._textField.set_y(Math.ceil(this._textMarginTop+a/2-this._textField.get_height()/2))
		}
	},setMargin:function(a,b,c,d){this._textMarginTop=a;this._textMarginLeft=d;this._textMarginRight=b;this._textMarginBottom=c;null!=this._textField&&this.alignText();return this
	},disposeTooltip:function(){null!=
this._tooltip&&(this._tooltipVisibleSignal.handlers.invoke(!1),this._tooltip.dispose())
	},_render:function(a){a=this._blend(this._hover);this._blend(this._pressed)&&(a=!0);this._blend(this._disabled)&&(a=!0);a||this.removeEventListener("enterFrame",m(this,this._render))
	},_onMouseDown:function(a){this.get_enabled()&&(this._transitionSpeed=this._transitionSpeedFast,this._isMouseDown=!0,this.get_enabled()&&this._setActiveState(this._pressed))
	},_onMouseUp:function(a){this.get_enabled()&&(this._removeMouseListener(!0),
this._transitionSpeed=this._transitionSpeedNormal,this._activeState==this._pressed&&(this._dispatchButtonEventClicked(a),null!=this._callback&&this._callback(this)),this._isMouseDown=!1,this._clickDelayEnabled?Ta.delayedCallBySeconds(.5,m(this,this._enableButton),null):this._enableButton())
	},_dispatchButtonEventClicked:function(a){if(null!=this._id){var b=0,c=0;null!=a&&(b=a.stageX|0,c=a.stageY|0);this.dispatchEvent(new yd("ButtonEvent/clicked",this._id,!0,!1,b,c))
		}
	},_onMouseOut:function(a){this.get_enabled()&&
(this._transitionSpeed=this._transitionSpeedNormal,this._isMouseInside=this._isMouseDown=!1,this.get_enabled()&&this._setActiveState(this._normal));this.disposeTooltip()
	},_onMouseOver:function(a){this.get_enabled()?this._isMouseDown||(this._transitionSpeed=this._transitionSpeedNormal,this._isMouseDown=!1,this._isMouseInside=!0,this._setActiveState(this._hover),this._maybeAddTooltip(this._tooltipData)):this._maybeAddTooltip(this._disabledTooltipData)
	},_onButtonRemovedFromStage:function(a){gg.instance.stage.get_focus()==
this&&gg.instance.stage.set_focus(null);this.disposeTooltip()
	},_init:function(a,b,c,d){null!=a&&(this.buttonMode=!0,this.addChild(this._normal=new B(a)),this.addChild(this._pressed=new B(null!=b?b:a)),this.addChild(this._hover=new B(null!=c?c:a)),this.addChild(this._disabled=new B(null!=d?d:a)),null==d&&this._disabled.set_filters(ma.getGrayscaleFilter()),this._setActiveState(this._normal),this._pressed.set_alpha(0),this._hover.set_alpha(0),this._disabled.set_alpha(0),this._addMouseListener())
	},_addMouseListener:function(){this.addEventListener("mouseDown",
m(this,this._onMouseDown));this.addEventListener("mouseUp",m(this,this._onMouseUp));this.addEventListener("mouseOut",m(this,this._onMouseOut));this.addEventListener("mouseOver",m(this,this._onMouseOver))
	},_removeMouseListener:function(a){null==a&&(a=!1);this.removeEventListener("mouseDown",m(this,this._onMouseDown));this.removeEventListener("mouseUp",m(this,this._onMouseUp));a||(this.removeEventListener("mouseOut",m(this,this._onMouseOut)),this.removeEventListener("mouseOver",m(this,this._onMouseOver)))
	},
_blend:function(a){if(null==a)return!1;var b=a.get_alpha();if(a==this._activeState){if(1==b)return!1;b=Math.min(b+this._transitionSpeed,
			1);a.set_alpha(b);return 1>b
		}if(0==b)return!1;b=Math.max(b-this._transitionSpeed,
		0);a.set_alpha(b);return 0<b
	},_setActiveState:function(a){this._activeState=a;this.hasEventListener("enterFrame")||this.addEventListener("enterFrame",m(this,this._render))
	},_createEventListener:function(){L.prototype._createEventListener.call(this);this.addEventListener("removedFromStage",
m(this,this._onButtonRemovedFromStage),!1,
		0,!0)
	},_maybeAddTooltip:function(a){null!=a&&(this._tooltip=a.createTooltip(),this._getTooltipContainer().addChild(this._tooltip),this._tooltipVisibleSignal.handlers.invoke(!0),this._tooltip.show())
	},_enableButton:function(){this._addMouseListener();this.get_enabled()&&(this._isMouseInside?this._setActiveState(this._hover):this._setActiveState(this._normal))
	},get_enabled:function(){return this.buttonMode
	},set_enabled:function(a){this.mouseChildren=a;this.mouseEnabled=
null!=this._disabledTooltipData||a;if(a==this.get_enabled())return a;a?this._setActiveState(this._normal):this._setActiveState(this._disabled);return this.buttonMode=a
	},set_tooltipText:function(a){this.set_tooltipData(Xi.updateTooltipDataWithText(this._tooltipData,a));return a
	},set_tooltipData:function(a){return this._tooltipData=a
	},set_disabledTooltipText:function(a){this.set_disabledTooltipData(Xi.updateTooltipDataWithText(this._disabledTooltipData,a));return a
	},set_tooltipShowDelay:function(a){null==
this._tooltipData&&(this._tooltipData=new Xi(null));return this._tooltipData.showDelay=a
	},set_disabledTooltipData:function(a){this._disabledTooltipData=a;this.mouseEnabled=null!=this._disabledTooltipData||this.get_enabled();return a
	},get_textField:function(){return this._textField
	},set_clickDelayEnabled:function(a){return this._clickDelayEnabled=a
	},get_tooltipVisibleSignal:function(){return this._tooltipVisibleSignal
	},set_smoothing:function(a){null!=this._normal&&(this._normal.smoothing=a);null!=
this._pressed&&(this._pressed.smoothing=a);null!=this._hover&&(this._hover.smoothing=a);null!=this._disabled&&(this._disabled.smoothing=a);return this._smoothing=a
	},get_smoothing:function(){return this._smoothing
	},__class__:Oa,__properties__:l(L.prototype.__properties__,
	{set_smoothing: "set_smoothing",get_smoothing: "get_smoothing",set_clickDelayEnabled: "set_clickDelayEnabled",get_textField: "get_textField",set_disabledTooltipData: "set_disabledTooltipData",set_tooltipShowDelay: "set_tooltipShowDelay",
set_tooltipData: "set_tooltipData",set_tooltipText: "set_tooltipText",set_disabledTooltipText: "set_disabledTooltipText",set_enabled: "set_enabled",get_enabled: "get_enabled",get_tooltipVisibleSignal: "get_tooltipVisibleSignal"
	})
});var pc=function(a,b,c,d){this._iconMarginTop=0;Oa.call(this,a,b,c,d)
};h[
	"de.innogames.strategycity.shared.ui.ImageButton9Scale"
]=pc;pc.__name__="de.innogames.strategycity.shared.ui.ImageButton9Scale";pc.__super__=Oa;pc.prototype=l(Oa.prototype,
{set_enabled:function(a){Oa.prototype.set_enabled.call(this,
a);a?(null!=this._icon&&this._icon.set_filters([]),null!=this._positionedIcon&&this._positionedIcon.set_filters([])):(null!=this._icon&&this._icon.set_filters(ma.getGrayscaleFilter()),null!=this._positionedIcon&&this._positionedIcon.set_filters(ma.getGrayscaleFilter()));return a
	},setSize:function(a,b){var c=K.__cast(this._normal,ua);c.set_width(a);c.set_height(b);c=K.__cast(this._pressed,ua);c.set_width(a);c.set_height(b);c=K.__cast(this._hover,ua);c.set_width(a);c.set_height(b);c=K.__cast(this._disabled,
ua);c.set_width(a);c.set_height(b);null!=this._icon&&this._updateIconPosition()
	},setIconMarginTop:function(a){this._iconMarginTop=a;this._updateIconPosition()
	},set_scale9Rectangle:function(a){if(!this._isScaleGridValid(a))return a;K.__cast(this._normal,ua).set_scale9Rect(K.__cast(this._pressed,ua).set_scale9Rect(K.__cast(this._hover,ua).set_scale9Rect(K.__cast(this._disabled,ua).set_scale9Rect(a))));return a
	},addCenteredIcon:function(a,b){null==b&&(b=0);this._iconMarginTop=b;this._icon=a;this._disableMouseIfInteractive(a);
this.addChild(this._icon);this._updateIconPosition()
	},addIconAtPosition:function(a,b,c){this._positionedIcon=a;this._disableMouseIfInteractive(a);0!=b?this._positionedIcon.set_x(b):this._positionedIcon.set_x(a.get_x());0!=c?this._positionedIcon.set_y(c):this._positionedIcon.set_y(a.get_y());this.addChild(this._positionedIcon)
	},_init:function(a,b,c,d){this.buttonMode=!0;null==b&&(b=a);null==c&&(c=a);var e=null==d;null==d&&(d=a);this._normal=new ua(a,null);this.addChild(this._normal);this._pressed=
new ua(b,null);this.addChild(this._pressed);this._hover=new ua(c,null);this.addChild(this._hover);this._disabled=new ua(d,null);this.addChild(this._disabled);e&&this._disabled.set_filters(ma.getGrayscaleFilter());this._setActiveState(this._normal);this._pressed.set_alpha(0);this._hover.set_alpha(0);this._disabled.set_alpha(0);this._addMouseListener()
	},_disableMouseIfInteractive:function(a){a=a instanceof Bf?a:null;null!=a&&(a.mouseEnabled=!1)
	},_updateIconPosition:function(){null!=this._icon&&(this._icon.set_x(this.get_width()/
2-this._icon.get_width()/2),this._icon.set_y(this.get_height()/2-this._icon.get_height()/2+this._iconMarginTop))
	},_isScaleGridValid:function(a){return a.get_right()<=this._normal.get_width()?a.get_bottom()<=this._normal.get_height():!1
	},__class__:pc,__properties__:l(Oa.prototype.__properties__,
	{set_scale9Rectangle: "set_scale9Rectangle"
	})
});var UZ=function(){};h[
	"de.innogames.strategycity.shared.ui.IRadioButton"
]=UZ;UZ.__name__="de.innogames.strategycity.shared.ui.IRadioButton";UZ.__isInterface__=
!0;UZ.__interfaces__=[Yj
];UZ.prototype={__class__:UZ,__properties__: {set_id: "set_id",get_id: "get_id",set_enabled: "set_enabled",get_enabled: "get_enabled",set_selected: "set_selected",get_selected: "get_selected"
	}
};var Bm=function(a,b,c,d){this._radioEnabled=!1;this._selectedFontColor=0;this._selected=!1;pc.call(this,a,b,c,d)
};h[
	"de.innogames.strategycity.shared.ui.RadioButton"
]=Bm;Bm.__name__="de.innogames.strategycity.shared.ui.RadioButton";Bm.__interfaces__=[UZ
];Bm.__super__=pc;Bm.prototype=l(pc.prototype,
{addCenteredIcon:function(a,b){null==b&&(b=0);pc.prototype.addCenteredIcon.call(this,a,b);a.set_alpha(.5)
	},recenterIcon:function(){null!=this._icon&&(this._icon.set_x(.5*(this.get_width()-this._icon.get_width())),this._icon.set_y(.5*(this.get_height()-this._icon.get_height())))
	},setSelectedColor:function(a){this._selectedFontColor=a
	},_render:function(a){a=this._blend(this._hover);this._blend(this._pressed)&&(a=!0);a||this.removeEventListener("enterFrame",m(this,this._render))
	},_setActiveState:function(a){a==
this._hover||a==this._pressed?(null!=this.get_textField()&&this.get_textField().set_textColor(this._selectedFontColor),null!=this._icon&&this._icon.set_alpha(1)):a==this._normal&&(null!=this.get_textField()&&this.get_textField().set_textColor(this._normalFontcolor),null!=this._icon&&this._icon.set_alpha(.5));pc.prototype._setActiveState.call(this,a)
	},set_enabled:function(a){this.mouseChildren=a;this.mouseEnabled=null!=this._disabledTooltipData||a;if(a==this.get_enabled())return a;a?this._setActiveState(this._normal):
this._setActiveState(this._disabled);return this.buttonMode=a
	},get_radioEnabled:function(){return this._radioEnabled
	},set_radioEnabled:function(a){return this._radioEnabled=a
	},get_icon:function(){return this._icon
	},get_selected:function(){return this._selected
	},set_selected:function(a){if(!this._radioEnabled)return a;this._selected=a;this.set_enabled(!this._selected);this._selected?this._setActiveState(this._pressed):(this._setActiveState(this._normal),this._pressed.set_alpha(0),this._hover.set_alpha(0),
this._disabled.set_alpha(0));return a
	},__class__:Bm,__properties__:l(pc.prototype.__properties__,
	{set_selected: "set_selected",get_selected: "get_selected",get_icon: "get_icon",set_radioEnabled: "set_radioEnabled",get_radioEnabled: "get_radioEnabled"
	})
});var Kla=function(a,b){Bm.call(this,b.getImage("historical_allies_ally_info_btn_push"),b.getImage("historical_allies_ally_info_btn"),b.getImage("historical_allies_ally_info_btn_hover"),b.getImage("historical_allies_ally_info_btn_push"));this.set_id(a);
this._allyWindowAssets=b;this._radioEnabled=!0;this._addTabConnection();this.applyGlowEffect()
};h[
	"de.innogames.strategycity.allies.view.tabs.AllyWindowTabButton"
]=Kla;Kla.__name__="de.innogames.strategycity.allies.view.tabs.AllyWindowTabButton";Kla.__interfaces__=[UZ
];Kla.__super__=Bm;Kla.prototype=l(Bm.prototype,
{applyGlowEffect:function(){this.set_filters([new Gd(16766720,.8,
			10,
			10,
			2,
			1,!1,!1)
		])
	},addCenteredIcon:function(a,b){null==b&&(b=0);Bm.prototype.addCenteredIcon.call(this,a,b);a.set_alpha(1)
	},
recenterIcon:function(){null!=this._icon&&(this._icon.set_x(.5*(this._normal.get_width()-this._icon.get_width())),this._icon.set_y(.5*(this._normal.get_height()-this._icon.get_height())))
	},_setActiveState:function(a){Bm.prototype._setActiveState.call(this,a);null!=this._icon&&this._icon.set_alpha(1)
	},set_selected:function(a){this.set_alpha(1);this._selectedFlap.set_visible(a);this._flap.set_visible(!a);this.set_x(a?0: 12);this.recenterIcon();return Bm.prototype.set_selected.call(this,a)
	},_addTabConnection:function(){this._flap=
new B(this._allyWindowAssets.getImage("historical_allies_info_flap"));this._flap.set_x(-5);this._flap.set_y(-10);this._selectedFlap=new B(this._allyWindowAssets.getImage("historical_allies_info_flap_active"));this._selectedFlap.set_x(-10);this._selectedFlap.set_y(-10);this.addChildAt(this._flap,
		0);this.addChildAt(this._selectedFlap,
		1)
	},__class__:Kla
});var Tz=function(a,b,c,d,e,g,k){var t=this;R.call(this);this._model=a;this._onStageHandler=new Qa(this);this.set_layout(new Ib);this._iconAssets=b;this._allyWindowAssets=
d;this._windowAssets=e;this._buttonAssets=g;this._allyPortraitsAssets=k;this._mainMenuReflib=c;this._tabContents=new x;this._createTabContentBackground();this._createBanner();this._createTabs();this._tabBar.selectTab(this._model.get_lastAlliesInfoTabId());this._onStageHandler.add(function(){return F.bind(t._model.getSelectedAlly(),function(u){null!=u&&(t._allyName.set_text(t._model.getAllyMetadata(u).name),t._allyType.set_text(t._model.getTypeMetadata(u).name),u=FOb.getRarityBanner(t._allyWindowAssets,
u.rarity),null!=u&&t._banner.set_backgroundSkin(new B(u)))
		})
	})
};h[
	"de.innogames.strategycity.allies.view.tabs.AllyWindowTabView"
]=Tz;Tz.__name__="de.innogames.strategycity.allies.view.tabs.AllyWindowTabView";Tz.__super__=R;Tz.prototype=l(R.prototype,
{_createTabContentBackground:function(){this._tabContentContainer=new R;this._tabContentContainer.set_layout(new Ib);var a=new B(this._allyWindowAssets.getImage("historical_allies_info_paper"));this._tabContentContainer.set_backgroundSkin(a);this._tabContentContainer.set_x(Tz.TAB_CONTENT_CONTAINER_X);
this._tabContentContainer.set_y(Tz.TAB_CONTENT_CONTAINER_Y);this.addChild(this._tabContentContainer)
	},_createBanner:function(){var a=this._banner=new R,b=new Xb;b.set_gap(16);b.set_horizontalAlign(Sa.CENTER);b.set_verticalAlign(ta.MIDDLE);b.set_paddingTop(14);a.set_layout(b);this._banner.set_x(Tz.BANNER_X);this._banner.set_y(Tz.BANNER_Y);this._allyName=new va;this._allyName.set_textFormat(new Mb("_sans",
		18,
		16182986,!0));this._allyName.set_filters(ma.getAlliesDropShadow());this._banner.addChild(this._allyName);
this._allyType=new va;this._allyType.set_textFormat(new Mb("_sans",
		16,
		16182986,!0));this._allyType.set_filters(ma.getAlliesDropShadow());this._banner.addChild(this._allyType);this.addChild(this._banner)
	},_createTabs:function(){this._tabBar=new Bdb(this._allyWindowAssets,Tz.TAB_BAR_WIDTH);this._addTab(new zdb(this._model,this._windowAssets,this._iconAssets,this._allyWindowAssets),
		"effects",new B(this._allyWindowAssets.getImage("historical_allies_info_stats_icon")),r.gettext("HA|Effects"));this._addTab(new ho(this._model,
this._windowAssets,this._buttonAssets,this._allyPortraitsAssets,this._allyWindowAssets),
		"levelUp",new B(this._allyWindowAssets.getImage("historical_allies_info_level_up_icon")),r.gettext("HA|Level Up"));this._addTab(new Adb(this._model),
		"skills",new B(this._allyWindowAssets.getImage("historical_allies_info_special_skills_icon")),r.gettext("HA|Skills"));this._addTab(new TS(this._model),
		"biography",new B(this._allyWindowAssets.getImage("historical_allies_info_biography_icon")),r.gettext("HA|Biography"));
this._tabBar.addEventListener("change",m(this,this._onRadioGroupChanged),!1,
		0,!0);this.addChild(this._tabBar)
	},_addTab:function(a,b,c,d){this._tabBar.addTab(b,
		"",c,d);this._tabContents.h[b
		]=a
	},_onRadioGroupChanged:function(a){this._model.set_lastAlliesInfoTabId(this._tabBar.get_selectedTabId());null!=this._currentContent&&this._tabContentContainer.removeChild(this._currentContent);a=this._tabContents;var b=this._model.get_lastAlliesInfoTabId();this._currentContent=a.h[b
		];null!=this._currentContent&&
this._tabContentContainer.addChild(this._currentContent)
	},__class__:Tz
});var Cdb=function(){this.level=this.experience=0
};h[
	"de.innogames.strategycity.allies.vo.AllyLevelVO"
]=Cdb;Cdb.__name__="de.innogames.strategycity.allies.vo.AllyLevelVO";Cdb.__super__=G;Cdb.prototype=l(G.prototype,
{_getClassName:function(){return"AllyLevel"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.level=this.level;a.experience=this.experience;a.boosts=q.arrayToJSONObject(this.boosts,q.voToJSON);return a
	},
fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.level=q.normalizeInt(a.level);this.experience=q.normalizeInt(a.experience);this.boosts=q.convertArray(a.boosts,q.convertObject,
		[])
	},__class__:Cdb
});var Aq=Ea[
	"de.innogames.strategycity.allies.vo.AllyRarity"
]={__ename__: "de.innogames.strategycity.allies.vo.AllyRarity",__constructs__: null,Common: {_hx_name: "Common",_hx_index: 0,__enum__: "de.innogames.strategycity.allies.vo.AllyRarity",toString:N
	},Uncommon: {_hx_name: "Uncommon",_hx_index: 1,
__enum__: "de.innogames.strategycity.allies.vo.AllyRarity",toString:N
	},Rare: {_hx_name: "Rare",_hx_index: 2,__enum__: "de.innogames.strategycity.allies.vo.AllyRarity",toString:N
	},Epic: {_hx_name: "Epic",_hx_index: 3,__enum__: "de.innogames.strategycity.allies.vo.AllyRarity",toString:N
	},Legendary: {_hx_name: "Legendary",_hx_index: 4,__enum__: "de.innogames.strategycity.allies.vo.AllyRarity",toString:N
	}
};Aq.__constructs__=[Aq.Common,Aq.Uncommon,Aq.Rare,Aq.Epic,Aq.Legendary
];Aq.__empty_constructs__=[Aq.Common,Aq.Uncommon,
Aq.Rare,Aq.Epic,Aq.Legendary
];var GOb=function(){};h[
	"de.innogames.strategycity.allies.vo._AllyRarity.AllyRarityTools"
]=GOb;GOb.__name__="de.innogames.strategycity.allies.vo._AllyRarity.AllyRarityTools";GOb.toString=function(a){switch(a._hx_index){case 0:return"common";case 1:return"uncommon";case 2:return"rare";case 3:return"epic";case 4:return"legendary"
	}
};GOb.fromString=function(a,b){switch(b){case "common":return Aq.Common;case "epic":return Aq.Epic;case "legendary":return Aq.Legendary;case "rare":return Aq.Rare;
case "uncommon":return Aq.Uncommon;default:return null!=y._reportError&&y._reportError(Error("[LOGGER] Invalid value for enum AllyRarity: "+b)),
		null
	}
};var wdb=function(){};h[
	"de.innogames.strategycity.allies.vo.AllyRarityTools"
]=wdb;wdb.__name__="de.innogames.strategycity.allies.vo.AllyRarityTools";wdb.isBetterThan=function(a,b){switch(a._hx_index){case 0:var c=0;break;case 1:c=1;break;case 2:c=2;break;case 3:c=3;break;case 4:c=4
	}switch(b._hx_index){case 0:var d=0;break;case 1:d=1;break;case 2:d=
2;break;case 3:d=3;break;case 4:d=4
	}return c>d
};wdb._getNumericRarity=function(a){switch(a._hx_index){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4
	}
};var xJ=function(){};h[
	"de.innogames.strategycity.allies.vo.AllyRarity_Converter"
]=xJ;xJ.__name__="de.innogames.strategycity.allies.vo.AllyRarity_Converter";xJ.fromJson=function(a){var b=null==a?null:a.value;if(null==b){if(null==a)return null;throw new ba("Unsupported enum value: "+fa.string(a.value)+" for enum "+a.__enum__);
	}switch(b){case "common":return Aq.Common;case "epic":return Aq.Epic;case "legendary":return Aq.Legendary;case "rare":return Aq.Rare;case "uncommon":return Aq.Uncommon;default:if(null==a)return null;throw new ba("Unsupported enum value: "+fa.string(a.value)+" for enum "+a.__enum__);
	}
};xJ.toJson=function(a){switch(a._hx_index){case 0:var b="common";break;case 1:b="uncommon";break;case 2:b="rare";break;case 3:b="epic";break;case 4:b="legendary"
	}return{__enum__: "AllyRarity",value:b
	}
};var Ddb=function(){this.id=
this.experience=this.mapEntityId=this.level=this.nextLevelExperience=this.currentLevelExperience=0
};h[
	"de.innogames.strategycity.allies.vo.AllyVO"
]=Ddb;Ddb.__name__="de.innogames.strategycity.allies.vo.AllyVO";Ddb.__super__=G;Ddb.prototype=l(G.prototype,
{_getClassName:function(){return"Ally"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.id=this.id;a.allyId=this.allyId;a.experience=this.experience;a.rarity=xJ.toJson(this.rarity);a.mapEntityId=this.mapEntityId;null!=this.currentLevel&&
(a.currentLevel=this.currentLevel.toJSONObject());null!=this.nextLevel&&(a.nextLevel=this.nextLevel.toJSONObject());a.level=this.level;a.nextLevelExperience=this.nextLevelExperience;a.currentLevelExperience=this.currentLevelExperience;a.boosts=q.arrayToJSONObject(this.boosts,q.voToJSON);return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.id=q.normalizeInt(a.id);this.allyId=q.normalizeString(a.allyId);this.experience=q.normalizeInt(a.experience);this.rarity=xJ.fromJson(a.rarity);
this.mapEntityId=q.normalizeInt(a.mapEntityId);this.currentLevel=q.convertObject(a.currentLevel);this.nextLevel=q.convertObject(a.nextLevel);this.level=q.normalizeInt(a.level);this.nextLevelExperience=q.normalizeInt(a.nextLevelExperience);this.currentLevelExperience=q.normalizeInt(a.currentLevelExperience);this.boosts=q.convertArray(a.boosts,q.convertObject,
		[])
	},__class__:Ddb
});var Edb=function(){};h[
	"de.innogames.strategycity.allies.vo.metadata.AllyMetadataVO"
]=Edb;Edb.__name__="de.innogames.strategycity.allies.vo.metadata.AllyMetadataVO";
Edb.__super__=G;Edb.prototype=l(G.prototype,
{_getClassName:function(){return"AllyMetadata"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.id=this.id;a.name=this.name;a.description=this.description;a.allyType=this.allyType;return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.id=q.normalizeString(a.id);this.name=q.normalizeString(a.name);this.description=q.normalizeString(a.description);this.allyType=q.normalizeString(a.allyType)
	},__class__:Edb
});var Fdb=
function(){this.maxLevel=0
};h[
	"de.innogames.strategycity.allies.vo.metadata.AllyRarityMetadataVO"
]=Fdb;Fdb.__name__="de.innogames.strategycity.allies.vo.metadata.AllyRarityMetadataVO";Fdb.__super__=G;Fdb.prototype=l(G.prototype,
{_getClassName:function(){return"AllyRarityMetadata"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.id=xJ.toJson(this.id);a.name=this.name;a.iconAssetName=this.iconAssetName;a.maxLevel=this.maxLevel;return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,
a);this.id=xJ.fromJson(a.id);this.name=q.normalizeString(a.name);this.iconAssetName=q.normalizeString(a.iconAssetName);this.maxLevel=q.normalizeInt(a.maxLevel)
	},__class__:Fdb
});var Gdb=function(){};h[
	"de.innogames.strategycity.allies.vo.metadata.AllyTypeMetadataVO"
]=Gdb;Gdb.__name__="de.innogames.strategycity.allies.vo.metadata.AllyTypeMetadataVO";Gdb.__super__=G;Gdb.prototype=l(G.prototype,
{_getClassName:function(){return"AllyTypeMetadata"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);
a.id=this.id;a.name=this.name;a.iconAssetName=this.iconAssetName;return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.id=q.normalizeString(a.id);this.name=q.normalizeString(a.name);this.iconAssetName=q.normalizeString(a.iconAssetName)
	},__class__:Gdb
});var qe=function(){};h[
	"de.innogames.strategycity.battle.BattleConstants"
]=qe;qe.__name__="de.innogames.strategycity.battle.BattleConstants";var uN=function(){};h[
	"org.robotlegs.core.IDisposable"
]=uN;uN.__name__="org.robotlegs.core.IDisposable";
uN.__isInterface__=!0;uN.prototype={__class__:uN
};var VZ=function(){};h[
	"org.robotlegs.core.IContext"
]=VZ;VZ.__name__="org.robotlegs.core.IContext";VZ.__isInterface__=!0;VZ.__interfaces__=[uN
];VZ.prototype={__class__:VZ,__properties__: {get_eventDispatcher: "get_eventDispatcher"
	}
};var VS=function(){this._eventDispatcher=new Jb
};h[
	"org.robotlegs.base.ContextBase"
]=VS;VS.__name__="org.robotlegs.base.ContextBase";VS.__interfaces__=[Yj,VZ
];VS.prototype={get_eventDispatcher:function(){return this._eventDispatcher
	},
addEventListener:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=!1);this.get_eventDispatcher().addEventListener(a,b,c,d)
	},dispatchEvent:function(a){return this.get_eventDispatcher().hasEventListener(a.type)?this.get_eventDispatcher().dispatchEvent(a):!1
	},hasEventListener:function(a){return this.get_eventDispatcher().hasEventListener(a)
	},removeEventListener:function(a,b,c){null==c&&(c=!1);this.get_eventDispatcher().removeEventListener(a,b,c)
	},willTrigger:function(a){return this.get_eventDispatcher().willTrigger(a)
	},
dispose:function(){},__class__:VS,__properties__: {get_eventDispatcher: "get_eventDispatcher"
	}
};var WS=function(a,b){null==b&&(b=!0);this._eventDispatcher=new Jb;this._contextView=a;this._autoStartup=b;null!=this._contextView&&(this.mapInjections(),this.checkAutoStartup())
};h[
	"org.robotlegs.mvcs.Context"
]=WS;WS.__name__="org.robotlegs.mvcs.Context";WS.__interfaces__=[VZ
];WS.__super__=VS;WS.prototype=l(VS.prototype,
{startup:function(){this.dispatchEvent(new Bq("startupComplete"))
	},shutdown:function(){this.dispose();
this.dispatchEvent(new Bq("shutdownComplete"))
	},dispose:function(){this.get_commandMap().dispose();this.get_mediatorMap().dispose();this.get_viewMap().dispose();this._injector.teardown()
	},get_contextView:function(){return this._contextView
	},set_contextView:function(a){if(a==this._contextView)return a;if(null!=this._contextView)throw ba.thrown(new Dx("Context contextView must only be set once"));this._contextView=a;this.mapInjections();this.checkAutoStartup();return a
	},get_injector:function(){null==
this._injector&&(this._injector=new vN);return this._injector
	},set_injector:function(a){return this._injector=a
	},get_commandMap:function(){null==this._commandMap&&(this._commandMap=new nF(this.get_eventDispatcher(),this.get_injector().createChild()));return this._commandMap
	},set_commandMap:function(a){return this._commandMap=a
	},get_mediatorMap:function(){null==this._mediatorMap&&(this._mediatorMap=new XS(this.get_contextView(),this.get_injector().createChild()));return this._mediatorMap
	},set_mediatorMap:function(a){return this._mediatorMap=
a
	},get_viewMap:function(){null==this._viewMap&&(this._viewMap=new pXa(this.get_contextView(),this.get_injector()));return this._viewMap
	},set_viewMap:function(a){return this._viewMap=a
	},mapInjections:function(){this.get_injector().mapValue(vN,this.get_injector());this.get_injector().mapValue(Yj,this.get_eventDispatcher());this.get_injector().mapValue(Re,this.get_contextView());this.get_injector().mapValue(tJ,this.get_commandMap());this.get_injector().mapValue(KZ,this.get_mediatorMap());this.get_injector().mapValue(Lla,
this.get_viewMap());this.get_injector().mapClass(WZ,gF)
	},checkAutoStartup:function(){this._autoStartup&&null!=this.get_contextView()&&(null!=this.get_contextView().stage?this.startup():this.get_contextView().addEventListener("addedToStage",m(this,this.onAddedToStage),!1,
		0,!0))
	},onAddedToStage:function(a){this.get_contextView().removeEventListener("addedToStage",m(this,this.onAddedToStage));this.startup()
	},createInjector:function(){return new vN
	},createChildInjector:function(){return this.get_injector().createChild()
	},
__class__:WS,__properties__:l(VS.prototype.__properties__,
	{set_viewMap: "set_viewMap",get_viewMap: "get_viewMap",set_mediatorMap: "set_mediatorMap",get_mediatorMap: "get_mediatorMap",set_commandMap: "set_commandMap",get_commandMap: "get_commandMap",set_injector: "set_injector",get_injector: "get_injector",set_contextView: "set_contextView",get_contextView: "get_contextView"
	})
});var Hdb=function(){};h[
	"org.robotlegs.utilities.modular.core.IModuleContext"
]=Hdb;Hdb.__name__="org.robotlegs.utilities.modular.core.IModuleContext";
Hdb.__isInterface__=!0;Hdb.__interfaces__=[VZ
];var pn=function(a,b,c){null==b&&(b=!0);null!=c&&(this._injector=c.createChild());WS.call(this,a,b)
};h[
	"org.robotlegs.utilities.modular.mvcs.ModuleContext"
]=pn;pn.__name__="org.robotlegs.utilities.modular.mvcs.ModuleContext";pn.__interfaces__=[Hdb
];pn.__super__=WS;pn.prototype=l(WS.prototype,
{get_moduleDispatcher:function(){return this._moduleDispatcher
	},set_moduleDispatcher:function(a){return this._moduleDispatcher=a
	},get_moduleCommandMap:function(){null==
this._moduleCommandMap&&(this._moduleCommandMap=new qXa(this.get_moduleDispatcher(),this.get_injector().createChild()));return this._moduleCommandMap
	},set_moduleCommandMap:function(a){return this._moduleCommandMap=a
	},get_commandMap:function(){null==this._commandMap&&(this._commandMap=new nF(this.get_eventDispatcher(),this.get_injector().createChild()));return this._commandMap
	},get_mediatorMap:function(){null==this._mediatorMap&&(this._mediatorMap=new XS(this.get_contextView(),this.get_injector().createChild()));
return this._mediatorMap
	},mapInjections:function(){WS.prototype.mapInjections.call(this);this.initializeModuleEventDispatcher();this.get_injector().mapValue(gla,this.get_moduleCommandMap())
	},initializeModuleEventDispatcher:function(){this.get_injector().hasMapping(wN)?this.set_moduleDispatcher(this.get_injector().getInstance(wN)):(this.set_moduleDispatcher(new Mla(this)),this.get_injector().mapValue(wN,this.get_moduleDispatcher()))
	},dispatchToModules:function(a){return this.get_moduleDispatcher().hasEventListener(a.type)?
this.get_moduleDispatcher().dispatchEvent(a):!0
	},dispose:function(){this.dispatchEvent(new Bq("shutdown"));this._commandMap.dispose();this._moduleCommandMap.dispose();this._commandMap.dispose();this._mediatorMap.dispose();this._viewMap.dispose();this._injector.teardown();this._eventDispatcher=this._injector=this._contextView=this._moduleDispatcher=null
	},__class__:pn,__properties__:l(WS.prototype.__properties__,
	{set_moduleCommandMap: "set_moduleCommandMap",get_moduleCommandMap: "get_moduleCommandMap",
set_moduleDispatcher: "set_moduleDispatcher",get_moduleDispatcher: "get_moduleDispatcher"
	})
});var rcb=function(a,b){pn.call(this,a,!0,b)
};h[
	"de.innogames.strategycity.battle.BattleContext"
]=rcb;rcb.__name__="de.innogames.strategycity.battle.BattleContext";rcb.__super__=pn;rcb.prototype=l(pn.prototype,
{startup:function(){pn.prototype.startup.call(this);this.get_commandMap().mapEvent("startup",Nla);this.get_commandMap().mapEvent("BattleUnitEvent/HIGHLIGHT_ACTIVE_UNIT",Ola);this.get_mediatorMap().mapView(rXa,
Pla);this.get_mediatorMap().mapView(Jk,Qla);this.get_mediatorMap().mapView(sk,Rla);this.get_mediatorMap().mapView(YS,Sla);this.get_mediatorMap().mapView(sXa,Tla);this.get_moduleDispatcher().addEventListener("BattleUIEvent/FADE_OUT",m(this,this._onFadeOut),!1,
		0,!0);this.dispatchEvent(new Bq("startup"))
	},_onFadeOut:function(a){null!=this.get_moduleDispatcher()&&(this.get_moduleDispatcher().removeEventListener("BattleUIEvent/FADE_OUT",m(this,this._onFadeOut)),O._to(this.get_contextView(),
		2,
		{alpha: 0
		}))
	},
__class__:rcb
});var Ula=function(){};h[
	"de.innogames.strategycity.battle.armypooltemplates.ArmyPoolApplyTemplateCommand"
]=Ula;Ula.__name__="de.innogames.strategycity.battle.armypooltemplates.ArmyPoolApplyTemplateCommand";Ula.__instantiate=function(a){return new Ula
};Ula.__super__=oa;Ula.prototype=l(oa.prototype,
{run:function(a){a=this._armyPoolTemplatesModel.getTemplates().get(a);a.isValid()&&(this._armyUnits=this._armyUnitModel.get_armyUnits().slice(),this._resetArmyUnits(),this._applyTemplate(a),
this._updateModel())
	},_resetArmyUnits:function(){for(var a=[],b=0,c=this._armyUnits;b<c.length;){var d=c[b
			];++b;d.is_attacking&&(d.is_attacking=!1,a.push(d))
		}Vv.isStackedUnitsEnabled()&&this._resetUnstackedUnits(a)
	},_resetUnstackedUnits:function(a){for(var b=[],c=0,d=this._armyUnits;c<d.length;){var e=d[c
			];++c;e instanceof Sr&&b.push(K.__cast(e,Sr))
		}d=b;b=[];for(c=0;c<a.length;)e=a[c
		],++c,e instanceof Sr||!e.isStackable()||b.push(e);for(c=0;c<b.length;){a=b[c
			];++c;a: {e=a;for(var g=0;g<d.length;){var k=
d[g
					];++g;if(this._isFittingStack(e,k)){e=k;break a
					}
				}e=null
			}null!=e?(Wa.remove(this._armyUnits,a),e.addToStack(a)):(e=Sr.createStack([a
			]),d.push(e),Wa.remove(this._armyUnits,a),this._armyUnits.push(e))
		}
	},_applyTemplate:function(a){var b=[],c=0;for(a=F.get_value(a.getUnitTypeIds());c<a.length;){var d=a[c
			];++c;this._addAttackingUnit(d)||b.push(d)
		}0<b.length&&this.dispatch(new tXa(8-b.length))
	},_addAttackingUnit:function(a){for(var b=[],c=0,d=this._armyUnits;c<d.length;){var e=d[c
			];++c;if(this._isFittingReplacementUnit(a,
e)){if(e instanceof Sr)return this._addAttackingUnitFromStack(e),!0;b.push(e)
			}
		}if(0==b.length)return!1;b.sort(function(g,k){return g.currentHitpoints>k.currentHitpoints?-1:k.currentHitpoints>g.currentHitpoints?1: 0
		});return b[
			0
		].is_attacking=!0
	},_addAttackingUnitFromStack:function(a){if(1>=a.count)a.is_attacking=!0;else{var b=a.unitIds[a.unitIds.length-1
			],c=a.getHeadOfTheStack();c.reset(a);c.unitId=b;c.is_attacking=!0;a.removeFromStack(b);this._armyUnits.push(c)
		}
	},_isFittingReplacementUnit:function(a,
b){return b.unitTypeId!=a||b.isAttached()||b.is_attacking||b.is_defending||b.isArenaDefending?!1:!0
	},_isFittingStack:function(a,b){return b.unitTypeId!=a.unitTypeId||b.isAttached()!=a.isAttached()||b.is_defending?!1:!0
	},_updateModel:function(){var a=this._armyUnitModel.get_pvpArenaDefendingUnitsPool().slice();this._armyUnitModel.set_armyUnits(this._armyUnits);this._armyUnitModel.set_pvpArenaDefendingUnitsPool(a);this._armyUnitModel.set_isChanged(!0);this.dispatch(new yC("ArmyModelEvent/ARMY_INFO_CHANGED"))
	},
execute:function(){this.run(this._event.templateId)
	},__construct:function(a){oa.prototype.__construct.call(this,a);this._armyUnitModel=a.getInstanceForMapping("de.innogames.strategycity.shared.model.ArmyUnitModel");this._armyPoolTemplatesModel=a.getInstanceForMapping("de.innogames.strategycity.battle.armypooltemplates.ArmyPoolTemplatesModel");this._event=a.getInstanceForMapping("de.innogames.strategycity.battle.armypooltemplates.ArmyPoolApplyTemplateCommand_Event");return null
	},__class__:Ula
});var uXa=
function(a){D.call(this,
	"de.innogames.strategycity.battle.armypooltemplates.ArmyPoolApplyTemplateCommand/EVENT_TYPE");this.templateId=a
};h[
	"de.innogames.strategycity.battle.armypooltemplates.ArmyPoolApplyTemplateCommand_Event"
]=uXa;uXa.__name__="de.innogames.strategycity.battle.armypooltemplates.ArmyPoolApplyTemplateCommand_Event";uXa.__super__=D;uXa.prototype=l(D.prototype,
{clone:function(){return new uXa(this.templateId)
	},__class__:uXa
});var Vla=function(){};h[
	"de.innogames.strategycity.battle.armypooltemplates.ArmyPoolTrySaveTemplateCommand"
]=
Vla;Vla.__name__="de.innogames.strategycity.battle.armypooltemplates.ArmyPoolTrySaveTemplateCommand";Vla.__instantiate=function(a){return new Vla
};Vla.__super__=oa;Vla.prototype=l(oa.prototype,
{run:function(){for(var a=[],b=0,c=this._armyUnitModel.get_attackingUnitsPool();b<c.length;)a.push(this._armyUnitModel.getArmyUnitById(c[b++
		]).unitTypeId);if(8==a.length&&(b=this._armyPoolTemplatesModel.getTemplates(),null!=b&&0!=mn.count(IQb.toMap(b))))for(b=b.iterator();b.hasNext();){b=b.next();b.update(a);
this._armyUnitDataService.saveTemplate(b.toVO());break
		}
	},execute:function(){this.run()
	},__construct:function(a){oa.prototype.__construct.call(this,a);this._armyUnitDataService=a.getInstanceForMapping("de.innogames.strategycity.shared.service.ArmyUnitDataService");this._armyUnitModel=a.getInstanceForMapping("de.innogames.strategycity.shared.model.ArmyUnitModel");this._armyPoolTemplatesModel=a.getInstanceForMapping("de.innogames.strategycity.battle.armypooltemplates.ArmyPoolTemplatesModel");this._event=
a.getInstanceForMapping("de.innogames.strategycity.battle.armypooltemplates.ArmyPoolTrySaveTemplateCommand_Event");return null
	},__class__:Vla
});var Wla=function(){};h[
	"de.innogames.strategycity.battle.armypooltemplates.ArmyPoolShowInsufficientUnitsConfirmationCommand"
]=Wla;Wla.__name__="de.innogames.strategycity.battle.armypooltemplates.ArmyPoolShowInsufficientUnitsConfirmationCommand";Wla.__instantiate=function(a){return new Wla
};Wla.__super__=oa;Wla.prototype=l(oa.prototype,
{run:function(a){this.dispatch(new ha("WindowEvent/ADD_WINDOW",
new Ya({title:r.gettext("AMUX|Replace Units"),closeable:hb.No,content:Ma.Text(U.printf(r.gettext("AMUX|Not enough unattached units to replace your Army. Only %d units of %s have been replaced."),a,
			8)),buttons:eb.SingleButton({kind:Ia.Orange,text:r.gettext("OK")
			})
		})))
	},execute:function(){this.run(this._event.numUnitsApplied)
	},__construct:function(a){oa.prototype.__construct.call(this,a);this._event=a.getInstanceForMapping("de.innogames.strategycity.battle.armypooltemplates.ArmyPoolShowInsufficientUnitsConfirmationCommand_Event");
return null
	},__class__:Wla
});var HOb=function(){};h[
	"de.innogames.strategycity.battle.armypooltemplates.ArmyPoolFeatureConfig"
]=HOb;HOb.__name__="de.innogames.strategycity.battle.armypooltemplates.ArmyPoolFeatureConfig";var tXa=function(a){D.call(this,
	"de.innogames.strategycity.battle.armypooltemplates.ArmyPoolShowInsufficientUnitsConfirmationCommand/EVENT_TYPE");this.numUnitsApplied=a
};h[
	"de.innogames.strategycity.battle.armypooltemplates.ArmyPoolShowInsufficientUnitsConfirmationCommand_Event"
]=
tXa;tXa.__name__="de.innogames.strategycity.battle.armypooltemplates.ArmyPoolShowInsufficientUnitsConfirmationCommand_Event";tXa.__super__=D;tXa.prototype=l(D.prototype,
{clone:function(){return new tXa(this.numUnitsApplied)
	},__class__:tXa
});var Xla=function(a,b){this.id=a;this._unitTypeIds=I._new(null==b?[]:b)
};h[
	"de.innogames.strategycity.battle.armypooltemplates.ArmyPoolTemplate"
]=Xla;Xla.__name__="de.innogames.strategycity.battle.armypooltemplates.ArmyPoolTemplate";Xla.fromVO=function(a){return new Xla(yRb.fromVO(a),
a.unitTypeIds)
};Xla.prototype={update:function(a){I.set_value(this._unitTypeIds,null==a?[]:a)
	},isValid:function(){return 8==I.get_value(this._unitTypeIds).length
	},toVO:function(){var a=new vXa;a.id=this.id;a.unitTypeIds=I.get_value(this._unitTypeIds).slice();return a
	},getUnitTypeIds:function(){return this._unitTypeIds
	},__class__:Xla
};var yRb={fromVO:function(a){return a.id
	}
},Yla=function(){this._templates=tC._new(new Pb)
};h[
	"de.innogames.strategycity.battle.armypooltemplates.ArmyPoolTemplatesModel"
]=
Yla;Yla.__name__="de.innogames.strategycity.battle.armypooltemplates.ArmyPoolTemplatesModel";Yla.__interfaces__=[kc
];Yla.__instantiate=function(a){return new Yla
};Yla.prototype={updateTemplates:function(a){null==a&&(a=[]);for(var b=[],c=this._templates.iterator();c.hasNext();)b.push(c.next());this._templates.clear();for(var d=0;d<a.length;){var e=a[d
			];++d;c=null;for(var g=yRb.fromVO(e),k=0;k<b.length;){var t=b[k
				];++k;if(t.id==g){c=t;t.update(e.unitTypeIds);break
				}
			}null==c&&(c=Xla.fromVO(e));this._templates.set(g,
c)
		}COb.forceInvalidation(this._templates)
	},getTemplates:function(){return this._templates
	},__construct:function(a){return null
	},__class__:Yla
};var wXa=function(){D.call(this,
	"de.innogames.strategycity.battle.armypooltemplates.ArmyPoolTrySaveTemplateCommand/EVENT_TYPE")
};h[
	"de.innogames.strategycity.battle.armypooltemplates.ArmyPoolTrySaveTemplateCommand_Event"
]=wXa;wXa.__name__="de.innogames.strategycity.battle.armypooltemplates.ArmyPoolTrySaveTemplateCommand_Event";wXa.__super__=D;wXa.prototype=
l(D.prototype,
{clone:function(){return new wXa
	},__class__:wXa
});var Pa=function(){};h[
	"org.robotlegs.utilities.modular.mvcs.ModuleCommand"
]=Pa;Pa.__name__="org.robotlegs.utilities.modular.mvcs.ModuleCommand";Pa.__instantiate=function(a){return new Pa
};Pa.__super__=M;Pa.prototype=l(M.prototype,
{dispatchToModules:function(a){return this.moduleEventDispatcher.hasEventListener(a.type)?this.moduleEventDispatcher.dispatchEvent(a):!0
	},__construct:function(a){M.prototype.__construct.call(this,a);this.moduleEventDispatcher=
a.getInstanceForMapping("org.robotlegs.utilities.modular.core.IModuleEventDispatcher");this.moduleCommandMap=a.getInstanceForMapping("org.robotlegs.utilities.modular.core.IModuleCommandMap");return null
	},__class__:Pa
});var Zla=function(){};h[
	"de.innogames.strategycity.battle.controller.BattleFinishedCommand"
]=Zla;Zla.__name__="de.innogames.strategycity.battle.controller.BattleFinishedCommand";Zla.__instantiate=function(a){return new Zla
};Zla.__super__=Pa;Zla.prototype=l(Pa.prototype,
{execute:function(){this._blockedRewardsStack=
et.getBattleRewardContexts();this._processNextBlockedReward()
	},_processNextBlockedReward:function(){if(0==this._blockedRewardsStack.length)this._finishBattle();else{var a=this._blockedRewardsStack.pop();this.rewardsModel.hasBlockedRewardForContext(a)?(this.moduleEventDispatcher.addEventListener("WindowEvent/REWARD_WINDOW_CLOSED",m(this,this._onRewardWindowClosed)),this.rewardsModel.releaseBlockedContext(a)):(this.rewardsModel.removeBlockedContext(a),this._processNextBlockedReward())
		}
	},_onRewardWindowClosed:function(a){this.moduleEventDispatcher.removeEventListener("WindowEvent/REWARD_WINDOW_CLOSED",
m(this,this._onRewardWindowClosed));this._processNextBlockedReward()
	},_finishBattle:function(){this.moduleEventDispatcher.dispatchEvent(new $la("BattleUIEvent/FADE_OUT"));if(this.event.settings.showReplay){var a=this.battleModel.realm.battleId,b=this.battleModel.get_battleType();this.applicationBattleModel.battleType=zC.createInstance(a,b);this.battleModel.dispose();this.dispatchToModules(new Be("STATE/BATTLE"))
		}else this.event.settings.hasNextWave?(a=this.battleModel.get_battleType(),this.battleModel.dispose(),
this._startNextWave(a)):(b=this.cityModel.get_placementMapModel().get_gridId(),a="STATE/CITY_MAP"==I.get_value(this.applicationModel._currentState),b=new Te("CityMapModelEvent/REQUEST_ENTITIES",
		null,b),a||lh.isCOPBattle(this.battleModel.get_battleType())?this.dispatch(b):this.eventTriggerController.addTrigger(new Ex(Cq.ReturnToMainCity,b)),this._disposeAnimationTextures(),this._handleBattleType(this.battleModel.get_battleType()),this.battleModel.dispose())
	},_handleBattleType:function(a){switch(a.type){case "battleground":this._handleBattlegroundBattleFinished();
break;case "campaign":this._handleCampaignBattleFinished();break;case "clan":this._handleClanCampaignFinished();break;case "cultural_outpost":this._handleCOPBattleFinished();break;case "exploration_site":this._handleExplorationBattleFinished();break;case "guild_expedition":this._handleGuildExpeditionBattleFinished();break;case "guild_raids":this._handleGuildRaidsBattle(a);break;case "pvp":this._handlePvPBattle(a.defenderPlayerId);break;case "pvp_arena":this._handlePVPArenaBattleFinished();break;case "quest_battle":this._handleQuestBattle((a instanceof
AC?a:null).questId);break;case "replay":this._handleBattleType((a instanceof zC?a:null).get_battleToReplay());break;default:null!=y._reportError&&y._reportError(Error("[LOGGER] Unknown battle type: "+a.type))
		}
	},_disposeAnimationTextures:function(){for(var a=this.battleModel.realm.state.unitsOrder.concat(this.battleModel.realm.state.retiredUnits),b=[],c=0;c<a.length;){var d=Cu.getUnitAnimationRefLibIDByUnitTypeVO(a[c++
			].get_unitType());-1==b.indexOf(d)&&(b.push(d),yb.getInstance().disposeLibrary(d))
		}
	},
_handlePvPBattle:function(a){var b=this.battleModel.realm.state.isVictory(),c=this.cityModel.isOfType("Friends")&&this.friendModel.currentPlayer.player_id==a;this.event.settings.shouldPlunder||b&&c?(c=new Tr,c.player_id=a,this.dispatchToModules(new ft("OtherPlayerEvent/REQUEST_VISIT_PLAYER",c,this.friendModel.get_showOnReturn()))):(c&&(c=this.friendModel,c.set_actionPoints(c.get_actionPoints()-1)),this.dispatchToModules(new Be("STATE/CITY_MAP")));this.dispatch(new be("ChangeApplicationModeEvent/CHANGE_APPLICATION_MODE",
		"CityEntityConstants/defaultMode"));this._clearBattleType();"STATE/CITY_MAP"==I.get_value(this.applicationModel._currentState)&&(a=this.friendModel.getPlayerVOFromID(a),null!=a&&(a.canSabotage=b,this.dispatchToModules(new ri("SocialDataModelEvent/ON_TICK",a))))
	},_handleQuestBattle:function(a){
		"STATE/BATTLE"==I.get_value(this.applicationModel._currentState)&&(this.eventTriggerController.addTrigger(new Ex(Cq.ReturnToMainCity,new xXa(a))),this.dispatchToModules(new Be("STATE/CITY_MAP")),this.dispatch(new be("ChangeApplicationModeEvent/CHANGE_APPLICATION_MODE",
		"CityEntityConstants/defaultMode")))
	},_handleClanCampaignFinished:function(){
		"STATE/BATTLE"==I.get_value(this.applicationModel._currentState)&&this.dispatchToModules(new Be("STATE/CLAN_BATTLE"))
	},_handleGuildRaidsBattle:function(a){this._guildRaidsMapModuleHelper.openWithNodeInteraction(a.nodeId,ama.AfterBattle)
	},_handleCampaignBattleFinished:function(){
		"STATE/CAMPAIGN_MAP"==I.get_value(this.applicationModel._currentState)?(this.moduleEventDispatcher.addEventListener("ProvinceDataEvent/LOADED",m(this,
this._onProvinceDataLoaded)),this.dispatchToModules(new gt("ProvinceEvent/OPENED",
		-1)),this.dispatchToModules(new ue("CityUiEvent/SHOW_LOADER")),this._clearBattleType()): "STATE/BATTLE"==I.get_value(this.applicationModel._currentState)&&this.dispatchToModules(new Be("STATE/CAMPAIGN_MAP"))
	},_handleExplorationBattleFinished:function(){
		"STATE/BATTLE"==I.get_value(this.applicationModel._currentState)?this.dispatchToModules(new Be("STATE/CAMPAIGN_MAP")):this._clearBattleType()
	},_handleGuildExpeditionBattleFinished:function(){
		0==
this.userDataModel.get_clanId()?(this._clearBattleType(),this.dispatchToModules(new Be("STATE/CITY_MAP"))): "STATE/STATE_GUILD_EXPEDITIONS"==I.get_value(this.applicationModel._currentState)?this.dispatchToModules(new XZ("GuildExpeditionReturnEvent/RETURN_FROM_BATTLE")):this.dispatchToModules(new Be("STATE/STATE_GUILD_EXPEDITIONS"))
	},_handleBattlegroundBattleFinished:function(){
		"STATE/BATTLE"==I.get_value(this.applicationModel._currentState)?this.dispatchToModules(new Be("STATE/GUILD_BATTLEGROUNDS")): "STATE/GUILD_BATTLEGROUNDS"==I.get_value(this.applicationModel._currentState)&&this._clearBattleType()
	},_handleCOPBattleFinished:function(){
		"STATE/BATTLE"==I.get_value(this.applicationModel._currentState)&&this.dispatchToModules(new Be("STATE/CITY_MAP"));this._clearBattleType()
	},_handlePVPArenaBattleFinished:function(){
		"STATE/BATTLE"==I.get_value(this.applicationModel._currentState)&&this.dispatchToModules(new O7);this._clearBattleType()
	},_startNextWave:function(a){this.event.settings.continueWithAutoBattle?
this.dispatchToModules(new bma(a)):this.dispatchToModules(new Be("STATE/BATTLE"))
	},_clearBattleType:function(){this.applicationBattleModel.battleType=null
	},_onProvinceDataLoaded:function(a){this.moduleEventDispatcher.removeEventListener("ProvinceDataEvent/LOADED",m(this,this._onProvinceDataLoaded));this.dispatchToModules(new ue("CityUiEvent/HIDE_LOADER"))
	},__construct:function(a){Pa.prototype.__construct.call(this,a);this.event=a.getInstanceForMapping("de.innogames.strategycity.battle.controller.events.BattleFinishEvent");
this.applicationBattleModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationBattleModel");this.applicationModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationModel");this.battleModel=a.getInstanceForMapping("de.innogames.strategycity.battle.model.BattleModel");this.cityModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.CityModel");this.applicationClanBattleModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationClanBattleModel");
this.friendModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.FriendDataModel");this.userDataModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.UserDataModel");this.rewardsModel=a.getInstanceForMapping("de.innogames.strategycity.shared.model.RewardModel");this.eventTriggerController=a.getInstanceForMapping("de.innogames.strategycity.shared.controller.eventtrigger.EventTriggerController");this._guildRaidsMapModuleHelper=a.getInstanceForMapping("de.innogames.strategycity.guildraids.map.GuildRaidsMapModuleHelper");
return null
	},__class__:Zla
});var Vz=function(){};h[
	"de.innogames.strategycity.shared.tutorial.commands.ModuleTutorialMapperCommand"
]=Vz;Vz.__name__="de.innogames.strategycity.shared.tutorial.commands.ModuleTutorialMapperCommand";Vz.__super__=Pa;Vz.prototype=l(Pa.prototype,
{execute:function(){if(this._contextBasedTutorialDataModel.get_tutorialExists()){this._tutorialMapper=mh.get_instance();this._initInstructionMapper();this._mapCommonModuleInstructions();var a=this._instructionMapper,b=this._contextBasedTutorialDataModel.get_id();
a.h[b
			]()
		}
	},_mapCommonModuleInstructions:function(){},_mapFirstSessionModuleInstructions:function(){},_mapBattleTutorialModuleInstructions:function(){},_mapInstruction:function(a,b){this._tutorialMapper.mapInstruction(a,b)
	},_mapActor:function(a,b){this._tutorialMapper.mapActor(a,b)
	},_initInstructionMapper:function(){var a=new x;a.h.first_session=m(this,this._mapFirstSessionModuleInstructions);a.h.battle=m(this,this._mapBattleTutorialModuleInstructions);this._instructionMapper=a
	},__construct:function(a){Pa.prototype.__construct.call(this,
a);this._contextBasedTutorialDataModel=a.getInstanceForMapping("de.innogames.strategycity.shared.model.ContextBasedTutorialDataModel");return null
	},__class__:Vz
});var P7=function(){};h[
	"de.innogames.strategycity.battle.controller.BattleTutorialMapperCommand"
]=P7;P7.__name__="de.innogames.strategycity.battle.controller.BattleTutorialMapperCommand";P7.__instantiate=function(a){return new P7
};P7.__super__=Vz;P7.prototype=l(Vz.prototype,
{_mapBattleTutorialModuleInstructions:function(){var a=L.getMainUIContainer(),
b=a.get_tutorialFlowView(),c=b.highlightLayer,d=b.spotlightLayer,e=this.injector,g=this.injector,k=this.moduleEventDispatcher,t=this.moduleEventDispatcher,u=this.moduleEventDispatcher;this._tutorialMapper.mapInstructions([
			{type: "showHexfieldHighlight",factory:function(){return new Idb(a,c)
				}
			},
			{type: "showHexfieldSpotlight",factory:function(){return new Jdb(b,d)
				}
			},
			{type: "setSingleTileInteractable",factory:function(){return new Kdb
				}
			},
			{type: "endBattleTurn",factory:function(){return new Ldb(e)
				}
			},
			{type: "toggleBattleHexfieldOverlay",
factory:function(){return new Mdb
				}
			},
			{type: "battleCommandIssued",factory:function(){return new Ndb
				}
			},
			{type: "enemyMoveFinished",factory:function(){return new Odb(g,k)
				}
			},
			{type: "enemyUnitDied",factory:function(){return new Pdb(t)
				}
			},
			{type: "battleFinished",factory:function(){return new Qdb(u)
				}
			}
		])
	},__class__:P7
});var Ola=function(){};h[
	"de.innogames.strategycity.battle.controller.ShowAttackableIconsCommand"
]=Ola;Ola.__name__="de.innogames.strategycity.battle.controller.ShowAttackableIconsCommand";Ola.__instantiate=
function(a){return new Ola
};Ola.__super__=M;Ola.prototype=l(M.prototype,
{execute:function(){if(null!=this._battleModel.realm&&null!=this._battleModel.realm.map){for(var a=this._event.get_battleUnit(),b=this._battleModel.get_mapcalculator(),c=b.calculateMovableTiles(a,
			3^a.teamFlag,this._battleModel.get_remainingMovementPoints()|0),d=new Du,e=[],g=new $d,k=c.length-1;0<=k;){var t=k--;if(1==c[t
				]||t==b.toMapIndex(a.pos.x,a.pos.y))b.fromMapIndex(t,d),this._addAttackables(b.getAttackables(d,a),g,e)
			}for(k=
e.length-1;0<=k;)this.dispatch(new Fx("BattleUnitEvent/HIGHLIGHT_ATTACKABLE_UNIT",e[k--
			]))
		}
	},_addAttackables:function(a,b,c){for(var d=a.length-1;0<=d;){var e=a[d--
			];null==b.h.__keys__[e.__id__
			]&&(b.set(e,!0),c.push(e))
		}
	},__construct:function(a){M.prototype.__construct.call(this,a);this._event=a.getInstanceForMapping("de.innogames.strategycity.battle.rendering.BattleUnitEvent");this._battleModel=a.getInstanceForMapping("de.innogames.strategycity.battle.model.BattleModel");return null
	},__class__:Ola
});
var Nla=function(){};h[
	"de.innogames.strategycity.battle.controller.bootstrap.BattleBootstrapCommand"
]=Nla;Nla.__name__="de.innogames.strategycity.battle.controller.bootstrap.BattleBootstrapCommand";Nla.__instantiate=function(a){return new Nla
};Nla.__super__=Pa;Nla.prototype=l(Pa.prototype,
{execute:function(){this._rewardModel.blockContexts(et.getBattleRewardContexts());this.mediatorMap.mapView(Ef,cma);this.mediatorMap.mapView(YZ,dma);this.mediatorMap.mapView(Q7,ZZ);this.mediatorMap.mapView(Lh,ema);
this._requestBattleStart()
	},_requestBattleStart:function(){var a=this;this._loaderHandle=Ae.requestModuleLoader();var b=this._applicationBattleModel.battleType,c=this.injector.getInstance(Gx);if(null!=this._applicationBattleModel.runningBattle){var d=m(this,this._initializeBattle),e=m(this,this._onError);c.continueBattle().handle(function(z){switch(z._hx_index){case 0:za.invoke(d,z.data);break;case 1:z=z.failure,null!=e?za.invoke(e,z):null!=y._reportError&&y._reportError(Error("[LOGGER] "+z.message))
				}
			})
		}else if(lh.isReplayBattle(b)){var g=
b instanceof zC?b: null,k=function(z){var J=z.battleType;(J instanceof zC?J:null)._battleToReplay=g.get_battleToReplay();a._initializeBattle(z)
			},t=m(this,this._onError);c.getReplay(g.get_replayId()).handle(function(z){switch(z._hx_index){case 0:za.invoke(k,z.data);break;case 1:z=z.failure,null!=t?za.invoke(t,z):null!=y._reportError&&y._reportError(Error("[LOGGER] "+z.message))
				}
			})
		}else{var u=m(this,this._initializeBattle),A=m(this,this._onError);c.startByBattleType(b,!1).handle(function(z){switch(z._hx_index){case 0:za.invoke(u,
z.data);break;case 1:z=z.failure,null!=A?za.invoke(A,z):null!=y._reportError&&y._reportError(Error("[LOGGER] "+z.message))
				}
			})
		}
	},_initializeBattle:function(a){var b=this,c=yJ.getConfig(a.battleType);this._view=new rXa(c);this._view.set_visible(!1);this.contextView.addChild(this._view);this._setupTutorialMapping();this.dispatch(new oF("TutorialMapperEvent/MAP_MODULE_SPECIFIC"));this._battleModel.initializeRealm(a);var d=this._battleModel.lockStepping(),e=null;e=function(g){b._view.removeEventListener("complete",
e);null!=d&&d.cancel();b._initializeView()
		};this._view.addEventListener("complete",e);lh.isExpeditionBattle(this._battleModel.get_battleType())&&(a=this.injector.getInstance(WWa),a.recordRequestsFor("GuildExpeditionService",
		10),a.setRecorderIgnoreList("GuildExpeditionService",
		[
			"receiveContributionNotification"
		]));this._loadBattleAnimationLibs(c)
	},_onError:function(a){var b=this._loaderHandle;null!=b&&b.cancel();null!=a.data&&a.data instanceof ff?this._handleSoftError(a.data):this._handleDefaultError()
	},
_handleSoftError:function(a){switch(a.error_code){case 1500:case 1502:break;default:this._handleDefaultError()
		}
	},_handleDefaultError:function(){this.dispatchToModules(new Be("STATE/CITY_MAP"))
	},_loadBattleAnimationLibs:function(a){for(var b=this,c=this._battleModel.realm.state.unitsOrder.concat(this._battleModel.realm.state.retiredUnits),d=[],e=0;e<c.length;){var g=Cu.getUnitAnimationRefLibIDByUnitTypeVO(c[e++
			].get_unitType());-1==d.indexOf(g)&&d.push(g)
		}c=[
			"shared/tiles/generic_tiles",
			"battle/main/battle_main"
		];
c=c.concat(c).concat(d).concat([]);c.push(a.tilesReflibId);var k=m(this,this._initializeBattleView),t=function(u){null!=y._reportError&&y._reportError(Error("[LOGGER] "+u.message));b.dispatch(new R7(r.gettext("GE|Sorry, an internal error occurred while loading battle animations, please try again later."),m(b,b._onUnexpectedDialogConfirm)))
		};yb.getInstance().load(c,Sc.HIGH).handle(function(u){switch(u._hx_index){case 0:za.invoke(k,u.data);break;case 1:u=u.failure,null!=t?za.invoke(t,u):null!=y._reportError&&
y._reportError(Error("[LOGGER] "+u.message))
			}
		})
	},_initializeBattleView:function(a){this._view.initialize(this._battleModel)
	},_initializeView:function(){O._to(this._view,
		1,
		{autoAlpha: 1
		});this.dispatchToModules(new AS("ModuleEvent/MODULE_FINISHED_LOADING"));this._battleModel.isLargeScaleBattle()&&this.dispatchToModules(new fma("BattleScaleEvent/NEW_SCALE_FACTOR",r.gettext("BattleScaleFactor|1.5")));lh.isExpeditionBattle(this._battleModel.get_battleType())?this._soundThemeProvider.setCurrentTheme("GuildExpeditionTheme"):
this._soundThemeProvider.setCurrentTheme("BattleTheme");var a=this._loaderHandle;null!=a&&a.cancel();this.dispatchToModules(new Ip("PerformanceLogEvent/LOADING_COMPLETED",
		"Battle"))
	},_onUnexpectedDialogConfirm:function(){this.dispatchToModules(new Be("STATE/CITY_MAP"))
	},_setupTutorialMapping:function(){this.commandMap.mapEvent("TutorialActorMapperEvent/MAP_ACTOR",Eu);this.commandMap.mapEvent("TutorialActorMapperEvent/MAP_UI_ACTOR",Eu);this.commandMap.mapEvent("TutorialActorMapperEvent/UNMAP_ACTOR",
Eu);this.commandMap.mapEvent("TutorialInstructionMapperEvent/MAP_INSTRUCTION",Eu);this.commandMap.mapEvent("TutorialMapperEvent/MAP_MODULE_SPECIFIC",P7);this.moduleCommandMap.mapEvent("TutorialMapperEvent/MAP_MODULE_SPECIFIC",P7)
	},__construct:function(a){Pa.prototype.__construct.call(this,a);this._applicationBattleModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationBattleModel");this._battleModel=a.getInstanceForMapping("de.innogames.strategycity.battle.model.BattleModel");
this._rewardModel=a.getInstanceForMapping("de.innogames.strategycity.shared.model.RewardModel");this._soundThemeProvider=a.getInstanceForMapping("de.innogames.strategycity.sounds.SoundThemeProvider");return null
	},__class__:Nla
});var gma=function(a){D.call(this,
	"BattleFinishEvent/TYPE");this.settings=a
};h[
	"de.innogames.strategycity.battle.controller.events.BattleFinishEvent"
]=gma;gma.__name__="de.innogames.strategycity.battle.controller.events.BattleFinishEvent";gma.__super__=D;gma.prototype=l(D.prototype,
{clone:function(){return new gma(this.settings)
	},__class__:gma
});var fma=function(a,b,c,d){null==d&&(d=!1);null==c&&(c=!1);D.call(this,a,c,d);this._scaleFactor=b
};h[
	"de.innogames.strategycity.battle.controller.events.BattleScaleEvent"
]=fma;fma.__name__="de.innogames.strategycity.battle.controller.events.BattleScaleEvent";fma.__super__=D;fma.prototype=l(D.prototype,
{clone:function(){return new fma(this.type,this._scaleFactor,this.bubbles,this.cancelable)
	},get_scaleFactor:function(){return this._scaleFactor
	},
__class__:fma,__properties__: {get_scaleFactor: "get_scaleFactor"
	}
});var Wv=function(){this._skipFurtherCalls=!1;this._stepLockCounter=new Rdb;this._playFromStart=this._replayRequested=!1;this._currentUnitMovePoints=NaN;this._currentHistoryPosition=this._startupHistoryLength=this._currentHistoryPositionSubstep=0;this._tutorialPositionState=I._new(0);this._hasRallyBonusBeenCalculated=this._hasAddedAttackerColorGuardBonus=this._hasAddedDefenderColorGuardBonus=this._hasAddedAttackerDrummerBonus=this._hasAddedDefenderDrummerBonus=
!1;this._currentRound=this._currentActiveUnitId=this._attackerRallyBonus=this._defenderRallyBonus=0
};h[
	"de.innogames.strategycity.battle.model.BattleModel"
]=Wv;Wv.__name__="de.innogames.strategycity.battle.model.BattleModel";Wv._resetUnitOrder=function(a){if(null!=a.retiredUnits&&!a.hasOutcome()){for(var b=a.retiredUnits.slice(),c=a.unitsOrder;0!=b.length;){var d=b.shift();0<d.currentHitpoints&&(d.currentHitpoints=0);for(var e=0,g=0;g<c.length;)c[g++
			].initialUnitOrderIndex<d.initialUnitOrderIndex&&
++e;c.splice(e,
			0,d)
		}a.retiredUnits.length=0
	}
};Wv._notifyListeners=function(a,b){return 0==b||4==b||1==b&&null!=a.path&&0<a.path.length||2==b&&0!=a.attackedUnitId&&!a.tookPoisonDamage||3==b&&0<=a.receivedDamage&&0!=a.attackedUnitId&&!a.tookPoisonDamage?!0:!1
};Wv.__instantiate=function(a){return new Wv
};Wv.__super__=vd;Wv.prototype=l(vd.prototype,
{isLargeScaleBattle:function(){return null==this.realm||null==this.realm.state?!1: 1<this.realm.state.distance_scale_factor
	},getUnitByID:function(a){var b=
this.realm.state.unitsOrder;if(null!=b)for(var c=0;c<b.length;){var d=b[c
			];++c;if(a==d.unitId)return d
		}return null
	},initializeRealm:function(a){this._currentRound=0;Wv._resetUnitOrder(a.state);this.realm=a;this._currentActiveUnitId=a.state.activeUnitId;this._calculateRallyBonus();lh.isReplayBattle(this.get_battleType())?this._startupHistoryLength=0:this._startupHistoryLength=0==a.state.round?0:a.state.stepHistory.length;this._currentHistoryPosition=this._startupHistoryLength;I.set_value(this._tutorialPositionState,
this._currentHistoryPosition);this._currentHistoryPositionSubstep=0;this._playFromStart=0==this._startupHistoryLength;this._stepListeners=[];this._commandListeners=[];this._lockListeners=[];this._stepLockCounter=new Rdb;this._skipFurtherCalls=this._replayRequested=!1;this._stepUnlockedTimer=new Ih(20,
		1);this._stepUnlockedTimer.addEventListener("timerComplete",m(this,this._onTimerComplete),!1,
		0,!0);this._mapcalculator=new Oc(a);this._mapcalculator.calcAbilityBonuses();this._currentUnitMovePoints=0;
this.mapDataService.resetService();this._queueStepping();this._resetUnitMovePoints()
	},addStepListener:function(a){this._stepListeners.push(a)
	},addMoveOrderListener:function(a){this._commandListeners.push(a)
	},addLockListener:function(a){this._lockListeners.push(a)
	},removeLockListener:function(a){for(var b=this._lockListeners.length-1;0<=b;){var c=b--;this._lockListeners[c
			]==a&&this._lockListeners.splice(c,
			1)
		}
	},lockStepping:function(){var a=this;this._stepLockCounter._counter++;this._stepUnlockedTimer.reset();
if(1==this._stepLockCounter._counter)for(var b=0,c=this._lockListeners;b<c.length;)c[b++
		](this,!0);var d=this._stepLockCounter;return new ng(function(){d._counter--;if(0==d._counter){a._queueStepping();for(var e=0,g=a._lockListeners;e<g.length;)g[e++
				](a,!1)
			}if(0>d._counter)throw ba.thrown(new wb("_stepLockCounter is negative, that means you made a mistake somewhere... good luck finding it."));
		})
	},playerCommandMoveOrder:function(a,b){if(Fm._dailyCalculationRunningTest(this.updateModel,this.realm,this._moduleEventDispatcher))return!1;
if(this.get_hasRemainingSteps())throw ba.thrown(new wb("playerCommandMoveOrder issued while animating. This shouldn't happen."));var c=Oc.findUnit(this.realm,this._currentActiveUnitId);a=Oc.newPos(a,b);b=[];var d=this._mapcalculator.calcShortestPath(c.pos,a,c,
		2,b);if(d>this.get_remainingMovementPoints())throw ba.thrown(new wb("Move made that exceeded the max. movement points. Shouldn't happen but it did."));for(var e=1;e<b.length;)this._playerMovePath.push(b[e
		]),++e;this._currentUnitMovePoints-=d;
c.pos.x=a.x;c.pos.y=a.y;d=0;for(e=this._commandListeners;d<e.length;)e[d++
		](this,this._currentActiveUnitId,b);return 1>=this._mapcalculator.countMovementHexes(this._mapcalculator.calcDistanceMap(a,c,
		3,this.get_remainingMovementPoints()|0),this.get_remainingMovementPoints()|0)&&0==this._mapcalculator.getAttackables(a,c).length?(this.playerCommandEndTurn(),!0):!1
	},performUnitCleanup:function(){this._transformAllRoguesBack()
	},playerCommandEndTurn:function(){if(!Fm._dailyCalculationRunningTest(this.updateModel,
this.realm,this._moduleEventDispatcher)){var a=new S7;a.path=this._playerMovePath;a.unitId=this._currentActiveUnitId;a.attackedUnitId=0;this.dispatchToModules(new tk("BattleTurnModelEvent/SERVER_PROCESSING_START"));this.mapDataService.submitMove(this.realm.battleId,a,
			0).handle(m(this,this._onNewState));this._playerMovePath=[]
		}
	},playerCommandAttack:function(a){if(!Fm._dailyCalculationRunningTest(this.updateModel,this.realm,this._moduleEventDispatcher)){var b=new S7;b.path=this._playerMovePath;b.unitId=
this._currentActiveUnitId;b.attackedUnitId=a;this.mapDataService.submitMove(this.realm.battleId,b,
			0).handle(m(this,this._onNewState));this._playerMovePath=[]
		}
	},playerCommandSurrender:function(){this._skipFurtherCalls||this.realm.state.hasOutcome()||(this._skipFurtherCalls=!0,this.mapDataService.surrender(this.realm.battleId).handle(m(this,this._onNewState)))
	},hasPlayerMovePath:function(){return null!=this._playerMovePath?0<this._playerMovePath.length:!1
	},playerSkip:function(){if(!this._skipFurtherCalls){this._replayRequested=
this._skipFurtherCalls=!0;var a=null;this.hasPlayerMovePath()&&(a=new S7,a.path=this._playerMovePath,a.unitId=this._currentActiveUnitId,a.attackedUnitId=0);this.mapDataService.submitMove(this.realm.battleId,a,
			360).handle(m(this,this._onNewState));this.dispatchToModules(new tk("BattleTurnModelEvent/AUTOBATTLE"))
		}
	},getMinMaxAttackDamage:function(a,b,c,d,e){var g=a.get_unitType(),k=b.get_unitType(),t=a.hasUnitAbility(ZS),u=g.attackBonus.h.terrains.h[c
		];c=0;t||(d=k.defenseBonus.h.terrains.h[d
		],c=null!=
d?d: 0);d=g.attackBonus.h.units.h[k.unitClass
		];k=k.defenseBonus.h.units.h[g.unitClass
		];var A=Oc.calculateBlastBonus(a,b,this.realm.state.distance_scale_factor),z=Oc.calculateCloseQuartersBonus(a,b),J=Oc.calculateCallOfDutyBonus(a),T=g.baseDamage*Oc.getReducedAttackPercent(a)/100;g=0;t||(g=Oc.calculateDugInBonus(a,b));u=a.get_buffedAttackDamage()+(null!=u?u: 0)+(null!=d?d: 0)+A+z+J-T;c=b.get_buffedDefence()+c+(null!=k?k: 0)+g;g=null!=e?e[
			1
		]:a.getCurrentHitpoints();g=(.5+g/20)*u;a=Math.round(10*Math.pow(.62,
c/g));null!=e&&(g=Math.max(0,e[
			0
		])|0,g=(.5+g/20)*u);e=Math.round(10*Math.pow(.38,c/g));t||(b=Oc.getReactiveArmorDamageCap(b),
		0<b&&(a=Math.min(a,b)|0,e=Math.min(e,b)|0));1>e&&(e=1);1>a&&(a=1);return[e,a
		]
	},getMinMaxRetaliationDamage:function(a,b,c,d,e){var g=b.getCurrentHitpoints();e=[Math.max(0,g-e[
				1
			])|0,g-e[
				0
			]
		];return 0>=e[
			1
		]||!this._canUnitRetaliate(b)?[
			0,
			0
		]:this.getMinMaxAttackDamage(b,a,d,c,e)
	},getUnitAt:function(a,b){var c=this.realm.state.unitsOrder;if(null!=c)for(var d=0;d<c.length;){var e=
c[d
			];++d;if(0<e.getCurrentHitpoints()&&e.pos.x==a&&e.pos.y==b)return e
		}return null
	},getCurrentActiveUnit:function(){return Oc.findUnit(this.realm,this._currentActiveUnitId)
	},dispose:function(){this._stepListeners.length=0;this._commandListeners.length=0;this._lockListeners.length=0;this._mapcalculator=null;null!=this._stepUnlockedTimer&&(this._stepUnlockedTimer.stop(),this._stepUnlockedTimer.removeEventListener("timerComplete",m(this,this._onTimerComplete)))
	},_calculateRallyBonus:function(){for(var a=
0,b=this.realm.state.unitsOrder;a<b.length;){var c=b[a
			];++a;var d=c.getAbilityByClass($S);null!=d&&this._setRallyBonus(c,d.value,c.teamFlag)
		}this._hasRallyBonusBeenCalculated=!0
	},_setRallyBonus:function(a,b,c){
		"color_guard"==a.get_unitType().unitTypeId?1!=c||this._hasAddedAttackerColorGuardBonus?2!=c||this._hasAddedDefenderColorGuardBonus||(this._defenderRallyBonus+=b,this._hasAddedDefenderColorGuardBonus=!0):(this._attackerRallyBonus+=b,this._hasAddedAttackerColorGuardBonus=!0): "military_drummer"==
a.get_unitType().unitTypeId&&(1!=c||this._hasAddedAttackerDrummerBonus?2!=c||this._hasAddedDefenderDrummerBonus||(this._defenderRallyBonus+=b,this._hasAddedDefenderDrummerBonus=!0):(this._attackerRallyBonus+=b,this._hasAddedAttackerDrummerBonus=!0))
	},_canUnitRetaliate:function(a){return a.hasUnitAbility(xN)?!1:a.hasUnitAbility(T7)?!0:!("long_ranged"==a.get_unitType().unitClass||"short_ranged"==a.get_unitType().unitClass)
	},_onNewState:function(a){this.dispatchToModules(new tk("BattleTurnModelEvent/SERVER_PROCESSING_FINISHED"));
this.realm.state=a;this._mapcalculator.calcAbilityBonuses();this._replayRequested&&null!=this.realm.state.ranking_data&&this.dispatchToModules(new tk("BattleTurnModelEvent/REPLAY_STARTED"));I.set_value(this._tutorialPositionState,I.get_value(this._tutorialPositionState)+1);this._doSteps()
	},_doSteps:function(){if(0<this._stepLockCounter._counter||!this.get_hasRemainingSteps())this.realm.state.isSurrendered()&&this.dispatchToModules(new tk("BattleTurnModelEvent/BATTLE_FINISHED"));else{var a=this.realm.state.stepHistory,
b=a.length;for(this.realm.state.hasOutcome()&&this.dispatchToModules(new tk("BattleTurnModelEvent/BATTLE_WINNER_DETERMINED"));0==this._stepLockCounter._counter&&this._currentHistoryPosition<b;){var c=a[this._currentHistoryPosition
				];this._doSubstep(c)
			}this._currentHistoryPosition==b&&(this._dispatchBattleFinished(),this._currentActiveUnitId=this.realm.state.activeUnitId,this._currentRound=this.realm.state.round,this._resetUnitMovePoints(),I.set_value(this._tutorialPositionState,I.get_value(this._tutorialPositionState)+
1))
		}
	},_doSubstep:function(a){var b=this._currentHistoryPositionSubstep;if(Wv._notifyListeners(a,b))for(var c=0,d=this._stepListeners;c<d.length;)d[c++
		](this,a,this._currentHistoryPositionSubstep);c=Oc.findUnit(this.realm,a.unitId);if(this._retireOneShotUnit(c,a,b)){d=this.realm.state.retiredUnits;var e=!1;for(b=d.length-1;0<=b;)if(d[b--
			].unitId==c.unitId){e=!0;break
			}if(!e)for(this.realm.state.retiredUnits.push(c),d=this.realm.state.unitsOrder,b=d.length-1;0<=b;)e=b--,d[e
			].unitId==c.unitId&&d.splice(e,
			1)
		}this._currentActiveUnitId=a.unitId;this._currentRound=a.round;4<++this._currentHistoryPositionSubstep&&(this._currentHistoryPositionSubstep=0,this._currentHistoryPosition+=1)
	},_retireOneShotUnit:function(a,b,c){return 2==c&&a.hasUnitAbility(xN)?0!=b.attackedUnitId:!1
	},_dispatchBattleFinished:function(){var a=this.realm.state;a.hasOutcome()?(this.dispatchToModules(new tk("BattleTurnModelEvent/BATTLE_FINISHED")),a.hasNextWave()||(a.isVictory()?this.dispatchToModules(new aT("BattleResolutionEvent/WON",
this.realm.battleType)):this.dispatchToModules(new aT("BattleResolutionEvent/LOST",this.realm.battleType)))):lh.isReplayBattle(this.get_battleType())&&a.isSurrendered()&&this.dispatchToModules(new tk("BattleTurnModelEvent/BATTLE_FINISHED"))
	},_resetUnitMovePoints:function(){this._currentUnitMovePoints=Oc.findUnit(this.realm,this._currentActiveUnitId).get_unitType().movementPoints;this._playerMovePath=[]
	},_transformAllRoguesBack:function(){for(var a=this.realm.state.unitsOrder.concat(this.realm.state.retiredUnits),
b=0;b<a.length;)a[b++
		].resetRogueTransformation()
	},_queueStepping:function(){this._stepUnlockedTimer.reset();this._stepUnlockedTimer.start()
	},_onTimerComplete:function(a){this._doSteps()
	},get_lockCount:function(){return this._stepLockCounter._counter
	},get_battleType:function(){return this.realm.battleType
	},get_playFromStart:function(){return this._playFromStart
	},get_currentHistoryPosition:function(){return this._currentHistoryPosition
	},get_attackerRallyBonus:function(){return this._attackerRallyBonus
	},
get_defenderRallyBonus:function(){return this._defenderRallyBonus
	},get_hasRemainingSteps:function(){return this.mapDataService.get_hasRunningRequests()?!0: 0<this._stepLockCounter._counter||this._currentHistoryPosition!=this.realm.state.stepHistory.length||this.realm.state.round!=this._currentRound||this.realm.state.activeUnitId!=this._currentActiveUnitId?!0: 0!=this._currentHistoryPositionSubstep
	},get_mapcalculator:function(){return this._mapcalculator
	},get_remainingMovementPoints:function(){return this._currentUnitMovePoints
	},
get_currentActiveUnitId:function(){return this._currentActiveUnitId
	},get_currentRound:function(){return this._currentRound
	},get_tutorialPositionState:function(){return this._tutorialPositionState
	},__construct:function(a){vd.prototype.__construct.call(this,a);this.updateModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ServerUpdateModel");this.mapDataService=a.getInstanceForMapping("de.innogames.strategycity.battle.service.BattlefieldService");return null
	},__class__:Wv,__properties__:l(vd.prototype.__properties__,
	{get_tutorialPositionState: "get_tutorialPositionState",get_currentRound: "get_currentRound",get_currentActiveUnitId: "get_currentActiveUnitId",get_remainingMovementPoints: "get_remainingMovementPoints",get_mapcalculator: "get_mapcalculator",get_hasRemainingSteps: "get_hasRemainingSteps",get_defenderRallyBonus: "get_defenderRallyBonus",get_attackerRallyBonus: "get_attackerRallyBonus",get_currentHistoryPosition: "get_currentHistoryPosition",get_playFromStart: "get_playFromStart",get_battleType: "get_battleType",
get_lockCount: "get_lockCount"
	})
});var Rdb=function(){this._counter=0
};h[
	"de.innogames.strategycity.battle.model._BattleModel.BattleStepCounter"
]=Rdb;Rdb.__name__="de.innogames.strategycity.battle.model._BattleModel.BattleStepCounter";Rdb.prototype={increment:function(){this._counter++
	},decrement:function(){this._counter--
	},get_value:function(){return this._counter
	},__class__:Rdb,__properties__: {get_value: "get_value"
	}
};var $Z=function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);D.call(this,a,b,c)
};h[
	"de.innogames.strategycity.battle.model.events.BattleOrderEvent"
]=
$Z;$Z.__name__="de.innogames.strategycity.battle.model.events.BattleOrderEvent";$Z.__super__=D;$Z.prototype=l(D.prototype,
{clone:function(){return new $Z(this.type,this.bubbles,this.cancelable)
	},toString:function(){return this.formatToString("BattleOrderEvent",
		"type",
		"bubbles",
		"cancelable",
		"eventPhase")
	},__class__:$Z
});var tk=function(a,b,c,d){null==c&&(c=!1);null==b&&(b=!1);D.call(this,a,b,c);this._realm=d
};h[
	"de.innogames.strategycity.battle.model.events.BattleTurnModelEvent"
]=tk;tk.__name__="de.innogames.strategycity.battle.model.events.BattleTurnModelEvent";
tk.__super__=D;tk.prototype=l(D.prototype,
{clone:function(){return new tk(this.type,this.bubbles,this.cancelable)
	},get_realm:function(){return this._realm
	},__class__:tk,__properties__: {get_realm: "get_realm"
	}
});var $la=function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);D.call(this,a,b,c)
};h[
	"de.innogames.strategycity.battle.model.events.BattleUIEvent"
]=$la;$la.__name__="de.innogames.strategycity.battle.model.events.BattleUIEvent";$la.__super__=D;$la.prototype=l(D.prototype,
{clone:function(){return new $la(this.type,
this.bubbles,this.cancelable)
	},toString:function(){return this.formatToString("BattleDisableUIEevent",
		"type",
		"bubbles",
		"cancelable",
		"eventPhase")
	},__class__:$la
});var Yb=function(){};h[
	"de.innogames.strategycity.battle.model.vo.AbstractBattleAbilityVO"
]=Yb;Yb.__name__="de.innogames.strategycity.battle.model.vo.AbstractBattleAbilityVO";Yb.__super__=G;Yb.prototype=l(G.prototype,
{_getClassName:function(){return"AbstractBattleAbility"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);
a.type=this.type;a.name=this.name;a.description=this.description;a.icon=this.icon;return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.type=q.normalizeString(a.type);this.name=q.normalizeString(a.name);this.description=q.normalizeString(a.description);this.icon=q.normalizeString(a.icon)
	},__class__:Yb
});var he=function(){this.attackerPlayerId=this.defenderPlayerId=this.currentWaveId=this.totalWaves=0
};h[
	"de.innogames.strategycity.battle.model.vo.AbstractBattleTypeVO"
]=
he;he.__name__="de.innogames.strategycity.battle.model.vo.AbstractBattleTypeVO";he.__super__=G;he.prototype=l(G.prototype,
{getContent:function(){return this.era
	},_getClassName:function(){return"AbstractBattleType"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.attackerPlayerId=this.attackerPlayerId;a.defenderPlayerId=this.defenderPlayerId;a.era=this.era;a.type=this.type;a.currentWaveId=this.currentWaveId;a.totalWaves=this.totalWaves;return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,
a);this.attackerPlayerId=q.normalizeInt(a.attackerPlayerId);this.defenderPlayerId=q.normalizeInt(a.defenderPlayerId);this.era=q.normalizeString(a.era);this.type=q.normalizeString(a.type);this.currentWaveId=q.normalizeInt(a.currentWaveId);this.totalWaves=q.normalizeInt(a.totalWaves)
	},__class__:he
});var hma=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleAlwaysAttackingAbilityVO"
]=hma;hma.__name__="de.innogames.strategycity.battle.model.vo.BattleAlwaysAttackingAbilityVO";
hma.__super__=Yb;hma.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleAlwaysAttackingAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:hma
});var yN=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleBlastAbilityVO"
]=yN;yN.__name__="de.innogames.strategycity.battle.model.vo.BattleBlastAbilityVO";
yN.__super__=Yb;yN.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleBlastAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:yN
});var U7=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleCallOfDutyAbilityVO"
]=U7;U7.__name__="de.innogames.strategycity.battle.model.vo.BattleCallOfDutyAbilityVO";
U7.__super__=Yb;U7.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleCallOfDutyAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:U7
});var a_=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleChivalryAbilityVO"
]=a_;a_.__name__="de.innogames.strategycity.battle.model.vo.BattleChivalryAbilityVO";
a_.__super__=Yb;a_.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleChivalryAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:a_
});var zN=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleCloseQuartersAbilityVO"
]=zN;zN.__name__="de.innogames.strategycity.battle.model.vo.BattleCloseQuartersAbilityVO";
zN.__super__=Yb;zN.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleCloseQuartersAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:zN
});var T7=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleContactAbilityVO"
]=T7;T7.__name__="de.innogames.strategycity.battle.model.vo.BattleContactAbilityVO";
T7.__super__=Yb;T7.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleContactAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:T7
});var ima=function(){this.value=NaN
};h[
	"de.innogames.strategycity.battle.model.vo.BattleCriticalHitChanceAbilityVO"
]=ima;ima.__name__="de.innogames.strategycity.battle.model.vo.BattleCriticalHitChanceAbilityVO";
ima.__super__=Yb;ima.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleCriticalHitChanceAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeFloat(a.value)
	},__class__:ima
});var V7=function(){this.value=NaN
};h[
	"de.innogames.strategycity.battle.model.vo.BattleDoubleDamageAbilityVO"
]=V7;V7.__name__="de.innogames.strategycity.battle.model.vo.BattleDoubleDamageAbilityVO";
V7.__super__=Yb;V7.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleDoubleDamageAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeFloat(a.value)
	},__class__:V7
});var W7=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleDragonBreathAbilityVO"
]=W7;W7.__name__="de.innogames.strategycity.battle.model.vo.BattleDragonBreathAbilityVO";
W7.__super__=Yb;W7.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleDragonBreathAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:W7
});var AN=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleDugInAbilityVO"
]=AN;AN.__name__="de.innogames.strategycity.battle.model.vo.BattleDugInAbilityVO";AN.__super__=
Yb;AN.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleDugInAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:AN
});var jma=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleExplosionAnimationAbilityVO"
]=jma;jma.__name__="de.innogames.strategycity.battle.model.vo.BattleExplosionAnimationAbilityVO";
jma.__super__=Yb;jma.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleExplosionAnimationAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:jma
});var X7=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleFlyingAbilityVO"
]=X7;X7.__name__="de.innogames.strategycity.battle.model.vo.BattleFlyingAbilityVO";
X7.__super__=Yb;X7.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleFlyingAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:X7
});var Y7=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleForceFieldAbilityVO"
]=Y7;Y7.__name__="de.innogames.strategycity.battle.model.vo.BattleForceFieldAbilityVO";
Y7.__super__=Yb;Y7.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleForceFieldAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:Y7
});var b_=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleFrenzyAbilityVO"
]=b_;b_.__name__="de.innogames.strategycity.battle.model.vo.BattleFrenzyAbilityVO";b_.__super__=
Yb;b_.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleFrenzyAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:b_
});var Z7=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleHeatAbilityVO"
]=Z7;Z7.__name__="de.innogames.strategycity.battle.model.vo.BattleHeatAbilityVO";Z7.__super__=Yb;Z7.prototype=
l(Yb.prototype,
{_getClassName:function(){return"BattleHeatAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:Z7
});var $7=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleInvincibleAbilityVO"
]=$7;$7.__name__="de.innogames.strategycity.battle.model.vo.BattleInvincibleAbilityVO";$7.__super__=Yb;$7.prototype=
l(Yb.prototype,
{_getClassName:function(){return"BattleInvincibleAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:$7
});var c_=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleLastStandAbilityVO"
]=c_;c_.__name__="de.innogames.strategycity.battle.model.vo.BattleLastStandAbilityVO";c_.__super__=Yb;c_.prototype=
l(Yb.prototype,
{_getClassName:function(){return"BattleLastStandAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:c_
});var em=function(){this.movementCosts=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleMapTerrainTypeVO"
]=em;em.__name__="de.innogames.strategycity.battle.model.vo.BattleMapTerrainTypeVO";em.__super__=G;em.prototype=
l(G.prototype,
{_getClassName:function(){return"BattleMapTerrainType"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.typeId=this.typeId;a.name=this.name;a.shorttag=this.shorttag;a.movementCosts=this.movementCosts;return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.typeId=q.normalizeString(a.typeId);this.name=q.normalizeString(a.name);this.shorttag=q.normalizeString(a.shorttag);this.movementCosts=q.normalizeInt(a.movementCosts)
	},__class__:em
});var Sdb=
function(){this.width=this.height=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleMapVO"
]=Sdb;Sdb.__name__="de.innogames.strategycity.battle.model.vo.BattleMapVO";Sdb.__super__=G;Sdb.prototype=l(G.prototype,
{_getClassName:function(){return"BattleMap"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.width=this.width;a.height=this.height;a.tiles=q.arrayToJSONObject(this.tiles,function(b){return q.arrayToJSONObject(b,q.voToJSON)
		});return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,
a);this.width=q.normalizeInt(a.width);this.height=q.normalizeInt(a.height);this.tiles=q.convertArray(a.tiles,function(b){return q.convertArray(b,q.convertObject,
			[])
		},
		[])
	},__class__:Sdb
});var a8=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleMirvAbilityVO"
]=a8;a8.__name__="de.innogames.strategycity.battle.model.vo.BattleMirvAbilityVO";a8.__super__=Yb;a8.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleMirvAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);
a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:a8
});var b8=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleMoraleAbilityVO"
]=b8;b8.__name__="de.innogames.strategycity.battle.model.vo.BattleMoraleAbilityVO";b8.__super__=Yb;b8.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleMoraleAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=
this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:b8
});var d_=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleMortarAbilityVO"
]=d_;d_.__name__="de.innogames.strategycity.battle.model.vo.BattleMortarAbilityVO";d_.__super__=Yb;d_.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleMortarAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;
return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:d_
});var xN=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleOneShotAbilityVO"
]=xN;xN.__name__="de.innogames.strategycity.battle.model.vo.BattleOneShotAbilityVO";xN.__super__=Yb;xN.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleOneShotAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},
fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:xN
});var c8=function(){this.value=this.used_at_step=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleOneTimeArmorAbilityVO"
]=c8;c8.__name__="de.innogames.strategycity.battle.model.vo.BattleOneTimeArmorAbilityVO";c8.__super__=Yb;c8.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleOneTimeArmorAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);
a.value=this.value;a.used_at_step=this.used_at_step;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value);this.used_at_step=q.normalizeInt(a.used_at_step)
	},__class__:c8
});var d8=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattlePoisonAbilityVO"
]=d8;d8.__name__="de.innogames.strategycity.battle.model.vo.BattlePoisonAbilityVO";d8.__super__=Yb;d8.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattlePoisonAbility"
	},
toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:d8
});var kma=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattlePoisonedAbilityVO"
]=kma;kma.__name__="de.innogames.strategycity.battle.model.vo.BattlePoisonedAbilityVO";kma.__super__=Yb;kma.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattlePoisonedAbility"
	},
toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:kma
});var ZS=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattlePowerShotAbilityVO"
]=ZS;ZS.__name__="de.innogames.strategycity.battle.model.vo.BattlePowerShotAbilityVO";ZS.__super__=Yb;ZS.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattlePowerShotAbility"
	},
toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:ZS
});var $S=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleRallyAbilityVO"
]=$S;$S.__name__="de.innogames.strategycity.battle.model.vo.BattleRallyAbilityVO";$S.__super__=Yb;$S.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleRallyAbility"
	},toJSONObject:function(){var a=
Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:$S
});var bT=function(){};h[
	"de.innogames.strategycity.battle.model.vo.BattleRapidDeploymentAbilityVO"
]=bT;bT.__name__="de.innogames.strategycity.battle.model.vo.BattleRapidDeploymentAbilityVO";bT.__super__=Yb;bT.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleRapidDeploymentAbility"
	},toJSONObject:function(){var a=
Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeString(a.value)
	},__class__:bT
});var cT=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleReactiveArmorAbilityVO"
]=cT;cT.__name__="de.innogames.strategycity.battle.model.vo.BattleReactiveArmorAbilityVO";cT.__super__=Yb;cT.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleReactiveArmorAbility"
	},toJSONObject:function(){var a=
Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:cT
});var Tdb=function(){this.distance_scale_factor=NaN;this.surrenderBit=this.winnerBit=this.activeUnitId=this.round=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleRealmStateVO"
]=Tdb;Tdb.__name__="de.innogames.strategycity.battle.model.vo.BattleRealmStateVO";Tdb.__super__=G;Tdb.prototype=l(G.prototype,
{isSurrendered:function(){return 0!=
this.surrenderBit
	},isVictory:function(){return 1==this.winnerBit
	},hasOutcome:function(){return 0!=this.winnerBit
	},hasNextWave:function(){return null!=this.ranking_data&&null!=this.ranking_data.nextArmy&&null!=this.ranking_data.nextArmy.units?0<this.ranking_data.nextArmy.units.length:!1
	},_getClassName:function(){return"BattleRealmState"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.stepHistory=q.arrayToJSONObject(this.stepHistory,q.voToJSON);a.surrenderBit=this.surrenderBit;
a.winnerBit=this.winnerBit;a.unitsOrder=q.arrayToJSONObject(this.unitsOrder,q.voToJSON);a.retiredUnits=q.arrayToJSONObject(this.retiredUnits,q.voToJSON);a.activeUnitId=this.activeUnitId;a.round=this.round;null!=this.ranking_data&&(a.ranking_data=this.ranking_data.toJSONObject());a.distance_scale_factor=this.distance_scale_factor;return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.stepHistory=q.convertArray(a.stepHistory,q.convertObject,
		[]);this.surrenderBit=q.normalizeInt(a.surrenderBit);
this.winnerBit=q.normalizeInt(a.winnerBit);this.unitsOrder=q.convertArray(a.unitsOrder,q.convertObject,
		[]);this.retiredUnits=q.convertArray(a.retiredUnits,q.convertObject,
		[]);this.activeUnitId=q.normalizeInt(a.activeUnitId);this.round=q.normalizeInt(a.round);this.ranking_data=q.convertObject(a.ranking_data);this.distance_scale_factor=q.normalizeFloat(a.distance_scale_factor)
	},__class__:Tdb
});var Udb=function(){this.isAutoBattle=!1;this.battleId=this.attackerPlayerId=this.defenderPlayerId=this.provinceId=
this.sectorId=this.armyId=this.startTime=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleRealmVO"
]=Udb;Udb.__name__="de.innogames.strategycity.battle.model.vo.BattleRealmVO";Udb.__super__=G;Udb.prototype=l(G.prototype,
{_getClassName:function(){return"BattleRealm"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.battleId=this.battleId;null!=this.map&&(a.map=this.map.toJSONObject());null!=this.battleType&&(a.battleType=this.battleType.toJSONObject());a.attackerPlayerId=this.attackerPlayerId;
a.defenderPlayerId=this.defenderPlayerId;a.provinceId=this.provinceId;a.sectorId=this.sectorId;a.armyId=this.armyId;a.startTime=this.startTime;a.ais=q.mapToJSONObject(this.ais,q.passthrough);a.isAutoBattle=this.isAutoBattle;null!=this.state&&(a.state=this.state.toJSONObject());return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.battleId=q.normalizeInt(a.battleId);this.map=q.convertObject(a.map);this.battleType=q.convertObject(a.battleType);this.attackerPlayerId=q.normalizeInt(a.attackerPlayerId);
this.defenderPlayerId=q.normalizeInt(a.defenderPlayerId);this.provinceId=q.normalizeInt(a.provinceId);this.sectorId=q.normalizeInt(a.sectorId);this.armyId=q.normalizeInt(a.armyId);this.startTime=q.normalizeInt(a.startTime);this.ais=q.convertIntMap(a.ais,q.normalizeString);this.isAutoBattle=q.normalizeBool(a.isAutoBattle);this.state=q.convertObject(a.state)
	},__class__:Udb
});var e_=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleReceivingCallOfDutyAbilityVO"
]=e_;e_.__name__=
"de.innogames.strategycity.battle.model.vo.BattleReceivingCallOfDutyAbilityVO";e_.__super__=Yb;e_.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleReceivingCallOfDutyAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:e_
});var dT=function(){this.value=this.roundsToSkip=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleRechargeAbilityVO"
]=
dT;dT.__name__="de.innogames.strategycity.battle.model.vo.BattleRechargeAbilityVO";dT.__super__=Yb;dT.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleRechargeAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;a.roundsToSkip=this.roundsToSkip;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value);this.roundsToSkip=q.normalizeInt(a.roundsToSkip)
	},__class__:dT
});var f_=function(){this.value=
0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleReducedAttackAbilityVO"
]=f_;f_.__name__="de.innogames.strategycity.battle.model.vo.BattleReducedAttackAbilityVO";f_.__super__=Yb;f_.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleReducedAttackAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:f_
});var Vdb=function(){this.pvpArenaRankingPoints=
this.castlePoints=0;this.tournament_running=!1;this.winner=this.mood_factor=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleResultVO"
]=Vdb;Vdb.__name__="de.innogames.strategycity.battle.model.vo.BattleResultVO";Vdb.__super__=G;Vdb.prototype=l(G.prototype,
{_getClassName:function(){return"BattleResult"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.winner=this.winner;a.mood_factor=this.mood_factor;a.ranking=q.arrayToJSONObject(this.ranking,q.voToJSON);a.tournament_running=
this.tournament_running;a.reason=this.reason;null!=this.nextArmy&&(a.nextArmy=this.nextArmy.toJSONObject());a.pvpArenaRankingPoints=this.pvpArenaRankingPoints;null!=this.details&&(a.details=this.details.toJSONObject());a.castlePoints=this.castlePoints;return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.winner=q.normalizeInt(a.winner);this.mood_factor=q.normalizeInt(a.mood_factor);this.ranking=q.convertArray(a.ranking,q.convertObject,
		[]);this.tournament_running=q.normalizeBool(a.tournament_running);
this.reason=q.normalizeString(a.reason);this.nextArmy=q.convertObject(a.nextArmy);this.pvpArenaRankingPoints=q.normalizeInt(a.pvpArenaRankingPoints);this.details=q.convertObject(a.details);this.castlePoints=q.normalizeInt(a.castlePoints)
	},__class__:Vdb
});var zJ=function(){this.used_at_step=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleRogueAbilityVO"
]=zJ;zJ.__name__="de.innogames.strategycity.battle.model.vo.BattleRogueAbilityVO";zJ.__super__=Yb;zJ.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleRogueAbility"
	},
toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.used_at_step=this.used_at_step;null!=this.fake_identity&&(a.fake_identity=this.fake_identity.toJSONObject());return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.used_at_step=q.normalizeInt(a.used_at_step);this.fake_identity=q.convertObject(a.fake_identity)
	},__class__:zJ
});var eT=function(){};h[
	"de.innogames.strategycity.battle.model.vo.BattleStealthAbilityVO"
]=eT;eT.__name__="de.innogames.strategycity.battle.model.vo.BattleStealthAbilityVO";
eT.__super__=Yb;eT.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleStealthAbility"
	},toJSONObject:function(){var a=Yb.prototype.toJSONObject.call(this);a.terrains=q.arrayToJSONObject(this.terrains,q.passthrough);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.terrains=q.convertArray(a.terrains,q.normalizeString,
		[]);this.value=q.normalizeString(a.value)
	},__class__:eT
});var S7=function(){this.additionalStep=this.wasCriticalHit=this.wasPoisoned=
this.tookPoisonDamage=!1;this.unitId=this.attackedUnitId=this.dealtDamage=this.attackedUnitHitpoints=this.unitHitpoints=this.receivedDamage=this.round=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleStepVO"
]=S7;S7.__name__="de.innogames.strategycity.battle.model.vo.BattleStepVO";S7.__super__=G;S7.prototype=l(G.prototype,
{_getClassName:function(){return"BattleStep"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.unitId=this.unitId;a.path=q.arrayToJSONObject(this.path,q.voToJSON);
a.attackedUnitId=this.attackedUnitId;a.dealtDamage=this.dealtDamage;a.attackedUnitHitpoints=this.attackedUnitHitpoints;a.unitHitpoints=this.unitHitpoints;a.receivedDamage=this.receivedDamage;a.round=this.round;a.additionalStep=this.additionalStep;a.wasCriticalHit=this.wasCriticalHit;a.wasPoisoned=this.wasPoisoned;a.tookPoisonDamage=this.tookPoisonDamage;a.appliedAbilities=q.arrayToJSONObject(this.appliedAbilities,q.passthrough);return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,
a);this.unitId=q.normalizeInt(a.unitId);this.path=q.convertArray(a.path,q.convertObject,
		[]);this.attackedUnitId=q.normalizeInt(a.attackedUnitId);this.dealtDamage=q.normalizeInt(a.dealtDamage);this.attackedUnitHitpoints=q.normalizeInt(a.attackedUnitHitpoints);this.unitHitpoints=q.normalizeInt(a.unitHitpoints);this.receivedDamage=q.normalizeInt(a.receivedDamage);this.round=q.normalizeInt(a.round);this.additionalStep=q.normalizeBool(a.additionalStep);this.wasCriticalHit=q.normalizeBool(a.wasCriticalHit);
this.wasPoisoned=q.normalizeBool(a.wasPoisoned);this.tookPoisonDamage=q.normalizeBool(a.tookPoisonDamage);this.appliedAbilities=q.convertArray(a.appliedAbilities,q.normalizeString,
		[])
	},__class__:S7
});var pF=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleSwarmAbilityVO"
]=pF;pF.__name__="de.innogames.strategycity.battle.model.vo.BattleSwarmAbilityVO";pF.__super__=Yb;pF.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleSwarmAbility"
	},toJSONObject:function(){var a=
Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:pF
});var lma=function(){this.value=0
};h[
	"de.innogames.strategycity.battle.model.vo.BattleUnDeletableAbilityVO"
]=lma;lma.__name__="de.innogames.strategycity.battle.model.vo.BattleUnDeletableAbilityVO";lma.__super__=Yb;lma.prototype=l(Yb.prototype,
{_getClassName:function(){return"BattleUnDeletableAbility"
	},toJSONObject:function(){var a=
Yb.prototype.toJSONObject.call(this);a.value=this.value;return a
	},fromJSONObject:function(a){Yb.prototype.fromJSONObject.call(this,a);this.value=q.normalizeInt(a.value)
	},__class__:lma
});var BC=function(){this.provinceId=this.battlesWon=this.trial=0;he.call(this);this.type="battleground"
};h[
	"de.innogames.strategycity.battle.model.vo.BattlegroundBattleTypeVO"
]=BC;BC.__name__="de.innogames.strategycity.battle.model.vo.BattlegroundBattleTypeVO";BC.createInstance=function(a){var b=new BC;b.provinceId=
a;return b
};BC.__super__=he;BC.prototype=l(he.prototype,
{_getClassName:function(){return"BattlegroundBattleType"
	},toJSONObject:function(){var a=he.prototype.toJSONObject.call(this);a.provinceId=this.provinceId;a.battlesWon=this.battlesWon;a.trial=this.trial;return a
	},fromJSONObject:function(a){he.prototype.fromJSONObject.call(this,a);this.provinceId=q.normalizeInt(a.provinceId);this.battlesWon=q.normalizeInt(a.battlesWon);this.trial=q.normalizeInt(a.trial)
	},__class__:BC
});var qF=function(){this.provinceId=
this.sectorId=0;he.call(this);this.type="campaign"
};h[
	"de.innogames.strategycity.battle.model.vo.CampaignBattleTypeVO"
]=qF;qF.__name__="de.innogames.strategycity.battle.model.vo.CampaignBattleTypeVO";qF.createInstance=function(a,b){var c=new qF;c.provinceId=a;c.sectorId=b;return c
};qF.__super__=he;qF.prototype=l(he.prototype,
{_getClassName:function(){return"CampaignBattleType"
	},toJSONObject:function(){var a=he.prototype.toJSONObject.call(this);a.provinceId=this.provinceId;a.sectorId=this.sectorId;
return a
	},fromJSONObject:function(a){he.prototype.fromJSONObject.call(this,a);this.provinceId=q.normalizeInt(a.provinceId);this.sectorId=q.normalizeInt(a.sectorId)
	},__class__:qF
});var Dq=function(){this.sectorId=this.provinceId=this.armyId=0;he.call(this);this.type="clan"
};h[
	"de.innogames.strategycity.battle.model.vo.ClanBattleBattleTypeVO"
]=Dq;Dq.__name__="de.innogames.strategycity.battle.model.vo.ClanBattleBattleTypeVO";Dq.createInstance=function(a){var b=new Dq;b.sectorId=a;return b
};Dq.__super__=
he;Dq.prototype=l(he.prototype,
{_getClassName:function(){return"ClanBattleBattleType"
	},toJSONObject:function(){var a=he.prototype.toJSONObject.call(this);a.sectorId=this.sectorId;a.provinceId=this.provinceId;a.armyId=this.armyId;return a
	},fromJSONObject:function(a){he.prototype.fromJSONObject.call(this,a);this.sectorId=q.normalizeInt(a.sectorId);this.provinceId=q.normalizeInt(a.provinceId);this.armyId=q.normalizeInt(a.armyId)
	},__class__:Dq
});var BN=function(){this.armyId=0;he.call(this)
};h[
	"de.innogames.strategycity.battle.model.vo.ContentBasedBattleTypeVO"
]=
BN;BN.__name__="de.innogames.strategycity.battle.model.vo.ContentBasedBattleTypeVO";BN.__super__=he;BN.prototype=l(he.prototype,
{getContent:function(){return this.contentId
	},_getClassName:function(){return"ContentBasedBattleType"
	},toJSONObject:function(){var a=he.prototype.toJSONObject.call(this);a.contentId=this.contentId;a.armyId=this.armyId;return a
	},fromJSONObject:function(a){he.prototype.fromJSONObject.call(this,a);this.contentId=q.normalizeString(a.contentId);this.armyId=q.normalizeInt(a.armyId)
	},
__class__:BN
});var fT=function(){this.merchantId=this.offerId=0;BN.call(this);this.type="cultural_outpost"
};h[
	"de.innogames.strategycity.battle.model.vo.CulturalOutpostBattleTypeVO"
]=fT;fT.__name__="de.innogames.strategycity.battle.model.vo.CulturalOutpostBattleTypeVO";fT.createInstance=function(a,b){var c=new fT;c.contentId=a;c.offerId=b;return c
};fT.__super__=BN;fT.prototype=l(BN.prototype,
{_getClassName:function(){return"CulturalOutpostBattleType"
	},toJSONObject:function(){var a=BN.prototype.toJSONObject.call(this);
a.merchantId=this.merchantId;a.offerId=this.offerId;return a
	},fromJSONObject:function(a){BN.prototype.fromJSONObject.call(this,a);this.merchantId=q.normalizeInt(a.merchantId);this.offerId=q.normalizeInt(a.offerId)
	},__class__:fT
});var rF=function(){this.armyId=0;he.call(this);this.type="exploration_site"
};h[
	"de.innogames.strategycity.battle.model.vo.ExplorationSiteBattleTypeVO"
]=rF;rF.__name__="de.innogames.strategycity.battle.model.vo.ExplorationSiteBattleTypeVO";rF.createInstance=function(a){var b=
new rF;b.siteId=a;return b
};rF.__super__=he;rF.prototype=l(he.prototype,
{_getClassName:function(){return"ExplorationSiteBattleType"
	},toJSONObject:function(){var a=he.prototype.toJSONObject.call(this);a.siteId=this.siteId;a.armyId=this.armyId;return a
	},fromJSONObject:function(a){he.prototype.fromJSONObject.call(this,a);this.siteId=q.normalizeString(a.siteId);this.armyId=q.normalizeInt(a.armyId)
	},__class__:rF
});var g_=function(){this.encounterId=this.armyId=0;he.call(this);this.type="guild_expedition"
};
h[
	"de.innogames.strategycity.battle.model.vo.GuildExpeditionBattleTypeVO"
]=g_;g_.__name__="de.innogames.strategycity.battle.model.vo.GuildExpeditionBattleTypeVO";g_.createInstance=function(a){var b=new g_;b.encounterId=a;return b
};g_.__super__=he;g_.prototype=l(he.prototype,
{_getClassName:function(){return"GuildExpeditionBattleType"
	},toJSONObject:function(){var a=he.prototype.toJSONObject.call(this);a.encounterId=this.encounterId;a.armyId=this.armyId;return a
	},fromJSONObject:function(a){he.prototype.fromJSONObject.call(this,
a);this.encounterId=q.normalizeInt(a.encounterId);this.armyId=q.normalizeInt(a.armyId)
	},__class__:g_
});var CN=function(){he.call(this);this.type="guild_raids"
};h[
	"de.innogames.strategycity.battle.model.vo.GuildRaidsBattleTypeVO"
]=CN;CN.__name__="de.innogames.strategycity.battle.model.vo.GuildRaidsBattleTypeVO";CN.createInstance=function(a){var b=new CN;b.nodeId=a;return b
};CN.__super__=he;CN.prototype=l(he.prototype,
{_getClassName:function(){return"GuildRaidsBattleType"
	},toJSONObject:function(){var a=
he.prototype.toJSONObject.call(this);a.nodeId=this.nodeId;return a
	},fromJSONObject:function(a){he.prototype.fromJSONObject.call(this,a);this.nodeId=q.normalizeString(a.nodeId)
	},__class__:CN
});var sF=function(){this.opponentSerial=0;he.call(this);this.type="pvp_arena"
};h[
	"de.innogames.strategycity.battle.model.vo.PVPArenaBattleTypeVO"
]=sF;sF.__name__="de.innogames.strategycity.battle.model.vo.PVPArenaBattleTypeVO";sF.createInstance=function(a){null==a&&(a=0);var b=new sF;b.opponentSerial=a;return b
};
sF.__super__=he;sF.prototype=l(he.prototype,
{_getClassName:function(){return"PVPArenaBattleType"
	},toJSONObject:function(){var a=he.prototype.toJSONObject.call(this);a.opponentSerial=this.opponentSerial;a.difficulty=this.difficulty;return a
	},fromJSONObject:function(a){he.prototype.fromJSONObject.call(this,a);this.opponentSerial=q.normalizeInt(a.opponentSerial);this.difficulty=q.normalizeString(a.difficulty)
	},__class__:sF
});var gT=function(){this.isRevenge=!1;he.call(this);this.type="pvp"
};h[
	"de.innogames.strategycity.battle.model.vo.PvpBattleTypeVO"
]=
gT;gT.__name__="de.innogames.strategycity.battle.model.vo.PvpBattleTypeVO";gT.createInstance=function(a,b,c){var d=new gT;d.isRevenge=c;d.attackerPlayerId=a;d.defenderPlayerId=b;return d
};gT.__super__=he;gT.prototype=l(he.prototype,
{_getClassName:function(){return"PvpBattleType"
	},toJSONObject:function(){var a=he.prototype.toJSONObject.call(this);a.isRevenge=this.isRevenge;return a
	},fromJSONObject:function(a){he.prototype.fromJSONObject.call(this,a);this.isRevenge=q.normalizeBool(a.isRevenge)
	},__class__:gT
});
var AC=function(){this.questId=this.conditionId=this.armyId=0;he.call(this);this.type="quest_battle"
};h[
	"de.innogames.strategycity.battle.model.vo.QuestBattleTypeVO"
]=AC;AC.__name__="de.innogames.strategycity.battle.model.vo.QuestBattleTypeVO";AC.createInstance=function(a,b,c){var d=new AC;d.questId=a;d.conditionId=b;d.questType=c;return d
};AC.__super__=he;AC.prototype=l(he.prototype,
{_getClassName:function(){return"QuestBattleType"
	},toJSONObject:function(){var a=he.prototype.toJSONObject.call(this);
a.questId=this.questId;a.conditionId=this.conditionId;a.armyId=this.armyId;a.questType=this.questType;return a
	},fromJSONObject:function(a){he.prototype.fromJSONObject.call(this,a);this.questId=q.normalizeInt(a.questId);this.conditionId=q.normalizeInt(a.conditionId);this.armyId=q.normalizeInt(a.armyId);this.questType=q.normalizeString(a.questType)
	},__class__:AC
});var zC=function(){this._replayId=0;he.call(this);this.type="replay"
};h[
	"de.innogames.strategycity.battle.model.vo.ReplayBattleTypeVO"
]=zC;
zC.__name__="de.innogames.strategycity.battle.model.vo.ReplayBattleTypeVO";zC.createInstance=function(a,b){var c=new zC;c._replayId=a;c._battleToReplay=b;return c
};zC.__super__=he;zC.prototype=l(he.prototype,
{get_replayId:function(){return this._replayId
	},get_battleToReplay:function(){return this._battleToReplay
	},_getClassName:function(){return"ReplayBattleType"
	},__class__:zC,__properties__: {get_battleToReplay: "get_battleToReplay",get_replayId: "get_replayId"
	}
});var ht=function(){this.targetId=this.subTargetId=
0
};h[
	"de.innogames.strategycity.battle.model.vo.StartBattlePayloadVO"
]=ht;ht.__name__="de.innogames.strategycity.battle.model.vo.StartBattlePayloadVO";ht.__super__=G;ht.prototype=l(G.prototype,
{_getClassName:function(){return"StartBattlePayload"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.targetId=this.targetId;a.subTargetId=this.subTargetId;a.type=this.type;return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.targetId=q.normalizeInt(a.targetId);
this.subTargetId=q.normalizeInt(a.subTargetId);this.type=q.normalizeString(a.type)
	},__class__:ht
});var Wdb=function(){ht.call(this)
};h[
	"de.innogames.strategycity.battle.model.vo.StartExplorationSiteBattlePayloadVO"
]=Wdb;Wdb.__name__="de.innogames.strategycity.battle.model.vo.StartExplorationSiteBattlePayloadVO";Wdb.__super__=ht;Wdb.prototype=l(ht.prototype,
{_getClassName:function(){return"StartExplorationSiteBattlePayload"
	},toJSONObject:function(){var a=ht.prototype.toJSONObject.call(this);a.siteId=
this.siteId;return a
	},fromJSONObject:function(a){ht.prototype.fromJSONObject.call(this,a);this.siteId=q.normalizeString(a.siteId)
	},__class__:Wdb
});var Eq=function(a){C.call(this);this._lib=a;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.UnitStatusIcon"
]=Eq;Eq.__name__="de.innogames.strategycity.battle.rendering.UnitStatusIcon";Eq.__super__=C;Eq.prototype=l(C.prototype,
{_init:function(){this.addChild(new B(this._lib.getImage(this.get_iconAssetName())))
	},__class__:Eq,__properties__:l(C.prototype.__properties__,
	{get_iconAssetName: "get_iconAssetName"
	})
});var e8=function(a){Eq.call(this,a)
};h[
	"de.innogames.strategycity.battle.rendering.AttackHintIcon"
]=e8;e8.__name__="de.innogames.strategycity.battle.rendering.AttackHintIcon";e8.__super__=Eq;e8.prototype=l(Eq.prototype,
{get_iconAssetName:function(){return"icon_overlay_attack_hint"
	},_init:function(){Eq.prototype._init.call(this);this.set_x(-10);this.set_y(-50);this.set_visible(!1)
	},start:function(){this.set_visible(!0);this.set_y(-50);O._to(this,
		1,
		{y: -55,yoyo:!0,
repeat: -1
		})
	},stop:function(){this.set_visible(!1);this.set_y(-50);O.killTweensOf(this)
	},__class__:e8
});var dma=function(){};h[
	"de.innogames.strategycity.battle.rendering.BattleFieldRendererMediator"
]=dma;dma.__name__="de.innogames.strategycity.battle.rendering.BattleFieldRendererMediator";dma.__instantiate=function(a){return new dma
};dma.__super__=Ga;dma.prototype=l(Ga.prototype,
{onRegister:function(){this.get_eventMap().mapListener(this.moduleDispatcher,
		"BattleRendererEvent/UNIT_CHANGED",m(this,
this._updateSwarmBonus));this.get_eventMap().mapListener(this.get_eventDispatcher(),
		"BattleRendererEvent/SPEED",m(this,this._onRenderSpeed),
		null,!1,
		0,!0);this.get_eventMap().mapListener(this.get_eventDispatcher(),
		"BattleUnitEvent/HIGHLIGHT_ACTIVE_UNIT",m(this,this._onHighlightActiveUnit));this.get_eventMap().mapListener(this.get_eventDispatcher(),
		"BattleUnitEvent/HIGHLIGHT_ATTACKABLE_UNIT",m(this,this._onHighlightAttackableUnit));this.get_eventMap().mapListener(this.get_eventDispatcher(),
		"BattleUnitEvent/REMOVE_HIGHLIGHT",
m(this,this._onRemoveHighlight));this.addViewListener("BattleSpecialAnimationEvent/UNIT_EXPLOSION",m(this,this.dispatch));this.addViewListener("BattleSpecialAnimationEvent/UNIT_DRAGON_BREATH",m(this,this.dispatch));this.addViewListener("BattleSpecialAnimationEvent/UNIT_PLASMA_ARTILLERY",m(this,this.dispatch));this.addViewListener("BattleSpecialAnimationEvent/UNIT_LASER",m(this,this.dispatch));this.addViewListener("BattleSpecialAnimationEvent/CRITICAL_HIT",m(this,this.dispatch));this.addViewListener("BattleSpecialAnimationEvent/POISON_DAMAGE",
m(this,this.dispatch));this.addViewListener("BattleSpecialAnimationEvent/SWARM_INCREASE",m(this,this.dispatch));this.addViewListener("BattleSpecialAnimationEvent/SWARM_DECREASE",m(this,this.dispatch));this.addViewListener("BattleSpecialAnimationEvent/SPAWNING_GLITCH",m(this,this.dispatch));this.view.init();this.view.set_speed(Fm.getAnimationSpeedFactor(this.userDataModel.get_settingsVO().animationSpeedup))
	},_updateSwarmBonus:function(a){this.view.updateSwarmBonus()
	},_onHighlightAttackableUnit:function(a){this.view.setAttackableUnit(a.get_battleUnit())
	},
_onRemoveHighlight:function(a){this.view.setActiveUnit(a.get_battleUnit(),!1);this.view.removeAttackableHighlighting()
	},_onHighlightActiveUnit:function(a){this.view.setActiveUnit(a.get_battleUnit(),!0)
	},_onRenderSpeed:function(a){this.view.set_speed(Fm.getAnimationSpeedFactor(a.speedUp))
	},__construct:function(a){Ga.prototype.__construct.call(this,a);this.userDataModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.UserDataModel");this.view=a.getInstanceForMapping("de.innogames.strategycity.battle.rendering.BattlefieldRenderer");
return null
	},__class__:dma
});var Fx=function(a,b,c,d){null==d&&(d=!1);null==c&&(c=!1);D.call(this,a,c,d);this._battleUnit=b
};h[
	"de.innogames.strategycity.battle.rendering.BattleUnitEvent"
]=Fx;Fx.__name__="de.innogames.strategycity.battle.rendering.BattleUnitEvent";Fx.__super__=D;Fx.prototype=l(D.prototype,
{clone:function(){return new Fx(this.type,this._battleUnit)
	},get_battleUnit:function(){return this._battleUnit
	},set_battleUnit:function(a){return this._battleUnit=a
	},__class__:Fx,__properties__: {set_battleUnit: "set_battleUnit",
get_battleUnit: "get_battleUnit"
	}
});var Ef=function(a,b,c,d){this._tileClickTrigger=$b.trigger();this._removeHighlightEvent=new Fx("BattleUnitEvent/REMOVE_HIGHLIGHT",null);this._lastRenderWasInsideRange=!1;this._battleOverlayEnabled=!0;this._showTerrainTooltips=!1;this._overlay=new Xdb;this._overlayUpdateNeeded=!1;C.call(this);Ef._lastBattleZoom=NaN;this._libs=c;this._hexHighlightBorderBitmapData=this._libs.getImage("hex_highlight_border_big");this._hexHighlightCursor=this._libs.getImage("hex_highlight_orange_big");
this._hexGridTintColor=d;this._debugContainer=new C;this.addChild(this._debugContainer);a.addStepListener(m(this,this._battleStep));a.addMoveOrderListener(m(this,this._moveOrderIssued));a.addLockListener(m(this,this._lockListener));this._model=a;this._contextView=b;this._realm=a.realm;this._battleMapCalculator=new Oc(this._realm);this._movementPathShape=new Od;this.addChild(this._movementPathShape);this._cursorPoint=new p;this._auxPos=new Du;this._tooltipTimer=new Ih(400,
	1);this._tooltipTimer.addEventListener("timerComplete",
m(this,this._onShowTooltipTimer),!1,
	0,!0);this.addEventListener("addedToStage",m(this,this._onAddedToStage))
};h[
	"de.innogames.strategycity.battle.rendering.BattlefieldHexMap"
]=Ef;Ef.__name__="de.innogames.strategycity.battle.rendering.BattlefieldHexMap";Ef.calcHexScreenCenter=function(a,b,c){null==c&&(c=new p);c.x=79*(a+.5*(b&1)+.5);c.y=45*(b+1)-15;return c
};Ef.calcHexScreenCenterAndScale=function(a,b,c){a=Ef.calcHexScreenCenter(a,b,c);a.x*=Ef._lastBattleZoom;a.y*=Ef._lastBattleZoom;return a
};Ef._screenToHex=
function(a,b,c){null==c&&(c=new p);c.y=b/45|0;c.x=(a+7-c.y%2*39.5)/79|0;return c
};Ef._unitCmpY=function(a,b){var c=b.pos.y-a.pos.y;return 0!=c?-c:b.pos.x-a.pos.x
};Ef.__super__=C;Ef.prototype=l(C.prototype,
{clickHexTile:function(a,b){this._clickHexTile(new p(a,b))
	},_getDirectAttackPosition:function(a,b,c){if(!this._isDirectAttackApplicable(b,c))return null;var d=this._battleMapCalculator.calculateMovableTiles(b,c.teamFlag,this._model.get_remainingMovementPoints()|0,a);new Du;for(var e=null,g=16777215,
k,t=this._isUnitStealthOnField(c),u=d.length-1;0<=u;){var A=u--;if(1==d[A
			]){var z=this._battleMapCalculator.fromMapIndex(A);k=t&&Oc.isAdjacent(z,c.pos);this._isUnitInRange(z,b,c)&&a[A
				]<g&&(this._battleMapCalculator.isUnitWithSpecialAbilitiesAttackable(b,c)||k)&&(e=z,g=a[A
				])
			}
		}return e
	},reinitHextiles:function(a){a!=Ef._lastBattleZoom&&(null==this._reachableTilesBatch&&null==this._otherTilesBatch&&null==this._gridBitmap&&null==this._hexCursor||this._cleanUpForResize(),this._overlay.initContainer(this._realm.map.width,
this._realm.map.height,this._libs,this._hexHighlightBorderBitmapData.width,this._hexHighlightBorderBitmapData.height),this.addChild(this._overlay),this._gridBitmap=new B(new pb(79*(this._realm.map.width+.5)+1|0,
		45*(this._realm.map.height+1)+15,!0,
		0)),null!=this._hexGridTintColor&&ve.setTint(this._gridBitmap,this._hexGridTintColor,
		1),this._gridBitmap.set_alpha(.4),this.addChild(this._gridBitmap),this._drawHexGrid(this._gridBitmap.get_bitmapData()),this._updateOverlay(0,!0),Ef._lastBattleZoom=a)
	},enableTooltips:function(a){this._showTerrainTooltips=
a;this._onMouseOutUnit()
	},battleFinished:function(){this._battleOngoing=!1;this.enableTooltips(!1);this._resetCursorHighlights();this._removeEventListeners();this._reAddOnStageEventListener()
	},highlightUnit:function(a){this._updateOverlay(a)
	},clearHighlight:function(){this._removeAllHighlights();this._updateOverlay()
	},setSingleTileInteractable:function(a,b){this._interactableTilePoint=new p(a,b)
	},setBattleOverlayEnabled:function(a){a||this._onMouseOutUnit();this._battleOverlayEnabled=this._overlay.set_visible(this._movementPathShape.set_visible(a))
	},
resetEntireMapInteractable:function(){this._removeAllHighlights();this._interactableTilePoint=null
	},drawWalkPath:function(a){this._drawWalkPathLineArrow(a,
		0,
		6);this._drawWalkPathLineArrow(a,
		8912896,
		4)
	},_isUnitStealthOnField:function(a){return this._battleMapCalculator.isUnitStealthedOnField(a,this._realm.map.tiles[a.pos.x
		][a.pos.y
		].typeId)
	},dispose:function(){null!=this._gridBitmap&&null!=this._gridBitmap.get_bitmapData()&&this._gridBitmap.get_bitmapData().dispose()
	},update:function(){if(this._battleOngoing&&
this._battleOverlayEnabled&&(this._overlayUpdateNeeded&&this._updateOverlay(),
		0<this._model.get_lockCount()||this._model.get_hasRemainingSteps()?(this._overlay.set_visible(this._movementPathShape.set_visible(!1)),this._removeAllHighlights()):this._overlay.set_visible(this._movementPathShape.set_visible(!0)),Ef._screenToHex(this.get_mouseX()|0,this.get_mouseY()|0,this._cursorPoint),null==this._prevPoint||this._prevPoint.x!=this._cursorPoint.x||this._prevPoint.y!=this._cursorPoint.y))if(null==this._prevPoint?
this._prevPoint=Ef._screenToHex(this.get_mouseX()|0,this.get_mouseY()|0):Ef._screenToHex(this.get_mouseX()|0,this.get_mouseY()|0,this._prevPoint),this._isInvalidCursorPosition())this._resetCursorHighlights();else if(Ef.calcHexScreenCenter(this._cursorPoint.x|0,this._cursorPoint.y|0,this._cursorPoint),this._cursorPoint.x-=39.5,this._cursorPoint.y-=30,null==this._hexCursor&&(this._hexCursor=new B(this._hexHighlightCursor),this.addChild(this._hexCursor),this._hexCursor.set_x(this._cursorPoint.x),this._hexCursor.set_y(this._cursorPoint.y)),
this._hexCursor.set_x(this._cursorPoint.x),this._hexCursor.set_y(this._cursorPoint.y),this._updateOverlay(),Ef._screenToHex(this.get_mouseX()|0,this.get_mouseY()|0,this._cursorPoint),!this._isInvalidCursorPosition()&&!this._isInvalidTooltipPosition()){null==this._previousTooltipPos?this._previousTooltipPos=new p(this._cursorPoint.x,this._cursorPoint.y):(this._previousTooltipPos.x=this._cursorPoint.x,this._previousTooltipPos.y=this._cursorPoint.y);var a=this._model.getUnitAt(this._cursorPoint.x|0,
this._cursorPoint.y|0),b=this._realm.map.tiles[this._cursorPoint.x|0
			][this._cursorPoint.y|0
			],c=this._model.getCurrentActiveUnit();this._onMouseOverUnit(c,a,this._realm.map.tiles[c.pos.x
			][c.pos.y
			],b)
		}
	},getBattlefieldWidth:function(){return this._gridBitmap.get_width()
	},_removeEventListeners:function(){this.hasEventListener("removedFromStage")&&this.removeEventListener("removedFromStage",m(this,this._onRemovedFromStage));this.hasEventListener("click")&&this.removeEventListener("click",m(this,this._onMouseClick))
	},
_reAddOnStageEventListener:function(){this.hasEventListener("addedToStage")||this.addEventListener("addedToStage",m(this,this._onAddedToStage))
	},_resetCursorHighlights:function(){this._updateOverlay(0,!1);this._onMouseOutUnit();this._movementPathShape.get_graphics().clear();null!=this._otherTilesBatch&&this._otherTilesBatch.clear();null!=this._reachableTilesBatch&&this._reachableTilesBatch.clear();null!=this._hexCursor&&null!=this._hexCursor.parent&&(this._hexCursor.parent.removeChild(this._hexCursor),
this._hexCursor=null)
	},_isInvalidCursorPosition:function(){return 0>this._cursorPoint.x||0>this._cursorPoint.y||this._cursorPoint.x>=this._realm.map.width?!0:this._cursorPoint.y>=this._realm.map.height
	},_isInvalidTooltipPosition:function(){return null!=this._previousTooltipPos&&this._cursorPoint.x==this._previousTooltipPos.x?this._cursorPoint.y==this._previousTooltipPos.y:!1
	},_cleanUpForResize:function(){this._otherTilesBatch=this._reachableTilesBatch=null;null!=this._gridBitmap&&this.contains(this._gridBitmap)&&
(this._gridBitmap.get_bitmapData().dispose(),this.removeChild(this._gridBitmap),this._gridBitmap=null);null!=this._hexCursor&&this.contains(this._hexCursor)&&(this.removeChild(this._hexCursor),this._hexCursor=null)
	},_drawUnitHighlight:function(a,b){this._otherTilesBatch.draw(b?9: 10,a.x,a.y)
	},_moveOrderIssued:function(a,b,c){this._queueUpdateOverlay()
	},_drawUnitMovementRange:function(a,b,c,d,e){var g=this._battleMapCalculator.calcDistanceMap(a.pos,a,b,c);b=this._battleMapCalculator.calculateMovableTiles(a,
b,c,g);c=b.length;var k=this._realm.map.width;this._lastDrawedUnit=a;this._lastMovableTiles=b;for(a=0;a<c;){var t=a++;1==b[t
			]&&e.draw(d,t%k,t/k|0)
		}return g
	},_onMouseOutUnit:function(){null!=this._tileTooltip&&this._tileTooltip.dispose();this._tileTooltip=null
	},_onMouseOverUnit:function(a,b,c,d){this._onMouseOutUnit();this._showTerrainTooltips&&(this._tooltipAttacker=a,this._tooltipAttackerTile=c,this._tooltipDefender=b,this._tooltipDefenderTile=d,this._tooltipTimer.reset(),this._tooltipTimer.start())
	},
_onShowTooltipTimer:function(a){!this._showTerrainTooltips||this._isInvalidCursorPosition()||null==this._tooltipDefender&&"water"==this._tooltipDefenderTile.typeId&&1>this._tooltipAttacker.getMovementCost("water")||(a=new Ydb(this._tooltipAttacker,this._tooltipDefender,this._tooltipAttackerTile,this._tooltipDefenderTile),this._tileTooltip=new Q7("guild_raids"==this._model.get_battleType().type),this._tileTooltip.set_showDelay(0),this._tileTooltip.data=a,this._contextView.addChild(this._tileTooltip))
	},
_lockListener:function(a,b){this._queueUpdateOverlay()
	},_drawHexGrid:function(a){for(var b=this._realm.map,c,d=new p,e=0;e<b.height;){var g=39.5*(e&1)|0;d.y=45*e;for(c=0;c<b.width;)d.x=g+79*c,
			-1==qe.TERRAIN_WITH_NO_BORDERS.indexOf(b.tiles[c
			][e
			].typeId)&&null!=this._hexHighlightBorderBitmapData&&null!=this._hexHighlightBorderBitmapData.rect&&a.copyPixels(this._hexHighlightBorderBitmapData,this._hexHighlightBorderBitmapData.rect,d,
			null,
			null,!1),++c;++e
		}
	},_updateHexmapOverlay:function(a,b){null==b&&
(b=0);var c=[],d=this._realm.state.unitsOrder,e=null,g=null;if(null!=d)for(var k=0;k<d.length;){var t=d[k
			];++k;0>=t.getCurrentHitpoints()||(c.push(t),null==e&&t.unitId==this._realm.state.activeUnitId&&1==t.teamFlag&&(e=t),(t.pos.x!=a.x||t.pos.y!=a.y)&&b!=t.unitId)||(g=t)
		}if(!this._shouldSkipUpdate(e,g,a.x,a.y)){null==this._otherTilesBatch&&this._initializeBatchRenderers();this._reachableTilesBatch.clear();this._otherTilesBatch.clear();c.sort(Ef._unitCmpY);this._moveTarget=null;this._overlayUpdateNeeded=
!1;k=c.length;this._moveTarget=Oc.newPos(a.x|0,a.y|0);this._drawUnitTypeHex(k,c);d=this._realm.map;c=d.width;k=[];b=0;for(d=c*d.height;b<d;)++b,k.push(0);b=null;this._movementPathShape.get_graphics().clear();null!=e&&(b=this._drawActiveUnitHexRanges(e,a,k,g));this._directAttackMovePosition=this._directAttackTargetUnit=null;null!=g&&this._drawHoveredUnitHexRanges(g,e,k,c,b);this._overlay.container.applyBatches(this._otherTilesBatch.steps,this._reachableTilesBatch.steps)
		}
	},_drawActiveUnitHexRanges:function(a,
b,c,d){var e=this._drawUnitMovementRange(a,
		2,this._model.get_remainingMovementPoints()|0,
		5,this._reachableTilesBatch);this._auxPos.x=b.x|0;this._auxPos.y=b.y|0;0<=b.x&&b.x<this._realm.map.width&&0<=b.y&&b.y<this._realm.map.height&&e[this._battleMapCalculator.toMapIndex(b.x|0,b.y|0)
		]<=this._model.get_remainingMovementPoints()||(this._auxPos.x=a.pos.x,this._auxPos.y=a.pos.y,this._moveTarget=null);this._drawAttackRange(this._calculateAttackRange(a,this._auxPos,c),this._otherTilesBatch);c=[];null==d&&
this._battleMapCalculator.calcShortestPath(a.pos,this._auxPos,a,a.teamFlag^3,c,e);1<c.length&&this.drawWalkPath(c);c=this._realm.state.unitsOrder;if(null!=c)for(var g=0;g<c.length;){var k=c[g
			];++g;if(k.pos.x==b.x&&k.pos.y==b.y&&0<k.getCurrentHitpoints()){
				0==(k.teamFlag&a.teamFlag)&&Oc.calcHexDistance(k.pos,a.pos)<=a.get_unitType().range&&this._otherTilesBatch.draw(6,k.pos.x,k.pos.y);this._moveTarget=null;break
			}
		}this._drawUnitHighlight(a.pos,!0);this.dispatchEvent(new Fx("BattleUnitEvent/HIGHLIGHT_ACTIVE_UNIT",
a));this.dispatchEvent(new Fx("BattleUnitEvent/HIGHLIGHT_HOVERED_UNIT",d));a=this.get_numChildren()-1;this.getChildIndex(this._movementPathShape)!=a&&this.setChildIndex(this._movementPathShape,this.get_numChildren()-1);return e
	},_drawHoveredUnitHexRanges:function(a,b,c,d,e){if(a!=b){var g=a.get_unitType(),k=3^a.teamFlag;g=g.movementPoints;var t=this._drawUnitMovementRange(a,k,g,
			7,this._otherTilesBatch);g=this._battleMapCalculator.calculateMovableTiles(a,k,g,t);t=g.length;for(var u=c.length=0;u<t;){var A=
u++;1==g[A
				]&&(this._auxPos.x=A%d,this._auxPos.y=A/d|0,this._calculateAttackRange(a,this._auxPos,c))
			}this._drawAttackRange(c,this._otherTilesBatch);c=null!=b?this._getDirectAttackPosition(e,b,a):null;null!=c&&this._drawDirectAttackPath(c,a,b,k,e)
		}this._drawUnitHighlight(a.pos,!1)
	},_drawUnitTypeHex:function(a,b){for(a=0;a<b.length;){var c=b[a
			];++a;this._removeHighlightEvent.set_battleUnit(c);this.dispatchEvent(this._removeHighlightEvent);var d=c.ownerId==this._realm.attackerPlayerId,e=d?1: 2;c.unitId==
this._realm.state.activeUnitId&&(e=d?3: 4);this._otherTilesBatch.draw(e,c.pos.x,c.pos.y)
		}
	},_initializeBatchRenderers:function(){this._otherTilesBatch=new yXa;this._reachableTilesBatch=new yXa
	},_shouldSkipUpdate:function(a,b,c,d){if(this._overlayUpdateNeeded||null!=b||null==this._lastMovableTiles||null==this._lastDrawedUnit||null==a||this._lastDrawedUnit.unitId!=a.unitId)return!1;a=c+d*this._realm.map.width|0;return a<this._lastMovableTiles.length&&1==this._lastMovableTiles[a
		]?(this._lastRenderWasInsideRange=
!0,!1):this._lastRenderWasInsideRange?this._lastRenderWasInsideRange=!1:!0
	},_flashReachableTiles:function(){this._overlay.container.startBlinkingReachableTiles(5);O.killTweensOf(this._overlay.container);O._to(this._overlay.container,.5,
		{colorTransform: {tint: 16777215,tintAmount:.5
			},yoyo:!0,repeat: 3,overwrite: 0,onComplete:(H=this._overlay.container,m(H,H.finishBlinkingReachableTiles))
		})
	},_isDirectAttackApplicable:function(a,b){return!this._unitIsOpponent(a,b)||this._isUnitInRange(a.pos,a,b)&&(!this._isUnitStealthOnField(b)||
Oc.hasUnitBlast(a)||a.hasUnitAbility(ZS))||Oc.isAdjacent(a.pos,b.pos)?!1:!0
	},_drawDirectAttackPath:function(a,b,c,d,e){null!=a&&(this._directAttackMovePosition=a,this._directAttackTargetUnit=b,b=[],this._battleMapCalculator.calcShortestPath(c.pos,a,c,d,b,e),
		1<b.length&&this.drawWalkPath(b))
	},_isUnitInRange:function(a,b,c){return Oc.calcHexDistance(a,c.pos)<=Oc.getUnitTypeRange(b.get_unitType())
	},_unitIsOpponent:function(a,b){return 0==(b.teamFlag&a.teamFlag)
	},_calculateAttackRange:function(a,b,c){var d=
new Du;a=Oc.getUnitTypeRange(a.get_unitType());var e=this._realm.map,g=e.height;e=e.width;for(var k=c.length,t=0;t<g;)for(var u=t++,A=0;A<e;){var z=A++;d.x=z;d.y=u;var J=Oc.calcHexDistance(b,d)>a?0: 1;z+=u*e;z>=k?(c[z
			]=J,++k): 1!=c[z
			]&&(c[z
			]=J)
		}return c
	},_drawAttackRange:function(a,b){var c=new ah;c.redMultiplier=.5;c.greenMultiplier=0;c.blueMultiplier=0;c.alphaMultiplier=.15;c=this._realm.map.width;for(var d=0;d<a.length;){var e=a[d++
			],g=d-1;0!=e&&b.draw(8,g%c,g/c|0)
		}
	},_updateOverlay:function(a,b){null==
b&&(b=!1);null==a&&(a=0);(b||!this._model.get_hasRemainingSteps()&&this._battleOverlayEnabled)&&this._updateHexmapOverlay(Ef._screenToHex(this.get_mouseX()|0,this.get_mouseY()|0),a)
	},_getAttackableUnitUnderMouse:function(a){var b=Oc.findUnit(this._realm,this._realm.state.activeUnitId),c=this._realm.state.unitsOrder;if(null!=c)for(var d=0;d<c.length;){var e=c[d
			];++d;if(e.pos.x==a.x&&e.pos.y==a.y&&0<e.getCurrentHitpoints()&&0==(e.teamFlag&b.teamFlag)&&Oc.calcHexDistance(e.pos,b.pos)<=Oc.getUnitTypeRange(b.get_unitType()))return e
		}return null
	},
_removeAllHighlights:function(){for(var a=0,b=this._realm.state.unitsOrder;a<b.length;)this.dispatchEvent(new Fx("BattleUnitEvent/REMOVE_HIGHLIGHT",b[a++
		]))
	},_queueUpdateOverlay:function(){this._overlayUpdateNeeded=!0
	},_battleStep:function(a,b,c){this._queueUpdateOverlay()
	},_drawWalkPathLineArrow:function(a,b,c){var d=this._movementPathShape.get_graphics();d.lineStyle(c,b,
		1,!1,
		2,
		2,
		2);for(var e=null,g=0;g<a.length;){var k=a[g
			],t=g++,u=e;e=Ef.calcHexScreenCenter(k.x,k.y);0==t?d.moveTo(e.x,e.y):(t==
a.length-1&&(e.x=.75*e.x+.25*u.x,e.y=.75*e.y+.25*u.y),d.lineTo(e.x,e.y),t==a.length-1&&(d.lineStyle(c,b,
			1,!1,
			2,
			2,
			1,
			255),d.beginFill(b),k=e.y-u.y,u=e.x-u.x,d.moveTo(e.x,e.y),d.lineTo(e.x+.1*k-.04*u,e.y-.1*u*.45-.04*k),d.lineTo(e.x+.1*u,e.y+.1*k),d.lineTo(e.x-.1*k-.04*u,e.y+.1*u*.45-.04*k),d.endFill()))
		}
	},_clickHexTile:function(a){var b=Oc.findUnit(this._realm,this._realm.state.activeUnitId);if(null!=this._interactableTilePoint){if(a.x!=this._interactableTilePoint.x||a.y!=this._interactableTilePoint.y)return;
this._tileClickTrigger.handlers.invoke(null)
		}null!=b&&a.x==b.pos.x&&a.y==b.pos.y?this._model.playerCommandEndTurn():(this._updateHexmapOverlay(a),null!=this._directAttackMovePosition&&null!=this._directAttackTargetUnit?(this._model.playerCommandMoveOrder(this._directAttackMovePosition.x,this._directAttackMovePosition.y),this._model.playerCommandAttack(this._directAttackTargetUnit.unitId),this.dispatchEvent(new $Z("BattleOrderEvent/MOVE"))):null==this._moveTarget?(a=this._getAttackableUnitUnderMouse(a),
null!=a&&this._battleMapCalculator.isUnitWithSpecialAbilitiesAttackable(b,a)?this._model.playerCommandAttack(a.unitId):this._flashReachableTiles()):(this.hasEventListener("BattleOrderEvent/MOVE")&&this.dispatchEvent(new $Z("BattleOrderEvent/MOVE")),this._model.playerCommandMoveOrder(this._moveTarget.x,this._moveTarget.y)))
	},_onAddedToStage:function(a){this.addEventListener("removedFromStage",m(this,this._onRemovedFromStage),!1,
		0,!0);this.addEventListener("click",m(this,this._onMouseClick),!1,
		0,!0);
this.addEventListener("mouseOut",m(this,this._onMouseOut),!1,
		0,!0);this.removeEventListener("addedToStage",m(this,this._onAddedToStage));this.enableTooltips(!0);this._battleOngoing=!0
	},_onMouseOut:function(a){this._onMouseOutUnit()
	},_onRemovedFromStage:function(a){this._removeEventListeners();this._reAddOnStageEventListener();this.enableTooltips(!1)
	},_onMouseClick:function(a){!this._model.get_hasRemainingSteps()&&this._battleOverlayEnabled&&this._clickHexTile(Ef._screenToHex(this.get_mouseX()|0,this.get_mouseY()|
0))
	},get_tileClickTrigger:function(){return this._tileClickTrigger
	},__class__:Ef,__properties__:l(C.prototype.__properties__,
	{get_tileClickTrigger: "get_tileClickTrigger"
	})
});var cma=function(){};h[
	"de.innogames.strategycity.battle.rendering.BattlefieldHexMapMediator"
]=cma;cma.__name__="de.innogames.strategycity.battle.rendering.BattlefieldHexMapMediator";cma.__instantiate=function(a){return new cma
};cma.__super__=Ga;cma.prototype=l(Ga.prototype,
{onRegister:function(){var a=this;this.dispatch(new Pg("TutorialActorMapperEvent/MAP_UI_ACTOR",
		"BATTLEFIELD_HEX_MAP",this._view));this.addContextListener("BattleUnitsbarEvent/UNIT_PANEL_HOVER_OVER",m(this,this._onUnitbarPanelHover));this.addContextListener("BattleUnitsbarEvent/UNIT_PANEL_HOVER_OUT",m(this,this._onUnitbarPanelOut));this.addModuleListener("BattleTurnModelEvent/BATTLE_FINISHED",m(this,this._onBattleFinished));this.addModuleListener("BattleTurnModelEvent/REPLAY_STARTED",function(b){a._disableTooltips()
		});this.addModuleListener("BattleTurnModelEvent/AUTOBATTLE",function(b){a._disableTooltips()
		});
this.addViewListener("BattleUnitEvent/HIGHLIGHT_ACTIVE_UNIT",m(this,this.dispatch));this.addViewListener("BattleUnitEvent/REMOVE_HIGHLIGHT",m(this,this.dispatch));this.addViewListener("BattleUnitEvent/HIGHLIGHT_HOVERED_UNIT",m(this,this.dispatch))
	},_onBattleFinished:function(a){this._view.battleFinished()
	},_onUnitbarPanelOut:function(a){this._view.clearHighlight()
	},_onUnitbarPanelHover:function(a){this._view.highlightUnit(a.get_unitID())
	},_disableTooltips:function(){this._view.enableTooltips(!1)
	},
__construct:function(a){Ga.prototype.__construct.call(this,a);this._view=a.getInstanceForMapping("de.innogames.strategycity.battle.rendering.BattlefieldHexMap");return null
	},__class__:cma
});var Xdb=function(){C.call(this)
};h[
	"de.innogames.strategycity.battle.rendering.BattlefieldHexMapOverlay"
]=Xdb;Xdb.__name__="de.innogames.strategycity.battle.rendering.BattlefieldHexMapOverlay";Xdb.__super__=C;Xdb.prototype=l(C.prototype,
{initContainer:function(a,b,c,d,e){null!=this.container&&this.removeChild(this.container);
this.container=new f8(a,b,c,d,e);this.addChild(this.container)
	},__class__:Xdb
});var Ydb=function(a,b,c,d){this._attacker=a;this._defender=b;this._attackerTile=c;this._defenderTile=d
};h[
	"de.innogames.strategycity.battle.rendering.BattlefieldHexTileTooltipData"
]=Ydb;Ydb.__name__="de.innogames.strategycity.battle.rendering.BattlefieldHexTileTooltipData";Ydb.prototype={get_attacker:function(){return this._attacker
	},get_defender:function(){return this._defender
	},get_attackerTile:function(){return this._attackerTile
	},
get_defenderTile:function(){return this._defenderTile
	},__class__:Ydb,__properties__: {get_defenderTile: "get_defenderTile",get_attackerTile: "get_attackerTile",get_defender: "get_defender",get_attacker: "get_attacker"
	}
};var YZ=function(a,b){this._speed=1;C.call(this);this._model=a;this._libs=b
};h[
	"de.innogames.strategycity.battle.rendering.BattlefieldRenderer"
]=YZ;YZ.__name__="de.innogames.strategycity.battle.rendering.BattlefieldRenderer";YZ.__super__=C;YZ.prototype=l(C.prototype,
{init:function(){this.mouseChildren=
this.mouseEnabled=!1;this._model.addStepListener(m(this,this._battleStep));this._model.addMoveOrderListener(m(this,this._moveOrderIssued));this._realm=this._model.realm;var a=this._realm.state;this._battleMapCalculator=new Oc(this._realm);this._unitlist=[];var b=a.unitsOrder.length+a.retiredUnits.length;for(a=a.unitsOrder.concat(a.retiredUnits);0!=b--;){var c=a[b
			],d=this._model.get_playFromStart()?c.startHitpoints:c.getCurrentHitpoints(),e=this._model.get_playFromStart()?c.startpos:c.pos,g=c.hasUnitAbility(zJ)?
function(k){return function(t,u,A,z,J,T,W){return new Zdb(k[
						0
					],t,u,A,z,J,T,W)
				}
			}([this._model.get_moduleEventDispatcher()
			]):c.hasUnitAbility(xN)?function(){return function(k,t,u,A,z,J,T){return new $db(k,t,u,A,z,J,T)
				}
			}():function(){return function(k,t,u,A,z,J,T){return new Hg(k,t,u,A,z,J,T)
				}
			}();this._model.get_playFromStart()&&this._resetRogueTransformationByUnitId(c.unitId);e=g(this._realm,c.unitId,d,e,this._libs,function(k){return function(){null!=k[
						0
					]&&k[
						0
					].cancel()
				}
			}([this._model.lockStepping()
			]),
this._model);c.hasUnitAbility(kma)&&e.set_poisoned(!0);e.set_visible(0<d);this._unitlist[b
			]=e;this.addChild(e);e.get_visible()&&(e.get_isRapidDeploymentSpawn()&&e.hasAnimation("spawn")?e.queueSpawnAnimation(function(k){return function(){null!=k[
						0
					]&&k[
						0
					].cancel()
				}
			}([this._model.lockStepping()
			])): "VirtualFuture"==this._realm.battleType.era&&(e.queueGlitchAnimation(function(k){return function(){null!=k[
						0
					]&&k[
						0
					].cancel()
				}
			}([this._model.lockStepping()
			])),this.dispatchEvent(new Ur("BattleSpecialAnimationEvent/SPAWNING_GLITCH",
c.startpos))))
		}this._testForStealthedUnits();this.updateSwarmBonus()
	},setActiveUnit:function(a,b){for(var c=0,d=this._unitlist;c<d.length;){var e=d[c
			];++c;if(e.get_unitId()==a.unitId){e.set_activeUnit(b);break
			}
		}
	},setAttackableUnit:function(a){for(var b=0,c=this._unitlist;b<c.length;){var d=c[b
			];++b;if(d.get_unitId()==a.unitId){d.set_attackable(!0);break
			}
		}
	},removeAttackableHighlighting:function(){for(var a=0,b=this._unitlist;a<b.length;)b[a++
		].set_attackable(!1)
	},dispose:function(){for(var a=0,b=this._unitlist;a<
b.length;)b[a++
		].dispose()
	},update:function(){for(var a=this.get_numChildren(),b;1<a;){b=!1;for(var c=a;0!=c--&&!(0>=c);){var d=this.getChildAt(c);d=d instanceof Hg?d:null;var e=this.getChildAt(c-1);(e instanceof Hg?e:null).get_y()>d.get_y()&&(this.swapChildrenAt(c,c-1),b=!0)
			}if(!b)break
		}for(b=0;b<a;)d=this.getChildAt(b++),c=d instanceof Hg?d: null,null!=c&&c.update()
	},updateSwarmBonus:function(){for(var a=0,b=this._unitlist;a<b.length;){var c=b[a
			];++a;if(0<c.get_unitId()){var d=c.get_unitVO();0<c.get_hitpoints()&&
d.hasUnitAbility(pF)&&this._checkForAdjacentSwarmUnits(c)
			}
		}
	},get_speed:function(){return this._speed
	},set_speed:function(a){this._speed=a;for(var b=0,c=this._unitlist;b<c.length;)c[b++
		].set_speed(a);return a
	},_resetRogueTransformationByUnitId:function(a){Oc.findUnit(this._realm,a).resetRogueTransformation()
	},_battleStep:function(a,b,c){var d=this;switch(c){case 1:this._findUnit(b.unitId).moveUnit(b.path,function(e){var g=d._model.lockStepping();return function(){d._onUnitWalkFinished(e,g)
				}
			});break;
case 2:a=!0;b.additionalStep&&(a=!1);this._executeStepAttack(this._findUnit(b.unitId),b.unitHitpoints-Math.max(0,b.receivedDamage)|0,this._findUnit(b.attackedUnitId),b.attackedUnitHitpoints,a);b.wasCriticalHit&&this._showCriticalHit(this._findUnit(b.attackedUnitId));b.wasPoisoned&&this._showPoisonInfection(this._findUnit(b.attackedUnitId));null!=b.appliedAbilities&&-1!=b.appliedAbilities.indexOf("first_strike")&&this._executeStepFirstStrike(b);null!=b.appliedAbilities&&-1!=b.appliedAbilities.indexOf("double_damage")&&
this._executeStepDoubleDamage(b);null!=b.appliedAbilities&&-1!=b.appliedAbilities.indexOf("missile_launch")&&this._executeStepMissileLaunch(b);break;case 3:this._executeStepAttack(this._findUnit(b.attackedUnitId),b.attackedUnitHitpoints,this._findUnit(b.unitId),b.unitHitpoints);break;case 4:b.tookPoisonDamage&&this._executeStepPoisonAttack(b)
		}this._testForStealthedUnits()
	},_testForStealthedUnits:function(){for(var a=0,b=this._unitlist;a<b.length;){var c=b[a
			];++a;var d=c.get_unitVO(),e=this._realm.map.tiles[c.get_currentPos().x
			][c.get_currentPos().y
			];
null!=e&&this._battleMapCalculator.isUnitStealthedOnField(d,e.typeId)&&!this._hasActiveOpponentsAdjecent(d,c.get_currentPos())?2==d.teamFlag?c.set_alpha(.6):c.set_alpha(.7):c.set_alpha(1)
		}
	},_checkForAdjacentSwarmUnits:function(a){for(var b=0,c=a.get_currentPos(),d=a.get_unitVO().teamFlag,e=0,g=this._unitlist;e<g.length;){var k=g[e
			];++e;var t=k.get_unitVO();0!=k.get_hitpoints()&&t.teamFlag==d&&a.get_unitId()!=t.unitId&&Oc.isAdjacent(c,k.get_currentPos())&&(k=t.getAbilityByClass(pF),null!=k&&(b+=k.value))
		}b!=
a.get_swarmBonus()&&this._dispatchSwarmUpdate(a,b,c)
	},_dispatchSwarmUpdate:function(a,b,c){var d=a.get_swarmBonus(),e=null;b>d?e="BattleSpecialAnimationEvent/SWARM_INCREASE":b<d&&(e="BattleSpecialAnimationEvent/SWARM_DECREASE");null!=e&&(this.dispatchEvent(new Ur(e,c)),a.set_swarmBonus(b))
	},_hasActiveOpponentsAdjecent:function(a,b){var c=this._realm.state.unitsOrder;if(null!=c)for(var d=0;d<c.length;){var e=c[d
			];++d;if(e.unitId==this._realm.state.activeUnitId&&0<e.getCurrentHitpoints()&&e.teamFlag!=
a.teamFlag&&Oc.isAdjacent(b,e.pos)&&e.unitId==this._model.get_currentActiveUnitId())return!0
		}return!1
	},_moveOrderIssued:function(a,b,c){var d=this;this._findUnit(b).moveUnit(c,function(e){var g=d._model.lockStepping();return function(){d._onUnitWalkFinished(e,g)
			}
		})
	},_onUnitWalkFinished:function(a,b){this._testForStealthedUnits();a.get_unitVO().hasUnitAbility(pF)&&this.updateSwarmBonus();null!=b&&b.cancel();this._model.get_moduleEventDispatcher().dispatchEvent(new mma("UnitMoveFinishedEvent/MOVE_FINISHED",
a.get_unitVO()))
	},_executeStepPoisonAttack:function(a){var b=this._findUnit(a.unitId);this._showPoisonDamage(b);b.get_transform().set_colorTransform(new ah);var c=this._model.lockStepping();O._to(b,.3,
		{colorTransform: {tint: 65280,tintAmount:.5
			},yoyo:!0,repeat: 3,overwrite: 0,onComplete:function(){null!=c&&c.cancel()
			}
		});if(0<a.unitHitpoints)b.updateHitpoints(a.unitHitpoints);else{var d=this;b.queueDieAnimation(function(){d._onDieAnimationFinished(b)
			});b.updateHitpoints(0)
		}
	},_executeStepFirstStrike:function(a){a=
this._findUnit(a.attackedUnitId);a.get_transform().set_colorTransform(new ah);var b=this._model.lockStepping();O._to(a,.3,
		{colorTransform: {tint: 9699539,tintAmount:.5
			},yoyo:!0,repeat: 5,overwrite: 0,onComplete:function(){null!=b&&b.cancel()
			}
		});a.showAppliedAbilityIndicator("first_strike")
	},_executeStepDoubleDamage:function(a){this._findUnit(a.attackedUnitId).showAppliedAbilityIndicator("double_damage")
	},_executeStepMissileLaunch:function(a){var b=1/this.get_speed(),c=this._model.lockStepping();Ta.delayedCallBySeconds(b,
function(){null!=c&&c.cancel()
		},null);this.dispatchEvent(new Ur("BattleSpecialAnimationEvent/UNIT_LASER",this._findUnit(a.attackedUnitId).get_currentPos()))
	},_executeStepAttack:function(a,b,c,d,e){null==e&&(e=!0);var g=this;if(e){var k=this._model.lockStepping();a.queueAttackAnimation(c,function(){null!=k&&k.cancel()
			})
		}a.get_unitVO().hasUnitAbility(jma)&&(b="sat_uplink_unit"==a.get_unitVO().get_unitType().unitAssetName?"BattleSpecialAnimationEvent/UNIT_LASER": "dragon_drone"==a.get_unitVO().get_unitType().unitAssetName?
"BattleSpecialAnimationEvent/UNIT_DRAGON_BREATH": "plasma_artillery"==a.get_unitVO().get_unitType().unitAssetName?"BattleSpecialAnimationEvent/UNIT_PLASMA_ARTILLERY": "BattleSpecialAnimationEvent/UNIT_EXPLOSION",this.dispatchEvent(new Ur(b,c.get_currentPos())));if(0<d){var t=this._model.lockStepping();c.queueDefendAnimation(a,function(){null!=t&&t.cancel()
			});0<d&&c.updateHitpoints(d,function(){var A=g._model.lockStepping();return function(){null!=A&&A.cancel()
				}
			})
		}else{c.queueDefendAnimation(a,null);
var u=this;c.queueDieAnimation(function(){u._onDieAnimationFinished(c)
			});c.updateHitpoints(0)
		}
	},_onDieAnimationFinished:function(a){a.get_unitVO().hasUnitAbility(pF)&&this.updateSwarmBonus()
	},_showCriticalHit:function(a){this.dispatchEvent(new Ur("BattleSpecialAnimationEvent/CRITICAL_HIT",a.get_currentPos()))
	},_showPoisonDamage:function(a){this.dispatchEvent(new Ur("BattleSpecialAnimationEvent/POISON_DAMAGE",a.get_currentPos()))
	},_showPoisonInfection:function(a){O._to(a,.5,
		{colorTransform: {tint: 65280,
tintAmount:.5
			},yoyo:!0,repeat: 3
		});a.set_poisoned(!0)
	},_findUnit:function(a){for(var b=0,c=this._unitlist;b<c.length;){var d=c[b
			];++b;if(d.get_unitId()==a)return d
		}return null
	},__class__:YZ,__properties__:l(C.prototype.__properties__,
	{set_speed: "set_speed",get_speed: "get_speed"
	})
});var B=function(a,b,c){null==c&&(c=!1);this.__batchQuadDirty=!0;jc.call(this);this.__bitmapData=a;null==b&&(b=1);this.__pixelSnapping=b;this.smoothing=c
};h[
	"openfl.display.Bitmap"
]=B;B.__name__="openfl.display.Bitmap";B.__super__=
jc;B.prototype=l(jc.prototype,
{__setStageReference:function(a){this.stage=a;null==a?(a=this.__bitmapData,null!=a&&(a.__usersHead==this&&(a.__usersHead=this.__bitmapDataUserNext),a.__usersTail==this&&(a.__usersTail=this.__bitmapDataUserPrev),null!=this.__bitmapDataUserPrev&&(this.__bitmapDataUserPrev.__bitmapDataUserNext=this.__bitmapDataUserNext),null!=this.__bitmapDataUserNext&&(this.__bitmapDataUserNext.__bitmapDataUserPrev=this.__bitmapDataUserPrev),this.__bitmapDataUserPrev=this.__bitmapDataUserNext=
null)):(a=this.__bitmapData,null!=a&&(null==a.__usersHead?a.__usersHead=a.__usersTail=this:(a.__usersTail.__bitmapDataUserNext=this,this.__bitmapDataUserPrev=a.__usersTail,a.__usersTail=this)))
	},__cleanup:function(){jc.prototype.__cleanup.call(this);null!=this.__bitmapData&&this.__bitmapData.__cleanup();null!=this.__batchQuad&&(pC.pool.release(this.__batchQuad),this.__batchQuad=null)
	},__getBounds:function(a,b){if(null!=this.__bitmapData){var c=jc.__tempBoundsRectangle;this.__bitmapData.rect.__transform(c,
b);a.__expand(c.x,c.y,c.width,c.height)
		}
	},__hitTest:function(a,b,c,d,e,g,k){null==k&&(k=!1);if(!g.get_visible()||null!=this.__maskTarget||null==this.__bitmapData||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;this.__getRenderTransform();var t=this.__renderTransform,u=t.a*t.d-t.b*t.c;c=0==u?-t.tx: 1/u*(t.c*(t.ty-b)+t.d*(a-t.tx));t=this.__renderTransform;u=t.a*t.d-t.b*t.c;a=0==u?-t.ty: 1/u*(t.a*(b-t.ty)+t.b*(t.tx-a));if(0<c&&0<a&&c<=this.__bitmapData.width&&a<=this.__bitmapData.height){if(null!=
this.__scrollRect&&!this.__scrollRect.contains(c,a))return!1;null==d||e||k||d.push(g);return!0
		}return!1
	},__hitTestMask:function(a,b){if(null==this.__bitmapData)return!1;this.__getRenderTransform();var c=this.__renderTransform,d=c.a*c.d-c.b*c.c,e=0==d?-c.tx: 1/d*(c.c*(c.ty-b)+c.d*(a-c.tx));c=this.__renderTransform;d=c.a*c.d-c.b*c.c;a=0==d?-c.ty: 1/d*(c.a*(b-c.ty)+c.b*(c.tx-a));return 0<e&&0<a&&e<=this.__bitmapData.width&&a<=this.__bitmapData.height?!0:!1
	},__getBatchQuad:function(a){if(this.__batchQuadDirty){null==
this.__batchQuad&&(this.__batchQuad=pC.pool.get());if(a.roundPixels)var b=!0;else{var c=this.__pixelSnapping;if(null==c)b=!1;else switch(c){case 0:b=!0;break;case 1:b=1==Math.abs(this.__renderTransform.a)&&1==Math.abs(this.__renderTransform.d);break;case 2:b=!1
				}
			}b=a.renderer.getDisplayTransformTempMatrix(this.__renderTransform,b);this.get_bitmapData().__fillBatchQuad(b,this.__batchQuad.vertexData);this.__batchQuad.texture=this.__bitmapData.getTexture(a.gl);this.__batchQuadDirty=!1
		}b=this.__batchQuad;
c=ge.fromOpenFLBlendMode(this.__worldBlendMode);b.alpha=this.__worldAlpha;b.colorTransform=this.__worldColorTransform;b.blendMode=c;b.smoothing=a.allowSmoothing&&this.smoothing;return this.__batchQuad
	},__updateTransforms:function(){jc.prototype.__updateTransforms.call(this);this.__batchQuadDirty=!0
	},__renderGL:function(a){!this.__renderable||0>=this.__worldAlpha||(this.__updateCacheBitmap(a,!1),null==this.__cacheBitmap||this.__cacheBitmapRender?gJ.render(this,a):gJ.render(this.__cacheBitmap,a))
	},
__renderGLMask:function(a){this.__updateCacheBitmap(a,!1);null==this.__cacheBitmap||this.__cacheBitmapRender?gJ.renderMask(this,a):gJ.renderMask(this.__cacheBitmap,a)
	},__updateCacheBitmap:function(a,b){return b||null!=this.__filters&&0<this.__filters.length||null!=this.__cacheBitmap?jc.prototype.__updateCacheBitmap.call(this,a,b):!1
	},__forceRenderDirty:function(){jc.prototype.__forceRenderDirty.call(this);this.__batchQuadDirty=!0
	},get_bitmapData:function(){return this.__bitmapData
	},__unlinkFromBitmapData:function(a){null!=
a&&(a.__usersHead==this&&(a.__usersHead=this.__bitmapDataUserNext),a.__usersTail==this&&(a.__usersTail=this.__bitmapDataUserPrev),null!=this.__bitmapDataUserPrev&&(this.__bitmapDataUserPrev.__bitmapDataUserNext=this.__bitmapDataUserNext),null!=this.__bitmapDataUserNext&&(this.__bitmapDataUserNext.__bitmapDataUserPrev=this.__bitmapDataUserPrev),this.__bitmapDataUserPrev=this.__bitmapDataUserNext=null)
	},__linkToBitmapData:function(a){null!=a&&(null==a.__usersHead?a.__usersHead=a.__usersTail=this:(a.__usersTail.__bitmapDataUserNext=
this,this.__bitmapDataUserPrev=a.__usersTail,a.__usersTail=this))
	},__setBitmapDataDirty:function(){this.__batchQuadDirty=!0;if(!this.__renderDirty)if(this.__renderDirty=!0,null!=this.__maskTarget){var a=this.__maskTarget;a.__renderDirty||(a.__renderDirty=!0,null!=a.__maskTarget?a.__maskTarget.__setRenderDirty():a.__setParentRenderDirty());a.__updateDirty||(a.__updateDirty=!0,a.__setParentUpdateTraverse())
		}else this.__setParentRenderDirty();this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse())
	},
set_bitmapData:function(a){if(null!=this.stage&&a!=this.__bitmapData){var b=this.__bitmapData;null!=b&&(b.__usersHead==this&&(b.__usersHead=this.__bitmapDataUserNext),b.__usersTail==this&&(b.__usersTail=this.__bitmapDataUserPrev),null!=this.__bitmapDataUserPrev&&(this.__bitmapDataUserPrev.__bitmapDataUserNext=this.__bitmapDataUserNext),null!=this.__bitmapDataUserNext&&(this.__bitmapDataUserNext.__bitmapDataUserPrev=this.__bitmapDataUserPrev),this.__bitmapDataUserPrev=this.__bitmapDataUserNext=null);
null!=a&&(null==a.__usersHead?a.__usersHead=a.__usersTail=this:(a.__usersTail.__bitmapDataUserNext=this,this.__bitmapDataUserPrev=a.__usersTail,a.__usersTail=this))
		}this.__bitmapData=a;this.smoothing=!1;this.__batchQuadDirty=!0;this.__renderDirty||(this.__renderDirty=!0,null!=this.__maskTarget?(a=this.__maskTarget,a.__renderDirty||(a.__renderDirty=!0,null!=a.__maskTarget?a.__maskTarget.__setRenderDirty():a.__setParentRenderDirty()),a.__updateDirty||(a.__updateDirty=!0,a.__setParentUpdateTraverse())):
this.__setParentRenderDirty());this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse());return this.__bitmapData
	},get_height:function(){return null!=this.__bitmapData?this.__bitmapData.height*Math.abs(this.get_scaleY()): 0
	},set_height:function(a){if(null!=this.__bitmapData){if(a!=this.__bitmapData.height*this.__scaleY){if(!this.__renderDirty)if(this.__renderDirty=!0,null!=this.__maskTarget){var b=this.__maskTarget;b.__renderDirty||(b.__renderDirty=!0,null!=b.__maskTarget?b.__maskTarget.__setRenderDirty():
b.__setParentRenderDirty());b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())
				}else this.__setParentRenderDirty();this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse());this.set_scaleY(a/this.__bitmapData.height)
			}return a
		}return 0
	},get_width:function(){return null!=this.__bitmapData?this.__bitmapData.width*Math.abs(this.__scaleX): 0
	},set_width:function(a){if(null!=this.__bitmapData){if(a!=this.__bitmapData.width*this.__scaleX){if(!this.__renderDirty)if(this.__renderDirty=
!0,null!=this.__maskTarget){var b=this.__maskTarget;b.__renderDirty||(b.__renderDirty=!0,null!=b.__maskTarget?b.__maskTarget.__setRenderDirty():b.__setParentRenderDirty());b.__updateDirty||(b.__updateDirty=!0,b.__setParentUpdateTraverse())
				}else this.__setParentRenderDirty();this.__updateDirty||(this.__updateDirty=!0,this.__setParentUpdateTraverse());this.set_scaleX(a/this.__bitmapData.width)
			}return a
		}return 0
	},__class__:B,__properties__:l(jc.prototype.__properties__,
	{set_pixelSnapping: "set_pixelSnapping",
get_pixelSnapping: "get_pixelSnapping",set_bitmapData: "set_bitmapData",get_bitmapData: "get_bitmapData"
	})
});var zXa=function(){B.call(this,
	null,
	1,!1);this._lastRenderKey=null
};h[
	"de.innogames.strategycity.battle.rendering.BitmapOverlayCell"
]=zXa;zXa.__name__="de.innogames.strategycity.battle.rendering.BitmapOverlayCell";zXa.__super__=B;zXa.prototype=l(B.prototype,
{drawStep:function(a){a=null==a?"null": ""+a;if("0"==a){var b=this._currentRenderKey;b||(this._currentRenderKey="0")
		}else this._currentRenderKey=
(b=this._currentRenderKey)&&"0"!=this._currentRenderKey?this._currentRenderKey+("-"+a):a
	},getRenderSpriteId:function(){this._currentRenderKey||(this._currentRenderKey="0");if(this._currentRenderKey==this._lastRenderKey)return this._currentRenderKey=null;this._lastRenderKey=this._currentRenderKey;this._currentRenderKey=null;return this._lastRenderKey
	},isType:function(a){return this._lastRenderKey?-1!=this._lastRenderKey.indexOf(a):!1
	},__class__:zXa
});var f8=function(a,b,c,d,e){C.call(this);this._tileSet=
c;this._cells=this._initializeTiles(d,e,a,b)
};h[
	"de.innogames.strategycity.battle.rendering.BitmapOverlayContainer"
]=f8;f8.__name__="de.innogames.strategycity.battle.rendering.BitmapOverlayContainer";f8.__super__=C;f8.prototype=l(C.prototype,
{applyBatches:function(a,b){b=b.concat(a);for(a=0;a<b.length;){var c=b[a
			];++a;this._cells[c.tileY
			][c.tileX
			].drawStep(c.tileId)
		}a=0;for(b=this._cells;a<b.length;){c=b[a
			];++a;for(var d=0;d<c.length;){var e=c[d
				];++d;var g=e.getRenderSpriteId();null!=g&&e.set_bitmapData(this._tileSet.getImage("hex_comb_"+
g))
			}
		}
	},_initializeTiles:function(a,b,c,d){var e=[];a/=65;b/=49;var g=0;for(d+=1;g<d;){for(var k=g++,t=[],u=0,A=c+1;u<A;){var z=u++,J=new zXa;J.set_x(79*(0==k%2?z:z+.5));J.set_y(45*k);J.set_scaleX(a);J.set_scaleY(b);this.addChild(J);t.push(J)
			}e.push(t)
		}return e
	},startBlinkingReachableTiles:function(a){a=null==a?"null": ""+a;this.get_transform().set_colorTransform(new ah);for(var b=0,c=this._cells;b<c.length;){var d=c[b
			];++b;for(var e=0;e<d.length;){var g=d[e
				];++e;g.set_visible(g.isType(a))
			}
		}
	},finishBlinkingReachableTiles:function(){this.get_transform().set_colorTransform(new ah);
for(var a=0,b=this._cells;a<b.length;){var c=b[a
			];++a;for(var d=0;d<c.length;)c[d++
			].set_visible(!0)
		}
	},__class__:f8
});var aeb=function(a){Eq.call(this,a)
};h[
	"de.innogames.strategycity.battle.rendering.DoubleDamageStatusIcon"
]=aeb;aeb.__name__="de.innogames.strategycity.battle.rendering.DoubleDamageStatusIcon";aeb.__super__=Eq;aeb.prototype=l(Eq.prototype,
{get_iconAssetName:function(){return"icon_overlay_double_damage"
	},_init:function(){Eq.prototype._init.call(this);this.set_x(-10);this.set_y(-50)
	},
__class__:aeb
});var beb=function(a){Eq.call(this,a)
};h[
	"de.innogames.strategycity.battle.rendering.FirstStrikeStatusIcon"
]=beb;beb.__name__="de.innogames.strategycity.battle.rendering.FirstStrikeStatusIcon";beb.__super__=Eq;beb.prototype=l(Eq.prototype,
{get_iconAssetName:function(){return"icon_overlay_first_strike"
	},_init:function(){Eq.prototype._init.call(this);this.set_x(-10);this.set_y(-50)
	},__class__:beb
});var tF=function(a,b,c,d,e,g){null==g&&(g=268435455);null==e&&(e=84);this._animationFrame=
0;this._animationMaxFrameCount=g;this._animationTime=-1;this._onFinish=b;this._onStep=a;this._animationFrameStep=e;this._userData=d;this._onStart=c
};h[
	"de.innogames.strategycity.battle.rendering.FrameAnimationCounter"
]=tF;tF.__name__="de.innogames.strategycity.battle.rendering.FrameAnimationCounter";tF.prototype={updateFrameCount:function(a){this._animationMaxFrameCount=a(this._userData.direction,this._userData.animState)
	},dispose:function(){this._onStep=this._onFinish=this._onStart=null;this._userData.dispose()
	},
step:function(){if(this.get_isDone())return!1;null!=this._onStart&&(this._onStart(this,this._userData),this._onStart=null);var a=qb.getTimer();-1==this._animationTime&&(this._animationTime=a);a=(a-this._animationTime)/this._animationFrameStep|0;if(0==a)return!1;this._animationTime+=a*this._animationFrameStep;this._animationFrame=Math.min(this._animationFrame+a,this._animationMaxFrameCount)|0;this.get_isDone()&&(this.get_isInfinite()?this._animationFrame=0:null!=this._onFinish&&this._onFinish(this,
this._userData));null!=this._onStep&&this._onStep(this,this._userData);return!0
	},setFrameStep:function(a){this._animationFrameStep=a
	},get_animState:function(){return this._userData.animState
	},get_isDone:function(){return this._animationFrame==this._animationMaxFrameCount
	},get_isInfinite:function(){return 268435455==this._animationMaxFrameCount
	},get_frame:function(){return this._animationFrame
	},__class__:tF,__properties__: {get_frame: "get_frame",get_isInfinite: "get_isInfinite",get_isDone: "get_isDone",
get_animState: "get_animState"
	}
};var AJ=function(){this.direction=0
};h[
	"de.innogames.strategycity.battle.rendering.FrameAnimationCounterData"
]=AJ;AJ.__name__="de.innogames.strategycity.battle.rendering.FrameAnimationCounterData";AJ.prototype={dispose:function(){null!=this.path&&(this.path.length=0);this.callback=null
	},__class__:AJ
};var ceb=function(a){this._hasPlayedImpactSound=!1;this._point=new p;var b=this;C.call(this);this._impactData=a;this._impactContainer=new B;this.addChild(this._impactContainer);
var c=function(d){b._impactSheet=d
	};Va.instance.loadImageLibrary(this._impactData.reflibId,Sc.HIGH).handle(function(d){switch(d._hx_index){case 0:za.invoke(c,d.data);break;case 1:d=d.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+d.message))
		}
	})
};h[
	"de.innogames.strategycity.battle.rendering.ImpactRenderer"
]=ceb;ceb.__name__="de.innogames.strategycity.battle.rendering.ImpactRenderer";ceb.__super__=C;ceb.prototype=l(C.prototype,
{queueImpactAnimation:function(a){this.addEventListener("enterFrame",
m(this,this._onEnterFrame));this._frameAnimationCounter=new tF(m(this,this._onAnimStep),m(this,this._onImpactFinished),
		null,a,
		42,this._impactData.numFrames)
	},dispose:function(){this.removeEventListener("enterFrame",m(this,this._onEnterFrame))
	},setCurrentPosition:function(a){Ef.calcHexScreenCenter(a.x,a.y,this._point);this.set_x(this._point.x);this.set_y(this._point.y)
	},_onEnterFrame:function(a){null!=this._frameAnimationCounter&&this._frameAnimationCounter.step()
	},_onAnimStep:function(a,b){if(null!=
this._impactSheet){this._hasPlayedImpactSound||null==this._impactData.impactSound||this._playImpactSound();var c=this._impactData.numFrames;a=(0==a.get_frame()%c?c:a.get_frame()%c)-1;b=this._impactSheet.getImage(this._impactData.frameNameBase+(1==b.direction?"_R_": "_L_")+(10>a?"0"+a:null==a?"null": ""+a));this._impactContainer.set_bitmapData(b);this._impactContainer.set_x("BattleSpecialAnimationEvent/SPAWNING_GLITCH"==this._impactData.impactType?.4*-b.width:.5*-b.width);this._impactContainer.set_y("BattleSpecialAnimationEvent/UNIT_LASER"==
this._impactData.impactType?.7*-b.height:.5*-b.height)
		}
	},_playImpactSound:function(){ic.instance.getLibrary(this._impactData.impactSound.libraryId).playSound(this._impactData.impactSound.spriteId,!1,
		1,!0);this._hasPlayedImpactSound=!0
	},_onImpactFinished:function(a,b){this._hasPlayedImpactSound=!1;this.dispose();null!=b.callback&&b.callback(this,this._impactData.impactType)
	},__class__:ceb
});var qn=function(){};h[
	"de.innogames.strategycity.battle.rendering.ImpactRendererFactory"
]=qn;qn.__name__="de.innogames.strategycity.battle.rendering.ImpactRendererFactory";
qn.createImpactRenderer=function(a){qn._initImpactData();a=qn._impactData.h[a
	];return null==a?null:new ceb(a)
};qn.getImpactDirection=function(a){switch(a){case "BattleSpecialAnimationEvent/UNIT_EXPLOSION":case "BattleSpecialAnimationEvent/UNIT_PLASMA_ARTILLERY":return Math.round(Math.random());default:return 0
	}
};qn._initImpactData=function(){if(null==qn._impactData){var a=new x;a.h[
			"BattleSpecialAnimationEvent/UNIT_DRAGON_BREATH"
		]=qn._createDragonBreathImpactData();a.h[
			"BattleSpecialAnimationEvent/UNIT_EXPLOSION"
		]=
qn._createExplosionImpactData();a.h[
			"BattleSpecialAnimationEvent/UNIT_LASER"
		]=qn._createLaserImpactData();a.h[
			"BattleSpecialAnimationEvent/UNIT_PLASMA_ARTILLERY"
		]=qn._createPlasmaArtilleryImpactData();a.h[
			"BattleSpecialAnimationEvent/SPAWNING_GLITCH"
		]=qn._createDeployEffectData();qn._impactData=a
	}
};qn._createDragonBreathImpactData=function(){return{impactType: "BattleSpecialAnimationEvent/UNIT_DRAGON_BREATH",reflibId: "battle/unit_animation/dragon_drone/dragon_drone",frameNameBase: "dragon_drone_fireball",
numFrames: 34
	}
};qn._createExplosionImpactData=function(){return{impactType: "BattleSpecialAnimationEvent/UNIT_EXPLOSION",reflibId: "battle/unit_animation/unit_explosion/unit_explosion",frameNameBase: "unit_explosion",numFrames: 24
	}
};qn._createLaserImpactData=function(){return{impactType: "BattleSpecialAnimationEvent/UNIT_LASER",reflibId: "battle/unit_animation/sat_uplink_unit/sat_uplink_unit",frameNameBase: "sat_uplink_unit_impact",numFrames: 36,impactSound:qn.UNIT_SAT_UPLINK_UNIT_IMPACT
	}
};qn._createPlasmaArtilleryImpactData=
function(){return{impactType: "BattleSpecialAnimationEvent/UNIT_PLASMA_ARTILLERY",reflibId: "battle/unit_animation/plasma_artillery/plasma_artillery",frameNameBase: "plasma_artillery_impact",numFrames: 24,impactSound:qn.UNIT_SAT_UPLINK_UNIT_IMPACT
	}
};qn._createDeployEffectData=function(){return{impactType: "BattleSpecialAnimationEvent/SPAWNING_GLITCH",reflibId: "battle/unit_animation/deploy_effect/deploy_effect",frameNameBase: "deploy_effect",numFrames: 32
	}
};var eIb=function(a,b,c,d,e,g,k,t){this.n=b;this.zoff=
c;this.scalerange=d;this.scale=e;this.yoffset=g;this.fillFactor=k;this.assetName=a;this.smooth=t
};h[
	"de.innogames.strategycity.battle.rendering.LandscapeSpriteAttributes"
]=eIb;eIb.__name__="de.innogames.strategycity.battle.rendering.LandscapeSpriteAttributes";eIb.prototype={__class__:eIb
};var Hg=function(a,b,c,d,e,g,k){this._glitchCounter=0;this._playGlitchAnimation=!1;this._swarmBonus=0;this._isRapidDeploymentSpawn=this._disposed=!1;this._animationsToLoad=0;this._lastFrameTime=-1;this._spriteSheetProcessed=
!1;this._animationQueue=[];this._unitId=this._direction=0;this._speed=1;this._poisoned=this._deathFadeOut=!1;this._hitpoints=0;this._isAnimatingActiveUnit=!1;this._animState="idle";C.call(this);this._onSpriteSheetProcessed=g;this._battleModel=k;this._lib=e;this._init(a,b,c,d,e)
};h[
	"de.innogames.strategycity.battle.rendering.UnitRenderer"
]=Hg;Hg.__name__="de.innogames.strategycity.battle.rendering.UnitRenderer";Hg.__super__=C;Hg.prototype=l(C.prototype,
{update:function(){if(!(0<this._animationsToLoad)){var a=
qb.getTimer();-1==this._lastFrameTime&&(this._lastFrameTime=a);var b=a-this._lastFrameTime;this._hitpointsBar.step(b,this._speed);this._deathFadeOut?(this.set_alpha(Math.max(0,this.get_alpha()-1E-5*b*this._speed)),
			0==this.get_alpha()&&(this.set_visible(!1),this._deathFadeOut=!1)):(0<this._animationQueue.length&&this._animationQueue[
				0
			].step()&&this._animationQueue[
				0
			].get_isDone()&&this._animationQueue.shift(),this._handleWalkpath(b),this._lastFrameTime=a)
		}
	},updateHitpoints:function(a,b){this._hitpoints=
a;return this._hitpointsBar.updateHitpoints(a,b)
	},dispose:function(){this._disposed=!0
	},moveUnit:function(a,b){var c=a[a.length-1
		],d=Ef.calcHexScreenCenter(c.x,c.y);c=this.get_x()-d.x|0;d=this.get_y()-d.y|0;return 9<c*c+d*d?(c=new AJ,c.animState="move",c.direction=this._direction,c.path=a,c.callback=b(this),this._queueAnimation(new tF(m(this,this._onAnimStep),
		null,m(this,this._startWalking),c,
		40/this._getAnimationSpeed(c.animState)|0)),!0):!1
	},queueIdleAnimation:function(){var a=new AJ;a.animState=
"idle";a.direction=this._direction;this._queueAnimation(new tF(m(this,this._onAnimStep),
		null,
		null,a,(75+10*Math.random())/this._getAnimationSpeed(a.animState)|0))
	},queueSpawnAnimation:function(a){var b=new AJ;b.animState="spawn";b.direction=this._direction;b.callback=a;this._queueAnimation(new tF(m(this,this._onAnimStep),m(this,this._onSpawnFinished),
		null,b,
		84/this._getAnimationSpeed(b.animState)|0,this._getAnimationLength(this._direction,
		"spawn")))
	},queueDieAnimation:function(a){var b=new AJ;b.animState=
"die";b.direction=this._direction;b.callback=a;this._queueAnimation(new tF(m(this,this._onAnimStep),m(this,this._onDieAnimationFinished),
		null,b,
		84/this._getAnimationSpeed(b.animState)|0,this._getAnimationLength(this._direction,
		"die")))
	},queueDefendAnimation:function(a,b){var c=new AJ;c.animState="defend";c.direction=a.get_x()>this.get_x()?-1: 1;c.callback=b;this._queueAnimation(new tF(m(this,this._onAnimStep),m(this,this._onDefendFinished),
		null,c,
		84/this._getAnimationSpeed(c.animState)|0,this._getAnimationLength(c.direction,
		"defend")))
	},queueAttackAnimation:function(a,b){var c=new AJ;c.animState="attack";c.direction=a.get_x()>this.get_x()?-1: 1;c.callback=b;this._queueAnimation(new tF(m(this,this._onAnimStep),m(this,this._onAttackFinished),
		null,c,
		84/this._getAnimationSpeed(c.animState)|0,this._getAnimationLength(c.direction,
		"attack")))
	},showAppliedAbilityIndicator:function(a){var b=null;"first_strike"==a?b=new beb(this._lib): "double_damage"==a&&(b=new aeb(this._lib));this.addChild(b);O._to(b,
		1,
		{y: -80
		});O._to(b,.5,
		{alpha: 0,
delay:.5,overwrite: 0,onComplete:function(){b.parent.removeChild(b)
			}
		})
	},queueGlitchAnimation:function(a){this._glitchCounter=24;this._playGlitchAnimation=!0;var b=new AJ;b.animState="idle";b.direction=this._direction;b.callback=a;this._queueAnimation(new tF(m(this,this._onAnimStep),
		null,
		null,b,
		750))
	},hasAnimation:function(a){return null!=this._animSpecs?null!=this._animSpecs.h[a
		]:!1
	},_init:function(a,b,c,d,e){this._animState="idle";this._unitId=b;this._realm=a;a=this._findUnit();this._currentPosition=
d;this._unitContainer=new C;this._isRapidDeploymentSpawn=a.hasUnitAbility(bT);b=a.get_unitType();this._unitAssetName=b.unitAssetName;this._animSpecs=Cu.getAnimSpec(this._unitAssetName);this._renderBitmap=new B;this._unitContainer.addChild(this._renderBitmap);var g=m(this,this._onRefLibLoaded);Va.instance.loadImageLibrary(Cu.getUnitAnimationRefLibIDByUnitTypeVO(b),Sc.HIGH).handle(function(k){switch(k._hx_index){case 0:za.invoke(g,k.data);break;case 1:k=k.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+
k.message))
			}
		});this.addChild(this._unitContainer);this._setGridPosition(d.x,d.y);this._direction=2==a.teamFlag?1: -1;this.addChild(this._hitpointsBar=new Fq(this,c,b.hitpoints,a.teamFlag,e,this._battleModel));this._hitpointsBar.set_x(-((this._hitpointsBar.get_width()|0)>>1));this._hitpoints=c;this._hitpointsBar.set_y(16);this.addChild(this._poisonedHintIcon=new deb(e));this.addChild(this._attackHintIcon=new e8(e));this._isRapidDeploymentSpawn?this._animState="spawn":this.queueIdleAnimation();this.addEventListener("addedToStage",
m(this,this._onAddedToStage))
	},_findUnit:function(){return Oc.findUnit(this._realm,this._unitId)
	},_playUnitSound:function(a){var b=this._findUnit();null!=b&&(b=Hx.getUnitAnimSound(b.get_unitType().unitTypeId,a),null!=b&&(b=ic.instance.getLibrary(b.libraryId).getSound(b.spriteId),
		"move"==a?this._moveSoundPlayback=b.play(!0,
		1,!0):b.play(!1,
		1,!0)))
	},_stopMoveSound:function(){var a=this._moveSoundPlayback;null!=a&&a.cancel()
	},_onRefLibLoaded:function(a){if(!this._disposed){this._animationRefLib=a;this._testForProcessedSpriteSheet();
a=0;for(var b=this._animationQueue;a<b.length;)b[a++
			].updateFrameCount(m(this,this._getAnimationLength));this._animationsToLoad--
		}
	},_onSpawnFinished:function(a,b){this._setGridPosition(this._currentPosition.x,this._currentPosition.y);2>this._animationQueue.length&&this.queueIdleAnimation();null!=b.callback&&b.callback()
	},_onDefendFinished:function(a,b){this._onDefaultFinished(a,b)
	},_onAttackFinished:function(a,b){this._onDefaultFinished(a,b)
	},_onDieAnimationFinished:function(a,b){this.set_alpha(1);
this._deathFadeOut=!0;this._battleModel.get_moduleEventDispatcher().dispatchEvent(new Fx("BattleUnitEvent/DIED",this.get_unitVO()));null!=b.callback&&b.callback()
	},_onDefaultFinished:function(a,b){this._direction=b.direction;this.queueIdleAnimation();null!=b.callback&&b.callback()
	},_isAnimationUpspeedable:function(a){return-1==Hg.NOT_UPSPEEDABLE_ANIMATIONS.indexOf(a)
	},_getAnimationSpeed:function(a){return this._isAnimationUpspeedable(a)?this._speed: 1
	},_handleWalkpath:function(a){if(null!=this._walkPath&&
0<this._walkPath.length)for(;0<this._walkPath.length;){this._currentPosition=this._walkPath[
				0
			];var b=Ef.calcHexScreenCenter(this._currentPosition.x,this._currentPosition.y),c=b.x-this.get_x();b=b.y-this.get_y();var d=c*c+b*b,e=1<this._walkPath.length?30: 1;if(d>e*e){d=Math.sqrt(d);a=a/60*5*this._speed;a>d&&(a=d);c/=d;b/=d;this.set_x(this.get_x()+c*a);this.set_y(this.get_y()+b*a);this._direction=0<c?-1: 1;break
			}else this._walkPath.shift()
		}else null!=this._walkPath&&(this.queueIdleAnimation(),this._stopMoveSound()),
null!=this._onWalkFinishCallback&&(this._onWalkFinishCallback(),this._onWalkFinishCallback=null),this._walkPath=null
	},_startWalking:function(a,b){this._walkPath=b.path;this._currentPosition=b.path[
			0
		];this._onWalkFinishCallback=b.callback
	},_queueAnimation:function(a,b){null==b&&(b=!1);if(b)for(;0!=this._animationQueue.length;)this._animationQueue.pop().dispose();for(b=this._animationQueue.length;0!=b--;)this._animationQueue[b
		].get_isInfinite()&&this._animationQueue.splice(b,
		1);this._animationQueue.push(a)
	},
_setGridPosition:function(a,b){Ef.calcHexScreenCenter(a|0,b|0,Hg._hexScreenPos);this._setHexScreenPosition(Hg._hexScreenPos.x,Hg._hexScreenPos.y)
	},_setHexScreenPosition:function(a,b){this.set_x(a);this.set_y(b)
	},_testForProcessedSpriteSheet:function(){this._spriteSheetProcessed||(this._onSpriteSheetProcessed(),this._spriteSheetProcessed=!0)
	},_adjustParatrooperPosition:function(a){
		27<a||(this._setGridPosition(this._currentPosition.x,this._currentPosition.y),this.set_y(this.get_y()-(270-10*a)))
	},_getAnimationLength:function(a,
b){if(null==this._animSpecs)return null==this._animationRefLib?84:this._animationRefLib.getNames(this._getAnimationPrefix(b,a)).length;b=null!=this._animSpecs?this._animSpecs.h[b
		]:null;return null==b?84: -1==a?b.totallength-b.animlength:b.animlength
	},_onAddedToStage:function(a){this.removeEventListener("addedToStage",m(this,this._onAddedToStage));this.addEventListener("removedFromStage",m(this,this._onRemovedFromStage))
	},_onRemovedFromStage:function(a){this._stopMoveSound();this.removeEventListener("removedFromStage",
m(this,this._onRemovedFromStage));this.addEventListener("addedToStage",m(this,this._onAddedToStage))
	},_onAnimStep:function(a,b){if(this.get_visible()&&!this._deathFadeOut&&null!=a&&null!=b){var c=b.animState,d=null!=b.path?this._direction:b.direction,e=this._getAnimationLength(d,c);a=(0==a.get_frame()%e?e:a.get_frame()%e)-1;this._lastAnimState!=c&&this._playUnitSound(c);if(null!=this._animationRefLib){e=null!=this._animSpecs?this._animSpecs.h[c
				]:null;d=this._getTextureAtlasAssetId(c,d,a);var g=this._animationRefLib.getSprite(d);
if(null!=g){if(null!=e){var k=g.offset;d=e.x-Hg.HTML_TOOL_OFFSET.x+k.x;e=e.y-Hg.HTML_TOOL_OFFSET.y+k.y;g=g.get_trimmedBitmapData()
					}else g=g.get_bitmapData(),d=-(g.width/2),e=-(g.height/2);this._renderBitmap.set_x(d);this._renderBitmap.set_y(e);this._renderBitmap.set_bitmapData(g);"spawn"==c&&"drone_swarm"!=this._unitAssetName&&"ninja"!=this._unitAssetName&&this._adjustParatrooperPosition(a);this._playGlitchAnimation&&(null==this._glitchedUnitMask&&(this._glitchedUnitMask=Ob.createBlackRectangle(1,
					1),this._unitContainer.addChild(this._glitchedUnitMask),this._renderBitmap.set_mask(this._glitchedUnitMask)),a=g.height*(this._glitchCounter/24-.3)|0,this._glitchedUnitMask.set_x(d),this._glitchedUnitMask.set_y(e+a),this._glitchedUnitMask.set_width(g.width),this._glitchedUnitMask.set_height(g.height-a),
					1>this._glitchCounter%5?this.set_blendMode(12):this.set_blendMode(10),this._glitchCounter--,
					0>=this._glitchCounter&&(this.set_blendMode(10),this._playGlitchAnimation=!1,null!=b.callback&&b.callback(),
this._unitContainer.removeChild(this._glitchedUnitMask),this._renderBitmap.set_mask(null),this._glitchedUnitMask=null));this._lastAnimState=c
				}
			}
		}
	},_getAnimationPrefix:function(a,b){return this._unitAssetName+"_"+a+(1==b?"_L_": "_R_")
	},_getTextureAtlasAssetId:function(a,b,c){return this._unitAssetName+"_"+a+(1==b?"_L_": "_R_")+(10>c?"0": "")+(null==c?"null": ""+c)
	},get_speed:function(){return this._speed
	},set_speed:function(a){this._speed=a;for(var b=0,c=this._animationQueue;b<c.length;){var d=c[b
			];++b;
d.setFrameStep(84/this._getAnimationSpeed(d.get_animState())|0)
		}return a
	},get_currentPos:function(){return this._currentPosition
	},get_unitId:function(){return this._unitId
	},get_isRapidDeploymentSpawn:function(){return this._isRapidDeploymentSpawn
	},get_unitVO:function(){return this._findUnit()
	},set_activeUnit:function(a){return this._isAnimatingActiveUnit==a?a:this._isAnimatingActiveUnit=a
	},set_attackable:function(a){a?this._attackHintIcon.start():this._attackHintIcon.stop();this._poisonedHintIcon.set_visible(!a&&
this._poisoned);return a
	},set_poisoned:function(a){this._poisoned=a;this.removeChild(this._attackHintIcon);this._attackHintIcon=a?new eeb(this._lib):new e8(this._lib);this.addChild(this._attackHintIcon);return this._poisonedHintIcon.set_visible(a)
	},get_swarmBonus:function(){return this._swarmBonus
	},set_swarmBonus:function(a){return this._swarmBonus=a
	},get_hitpoints:function(){return this._hitpoints
	},__class__:Hg,__properties__:l(C.prototype.__properties__,
	{set_poisoned: "set_poisoned",get_hitpoints: "get_hitpoints",
set_swarmBonus: "set_swarmBonus",get_swarmBonus: "get_swarmBonus",set_attackable: "set_attackable",set_activeUnit: "set_activeUnit",get_unitVO: "get_unitVO",get_isRapidDeploymentSpawn: "get_isRapidDeploymentSpawn",get_unitId: "get_unitId",get_currentPos: "get_currentPos",set_speed: "set_speed",get_speed: "get_speed"
	})
});var $db=function(a,b,c,d,e,g,k){Hg.call(this,a,b,c,d,e,g,k)
};h[
	"de.innogames.strategycity.battle.rendering.OneShotUnitRenderer"
]=$db;$db.__name__="de.innogames.strategycity.battle.rendering.OneShotUnitRenderer";
$db.__super__=Hg;$db.prototype=l(Hg.prototype,
{_onAttackFinished:function(a,b){this.set_visible(!1);null!=b.callback&&b.callback(this)
	},__class__:$db
});var eeb=function(a){Eq.call(this,a)
};h[
	"de.innogames.strategycity.battle.rendering.PoisonedAttackHintIcon"
]=eeb;eeb.__name__="de.innogames.strategycity.battle.rendering.PoisonedAttackHintIcon";eeb.__super__=e8;eeb.prototype=l(e8.prototype,
{get_iconAssetName:function(){return"icon_overlay_attack_hint_poison"
	},__class__:eeb
});var deb=function(a){Eq.call(this,
a)
};h[
	"de.innogames.strategycity.battle.rendering.PoisonedStatusIcon"
]=deb;deb.__name__="de.innogames.strategycity.battle.rendering.PoisonedStatusIcon";deb.__super__=Eq;deb.prototype=l(Eq.prototype,
{get_iconAssetName:function(){return"icon_overlay_poison"
	},_init:function(){Eq.prototype._init.call(this);this.set_x(-10);this.set_y(-50);this.set_visible(!1)
	},__class__:deb
});var Zdb=function(a,b,c,d,e,g,k,t){this._changedIdentity=!1;this._eventDispatcher=a;Hg.call(this,b,c,d,e,g,k,t)
};h[
	"de.innogames.strategycity.battle.rendering.RogueUnitRenderer"
]=
Zdb;Zdb.__name__="de.innogames.strategycity.battle.rendering.RogueUnitRenderer";Zdb.__super__=Hg;Zdb.prototype=l(Hg.prototype,
{_onAttackFinished:function(a,b){if(this._changedIdentity){for(var c=!1,d=this._findUnit().abilities,e=d.length-1;0<=e;)if(d[e--
			]instanceof xN){c=!0;break
			}if(c){this.set_visible(!1);null!=b.callback&&b.callback(this);return
			}
		}Hg.prototype._onAttackFinished.call(this,a,b)
	},_onDefendFinished:function(a,b){this._stopMoveSound();this._testForHiddenIdentityTrigger();Hg.prototype._onDefendFinished.call(this,
a,b)
	},_testForHiddenIdentityTrigger:function(){!this._changedIdentity&&this.get_unitVO().transformRogueIdentity(this._battleModel.get_currentHistoryPosition())&&(this._testForChangedUnitAssets(),this._changedIdentity=!0)
	},_testForChangedUnitAssets:function(){var a=this.get_unitVO().get_unitType();this._unitAssetName!=a.unitAssetName&&(this._unitAssetName=a.unitAssetName,this._animState="idle",this._animSpecs=Cu.getAnimSpec(this._unitAssetName),a=Cu.getUnitAnimationRefLibIDByUnitTypeVO(a),this._animationRefLib=
yb.getInstance().getGUIReflib(a),this._eventDispatcher.dispatchEvent(new BJ("BattleRendererEvent/UNIT_CHANGED",
		0,this.get_unitVO())))
	},__class__:Zdb
});var feb=function(){this.smooth=!1;this.scale=NaN;this.x=this.y=this.zoff=0
};h[
	"de.innogames.strategycity.battle.rendering.ScreenSprite"
]=feb;feb.__name__="de.innogames.strategycity.battle.rendering.ScreenSprite";feb.prototype={__class__:feb
};var Od=function(){jc.call(this)
};h[
	"openfl.display.Shape"
]=Od;Od.__name__="openfl.display.Shape";Od.__super__=
jc;Od.prototype=l(jc.prototype,
{get_graphics:function(){null==this.__graphics&&(this.__graphics=new Kz(this));return this.__graphics
	},__class__:Od,__properties__:l(jc.prototype.__properties__,
	{get_graphics: "get_graphics"
	})
});var Fq=function(a,b,c,d,e,g){this._teamflag=0;this._hitpointsReachedCallback=[];this._hitpointsAnim=NaN;this._hitpoints=this._maxHitpoints=0;jc.call(this);this._unitRenderer=a;this._hitpointsAnim=this._hitpoints=b;this._maxHitpoints=c;this._teamflag=d;this._libs=e;this._battleModel=
g;this._init();this._redraw()
};h[
	"de.innogames.strategycity.battle.rendering.UnitHitpointbar"
]=Fq;Fq.__name__="de.innogames.strategycity.battle.rendering.UnitHitpointbar";Fq.__super__=Od;Fq.prototype=l(Od.prototype,
{_init:function(){null==Fq._greenBm&&(Fq._greenBm=this._libs.getImage("hp_green"),Fq._blueBm=this._libs.getImage("hp_blue"),Fq._redBm=this._libs.getImage("hp_red"),Fq._lightBlueBm=this._libs.getImage("hp_lightblue"))
	},_redraw:function(){var a=this.get_graphics();a.clear();var b=this._maxHitpoints*
Fq._blueBm.width,c=Fq._greenBm.width*this._hitpointsAnim|0;a.beginBitmapFill(Fq._blueBm);a.drawRect(c,
		0,b-c,Fq._blueBm.height);a.endFill();a.beginBitmapFill(1==this._teamflag?Fq._greenBm:Fq._redBm);a.drawRect(0,
		0,c,Fq._blueBm.height);a.endFill();Fm.unitHasActiveOnetimeArmor(this._unitRenderer.get_unitVO(),this._battleModel.get_currentHistoryPosition())&&(a.beginBitmapFill(Fq._lightBlueBm),a.drawRect(c-Fq._greenBm.width,
		0,Fq._greenBm.width,Fq._lightBlueBm.height),a.endFill())
	},step:function(a,b){null==
b&&(b=1);if(this.get_isAnimating()&&(a=.09*b,this._hitpointsAnim+=Math.min(a,Math.max(-a,this._hitpoints-this._hitpointsAnim)),this._redraw(),!this.get_isAnimating()))for(;0!=this._hitpointsReachedCallback.length;)this._hitpointsReachedCallback.shift()()
	},get_isAnimating:function(){return.01<Math.abs(this._hitpoints-this._hitpointsAnim)
	},updateHitpoints:function(a,b){this._armorUsedInCurrentTurn()&&this._redraw();if(a==this._hitpoints)return!1;null!=b&&this._hitpointsReachedCallback.push(b());this._hitpoints=
a;return!0
	},_armorUsedInCurrentTurn:function(){return 1>this._battleModel.get_currentHistoryPosition()||!Fm.unitHasActiveOnetimeArmor(this._unitRenderer.get_unitVO(),this._battleModel.get_currentHistoryPosition()-1)?!1:Fm.unitHasActiveOnetimeArmor(this._unitRenderer.get_unitVO(),this._battleModel.get_currentHistoryPosition())?!1:!0
	},__class__:Fq,__properties__:l(Od.prototype.__properties__,
	{get_isAnimating: "get_isAnimating"
	})
});var yJ=function(){};h[
	"de.innogames.strategycity.battle.rendering.background.BattleBackgroundAssetConfigs"
]=
yJ;yJ.__name__="de.innogames.strategycity.battle.rendering.background.BattleBackgroundAssetConfigs";yJ.getConfig=function(a){null==yJ._configs&&yJ._initConfigs();if("guild_expedition"==a.type||"battleground"==a.type)return yJ._guildExpeditionConfig;a=a.getContent();a=yJ._configs.h[a
	];return null==a?yJ._classicConfig:a
};yJ._initConfigs=function(){yJ._classicConfig={tilePath: "/assets/battle/background/normal/",backgroundTileId: "battle_normal_background",backgroundTilePrefix: "battle_normal_SurroundingFieldBg_",
randomTileset:qe.RAND_TERRAIN,terrainRenderers: [g8,AXa,Gq,io,jo,CC,uF
		],tilesReflibId: "battle/tiles/classic/classic_tiles"
	};yJ._guildExpeditionConfig={tilePath: "/assets/battle/background/postmodern/",backgroundTileId: "background_postmodern",backgroundTilePrefix: "battle_postmodern_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_POSTMODERN,terrainRenderers: [Xo,BXa,nma,Jp,Ix,Gq,io,jo,CC,DC,uF,CJ,Hq,Yo
		],tilesReflibId: "battle/tiles/guild_expedition/guild_expedition_tiles"
	};var a=new x;a.h.ProgressiveEra=
{tilePath: "/assets/battle/background/progressive/",backgroundTileId: "battle_progressive_background",backgroundTilePrefix: "battle_progressive_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_PROGRESSIVE,terrainRenderers: [Xo,Jp,Gq,io,DJ,EJ,jo,Ix,CC,DC,uF
		],tilesReflibId: "battle/tiles/progressive/progressive_tiles"
	};a.h.ModernEra={tilePath: "/assets/battle/background/modern/",backgroundTileId: "battle_modern_background",backgroundTilePrefix: "battle_modern_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_MODERN,
terrainRenderers: [Xo,g8,Jp,Gq,nma,io,jo,Ix,CC,DC,uF
		],tilesReflibId: "battle/tiles/modern/modern_tiles"
	};a.h.PostModernEra={tilePath: "/assets/battle/background/postmodern/",backgroundTileId: "background_postmodern",backgroundTilePrefix: "battle_postmodern_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_POSTMODERN,terrainRenderers: [Xo,BXa,nma,Jp,Gq,io,jo,Ix,CC,DC,uF
		],tilesReflibId: "battle/tiles/postmodern/postmodern_tiles"
	};a.h.ContemporaryEra={tilePath: "/assets/battle/background/contemporary/",backgroundTileId: "battle_contemporary_background",
backgroundTilePrefix: "battle_contemporary_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_CONTEMPORARY,terrainRenderers: [Xo,geb,heb,Jp,Gq,io,jo,Ix,CC,DC,uF
		],tilesReflibId: "battle/tiles/contemporary/contemporary_tiles"
	};a.h.TomorrowEra={tilePath: "/assets/battle/background/tomorrow/",backgroundTileId: "battle_tomorrow_background",backgroundTilePrefix: "battle_tomorrow_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_TOMORROW,terrainRenderers: [io,h8,i8,Hq,FJ,Yo,Yi,Jp,Ix
		],tilesReflibId: "battle/tiles/tomorrow/tomorrow_tiles"
	};
a.h.FutureEra={tilePath: "/assets/battle/background/future/",backgroundTileId: "battle_future_background",backgroundTilePrefix: "battle_future_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_FUTURE,terrainRenderers: [io,ieb,g8,Hq,CJ,Yi,Yo,Jp,Ix
		],tilesReflibId: "battle/tiles/future/future_tiles"
	};a.h.ArcticFuture={tilePath: "/assets/battle/background/arctic/",backgroundTileId: "battle_arctic_background",backgroundTilePrefix: "battle_arctic_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_FUTURE,terrainRenderers: [io,
jeb,keb,leb,Jp,Ix,Gq,meb,h_,oma,hT,Yo
		],tilesReflibId: "battle/tiles/arctic/arctic_tiles"
	};a.h.OceanicFuture={tilePath: "/assets/battle/background/oceanic/",backgroundTileId: "battle_oceanic_background",backgroundTilePrefix: "battle_oceanic_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_FUTURE,terrainRenderers: [Jp,Gq,io,neb,oeb,i_,peb,j_,CXa,k_,Ix,Yo
		],tilesReflibId: "battle/tiles/oceanic/oceanic_tiles"
	};a.h.VirtualFuture={tilePath: "/assets/battle/background/virtual/",backgroundTileId: "battle_virtual_background",
backgroundTilePrefix: "battle_virtual_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_FUTURE,terrainRenderers: [Jp,Gq,io,qeb,reb,hT,EC,j_,CXa,h_,Ix,Yo
		],tilesReflibId: "battle/tiles/virtual/virtual_tiles"
	};a.h.SpaceAgeMars={tilePath: "/assets/battle/background/mars/",backgroundTileId: "battle_mars_background",backgroundTilePrefix: "battle_mars_background_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_FUTURE,terrainRenderers: [io,Gq,Jp,j_,seb,h_,Yo
		],tilesReflibId: "battle/tiles/mars/mars_tiles"
	};a.h.SpaceAgeAsteroidBelt=
{tilePath: "/assets/battle/background/asteroidbelt/",backgroundTileId: "battle_SAAB_background",backgroundTilePrefix: "battle_SAAB_background_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_FUTURE,terrainRenderers: [io,Gq,Jp,j_,EC,Yo
		],tilesReflibId: "battle/tiles/asteroid_belt/asteroid_belt_tiles"
	};a.h.SpaceAgeVenus={tilePath: "/assets/battle/background/venus/",backgroundTileId: "battle_SAV_background",backgroundTilePrefix: "battle_SAV_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_FUTURE,terrainRenderers: [io,
Gq,Jp,j_,teb,Yo
		],tilesReflibId: "battle/tiles/venus/venus_tiles"
	};a.h.egyptians={tilePath: "/assets/battle/background/egyptians/",backgroundTileId: "battle_egyptians_background",backgroundTilePrefix: "battle_egyptians_background_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_FUTURE,terrainRenderers: [io,pma,ueb,qma,rma
		],tilesReflibId: "battle/tiles/egyptians/egyptians_tiles"
	};a.h.SpaceAgeJupiterMoon={tilePath: "/assets/battle/background/jupiter_moon/",backgroundTileId: "battle_SAJM_background",backgroundTilePrefix: "battle_SAJM_SurroundingFieldBg_",
randomTileset:qe.RAND_TERRAIN_FUTURE,terrainRenderers: [Gq,sma,io,Jp,tma,Yo
		],tilesReflibId: "battle/tiles/jupiter_moon/jupiter_moon_tiles",hexGridTintColor: 36828
	};a.h.SpaceAgeTitan={tilePath: "/assets/battle/background/titan/",backgroundTileId: "battle_SAT_background",backgroundTilePrefix: "battle_SAT_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_FUTURE,terrainRenderers: [Gq,sma,io,Jp,tma,Yo
		],tilesReflibId: "battle/tiles/titan/titan_tiles",hexGridTintColor: 56533
	};a.h.SpaceAgeSpaceHub={tilePath: "/assets/battle/background/space_hub/",
backgroundTileId: "battle_SASH_background",backgroundTilePrefix: "battle_SASH_SurroundingFieldBg_",randomTileset:qe.RAND_TERRAIN_FUTURE,terrainRenderers: [Gq,sma,io,Jp,tma,Yo
		],tilesReflibId: "battle/tiles/space_hub/space_hub_tiles",hexGridTintColor: 15560191
	};yJ._configs=a
};var pd=function(){L.call(this);this._backgroundBitmap=new B(new pb(pd.BACKGROUND_WIDTH,pd.BACKGROUND_HEIGHT,!1,
	0),
	1,!0);this._tileContainer=new C;this.addChild(this._backgroundBitmap);this.addChild(this._tileContainer);this._terrainRenderers=
[];this._terrainRenderersLookup=new x;this._tilesprites=[]
};h[
	"de.innogames.strategycity.battle.rendering.background.ConfigurableLandscapeRenderer"
]=pd;pd.__name__="de.innogames.strategycity.battle.rendering.background.ConfigurableLandscapeRenderer";pd.depthSortTileSprites=function(a,b){if(null==a||null==b)return 0;a=a.y+a.zoff+a.bm.height*a.scale|0;b=b.y+b.zoff+b.bm.height*b.scale|0;return a<b?-1:a==b?0: 1
};pd.__super__=L;pd.prototype=l(L.prototype,
{addTerrainTypeRenderer:function(a){this._terrainRenderers.push(a);
for(var b=0,c=a.get_handledTerrainTypes();b<c.length;)this._terrainRenderersLookup.h[c[b++
			]
		]=a
	},renderRealm:function(a){this._realm=a;this._backGroundRenderer.execute(this._backgroundBitmap);var b=m(this,this._handleTileAssetsLoaded);Va.instance.loadImageLibrary(this._tilesGuiReflibName).handle(function(c){switch(c._hx_index){case 0:za.invoke(b,c.data);break;case 1:c=c.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+c.message))
			}
		})
	},dispose:function(){this._backGroundRenderer=null;null!=
this._backgroundBitmap&&this._backgroundBitmap.get_bitmapData().dispose();this._tileContainer=this._backgroundBitmap=null;null!=this._terrainRenderers&&(this._terrainRenderers.length=0);null!=this._tilesprites&&(this._tilesprites.length=0)
	},setStaticBackgroundRenderer:function(a){this._backGroundRenderer=a
	},setTilesGuiReflibName:function(a){this._tilesGuiReflibName=a
	},setMapRandomTileset:function(a){this._mapRandomTileset=a
	},_handleTileAssetsLoaded:function(a){this._tilesGuiReflib=a;this._renderTiles()
	},
_renderTiles:function(){this._generateRandomSeed();this._randmap=new DXa(this._realm,this._mapRandomTileset);this._generateTiles();fc.popRandomSeed()
	},_generateTiles:function(){for(var a=this._randmap.get_randomTileMap(),b=a.length-1;0<=b;)this._generateHexField(a[b--
		]);this._tilesprites.sort(pd.depthSortTileSprites);a=0;for(b=this._tilesprites;a<b.length;){var c=b[a
			];++a;if(null==c)break;var d=pd.TILEGRAPHICS_OFFSET.x+c.x-c.bm.width*c.scale/2,e=pd.TILEGRAPHICS_OFFSET.y+c.y-c.bm.height*c.scale/2,
g=new B(c.bm);g.set_x(d);g.set_y(e);g.smoothing=c.smooth;g.set_scaleX(g.set_scaleY(c.scale));this._tileContainer.addChild(g)
		}
	},_generateHexField:function(a){var b=a.tileTypeId;this._hasTileTypeRenderer(b)?(a=this._getTileTypeRenderer(b).generateHex(a,this._tilesGuiReflib),null!=a&&0<a.length&&(this._tilesprites=this._tilesprites.concat(a))):null!=y._reportError&&y._reportError(Error("[LOGGER] Map uses terrain type: "+(a.tileTypeId+" but no renderer defined for this!")))
	},_hasTileTypeRenderer:function(a){return Object.prototype.hasOwnProperty.call(this._terrainRenderersLookup.h,
a)
	},_getTileTypeRenderer:function(a){return this._terrainRenderersLookup.h[a
		]
	},_generateRandomSeed:function(){
		1==this._realm.provinceId?fc.pushRandomSeed(1,
		358358):fc.pushRandomSeed(1,this._realm.battleId)
	},__class__:pd
});var veb=function(){};h[
	"de.innogames.strategycity.battle.rendering.background.ConfigurableLandscapeRendererFactory"
]=veb;veb.__name__="de.innogames.strategycity.battle.rendering.background.ConfigurableLandscapeRendererFactory";veb.createConfigurableLandscapeRenderer=function(a,b){var c=
new pd;veb._setupRendererFromConfig(b,c);c.renderRealm(a);return c
};veb._setupRendererFromConfig=function(a,b){b.setStaticBackgroundRenderer(new GJ(a.tilePath,a.backgroundTileId,a.backgroundTilePrefix));b.setMapRandomTileset(a.randomTileset);b.setTilesGuiReflibName(a.tilesReflibId);var c=0;for(a=a.terrainRenderers;c<a.length;)b.addTerrainTypeRenderer(Ie.createInstance(a[c++
	],
	[]));return b
};var DXa=function(a,b){this._randomMapTileWidth=this._randomMapTileHeight=0;this._realm=a;this._randomTerrainTypes=
b;this._randomTileMap=[];this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.RandomMap"
]=DXa;DXa.__name__="de.innogames.strategycity.battle.rendering.background.RandomMap";DXa.prototype={get_width:function(){return this._randomMapTileWidth
	},get_randomTileMap:function(){return this._randomTileMap
	},_init:function(){this._randomMapTileWidth=17;this._randomMapTileHeight=16;this._generateRandomMap(this._randomMapTileWidth,this._randomMapTileHeight);this._matchNeighbours();for(var a=
this._randomTileMap.length-1;0<=a;){var b=a--;this._addTileNeighbours(b,this._randomTileMap[b
			])
		}
	},_addTileNeighbours:function(a,b){var c=a%this._randomMapTileWidth;a=a/this._randomMapTileWidth|0;b.screenX=79*c+(a+1)%2*39.5;b.screenY=45*a;var d=c-a%2,e=c+(a+1)%2,g=a-1,k=a+1;b.nw=this._getTileTypeIdByXY(d,g);b.ne=this._getTileTypeIdByXY(e,g);b.ww=this._getTileTypeIdByXY(c-1,a);b.ee=this._getTileTypeIdByXY(c+1,a);b.sw=this._getTileTypeIdByXY(d,k);b.se=this._getTileTypeIdByXY(e,k)
	},_getTileTypeIdByXY:function(a,
b,c){null==c&&(c="plain");return 0>a||a>=this._randomMapTileWidth||0>b||b>=this._randomMapTileHeight?c:this._getTileTypeId(a+b*this._randomMapTileWidth,c)
	},_getTileTypeId:function(a,b){null==b&&(b="plain");return this._randomTileMap[a
		].tileTypeId?this._randomTileMap[a
		].tileTypeId:b
	},_matchNeighbours:function(){for(var a=this._realm.map,b=a.width,c=a.height,d,e=0;e<b;)for(var g=e++,k=0;k<c;){d=k++;var t=g+1,u=d+1,A=this._randomTileMap[t+u*this._randomMapTileWidth
			].tileTypeId=a.tiles[g
			][d
			].typeId;0==
g&&(d=t-1+(u+(ya.toFloat(fc.getRandomInt())%ya.toFloat(3)|0)-1)*this._randomMapTileWidth,null!=this._randomTileMap[d
			]&&(this._randomTileMap[d
			].tileTypeId=A));g==b-1&&(d=t+1+(u+(ya.toFloat(fc.getRandomInt())%ya.toFloat(3)|0)-1)*this._randomMapTileWidth,null!=this._randomTileMap[d
			]&&(this._randomTileMap[d
			].tileTypeId=A));0==u&&(d=t+(ya.toFloat(fc.getRandomInt())%ya.toFloat(2)|0)-1+(u-1)*this._randomMapTileWidth,null!=this._randomTileMap[d
			]&&(this._randomTileMap[d
			].tileTypeId=A));u==c-1&&(d=t+(ya.toFloat(fc.getRandomInt())%
ya.toFloat(2)|0)+(u+1)*this._randomMapTileWidth,null!=this._randomTileMap[d
			]&&(this._randomTileMap[d
			].tileTypeId=A))
		}
	},_generateRandomMap:function(a,b){var c=this._randomTerrainTypes.length;a*=b;for(var d=0;d<a;)b=new Wz,b.tileTypeId=this._randomTerrainTypes[ya.toFloat(fc.getRandomInt())%ya.toFloat(c)|0
		],this._randomTileMap[d++
		]=b;this._randomTileMap.reverse()
	},__class__:DXa,__properties__: {get_randomTileMap: "get_randomTileMap",get_width: "get_width"
	}
};var GJ=function(a,b,c){this._tilePath=a;this._defaultTileFilename=
b;this._tileFilenamesPrefix=c
};h[
	"de.innogames.strategycity.battle.rendering.background.StaticBackgroundRenderer"
]=GJ;GJ.__name__="de.innogames.strategycity.battle.rendering.background.StaticBackgroundRenderer";GJ.prototype={execute:function(a){this._target=a;this._staticBackgroundTileLoader=new fIb(this._tilePath,this._defaultTileFilename,this._tileFilenamesPrefix);var b=m(this,this._defaultBackgroundLoaded);this._staticBackgroundTileLoader.loadDefaultBackground().handle(function(c){switch(c._hx_index){case 0:za.invoke(b,
c.data);break;case 1:c=c.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+c.message))
			}
		})
	},_drawDefaultBackground:function(a){var b=a.width|0,c=a.height|0,d=this._target.get_width()|0,e=this._target.get_height()|0,g=new p(0,
		0),k=new Z(0,
		0,b,c);for(this._target.get_bitmapData().lock();g.y<e;){for(;g.x<d;)this._target.get_bitmapData().copyPixels(a,k,g),g.x+=b;g.x=0;g.y+=c
		}
	},_drawShadow:function(){var a=new pb(12,
		10,!0,
		-16777216);a.fillRect(new Z(1,
		1,
		10,
		8),
		1426063360);a.fillRect(new Z(2,
		2,
		8,
		6),
		0);var b=this._target.get_width()|0,c=this._target.get_height()|0;b=new Eb(b/a.width,
		0,
		0,c/a.height,
		0,
		0);this._target.get_bitmapData().draw(a,b,
		null,
		9,
		null,!0);a.dispose()
	},_drawBackgroundTiles:function(a){this._target.get_bitmapData().lock();for(var b=new Z(0,
		0,
		480,
		400),c=new p,d=0;d<a.length;){var e=a[d++
			],g=d-1;c.x=g%4*480;c.y=400*(g/4|0);this._target.get_bitmapData().copyPixels(e,b,c)
		}this._staticBackgroundTileLoader.dispose();this._target.get_bitmapData().unlock()
	},_defaultBackgroundLoaded:function(a){this._target.get_bitmapData().lock();
this._drawDefaultBackground(a);this._drawShadow();this._target.get_bitmapData().unlock();var b=m(this,this._drawBackgroundTiles);this._staticBackgroundTileLoader.loadBackgroundTiles().handle(function(c){switch(c._hx_index){case 0:za.invoke(b,c.data);break;case 1:c=c.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+c.message))
			}
		})
	},__class__:GJ
};var fIb=function(a,b,c){this._tilePath=a;this._defaultTileFilename=b;this._tileFilenamesPrefix=c
};h[
	"de.innogames.strategycity.battle.rendering.background.StaticBackgroundTileLoader"
]=
fIb;fIb.__name__="de.innogames.strategycity.battle.rendering.background.StaticBackgroundTileLoader";fIb.prototype={loadBackgroundTiles:function(){for(var a=[],b=0,c=GJ.BACKGROUND_TILE_COUNT;b<c;){var d=this._getBackgroundTileFileName(b++ +1);a.push(Va.instance.loadImage(d,Sc.LOW,te.CHECKSUM_LIST))
		}return Qe.inParallel(a)
	},loadDefaultBackground:function(){var a=this._getDefaultBackgroundURL();return Va.instance.loadImage(a,Sc.LOW,te.CHECKSUM_LIST)
	},dispose:function(){var a=Va.instance;a.unloadUrl(this._getDefaultBackgroundURL());
for(var b=0,c=GJ.BACKGROUND_TILE_COUNT;b<c;)a.unloadUrl(this._getBackgroundTileFileName(b++ +1))
	},_getBackgroundTileFileName:function(a){return this._tilePath+this._tileFilenamesPrefix+a+".jpg"
	},_getDefaultBackgroundURL:function(){return this._tilePath+this._defaultTileFilename+".jpg"
	},__class__:fIb
};var j8=function(){};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ITerrainTypeRenderer"
]=j8;j8.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ITerrainTypeRenderer";
j8.__isInterface__=!0;j8.prototype={__class__:j8,__properties__: {get_handledTerrainTypes: "get_handledTerrainTypes"
	}
};var Mh=function(){this.SPRITEATTRIB=new x
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.AbstractTerrainRenderer"
]=Mh;Mh.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.AbstractTerrainRenderer";Mh.__interfaces__=[j8
];Mh.prototype={_createScreenSprite:function(a,b,c,d,e,g,k,t,u){null==u&&(u=!0);null==t&&(t=1);null==k&&(k=-2147483647);
null==g&&(g=!1);e||(e=c);c=this.SPRITEATTRIB.h[c
		];var A=new feb;g&&(e+=fa.string(ya.toFloat((ya.toFloat(fc.getRandomInt())%ya.toFloat(c.n)|0)+1)));d=d.getImage(e);if(null==d)return null;A.bm=d;A.x=a+39.5|0;A.y=b+c.yoffset|0;A.zoff=-2147483647!=k?k|0:c.zoff;A.scale=1==t?c.scale:t;A.smooth=u;return A
	},_createLandscapeSpriteAttributes:function(a,b,c,d,e,g,k,t){null==t&&(t=!0);null==k&&(k=0);null==g&&(g=0);this.SPRITEATTRIB.h[a
		]=new eIb(a,b,c,d,e,g,k,t)
	},__class__:Mh,__properties__: {get_handledTerrainTypes: "get_handledTerrainTypes"
	}
};
var Fu=function(){this.SPRITEATTRIB=new x
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.AbstractBushesRenderer"
]=Fu;Fu.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.AbstractBushesRenderer";Fu.__super__=Mh;Fu.prototype=l(Mh.prototype,
{generateHex:function(a,b){return this._screenSprites=[this._createBush(a,b,
			4),this._createBush(a,b,
			8)
		]
	},_createBush:function(a,b,c){var d=this.get_tileKey(),e=c-(ya.toFloat(fc.getRandomInt())%ya.toFloat(c)|0),
g=ya.toFloat(fc.getRandomInt());return this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+e|0,a.screenY+(g%ya.toFloat(c)|0)|0,d,b,
		null,!0,
		-2147483647,
		1-Math.abs(ya.toFloat(fc.getRandomInt())/ya.toFloat(2147483647))/3)
	},get_handledTerrainTypes:function(){return Fu.TERRAIN_TYPE
	},__class__:Fu,__properties__:l(Mh.prototype.__properties__,
	{get_tileKey: "get_tileKey"
	})
});var Zo=function(){this.SPRITEATTRIB=new x
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.AbstractForrestRenderer"
]=
Zo;Zo.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.AbstractForrestRenderer";Zo.__super__=Mh;Zo.prototype=l(Mh.prototype,
{generateHex:function(a,b){var c=[];c.push(this._createTree(a,b));c.push(this._createTree(a,b));c.push(this._createTree(a,b));return this._screenSprites=c
	},_createTree:function(a,b){var c=this.get_tileKey(),d=35-(ya.toFloat(fc.getRandomInt())%ya.toFloat(70)|0),e=ya.toFloat(fc.getRandomInt())%ya.toFloat(6)|0,g=ya.toFloat(fc.getRandomInt());return this._createScreenSprite(a.screenX-
pd.HALF_HEX_STEP_WIDTH+d|0,a.screenY-pd.HALF_HEX_STEP_HEIGTH+e|0,c,b,
		null,!0,
		-2147483647,
		1-Math.abs(g/ya.toFloat(2147483647))/3)
	},get_handledTerrainTypes:function(){return Zo.TERRAIN_TYPE
	},__class__:Zo,__properties__:l(Mh.prototype.__properties__,
	{get_tileKey: "get_tileKey"
	})
});var leb=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureBushesRenderer"
]=leb;leb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureBushesRenderer";
leb.__super__=Fu;leb.prototype=l(Fu.prototype,
{_createBush:function(a,b,c){var d=this.get_tileKey(),e=c-(ya.toFloat(fc.getRandomInt())%ya.toFloat(c)|0),g=ya.toFloat(fc.getRandomInt());return this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+e|0,a.screenY+(g%ya.toFloat(c)|0)|0,d,b,
		null,!0)
	},_init:function(){this._createLandscapeSpriteAttributes("bushes",
		4,
		0,.4,.4,
		-10,.7)
	},get_tileKey:function(){return"bushes"
	},__class__:leb
});var jeb=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureForestRenderer"
]=
jeb;jeb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureForestRenderer";jeb.__super__=Zo;jeb.prototype=l(Zo.prototype,
{_createTree:function(a,b){var c=this.get_tileKey(),d=35-(ya.toFloat(fc.getRandomInt())%ya.toFloat(70)|0),e=ya.toFloat(fc.getRandomInt());return this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+d|0,a.screenY-pd.HALF_HEX_STEP_HEIGTH+(e%ya.toFloat(6)|0)|0,c,b,
		null,!0)
	},_init:function(){this._createLandscapeSpriteAttributes("forest",
		5,
		0,.2,.6,
		-5)
	},get_tileKey:function(){return"forest"
	},__class__:jeb
});var hT=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureHouseRenderer"
]=hT;hT.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureHouseRenderer";hT.__super__=Mh;hT.prototype=l(Mh.prototype,
{generateHex:function(a,b){return[this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH,a.screenY+1,a.tileTypeId,b,this._imageKeyLookup.h[a.tileTypeId
			],
!1,
			-2147483647,
			1)
		]
	},_init:function(){this._createImageKeyLookup();this._createLandscapeSpriteAttributes("house_a",
		0,
		0,
		0,
		1,
		-5);this._createLandscapeSpriteAttributes("house_b",
		0,
		0,
		0,
		1,
		-5)
	},_createImageKeyLookup:function(){if(null==this._imageKeyLookup){var a=new x;a.h.house_a="farfuthouse0";a.h.house_b="farfuthouse1";this._imageKeyLookup=a
		}
	},get_handledTerrainTypes:function(){return hT.terrainType
	},__class__:hT
});var Xv=function(){this.SPRITEATTRIB=new x
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ScatterPointRenderer"
]=
Xv;Xv.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ScatterPointRenderer";Xv.__super__=Mh;Xv.prototype=l(Mh.prototype,
{generateHex:function(a,b){this._screenSprites=[];var c=this._createScatterpoints(a);a=a.tileTypeId;for(var d=c.length-1;0<=d;)for(var e=c[d--
		],g=pd.HEX_FIELD_AREA_SIZE;0<g;){var k=this._getKeyFromComposition(a),t=this._getScreenSpriteForScatterPoint(k,e,b);null!=t&&(this._screenSprites.push(t),k=this.SPRITEATTRIB.h[k
			],g-=t.bm.width*t.bm.height*t.scale*
t.scale*(0!=k.fillFactor?k.fillFactor: 1)|0)
		}return this._screenSprites
	},_getScreenSpriteForScatterPoint:function(a,b,c){var d=this.SPRITEATTRIB.h[a
		];a=c.getImage(a+((ya.toFloat(fc.getRandomInt())%ya.toFloat(d.n)|0)+1));if(null==a)return null;c=fc.getRandomNumber()*d.scalerange+d.scale;var e=Math.abs(79-a.width)|0,g=Math.abs(45-a.height)|0;e=ya.toFloat(fc.getRandomInt())%ya.toFloat(e)|0;g=ya.toFloat(fc.getRandomInt())%ya.toFloat(g)|0;g+=d.yoffset|0;var k=new feb;k.bm=a;k.x=e+b.x|0;k.y=g+b.y|0;k.zoff=
d.zoff;k.scale=c;k.smooth=d.smooth;return k
	},_getKeyFromComposition:function(a){return a
	},_createScatterpoints:function(a){var b=[];b.push(new p(a.screenX,a.screenY));if(a.nw==a.tileTypeId){var c=new p;c.x=a.screenX-pd.QUARTER_HEX_STEP_WIDTH;c.y=a.screenY-pd.HALF_HEX_STEP_HEIGTH;b.push(c)
		}a.ne==a.tileTypeId&&(c=new p,c.x=a.screenX+pd.QUARTER_HEX_STEP_WIDTH,c.y=a.screenY-pd.HALF_HEX_STEP_HEIGTH,b.push(c));a.ww==a.tileTypeId&&(c=new p,c.x=a.screenX-pd.HALF_HEX_STEP_WIDTH,c.y=a.screenY,b.push(c));return b
	},
__class__:Xv
});var jo=function(){this.SPRITEATTRIB=new x;this._initRockRenderer()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.RockRenderer"
]=jo;jo.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.RockRenderer";jo.__super__=Xv;jo.prototype=l(Xv.prototype,
{get_handledTerrainTypes:function(){return jo.rr_terrainType
	},_initRockRenderer:function(){this._createLandscapeSpriteAttributes("rocks",
		4,
		0,.6,.25,
		-10,.25)
	},__class__:jo
});var oma=function(){jo.call(this);
this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureRockRenderer"
]=oma;oma.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureRockRenderer";oma.__super__=jo;oma.prototype=l(jo.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("rocks",
		5,
		0,.6,.25,
		-10,.25)
	},get_handledTerrainTypes:function(){return oma.terrainType
	},__class__:oma
});var Hq=function(){this.SPRITEATTRIB=new x;this._initRubbleRenderer()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.RubbleRenderer"
]=
Hq;Hq.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.RubbleRenderer";Hq.__super__=Mh;Hq.prototype=l(Mh.prototype,
{generateHex:function(a,b){return[this._createScreenSprite(a.screenX-pd.QUARTER_HEX_STEP_WIDTH,a.screenY+1,
			"rubble",b,
			null,!0,
			-2147483647,
			1)
		]
	},_initRubbleRenderer:function(){this._createLandscapeSpriteAttributes("rubble",
		6,
		200,
		0,
		1,
		-10)
	},get_handledTerrainTypes:function(){return Hq.rr_terrainType
	},__class__:Hq
});var meb=function(){Hq.call(this);this._init()
};
h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureRubbleRenderer"
]=meb;meb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureRubbleRenderer";meb.__super__=Hq;meb.prototype=l(Hq.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("rubble",
		8,
		200,
		0,
		1,
		-10)
	},__class__:meb
});var h_=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureSwampRenderer"
]=
h_;h_.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureSwampRenderer";h_.__super__=Mh;h_.prototype=l(Mh.prototype,
{generateHex:function(a,b){return[this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+5|0,a.screenY+1|0,
			"swamp",b,
			null,!0,
			-2147483647,
			1)
		]
	},get_handledTerrainTypes:function(){return h_.terrainType
	},_init:function(){this._createLandscapeSpriteAttributes("swamp",
		2,
		50,
		0,
		1,
		0,
		1)
	},__class__:h_
});var Yi=function(){this.SPRITEATTRIB=new x;this._init()
};
h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.DarkWaterRenderer"
]=Yi;Yi.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.DarkWaterRenderer";Yi.__super__=Mh;Yi.prototype=l(Mh.prototype,
{generateHex:function(a,b){this._reflib=b;this._screenSprites=[];var c=a.screenX-pd.HALF_HEX_STEP_WIDTH+10,d=a.screenY;b=this._createScreenSprite(c,d,this.get_waterTileKey(),b,a.tileTypeId,!0,
		-2147483647,
		1);null!=b&&this._screenSprites.push(b);this._addBeachScreenSprites(a,
c,d);return this._screenSprites
	},_init:function(){this._createLandscapeSpriteAttributes("tmrwater",
		2,
		-300,.1,.7);this._createLandscapeSpriteAttributes("hexnwbeach",
		1,
		-150,
		0,
		1.3);this._createLandscapeSpriteAttributes("hexnebeach",
		1,
		-150,
		0,
		1.3);this._createLandscapeSpriteAttributes("hexeebeach",
		1,
		-150,
		0,
		1.5);this._createLandscapeSpriteAttributes("hexwwbeach",
		1,
		-150,
		0,
		1.5);this._createLandscapeSpriteAttributes("hexswbeach",
		1,
		-150,
		0,
		1.7);this._createLandscapeSpriteAttributes("hexsebeach",
		1,
		-150,
		0,
		1.7);
this._createLandscapeSpriteAttributes("waterblob",
		1,
		-150,
		0,
		1);this._createBeachtileNameLookup()
	},_createBeachtileNameLookup:function(){if(null==Yi._beachtileNameLookup){var a=new x;a.h.nw="hexnwbeach";a.h.ne="hexnebeach";a.h.ee="hexeebeach";a.h.ww="hexwwbeach";a.h.sw="hexswbeach";a.h.se="hexsebeach";Yi._beachtileNameLookup=a
		}
	},_addBeachScreenSprites:function(a,b,c){for(var d=0,e=Wz.NEIGHBOURS.length-1;0<=e;){var g=e--,k=Wz.NEIGHBOURS[g
			];if(a.getNeighbourTileId(k)!=a.tileTypeId){var t=Wz.NEIGHBOURS_OFFSETS[g
				];
g=b+t.x|0;g+=ya.toFloat(ya.toFloat(fc.getRandomInt())%ya.toFloat(4)|0)-2|0;t=c+t.y|0;t+=ya.toFloat(ya.toFloat(fc.getRandomInt())%ya.toFloat(4)|0)-2|0;k=this._createScreenSprite(g,t,Yi._beachtileNameLookup.h[k
				],this._reflib,Yi._beachtileNameLookup.h[k
				],!0,
				-2147483647,
				1);null!=k&&this._screenSprites.push(k);++d
			}
		}this._addWaterBlobs(d,b,c)
	},_addWaterBlobs:function(a,b,c){a=2*a+1;for(a=(ya.toFloat(fc.getRandomInt())%ya.toFloat(a)|0)+1-1;1<=a;){--a;var d=pd.HALF_HEX_STEP_WIDTH,e=pd.HALF_HEX_STEP_HEIGTH;
b+=ya.toFloat(fc.getRandomInt())%d-d/2;c+=ya.toFloat(fc.getRandomInt())%e-e/2;d=this._createScreenSprite(b,c,
			"waterblob",this._reflib,
			"waterblob",!0,
			-2147483647,
			1);null!=d&&this._screenSprites.push(d)
		}
	},get_handledTerrainTypes:function(){return Yi.TERRAIN_TYPE
	},get_waterTileKey:function(){return"tmrwater"
	},__class__:Yi,__properties__:l(Mh.prototype.__properties__,
	{get_waterTileKey: "get_waterTileKey"
	})
});var keb=function(){Yi.call(this);this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureWaterRenderer"
]=
keb;keb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ArcticFutureWaterRenderer";keb.__super__=Yi;keb.prototype=l(Yi.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("tmrwater",
		2,
		-300,.1,.8);this._createLandscapeSpriteAttributes("hexnwbeach",
		1,
		-150,
		0,
		1.2);this._createLandscapeSpriteAttributes("hexnebeach",
		1,
		-150,
		0,
		1.2);this._createLandscapeSpriteAttributes("hexeebeach",
		1,
		-150,
		0,
		1.2);this._createLandscapeSpriteAttributes("hexwwbeach",
		1,
		-150,
		0,
		1.2);this._createLandscapeSpriteAttributes("hexswbeach",
		1,
		-150,
		0,
		1.2);this._createLandscapeSpriteAttributes("hexsebeach",
		1,
		-150,
		0,
		1.2);this._createBeachtileNameLookup()
	},_addBeachScreenSprites:function(a,b,c){for(var d=Wz.NEIGHBOURS.length-1;0<=d;){var e=d--,g=Wz.NEIGHBOURS[e
			];if(a.getNeighbourTileId(g)!=a.tileTypeId){var k=Wz.NEIGHBOURS_OFFSETS[e
				];e=b+k.x|0;e+=ya.toFloat(ya.toFloat(fc.getRandomInt())%ya.toFloat(4)|0)-2|0;k=c+k.y|0;k+=ya.toFloat(ya.toFloat(fc.getRandomInt())%ya.toFloat(4)|0)-2|0;g=this._createScreenSprite(e,k,Yi._beachtileNameLookup.h[g
				],
this._reflib,Yi._beachtileNameLookup.h[g
				],!0,
				-2147483647,
				1);null!=g&&this._screenSprites.push(g)
			}
		}
	},__class__:keb
});var Xo=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.BarbwireRenderer"
]=Xo;Xo.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.BarbwireRenderer";Xo.__super__=Mh;Xo.prototype=l(Mh.prototype,
{generateHex:function(a,b){var c=[];if(a.ne==a.tileTypeId){var d=a.screenX+Xo.NE_BARBWIRE_OFFSET.x|
0;var e=a.screenY+Xo.NE_BARBWIRE_OFFSET.y|0;d=this._createScreenSprite(d,e,
			"barbwire",b,
			"barbwire4");c.push(d)
		}a.nw==a.tileTypeId&&(d=a.screenX+Xo.NW_BARBWIRE_OFFSET.x|0,e=a.screenY+Xo.NW_BARBWIRE_OFFSET.y|0,d=this._createScreenSprite(d,e,
		"barbwire",b,
		"barbwire5"),c.push(d));a.ee==a.tileTypeId&&(d=a.screenX+Xo.EE_BARBWIRE_OFFSET.x|0,e=a.screenY+Xo.EE_BARBWIRE_OFFSET.y|0,d=this._createScreenSprite(d,e,
		"barbwire",b,
		"barbwire2"),c.push(d));d=a.screenX-pd.HALF_HEX_STEP_WIDTH+Xo.POST_OFFSET.x|0;e=a.screenY+
Xo.POST_OFFSET.y|0;d=this._createScreenSprite(d,e,
		"barbwire",b,
		"barbwire1",!1,
		500);c.push(d);return c
	},_init:function(){this._createLandscapeSpriteAttributes("barbwire",
		1,
		0,.1,
		1.2,
		0,
		1,!1)
	},get_handledTerrainTypes:function(){return Xo.TERRAINTYPE
	},__class__:Xo
});var Yo=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.BlockadeRenderer"
]=Yo;Yo.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.BlockadeRenderer";
Yo.__super__=Mh;Yo.prototype=l(Mh.prototype,
{generateHex:function(a,b){return[this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+10|0,a.screenY+1|0,a.tileTypeId,b,Yo._imageKeyLookup.h[a.tileTypeId
			],!1,
			-2147483647,
			1)
		]
	},_init:function(){this._createLandscapeSpriteAttributes("blockade_a",
		0,
		0,
		0,
		1,
		0);this._createLandscapeSpriteAttributes("blockade_b",
		0,
		0,
		0,
		1,
		0);this._createImageKeyLookup()
	},_createImageKeyLookup:function(){if(null==Yo._imageKeyLookup){var a=new x;a.h.blockade_a="blockade1";a.h.blockade_b=
"blockade2";Yo._imageKeyLookup=a
		}
	},get_handledTerrainTypes:function(){return Yo.TERRAINTYPE
	},__class__:Yo
});var k8=function(){this.SPRITEATTRIB=new x
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.BurntGroundRenderer"
]=k8;k8.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.BurntGroundRenderer";k8.__super__=Mh;k8.prototype=l(Mh.prototype,
{_addAshesOnGround:function(a,b){if(a.ne==a.tileTypeId){var c=a.screenX-pd.QUARTER_HEX_STEP_WIDTH|0;var d=a.screenY-
pd.HALF_HEX_STEP_HEIGTH|0;this._createAndStoreScreenSprite(c,d,
			"ashes",b)
		}a.nw==a.tileTypeId&&(c=a.screenX-3*pd.QUARTER_HEX_STEP_WIDTH|0,d=a.screenY-pd.HALF_HEX_STEP_HEIGTH|0,this._createAndStoreScreenSprite(c,d,
		"ashes",b));a.ee==a.tileTypeId&&(c=a.screenX|0,d=a.screenY|0,this._createAndStoreScreenSprite(c,d,
		"ashes",b));c=a.screenX-pd.HALF_HEX_STEP_WIDTH|0;d=a.screenY|0;this._createAndStoreScreenSprite(c,d,
		"ashes",b)
	},_createAndStoreScreenSprite:function(a,b,c,d){a=this._createScreenSprite(a,b,c,
d,
		null,!0);this._screenSprites.push(a)
	},__class__:k8
});var i8=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.BurntBushesRenderer"
]=i8;i8.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.BurntBushesRenderer";i8.__super__=k8;i8.prototype=l(k8.prototype,
{generateHex:function(a,b){var c=ya.toFloat(fc.getRandomInt())%ya.toFloat(4)|0,d=ya.toFloat(fc.getRandomInt());this._screenSprites=[this._createScreenSprite(a.screenX-
pd.HALF_HEX_STEP_WIDTH+c|0,a.screenY+(d%ya.toFloat(4)|0)|0,
			"burnedbushes",b,
			null,!0)
		];this._addAshesOnGround(a,b);return this._screenSprites
	},_init:function(){this._createLandscapeSpriteAttributes("burnedbushes",
		4,
		1,.4,
		1,
		-10,.7);this._createLandscapeSpriteAttributes("ashes",
		2,
		-600,
		0,
		1,
		9,.5)
	},get_handledTerrainTypes:function(){return i8.TERRAIN_TYPE
	},__class__:i8
});var h8=function(){this._lastRandomNumber=0;this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.BurntForrestRenderer"
]=
h8;h8.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.BurntForrestRenderer";h8.__super__=k8;h8.prototype=l(k8.prototype,
{generateHex:function(a,b){this._screenSprites=[];var c=this.SPRITEATTRIB.h.burnedforest,d=this._getNextIntWithNoRepetition(c.n)+1;d="burnedforest"+d;var e=ya.toFloat(fc.getRandomInt())%ya.toFloat(4)|0,g=ya.toFloat(fc.getRandomInt())%ya.toFloat(4)|0;e=a.screenX-pd.HALF_HEX_STEP_WIDTH+e|0;g=a.screenY+g|0;d=this._createScreenSprite(e,g,d,b,d);this._screenSprites.push(d);
d=this._getNextIntWithNoRepetition(c.n)+1;d="burnedforest"+d;e=ya.toFloat(fc.getRandomInt())%ya.toFloat(4)|0;g=ya.toFloat(ya.toFloat(fc.getRandomInt())%ya.toFloat(4)|0)+pd.QUARTER_HEX_STEP_WIDTH|0;e=20+(a.screenX-pd.HALF_HEX_STEP_WIDTH)+e|0;g=a.screenY+g|0;d=this._createScreenSprite(e,g,d,b,d);this._screenSprites.push(d);this._addAshesOnGround(a,b);return this._screenSprites
	},_init:function(){this._createLandscapeSpriteAttributes("burnedforest",
		5,
		0,
		0,
		1,
		-15);this._createLandscapeSpriteAttributes("burnedforest1",
		6,
		0,
		0,
		1,
		-75);this._createLandscapeSpriteAttributes("burnedforest2",
		6,
		0,
		0,
		1,
		-35);this._createLandscapeSpriteAttributes("burnedforest3",
		6,
		0,
		0,
		1,
		-55);this._createLandscapeSpriteAttributes("burnedforest4",
		6,
		0,
		0,
		1,
		-34);this._createLandscapeSpriteAttributes("burnedforest5",
		6,
		0,
		0,
		1,
		-32);this._createLandscapeSpriteAttributes("ashes",
		2,
		-600,
		0,
		1,
		9,.5)
	},_getNextIntWithNoRepetition:function(a){if(0==a||1==a)return ya.toFloat(fc.getRandomInt())%ya.toFloat(a)|0;var b=ya.toFloat(fc.getRandomInt())%ya.toFloat(a)|
0;return this._lastRandomNumber==b?this._getNextIntWithNoRepetition(a):this._lastRandomNumber=b
	},get_handledTerrainTypes:function(){return h8.TERRAIN_TYPE
	},__class__:h8
});var g8=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ClassicBushesRenderer"
]=g8;g8.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ClassicBushesRenderer";g8.__super__=Fu;g8.prototype=l(Fu.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("bushes",
		4,
		0,.5,.2,
		-10,.7)
	},get_tileKey:function(){return"bushes"
	},__class__:g8
});var AXa=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ClassicForestRenderer"
]=AXa;AXa.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ClassicForestRenderer";AXa.__super__=Zo;AXa.prototype=l(Zo.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("forest",
		6,
		0,.3,.3,
		-10)
	},get_tileKey:function(){return"forest"
	},__class__:AXa
});
var geb=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ContemporaryEraBushesRenderer"
]=geb;geb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ContemporaryEraBushesRenderer";geb.__super__=Fu;geb.prototype=l(Fu.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("contemporaryBushes",
		9,
		200,.7,.9,
		-10)
	},get_tileKey:function(){return"contemporaryBushes"
	},__class__:geb
});var heb=function(){this.SPRITEATTRIB=
new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ContemporaryEraForestRenderer"
]=heb;heb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ContemporaryEraForestRenderer";heb.__super__=Zo;heb.prototype=l(Zo.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("cetree",
		3,
		200,
		0,
		1,
		-10)
	},get_tileKey:function(){return"cetree"
	},__class__:heb
});var Jp=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.CraterRenderer"
]=
Jp;Jp.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.CraterRenderer";Jp.__super__=Mh;Jp.prototype=l(Mh.prototype,
{generateHex:function(a,b){return[this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+5|0,a.screenY+1|0,
			"crater",b,
			null,!0,
			-2147483647,
			1)
		]
	},_init:function(){this._createLandscapeSpriteAttributes("crater",
		4,
		50,
		0,
		1,
		0,
		1)
	},get_handledTerrainTypes:function(){return Jp.terrainType
	},__class__:Jp
});var pma=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.EgyptiansBushesRenderer"
]=
pma;pma.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.EgyptiansBushesRenderer";pma.__super__=Xv;pma.prototype=l(Xv.prototype,
{_getScreenSpriteForScatterPoint:function(a,b,c){var d=8-(ya.toFloat(fc.getRandomInt())%ya.toFloat(8)|0),e=ya.toFloat(fc.getRandomInt())%ya.toFloat(8)|0;a=this._createScreenSprite(b.x-pd.HALF_HEX_STEP_WIDTH+d|0,b.y-e|0,a,c,
		null,!0,
		-2147483647,.8-.2*Math.random());b=(a.bm.height-10)*a.scale-45;0<b&&(a.y-=.5*b|0);return a
	},_init:function(){this._createLandscapeSpriteAttributes("bushes",
		4,
		0,.5,.2,
		5,
		1)
	},get_handledTerrainTypes:function(){return pma.terrainType
	},__class__:pma
});var ueb=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.EgyptiansForestRenderer"
]=ueb;ueb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.EgyptiansForestRenderer";ueb.__super__=Zo;ueb.prototype=l(Zo.prototype,
{_createTree:function(a,b){var c=this.get_tileKey();return this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+
(20-40*Math.random()|0)|0,a.screenY-pd.HALF_HEX_STEP_HEIGTH+(3-6*Math.random()|0)|0,c,b,
		null,!0,
		-2147483647,.9-Math.random()/10)
	},_init:function(){this._createLandscapeSpriteAttributes("forest",
		6,
		0,.3,.3,
		-20)
	},get_tileKey:function(){return"forest"
	},__class__:ueb
});var rma=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.EgyptiansHillRenderer"
]=rma;rma.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.EgyptiansHillRenderer";
rma.__super__=Xv;rma.prototype=l(Xv.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("hills",
		3,
		-160,.5,.5,
		-5,.4)
	},get_handledTerrainTypes:function(){return rma.terrainType
	},__class__:rma
});var qma=function(){jo.call(this);this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.EgyptiansRockRenderer"
]=qma;qma.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.EgyptiansRockRenderer";qma.__super__=jo;qma.prototype=l(jo.prototype,
{get_handledTerrainTypes:function(){return qma.terrainType
	},_init:function(){this._createLandscapeSpriteAttributes("rocks",
		5,
		0,.6,.25,
		0,.25)
	},__class__:qma
});var ieb=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.FutureEraForestRenderer"
]=ieb;ieb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.FutureEraForestRenderer";ieb.__super__=Zo;ieb.prototype=l(Zo.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("forest",
		8,
		0,.3,.3,
		-10)
	},get_tileKey:function(){return"forest"
	},__class__:ieb
});var CJ=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.FutureEraHouseRenderer"
]=CJ;CJ.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.FutureEraHouseRenderer";CJ.__super__=Mh;CJ.prototype=l(Mh.prototype,
{generateHex:function(a,b){return[this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH,a.screenY+1,a.tileTypeId,b,this._imageKeyLookup.h[a.tileTypeId
			],
!1,
			-2147483647,
			1)
		]
	},_init:function(){this._createImageKeyLookup();this._createLandscapeSpriteAttributes("house_a",
		0,
		0,
		0,
		1,
		-40);this._createLandscapeSpriteAttributes("house_b",
		0,
		0,
		0,
		1,
		-25);this._createLandscapeSpriteAttributes("house_c",
		0,
		0,
		0,
		1,
		-35);this._createLandscapeSpriteAttributes("house_d",
		0,
		0,
		0,
		1,
		-30)
	},_createImageKeyLookup:function(){if(null==this._imageKeyLookup){var a=new x;a.h.house_a="futhouse0";a.h.house_b="futhouse1";a.h.house_c="futhouse2";a.h.house_d="futhouse3";a.h.house_e="futhouse0";
this._imageKeyLookup=a
		}
	},get_handledTerrainTypes:function(){return CJ.terrainType
	},__class__:CJ
});var Gq=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.HillRenderer"
]=Gq;Gq.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.HillRenderer";Gq.__super__=Xv;Gq.prototype=l(Xv.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("hills",
		4,
		-160,.5,.8,
		-10,.4)
	},get_handledTerrainTypes:function(){return Gq.terrainType
	},
__class__:Gq
});var FJ=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.HouseRenderer"
]=FJ;FJ.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.HouseRenderer";FJ.__super__=Mh;FJ.prototype=l(Mh.prototype,
{generateHex:function(a,b){return[this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH,a.screenY+1,a.tileTypeId,b,this._imageKeyLookup.h[a.tileTypeId
			],!1,
			-2147483647,
			1)
		]
	},_init:function(){this._createImageKeyLookup();
this._createLandscapeSpriteAttributes("house_a",
		0,
		0,
		0,
		1,
		-25);this._createLandscapeSpriteAttributes("house_b",
		0,
		0,
		0,
		1,
		-25);this._createLandscapeSpriteAttributes("house_c",
		0,
		0,
		0,
		1,
		-25);this._createLandscapeSpriteAttributes("house_d",
		0,
		0,
		0,
		1,
		-30);this._createLandscapeSpriteAttributes("house_e",
		0,
		0,
		0,
		1,
		-30)
	},_createImageKeyLookup:function(){if(null==this._imageKeyLookup){var a=new x;a.h.house_a="pod1";a.h.house_b="pod2";a.h.house_c="burger";a.h.house_d="mcdonald";a.h.house_e="pizza";this._imageKeyLookup=
a
		}
	},get_handledTerrainTypes:function(){return FJ.terrainType
	},__class__:FJ
});var sma=function(){jo.call(this)
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.JupiterMoonRockRenderer"
]=sma;sma.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.JupiterMoonRockRenderer";sma.__super__=jo;sma.prototype=l(jo.prototype,
{_initRockRenderer:function(){this._createLandscapeSpriteAttributes("rocks",
		5,
		0,.6,.25,
		-10,.25)
	},__class__:sma
});var EC=function(){Hq.call(this);
this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.VirtualFutureRubbleRenderer"
]=EC;EC.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.VirtualFutureRubbleRenderer";EC.__super__=Hq;EC.prototype=l(Hq.prototype,
{generateHex:function(a,b){return[this._createScreenSprite(a.screenX-pd.QUARTER_HEX_STEP_WIDTH-5,a.screenY+1,
			"rubble",b,
			null,!0,
			-2147483647,
			1)
		]
	},_init:function(){this._createLandscapeSpriteAttributes("rubble",
		5,
		-100,.2,.8,
		-10)
	},__class__:EC
});
var tma=function(){EC.call(this);EC.prototype._init.call(this);this._createLandscapeSpriteAttributes("rubble",
	4,
	-100,
	0,
	1,
	-10)
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.JupiterMoonRubbleRenderer"
]=tma;tma.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.JupiterMoonRubbleRenderer";tma.__super__=EC;tma.prototype=l(EC.prototype,
{__class__:tma
});var neb=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureBushesRenderer"
]=
neb;neb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureBushesRenderer";neb.__super__=Fu;neb.prototype=l(Fu.prototype,
{_createBush:function(a,b,c){var d=this.get_tileKey(),e=c-(ya.toFloat(fc.getRandomInt())%ya.toFloat(c)|0),g=ya.toFloat(fc.getRandomInt());return this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+e|0,a.screenY+(g%ya.toFloat(c)|0)|0,d,b,
		null,!0,
		-2147483647,.8-Math.abs(ya.toFloat(fc.getRandomInt())/ya.toFloat(2147483647))/10)
	},_init:function(){this._createLandscapeSpriteAttributes("bushes",
		4,
		0,.2,
		1.2,
		-15,.7)
	},get_tileKey:function(){return"bushes"
	},__class__:neb
});var oeb=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureForestRenderer"
]=oeb;oeb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureForestRenderer";oeb.__super__=Zo;oeb.prototype=l(Zo.prototype,
{_createTree:function(a,b){var c=this.get_tileKey(),d=35-(ya.toFloat(fc.getRandomInt())%ya.toFloat(50)|0),e=
ya.toFloat(fc.getRandomInt());return this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+d|0,a.screenY-pd.HALF_HEX_STEP_HEIGTH+(e%ya.toFloat(6)|0)|0,c,b,
		null,!0)
	},_init:function(){this._createLandscapeSpriteAttributes("forest",
		4,
		0,.2,.8,
		-10)
	},get_tileKey:function(){return"forest"
	},__class__:oeb
});var i_=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureHouseRenderer"
]=i_;i_.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureHouseRenderer";
i_.__super__=Mh;i_.prototype=l(Mh.prototype,
{generateHex:function(a,b){return[this._createScreenSprite(a.screenX-(pd.HALF_HEX_STEP_WIDTH-10),a.screenY+1,a.tileTypeId,b,this._imageKeyLookup.h[a.tileTypeId
			],!1,
			-2147483647,
			1)
		]
	},_init:function(){this._createImageKeyLookup();this._createLandscapeSpriteAttributes("house_a",
		0,
		0,
		0,
		1.05,
		-7);this._createLandscapeSpriteAttributes("house_b",
		0,
		0,
		0,
		1.05,
		-7)
	},_createImageKeyLookup:function(){if(null==this._imageKeyLookup){var a=new x;a.h.house_a="farfuthouse0";
a.h.house_b="farfuthouse1";this._imageKeyLookup=a
		}
	},get_handledTerrainTypes:function(){return i_.terrainType
	},__class__:i_
});var j_=function(){jo.call(this);this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureRockRenderer"
]=j_;j_.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureRockRenderer";j_.__super__=jo;j_.prototype=l(jo.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("rocks",
		5,
		0,.6,.25,
		0,
.25)
	},__class__:j_
});var peb=function(){Hq.call(this);this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureRubbleRenderer"
]=peb;peb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureRubbleRenderer";peb.__super__=Hq;peb.prototype=l(Hq.prototype,
{generateHex:function(a,b){return[this._createScreenSprite(a.screenX-pd.QUARTER_HEX_STEP_WIDTH-5,a.screenY+1,
			"rubble",b,
			null,!0,
			-2147483647,
			1)
		]
	},_init:function(){this._createLandscapeSpriteAttributes("rubble",
		6,
		200,.2,
		1,
		-10)
	},__class__:peb
});var k_=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureSwampRenderer"
]=k_;k_.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureSwampRenderer";k_.__super__=Xv;k_.prototype=l(Xv.prototype,
{generateHex:function(a,b){return[this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+5|0,a.screenY+1|0,
			"swamp",b,
			null,!0,
			-2147483647,
			1)
		].concat(Xv.prototype.generateHex.call(this,
a,b))
	},_getKeyFromComposition:function(a){return"gras"
	},_init:function(){this._createLandscapeSpriteAttributes("gras",
		3,
		0,.5,.1,
		-10,
		5);this._createLandscapeSpriteAttributes("swamp",
		2,
		-200,.1,
		1,
		0,
		1)
	},get_handledTerrainTypes:function(){return k_.TERRAIN_TYPE
	},__class__:k_
});var CXa=function(){Yi.call(this)
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureWaterRenderer"
]=CXa;CXa.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.OceanicFutureWaterRenderer";
CXa.__super__=Yi;CXa.prototype=l(Yi.prototype,
{_init:function(){Yi.prototype._init.call(this);this._createLandscapeSpriteAttributes("water",
		2,
		-300,
		0,.8)
	},get_waterTileKey:function(){return"water"
	},__class__:CXa
});var nma=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.PalmTreeForestRenderer"
]=nma;nma.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.PalmTreeForestRenderer";nma.__super__=Zo;nma.prototype=
l(Zo.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("palm",
		8,
		200,
		0,
		1,
		-73);this._createLandscapeSpriteAttributes("palm1",
		1,
		200,
		0,
		1,
		-17);this._createLandscapeSpriteAttributes("palm2",
		1,
		200,
		0,
		1,
		-27);this._createLandscapeSpriteAttributes("palm3",
		1,
		200,
		0,
		1,
		-24);this._createLandscapeSpriteAttributes("palm4",
		1,
		200,
		0,
		1,
		-25);this._createLandscapeSpriteAttributes("palm5",
		1,
		200,
		0,
		1,
		-27);this._createLandscapeSpriteAttributes("palm6",
		1,
		200,
		0,
		1,
		-25);this._createLandscapeSpriteAttributes("palm7",
		1,
		200,
		0,
		1,
		-25);this._createLandscapeSpriteAttributes("palm8",
		1,
		200,
		0,
		1,
		-25)
	},_createTree:function(a,b){var c=this.get_tileKey(),d=this.SPRITEATTRIB.h[c
		];c+=fa.string(ya.toFloat((ya.toFloat(fc.getRandomInt())%ya.toFloat(d.n)|0)+1));d=35-(ya.toFloat(fc.getRandomInt())%ya.toFloat(70)|0);var e=ya.toFloat(fc.getRandomInt())%ya.toFloat(6)|0,g=ya.toFloat(fc.getRandomInt());return this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+d|0,a.screenY-pd.HALF_HEX_STEP_HEIGTH+e|0,c,b,
		null,!1,
		-2147483647,
		1-
Math.abs(g/ya.toFloat(2147483647))/3)
	},get_tileKey:function(){return"palm"
	},__class__:nma
});var io=function(){};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.PlainRenderer"
]=io;io.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.PlainRenderer";io.__interfaces__=[j8
];io.prototype={generateHex:function(a,b){return[]
	},get_handledTerrainTypes:function(){return io.terrainType
	},__class__:io,__properties__: {get_handledTerrainTypes: "get_handledTerrainTypes"
	}
};
var BXa=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.PostModernEraBushesRenderer"
]=BXa;BXa.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.PostModernEraBushesRenderer";BXa.__super__=Fu;BXa.prototype=l(Fu.prototype,
{_init:function(){this._createLandscapeSpriteAttributes("junglebushes",
		5,
		200,.7,.9,
		-10)
	},get_tileKey:function(){return"junglebushes"
	},__class__:BXa
});var EJ=function(){this._init()
};
h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ProgressiveEraBushesRenderer"
]=EJ;EJ.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ProgressiveEraBushesRenderer";EJ.__interfaces__=[j8
];EJ.prototype={generateHex:function(a,b){return ya.gt(3,ya.toFloat(fc.getRandomInt())%ya.toFloat(10)|0)?EJ.burntBushesRenderer.generateHex(a,b):EJ.classicBushesRenderer.generateHex(a,b)
	},_init:function(){null==EJ.burntBushesRenderer&&(EJ.burntBushesRenderer=new i8,
EJ.classicBushesRenderer=new g8)
	},get_handledTerrainTypes:function(){return EJ.TERRAIN_TYPE
	},__class__:EJ,__properties__: {get_handledTerrainTypes: "get_handledTerrainTypes"
	}
};var DJ=function(){this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.ProgressiveEraForrestRenderer"
]=DJ;DJ.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.ProgressiveEraForrestRenderer";DJ.__interfaces__=[j8
];DJ.prototype={generateHex:function(a,b){return ya.gt(3,
ya.toFloat(fc.getRandomInt())%ya.toFloat(10)|0)?DJ.burntForrestRenderer.generateHex(a,b):DJ.classicForestRenderer.generateHex(a,b)
	},_init:function(){null==DJ.burntForrestRenderer&&(DJ.burntForrestRenderer=new h8,DJ.classicForestRenderer=new AXa)
	},get_handledTerrainTypes:function(){return DJ.TERRAIN_TYPE
	},__class__:DJ,__properties__: {get_handledTerrainTypes: "get_handledTerrainTypes"
	}
};var Ix=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.SandbagCircleRenderer"
]=
Ix;Ix.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.SandbagCircleRenderer";Ix.__super__=Mh;Ix.prototype=l(Mh.prototype,
{generateHex:function(a,b){return[this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+5,a.screenY+1,
			"sandbagcircle",b,
			null,!0,
			-2147483647,
			1)
		]
	},_init:function(){this._createLandscapeSpriteAttributes("sandbagcircle",
		3,
		50,
		0,
		1,
		0,
		1)
	},get_handledTerrainTypes:function(){return Ix.terrainType
	},__class__:Ix
});var seb=function(){EC.call(this);EC.prototype._init.call(this);
this._createLandscapeSpriteAttributes("rubble",
	4,
	-100,
	0,
	1,
	-10)
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.SpaceAgeMarsRubbleRenderer"
]=seb;seb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.SpaceAgeMarsRubbleRenderer";seb.__super__=EC;seb.prototype=l(EC.prototype,
{__class__:seb
});var CC=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.SwampRenderer"
]=CC;CC.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.SwampRenderer";
CC.__super__=Xv;CC.prototype=l(Xv.prototype,
{_getKeyFromComposition:function(a){return 0==(ya.toFloat(fc.getRandomInt())%ya.toFloat(2)|0)?"gras": "sandboden_small"
	},_init:function(){this._createLandscapeSpriteAttributes("gras",
		4,
		0,.6,.25,
		-10,.25);this._createLandscapeSpriteAttributes("sandboden_small",
		6,
		-300,.2,.1,
		-10,
		1)
	},get_handledTerrainTypes:function(){return CC.TERRAIN_TYPE
	},__class__:CC
});var DC=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.TrenchRenderer"
]=
DC;DC.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.TrenchRenderer";DC.__super__=Mh;DC.prototype=l(Mh.prototype,
{generateHex:function(a,b){this._backgroundGuiReflib=b;this._screenSprites=[];b="";var c=a.tileTypeId;a.nw==c?b=a.se==c?"_nwse":a.sw==c?"_nwsw": "_nw":a.ne==c?b=a.se==c?"_nese":a.sw==c?"_nesw": "_ne":a.sw==a.tileTypeId?b="_sw":a.se==a.tileTypeId&&(b="_se");""!=b&&(this._addSandbagWalls(a,b),c=DC._offsetLookup.h[b
		],this._createAndAddScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+
c.x,a.screenY+c.y,
		"trench",
		"trench"+b));return this._screenSprites
	},_addSandbagWalls:function(a,b){
		-1!=b.indexOf("sw")?(this._addSandbagNextToTile(a.se)&&this._addSandbagWall(a.screenX-pd.QUARTER_HEX_STEP_WIDTH|0,a.screenY+pd.QUARTER_HEX_STEP_WIDTH|0,
		"_swne_"),this._addSandbagNextToTile(a.ww)&&this._addSandbagWall(a.screenX-79-pd.QUARTER_HEX_STEP_WIDTH|0,a.screenY+pd.QUARTER_HEX_STEP_WIDTH|0,
		"_swne_")): -1!=b.indexOf("se")&&(this._addSandbagNextToTile(a.ee)&&this._addSandbagWall(a.screenX+pd.QUARTER_HEX_STEP_WIDTH|
0,a.screenY+pd.QUARTER_HEX_STEP_WIDTH|0,
		"_nwse_"),this._addSandbagNextToTile(a.sw)&&this._addSandbagWall(a.screenX-79+pd.QUARTER_HEX_STEP_WIDTH|0,a.screenY+pd.QUARTER_HEX_STEP_WIDTH|0,
		"_nwse_"));"_nesw"==b?(this._addSandbagNextToTile(a.ee)&&this._addSandbagNextToTile(a.ne)&&this._addSandbagWall(a.screenX|0,a.screenY|0,
		"_swne_"),this._addSandbagNextToTile(a.ee)&&this._addSandbagNextToTile(a.sw)&&this._addSandbagWall(a.screenX-79|0,a.screenY|0,
		"_swne_")): "_nwse"==b&&(this._addSandbagNextToTile(a.ww)&&
this._addSandbagNextToTile(a.sw)&&this._addSandbagWall(a.screenX-79|0,a.screenY|0,
		"_nwse_"),this._addSandbagNextToTile(a.ww)&&this._addSandbagNextToTile(a.ne)&&this._addSandbagWall(a.screenX|0,a.screenY|0,
		"_nwse_"))
	},_addSandbagWall:function(a,b,c){this._createAndAddScreenSprite(a,b,
		"bagline",
		"bagline"+c,!0)
	},_createAndAddScreenSprite:function(a,b,c,d,e,g,k,t){null==t&&(t=!0);null==k&&(k=1);null==g&&(g=-2147483647);null==e&&(e=!1);a=this._createScreenSprite(a,b,c,this._backgroundGuiReflib,d,e,g,k,
t);null!=a&&this._screenSprites.push(a)
	},_initOffsetLookup:function(){if(null==DC._offsetLookup){var a=new x;a.h._nw=new p(-8,
			-6);a.h._ne=new p(2,
			-7);a.h._sw=new p(-10,
			1);a.h._se=new p(4,
			7);a.h._nese=new p(7,
			1);a.h._nwsw=new p(-10,
			0);a.h._nesw=new p(-3,
			0);a.h._nwse=new p(6,
			0);DC._offsetLookup=a
		}
	},_addSandbagNextToTile:function(a){return"water"==a||"rocks"==a?!1:!0
	},_init:function(){this._createLandscapeSpriteAttributes("trench",
		5,
		0,
		-50,
		1,
		0,
		1);this._createLandscapeSpriteAttributes("bagline",
		3,
		100,
		0,
		1,
		0,
		1);this._initOffsetLookup()
	},get_handledTerrainTypes:function(){return DC.terrainType
	},__class__:DC
});var teb=function(){Hq.call(this)
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.VenusRubbleRenderer"
]=teb;teb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.VenusRubbleRenderer";teb.__super__=Hq;teb.prototype=l(Hq.prototype,
{_initRubbleRenderer:function(){this._createLandscapeSpriteAttributes("rubble",
		4,
		200,
		0,
		1,
		-10)
	},__class__:teb
});var qeb=
function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.VirtualFutureBushesRenderer"
]=qeb;qeb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.VirtualFutureBushesRenderer";qeb.__super__=Fu;qeb.prototype=l(Fu.prototype,
{_createBush:function(a,b,c){var d=this.get_tileKey(),e=c-(ya.toFloat(fc.getRandomInt())%ya.toFloat(c)|0),g=ya.toFloat(fc.getRandomInt());return this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+
e|0,a.screenY+(g%ya.toFloat(c)|0)|0,d,b,
		null,!0,
		-2147483647,.6-Math.abs(ya.toFloat(fc.getRandomInt())/ya.toFloat(2147483647))/10)
	},_init:function(){this._createLandscapeSpriteAttributes("bushes",
		4,
		0,.2,
		1.2,
		-10,.7)
	},get_tileKey:function(){return"bushes"
	},__class__:qeb
});var reb=function(){this.SPRITEATTRIB=new x;this._init()
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.VirtualFutureForestRenderer"
]=reb;reb.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.VirtualFutureForestRenderer";
reb.__super__=Zo;reb.prototype=l(Zo.prototype,
{_createTree:function(a,b){var c=this.get_tileKey(),d=35-(ya.toFloat(fc.getRandomInt())%ya.toFloat(50)|0),e=ya.toFloat(fc.getRandomInt());return this._createScreenSprite(a.screenX-pd.HALF_HEX_STEP_WIDTH+d|0,a.screenY-pd.HALF_HEX_STEP_HEIGTH+(e%ya.toFloat(6)|0)|0,c,b,
		null,!0)
	},_init:function(){this._createLandscapeSpriteAttributes("forest",
		4,
		0,.2,.5,
		5)
	},get_tileKey:function(){return"forest"
	},__class__:reb
});var uF=function(){Yi.call(this)
};h[
	"de.innogames.strategycity.battle.rendering.background.tilerenderers.WaterRenderer"
]=
uF;uF.__name__="de.innogames.strategycity.battle.rendering.background.tilerenderers.WaterRenderer";uF.__super__=Yi;uF.prototype=l(Yi.prototype,
{_init:function(){Yi.prototype._init.call(this);this._createLandscapeSpriteAttributes("gras",
		5,
		0,.3,.3,
		0,
		1.5);this._createLandscapeSpriteAttributes("water",
		2,
		-300,
		0,.8)
	},_addBeachScreenSprites:function(a,b,c){Yi.prototype._addBeachScreenSprites.call(this,a,b,c);this._addGrasToBeaches(a,b,c)
	},_addGrasToBeaches:function(a,b,c){for(var d=Wz.NEIGHBOURS.length-
1;0<=d;){var e=d--;if(a.getNeighbourTileId(Wz.NEIGHBOURS[e
			])!=a.tileTypeId){var g=Wz.NEIGHBOURS_OFFSETS[e
				];e=b+1.5*g.x|0;g=c+1.5*g.y|0;for(var k=0;6>k;){++k;var t=this._createScreenSprite(e+(ya.toFloat(ya.toFloat(fc.getRandomInt())%ya.toFloat(20)|0)-10|0),g+(ya.toFloat(ya.toFloat(fc.getRandomInt())%ya.toFloat(20)|0)-10|0),
					"gras",this._reflib,
					"gras",!0,
					-2147483647,
					1);null!=t&&this._screenSprites.push(t)
				}
			}
		}
	},get_waterTileKey:function(){return"water"
	},__class__:uF
});var web=function(a,b,c){this.tileId=
a;this.tileX=b;this.tileY=c
};h[
	"de.innogames.strategycity.battle.rendering.data.BatchDrawRequest"
]=web;web.__name__="de.innogames.strategycity.battle.rendering.data.BatchDrawRequest";web.prototype={__class__:web
};var yXa=function(){};h[
	"de.innogames.strategycity.battle.rendering.data.MapOverlayBatchRenderer"
]=yXa;yXa.__name__="de.innogames.strategycity.battle.rendering.data.MapOverlayBatchRenderer";yXa.prototype={draw:function(a,b,c){this.steps.push(new web(a,b,c))
	},clear:function(){this.steps=[new web(0,
			0,
			0)
		]
	},__class__:yXa
};var Wz=function(){this.screenX=this.screenY=0
};h[
	"de.innogames.strategycity.battle.rendering.data.TileData"
]=Wz;Wz.__name__="de.innogames.strategycity.battle.rendering.data.TileData";Wz.prototype={getNeighbourTileId:function(a){return gb.field(this,a)
	},__class__:Wz
};var mma=function(a,b){D.call(this,a,!1,!1);this._unit=b
};h[
	"de.innogames.strategycity.battle.rendering.events.UnitMoveFinishedEvent"
]=mma;mma.__name__="de.innogames.strategycity.battle.rendering.events.UnitMoveFinishedEvent";
mma.__super__=D;mma.prototype=l(D.prototype,
{clone:function(){return new mma(this.type,this._unit)
	},get_unit:function(){return this._unit
	},__class__:mma,__properties__: {get_unit: "get_unit"
	}
});var Gx=function(){this._runningRequests=0;xa.call(this)
};h[
	"de.innogames.strategycity.battle.service.BattlefieldService"
]=Gx;Gx.__name__="de.innogames.strategycity.battle.service.BattlefieldService";Gx.__instantiate=function(a){return new Gx
};Gx.__super__=xa;Gx.prototype=l(xa.prototype,
{startByBattleType:function(a,
b){return this._callWithPromise("startByBattleType",
		[a,b
		],!0)
	},continueBattle:function(){return this._callWithPromise("continueBattle",
		null,!0)
	},getReplay:function(a){return this._callWithPromise("getReplay",
		[a
		])
	},submitMove:function(a,b,c){return this._handleRunningRequests(this._callWithFuture("submitMove",
		[a,b,c
		],!0))
	},surrender:function(a){return this._handleRunningRequests(this._callWithFuture("surrender",
		[a
		],!0))
	},surrenderWave:function(){this.gateway.call(new Ec("BattlefieldService",
		"surrenderWave"),
!0)
	},getArmyPreview:function(a){return this._callWithFuture("getArmyPreview",
		[a
		],!0)
	},retreatRunningBattle:function(){this.gateway.call(new Ec("BattlefieldService",
		"retreatRunningBattle"),!0)
	},resetService:function(){this._runningRequests=0
	},get_serviceName:function(){return"BattlefieldService"
	},get_hasRunningRequests:function(){return 0<this._runningRequests
	},_handleRunningRequests:function(a){var b=this;this._runningRequests++;a.handle(function(){b._runningRequests--
		});return a
	},__class__:Gx,__properties__:l(xa.prototype.__properties__,
	{get_hasRunningRequests: "get_hasRunningRequests"
	})
});var EXa=function(){};h[
	"tutorial.instructions.ITutorialInstruction"
]=EXa;EXa.__name__="tutorial.instructions.ITutorialInstruction";EXa.__isInterface__=!0;EXa.prototype={__class__:EXa
};var Pd=function(){};h[
	"tutorial.instructions.actions.ITutorialAction"
]=Pd;Pd.__name__="tutorial.instructions.actions.ITutorialAction";Pd.__isInterface__=!0;Pd.__interfaces__=[EXa
];Pd.prototype={__class__:Pd
};var Ldb=function(a){this._injector=a
};h[
	"de.innogames.strategycity.battle.tutorial.actions.BattleEndTurnAction"
]=
Ldb;Ldb.__name__="de.innogames.strategycity.battle.tutorial.actions.BattleEndTurnAction";Ldb.__interfaces__=[Pd
];Ldb.prototype={execute:function(a,b){this._injector.getInstance(Wv).addLockListener(m(this,this._onBattleLockchanged))
	},_onBattleLockchanged:function(a,b){b||(a.removeLockListener(m(this,this._onBattleLockchanged)),a.hasPlayerMovePath()&&a.playerCommandEndTurn())
	},dispose:function(){},__class__:Ldb
};var Kdb=function(){};h[
	"de.innogames.strategycity.battle.tutorial.actions.SetSingleTileInteractableAction"
]=
Kdb;Kdb.__name__="de.innogames.strategycity.battle.tutorial.actions.SetSingleTileInteractableAction";Kdb.__interfaces__=[Pd
];Kdb.prototype={execute:function(a,b){K.__cast(a,Ef).setSingleTileInteractable(b.tileX,b.tileY)
	},dispose:function(){},__class__:Kdb
};var Yv=function(a,b){this._container=a;this._highlightLayer=b;this._config=this._createConfig()
};h[
	"de.innogames.strategycity.shared.tutorial.actions.highlight.ShowHighlightAction"
]=Yv;Yv.__name__="de.innogames.strategycity.shared.tutorial.actions.highlight.ShowHighlightAction";
Yv.__interfaces__=[Pd
];Yv.prototype={execute:function(a,b){this._setTarget(a);this._config.parse(b);this._showHighlight();this._createResizeHandler();this._updateScale();this._addHighlightLayerToContainer();this._updateHighlightPosition()
	},dispose:function(){},_setTarget:function(a){this._target=K.__cast(a,jc)
	},_createConfig:function(){return new Xz
	},_getHighlightDestination:function(){var a=this._target.localToGlobal(oJ.instance);a.x+=this._config.get_offsetX();a.y+=this._config.get_offsetY();return a
	},
_updateHighlightPosition:function(){var a=this._config.get_type(),b=this._getHighlightDestination();"arrow"==a&&this._config.get_animate()?this._highlightLayer.moveHighlightTo(a,b.x|0,b.y|0,this._config.get_rotation()):(this._highlightLayer.setHighlightPosition(a,b.x|0,b.y|0),this._highlightLayer.setHighlightRotation(a,this._config.get_rotation()|0))
	},_onResize:function(a){this._updateHighlightPosition()
	},_onRemovedFromStage:function(a){this._highlightLayer.removeEventListener("removedFromStage",
m(this,this._onRemovedFromStage));a=this._resizeHandler;null!=a&&a.cancel()
	},_addHighlightLayerToContainer:function(){this._container.contains(this._highlightLayer)||(this._container.addChild(this._highlightLayer),this._highlightLayer.addEventListener("removedFromStage",m(this,this._onRemovedFromStage)))
	},_updateScale:function(){this._highlightLayer.setHighlightScale(this._config.get_type(),this._config.get_scaleX(),this._config.get_scaleY())
	},_showHighlight:function(){this._highlightLayer.showHighlight(this._config.get_type(),
this._config.get_assetName())
	},_createResizeHandler:function(){this._resizeHandler=this._highlightLayer.get_resizeSignal().listen(m(this,this._onResize))
	},__class__:Yv
};var Idb=function(a,b){Yv.call(this,a,b)
};h[
	"de.innogames.strategycity.battle.tutorial.actions.ShowHexfieldHighlightAction"
]=Idb;Idb.__name__="de.innogames.strategycity.battle.tutorial.actions.ShowHexfieldHighlightAction";Idb.__super__=Yv;Idb.prototype=l(Yv.prototype,
{_createConfig:function(){return new FXa
	},_getHighlightDestination:function(){var a=
this._config;a=a instanceof FXa?a:null;var b=Ef.calcHexScreenCenterAndScale(a.get_tileX(),a.get_tileY());b.x+=a.get_offsetX()+this._target.parent.get_x();b.y+=a.get_offsetY()+this._target.parent.get_y();return b
	},__class__:Idb
});var DN=function(a,b){this._container=a;this._modalLayer=b;this._config=this._createConfig()
};h[
	"de.innogames.strategycity.shared.tutorial.actions.modal.ShowModalLayerAction"
]=DN;DN.__name__="de.innogames.strategycity.shared.tutorial.actions.modal.ShowModalLayerAction";DN.__interfaces__=
[Pd
];DN.prototype={_createConfig:function(){return new FC
	},execute:function(a,b){this._config.parse(b);this._addStencils();this._updateColorAndTransparency();this._addModalLayerToContainer()
	},dispose:function(){},_addStencils:function(){this._modalLayer.clearStencils();var a=this._container.stage;if(null!=a){if(null==this._rectStencil)this._rectStencil=new GXa(0,a.stageHeight-this._config.get_stencilHeight(),this._config.get_stencilWidth(),this._config.get_stencilHeight());else{this._rectStencil.x=
0;a=a.stageHeight;var b=this._config.get_stencilHeight();this._rectStencil.y=a-b;this._rectStencil.width=this._config.get_stencilWidth();this._rectStencil.height=this._config.get_stencilHeight()
			}this._modalLayer.addStencil(this._rectStencil)
		}
	},_addModalLayerToContainer:function(){this._container.contains(this._modalLayer)||(this._container.addChild(this._modalLayer),this._fadeIn())
	},_onRemoveFromStage:function(a){this._modalLayer.removeEventListener("removedFromStage",m(this,this._onRemoveFromStage));
O.killTweensOf(this._modalLayer)
	},_updateColorAndTransparency:function(){this._modalLayer.set_color(ya.toFloat(this._config.get_color()));this._modalLayer.set_alpha(this._config.get_alpha())
	},_fadeIn:function(){null!=this._modalLayer.stage&&(this._modalLayer.addEventListener("removedFromStage",m(this,this._onRemoveFromStage)),this._modalLayer.set_alpha(0),O.killTweensOf(this._modalLayer),O._to(this._modalLayer,.3,
		{alpha:this._config.get_alpha()
		}))
	},__class__:DN
};var Zv=function(a,b){this._shapeWidth=
this._shapeHeight=100;this._shapeX=this._shapeY=0;DN.call(this,a,b)
};h[
	"de.innogames.strategycity.shared.tutorial.actions.spotlight.ShowSpotlightAction"
]=Zv;Zv.__name__="de.innogames.strategycity.shared.tutorial.actions.spotlight.ShowSpotlightAction";Zv.__super__=DN;Zv.prototype=l(DN.prototype,
{_createConfig:function(){return new Iq
	},_setTarget:function(a){this._target=K.__cast(a,jc)
	},execute:function(a,b){this._setTarget(a);DN.prototype.execute.call(this,a,b);this._createResizeHandler()
	},_addStencils:function(){DN.prototype._addStencils.call(this);
if(null!=this._container.stage){this._updateShape();var a=this._shapeX-.5*this._shapeWidth|0,b=this._shapeY-.5*this._shapeHeight|0;null==this._stencil?this._buildStencil(a,b):this._updateStencil(a,b);this._modalLayer.addStencil(this._stencil)
		}
	},_onRemoveFromStage:function(a){DN.prototype._onRemoveFromStage.call(this,a);a=this._resizeHandler;null!=a&&a.cancel()
	},_updateShape:function(){var a=this._config;a=a instanceof Iq?a:null;var b=this._target.localToGlobal(oJ.instance);this._shapeX=b.x+a.get_offsetX();
this._shapeY=b.y+a.get_offsetY();this._shapeWidth=a.get_width();this._shapeHeight=a.get_height()
	},_updateModal:function(){this._addStencils();this._modalLayer.update()
	},_onResize:function(a){this._updateModal()
	},_buildStencil:function(a,b){var c=this._config;"ellipse"==(c instanceof Iq?c:null).get_shape()?this._stencil=new xeb(a,b,this._shapeWidth|0,this._shapeHeight|0):(c=this._config,
		"rectangle"==(c instanceof Iq?c:null).get_shape()&&(this._stencil=new GXa(a,b,this._shapeWidth|0,this._shapeHeight|
0)))
	},_updateStencil:function(a,b){this._stencil.x=a;this._stencil.y=b;this._stencil.width=this._shapeWidth|0;this._stencil.height=this._shapeHeight|0
	},_createResizeHandler:function(){this._resizeHandler=this._modalLayer.get_resizeSignal().listen(m(this,this._onResize))
	},__class__:Zv
});var Jdb=function(a,b){Zv.call(this,a,b)
};h[
	"de.innogames.strategycity.battle.tutorial.actions.ShowHexfieldSpotlightAction"
]=Jdb;Jdb.__name__="de.innogames.strategycity.battle.tutorial.actions.ShowHexfieldSpotlightAction";
Jdb.__super__=Zv;Jdb.prototype=l(Zv.prototype,
{_createConfig:function(){return new HXa
	},_updateShape:function(){var a=this._config;a=a instanceof HXa?a:null;var b=Ef.calcHexScreenCenterAndScale(a.get_tileX(),a.get_tileY());this._shapeX=b.x+a.get_offsetX()+this._target.parent.get_x();this._shapeY=b.y+a.get_offsetY()+this._target.parent.get_y();this._shapeWidth=a.get_width();this._shapeHeight=a.get_height()
	},__class__:Jdb
});var Mdb=function(){};h[
	"de.innogames.strategycity.battle.tutorial.actions.ToggleHexfieldOverlayAction"
]=
Mdb;Mdb.__name__="de.innogames.strategycity.battle.tutorial.actions.ToggleHexfieldOverlayAction";Mdb.__interfaces__=[Pd
];Mdb.prototype={execute:function(a,b){K.__cast(a,Ef).setBattleOverlayEnabled(b.enabled)
	},dispose:function(){},__class__:Mdb
};var Xz=function(){this._assetName="tutorial_arrow";this._animate=!1;this._rotation=0;this._scaleX=this._scaleY=NaN;this._offsetX=this._offsetY=0
};h[
	"de.innogames.strategycity.shared.tutorial.actions.highlight.config.HighlightConfiguration"
]=Xz;Xz.__name__=
"de.innogames.strategycity.shared.tutorial.actions.highlight.config.HighlightConfiguration";Xz.prototype={parse:function(a){this._type=a.type;this._offsetX=null!=a.offsetX?a.offsetX: 0;this._offsetY=null!=a.offsetY?a.offsetY: 0;this._rotation=null!=a.rotation?a.rotation: 0;this._scaleX=null!=a.scaleX?a.scaleX: 1;this._scaleY=null!=a.scaleY?a.scaleY: 1;this._animate=null!=a.animate?a.animate:!0;this._assetName=null!=a.assetName?a.assetName: "tutorial_arrow"
	},get_type:function(){return this._type
	},get_offsetX:function(){return this._offsetX
	},
get_offsetY:function(){return this._offsetY
	},get_rotation:function(){return this._rotation
	},get_assetName:function(){return this._assetName
	},get_scaleX:function(){return this._scaleX
	},get_scaleY:function(){return this._scaleY
	},get_animate:function(){return this._animate
	},__class__:Xz,__properties__: {get_animate: "get_animate",get_scaleY: "get_scaleY",get_scaleX: "get_scaleX",get_assetName: "get_assetName",get_rotation: "get_rotation",get_offsetY: "get_offsetY",get_offsetX: "get_offsetX",get_type: "get_type"
	}
};
var FXa=function(){this._tileX=this._tileY=0;Xz.call(this)
};h[
	"de.innogames.strategycity.battle.tutorial.actions.config.HexfieldHighlightConfiguration"
]=FXa;FXa.__name__="de.innogames.strategycity.battle.tutorial.actions.config.HexfieldHighlightConfiguration";FXa.__super__=Xz;FXa.prototype=l(Xz.prototype,
{parse:function(a){Xz.prototype.parse.call(this,a);this._tileX=a.tileX;this._tileY=a.tileY
	},get_tileX:function(){return this._tileX
	},get_tileY:function(){return this._tileY
	},__class__:FXa,__properties__:l(Xz.prototype.__properties__,
	{get_tileY: "get_tileY",get_tileX: "get_tileX"
	})
});var FC=function(){this._stencilHeight=25;this._stencilWidth=210;this._color=-16777216;this._alpha=0
};h[
	"de.innogames.strategycity.shared.tutorial.actions.modal.config.ModalLayerConfiguration"
]=FC;FC.__name__="de.innogames.strategycity.shared.tutorial.actions.modal.config.ModalLayerConfiguration";FC.prototype={parse:function(a){this._alpha=null!=a.alpha?a.alpha: 0;this._color=null!=a.color?a.color: -16777216;this._stencilWidth=null!=a.stencilWidth?a.stencilWidth: 210;this._stencilHeight=null!=a.stencilHeight?a.stencilHeight: 25
	},get_alpha:function(){return this._alpha
	},get_color:function(){return this._color
	},get_stencilWidth:function(){return this._stencilWidth
	},get_stencilHeight:function(){return this._stencilHeight
	},__class__:FC,__properties__: {get_stencilHeight: "get_stencilHeight",get_stencilWidth: "get_stencilWidth",get_color: "get_color",get_alpha: "get_alpha"
	}
};var Iq=function(){this._width=this._height=100;this._offsetX=this._offsetY=0;FC.call(this)
};
h[
	"de.innogames.strategycity.shared.tutorial.actions.spotlight.config.SpotlightConfiguration"
]=Iq;Iq.__name__="de.innogames.strategycity.shared.tutorial.actions.spotlight.config.SpotlightConfiguration";Iq.__super__=FC;Iq.prototype=l(FC.prototype,
{parse:function(a){var b=null!=a.alpha;FC.prototype.parse.call(this,a);this._offsetX=null!=a.offsetX?a.offsetX: 0;this._offsetY=null!=a.offsetY?a.offsetY: 0;this._width=a.width;this._height=a.height;b||(this._alpha=.6);this._shape=null!=a.shape?a.shape: "ellipse"
	},
get_offsetX:function(){return this._offsetX
	},get_offsetY:function(){return this._offsetY
	},get_width:function(){return this._width
	},get_height:function(){return this._height
	},get_shape:function(){return this._shape
	},__class__:Iq,__properties__:l(FC.prototype.__properties__,
	{get_shape: "get_shape",get_height: "get_height",get_width: "get_width",get_offsetY: "get_offsetY",get_offsetX: "get_offsetX"
	})
});var HXa=function(){this._tileX=this._tileY=0;Iq.call(this)
};h[
	"de.innogames.strategycity.battle.tutorial.actions.config.HexfieldSpotlightConfiguration"
]=
HXa;HXa.__name__="de.innogames.strategycity.battle.tutorial.actions.config.HexfieldSpotlightConfiguration";HXa.__super__=Iq;HXa.prototype=l(Iq.prototype,
{parse:function(a){Iq.prototype.parse.call(this,a);this._tileX=a.tileX;this._tileY=a.tileY
	},get_tileX:function(){return this._tileX
	},get_tileY:function(){return this._tileY
	},__class__:HXa,__properties__:l(Iq.prototype.__properties__,
	{get_tileY: "get_tileY",get_tileX: "get_tileX"
	})
});var nj=function(){};h[
	"tutorial.instructions.triggers.ITutorialTrigger"
]=
nj;nj.__name__="tutorial.instructions.triggers.ITutorialTrigger";nj.__isInterface__=!0;nj.__interfaces__=[EXa
];nj.prototype={__class__:nj
};var Qdb=function(a){this._eventDispatcher=a
};h[
	"de.innogames.strategycity.battle.tutorial.triggers.BattleFinishedTrigger"
]=Qdb;Qdb.__name__="de.innogames.strategycity.battle.tutorial.triggers.BattleFinishedTrigger";Qdb.__interfaces__=[nj
];Qdb.prototype={execute:function(a,b,c){this._completeCallback=c;this._eventDispatcher.addEventListener("BattleTurnModelEvent/BATTLE_FINISHED",
m(this,this._onBattleFinished),!1,
		0,!0)
	},_onBattleFinished:function(a){this._eventDispatcher.removeEventListener("BattleTurnModelEvent/BATTLE_FINISHED",m(this,this._onBattleFinished));this._completeCallback(this)
	},dispose:function(){},__class__:Qdb
};var Ndb=function(){};h[
	"de.innogames.strategycity.battle.tutorial.triggers.BattlefieldOrderTrigger"
]=Ndb;Ndb.__name__="de.innogames.strategycity.battle.tutorial.triggers.BattlefieldOrderTrigger";Ndb.__interfaces__=[nj
];Ndb.prototype={execute:function(a,
b,c){this._target=K.__cast(a,Ef);this._completeCallback=c;this._target.addEventListener("BattleOrderEvent/MOVE",m(this,this._onOrderIssued))
	},dispose:function(){this._target.removeEventListener("BattleOrderEvent/MOVE",m(this,this._onOrderIssued));this._target.resetEntireMapInteractable()
	},_onOrderIssued:function(a){this._completeCallback(this)
	},__class__:Ndb
};var Odb=function(a,b){this._injector=a;this._eventDispatcher=b
};h[
	"de.innogames.strategycity.battle.tutorial.triggers.EnemyMoveFinishedTrigger"
]=
Odb;Odb.__name__="de.innogames.strategycity.battle.tutorial.triggers.EnemyMoveFinishedTrigger";Odb.__interfaces__=[nj
];Odb.prototype={execute:function(a,b,c){this._completeCallback=c;this._eventDispatcher.addEventListener("UnitMoveFinishedEvent/MOVE_FINISHED",m(this,this._onMoveFinished))
	},_onMoveFinished:function(a){this._injector.getInstance(GC).get_player_id()!=a.get_unit().ownerId&&this._completeCallback(this)
	},dispose:function(){this._eventDispatcher.removeEventListener("UnitMoveFinishedEvent/MOVE_FINISHED",
m(this,this._onMoveFinished))
	},__class__:Odb
};var Pdb=function(a){this._eventDispatcher=a
};h[
	"de.innogames.strategycity.battle.tutorial.triggers.EnemyUnitDiedTrigger"
]=Pdb;Pdb.__name__="de.innogames.strategycity.battle.tutorial.triggers.EnemyUnitDiedTrigger";Pdb.__interfaces__=[nj
];Pdb.prototype={execute:function(a,b,c){this._completeCallback=c;this._eventDispatcher.addEventListener("BattleUnitEvent/DIED",m(this,this._onUnitDied))
	},_onUnitDied:function(a){this._eventDispatcher.removeEventListener("BattleUnitEvent/DIED",
m(this,this._onUnitDied));this._completeCallback(this)
	},dispose:function(){this._eventDispatcher.removeEventListener("BattleUnitEvent/DIED",m(this,this._onUnitDied))
	},__class__:Pdb
};var gIb=function(a,b){this._unit=a;this._chivalryValue=b;this._canApplyAbility=!0
};h[
	"de.innogames.strategycity.battle.utils.BattleChivalryCache"
]=gIb;gIb.__name__="de.innogames.strategycity.battle.utils.BattleChivalryCache";gIb.prototype={disableAbility:function(){this._canApplyAbility=!1
	},apply:function(){this._canApplyAbility&&
(this._unit.chivalryBonus=this._chivalryValue)
	},__class__:gIb
};var Oc=function(a){this._realm=a;Oc.distanceScale=this._realm.state.distance_scale_factor
};h[
	"de.innogames.strategycity.battle.utils.BattleMapCalculator"
]=Oc;Oc.__name__="de.innogames.strategycity.battle.utils.BattleMapCalculator";Oc.isAdjacent=function(a,b){return 1==Oc.calcHexDistance(a,b)
};Oc.calcHexDistance=function(a,b){var c=b.x-a.x-(b.y>>1)+(a.y>>1);a=b.y-a.y;return(0<c==0<a?Math.abs(c+a)|0:Math.max(Math.abs(c),Math.abs(a))|0)|
0
};Oc.getUnitTypeRange=function(a){return Math.ceil(a.range/Oc.distanceScale)
};Oc.calculateDugInBonus=function(a,b){if(null!=b.abilities&&3<=Oc.calcHexDistance(a.pos,b.pos)){a=b.abilities;b=a.length;for(var c,d=0;d<b;)if(c=a[d++
		],c instanceof AN)return Math.max(0,(c instanceof AN?c:null).value)|0
	}return 0
};Oc.calculateCloseQuartersBonus=function(a,b){if(null!=a.abilities&&1==Oc.calcHexDistance(a.pos,b.pos)){a=a.abilities;b=a.length;for(var c,d=0;d<b;)if(c=a[d++
		],c instanceof zN)return(c instanceof
zN?c:null).value
	}return 0
};Oc.calculateCallOfDutyBonus=function(a){if(null!=a.abilities){a=a.abilities;for(var b=a.length,c,d=0;d<b;)if(c=a[d++
		],c instanceof e_)return(c instanceof e_?c:null).value
	}return 0
};Oc.calculateBlastBonus=function(a,b,c){if(null!=a.abilities){b=Oc.calcHexDistance(a.pos,b.pos);for(var d=0,e=a.abilities,g=e.length,k,t=0;t<g;)k=e[t++
		],k instanceof yN&&(d+=Math.max(0,Oc.getUnitTypeRange(a.get_unitType())-b)*(k instanceof yN?k:null).value*c|0);return d
	}return 0
};Oc.getReactiveArmorDamageCap=
function(a){if(null!=a.abilities){a=a.abilities;for(var b=a.length,c,d=0;d<b;)if(c=a[d++
		],c instanceof cT)return(c instanceof cT?c:null).value
	}return 0
};Oc.getReducedAttackPercent=function(a){if(null!=a.abilities){a=a.abilities;for(var b=a.length,c,d=0;d<b;)if(c=a[d++
		],c instanceof f_)return(c instanceof f_?c:null).value
	}return 0
};Oc.newPos=function(a,b){null==b&&(b=0);null==a&&(a=0);var c=new Du;c.x=a;c.y=b;return c
};Oc.copyPos=function(a){return Oc.newPos(a.x,a.y)
};Oc.setPos=function(a,b,c){a.x=
b;a.y=c;return a
};Oc.hasUnitBlast=function(a){return a.hasUnitAbility(yN)
};Oc.hasUnitPowerShot=function(a){return a.hasUnitAbility(ZS)
};Oc.findUnit=function(a,b){if(0==b)return null;a=a.state.unitsOrder.concat(a.state.retiredUnits);for(var c=a.length;0!=c--;){var d=a[c
		];if(d.unitId==b)return d
	}return null
};Oc.prototype={calcAdjacent:function(a,b,c){var d=a.x;a=a.y;null==c&&(c=new Du);if(1==b)return d+1<this._realm.map.width?Oc.setPos(c,d+1,a):null;if(4096==b)return 0<d?Oc.setPos(c,d-1,a):null;var e=
a&1;if(0!=(b&16)&&0>=a||0!=(b&256)&&a+1>=this._realm.map.height||0!=(b&4096)&&0==e&&0==d||0!=(b&1)&&1==e&&d+1>=this._realm.map.width)return null;var g=0!=(b&16)?-1: 1;return 0!=(b&4096)?Oc.setPos(c,d-(e^1),a+g): 0!=(b&1)?Oc.setPos(c,d+e,a+g):c
	},calcShortestPath:function(a,b,c,d,e,g){null==d&&(d=0);null==g&&(g=this.calcDistanceMap(a,c,d));c=this.toMapIndex(b.x,b.y);if(16777215==g[c
		])return 16777215;d=g[c
		];if(null==e)return d;for(b=Oc.copyPos(b);;){var k=g[this.toMapIndex(b.x,b.y)
			]|0;e.push(b);for(var t=
new Du,u=null,A=0,z=Oc.DIRECTIONS;A<z.length;)null!=this.calcAdjacent(b,z[A++
			],t)&&(c=this.toMapIndex(t.x,t.y),g[c
			]>=k||(k=g[c
			]|0,u=Oc.copyPos(t)));b=u;if(b==a||null==b)break
		}e.reverse();return d
	},countMovementHexes:function(a,b){for(var c=0,d=a.length;0!=d--;)a[d
		]<=b&&++c;return c
	},calcDistanceMap:function(a,b,c,d){null==d&&(d=16777215);null==c&&(c=0);c=this.calcBlockedByUnitsMap(c);for(var e=this._realm.map,g=[],k=0,t=e.width*e.height;k<t;)++k,g.push(16777215);e=new Du;k=this.toMapIndex(a.x,a.y);
a=[k
		];g[k
		]=0;for(var u=new Pb,A=null;0<a.length;){k=a.shift();u.remove(k);A=this.fromMapIndex(k,A);var z=g[k
			];k=0;for(t=Oc.DIRECTIONS;k<t.length;)if(null!=this.calcAdjacent(A,t[k++
			],e)){var J=this.toMapIndex(e.x,e.y);if(!c[J
				]){var T=this.getTileCosts(e,b);16777215<=T||-1==T||(T+=z,T>g[J
					]||T>d||(g[J
					]=T,u.h.hasOwnProperty(J)||(a.push(J),u.h[J
					]=!0)))
				}
			}
		}return g
	},calculateMovableTiles:function(a,b,c,d){null==d&&(d=this.calcDistanceMap(a.pos,a,b,c));a=this._getTilesOccupiedByOtherUnits();b=[];for(var e=
d.length,g=0;g<e;){var k=g++;d[k
			]<=c&&!a.h.hasOwnProperty(k)?b[k
			]=1:b[k
			]=0
		}return b
	},getTileCosts:function(a,b){a=this._realm.map.tiles[a.x
		][a.y
		];b=b.getMovementCost(a.typeId);return 0<b?b*this._realm.state.distance_scale_factor:a.movementCosts*this._realm.state.distance_scale_factor
	},calcPathCosts:function(a,b,c){null==c&&(c=0);var d=0;c=this.calcBlockedByUnitsMap(c);for(var e=null,g=0;g<a.length;){var k=a[g
			];++g;if(null!=e&&!Oc.isAdjacent(k,e)||c[this.toMapIndex(k.x,k.y)
			])return 16777215;d+=this.getTileCosts(k,
b)|0;if(16777215<=d)return 16777215;e=k
		}return d
	},calcBlockedByUnitsMap:function(a){for(var b=[],c=0,d=this._realm.map.width*this._realm.map.height;c<d;)++c,b.push(!1);if(0==a)return b;d=this._realm.state.unitsOrder;if(null!=d)for(c=0;c<d.length;){var e=d[c
			];++c;0<e.getCurrentHitpoints()&&0!=(e.teamFlag&a)&&(b[this.toMapIndex(e.pos.x,e.pos.y)
			]=!0)
		}return b
	},toMapIndex:function(a,b){return a+b*this._realm.map.width
	},fromMapIndex:function(a,b){null==b&&(b=new Du);var c=this._realm.map.width;b.x=a%c;
b.y=(a-b.x)/c|0;return b
	},isUnitWithSpecialAbilitiesAttackable:function(a,b,c){null==c&&(c=0);if("long_ranged"==a.get_unitType().unitClass&&!Oc.hasUnitPowerShot(a)&&b.isFlying())return!1;c=0<c?1==c:Oc.isAdjacent(a.pos,b.pos);return!this.isUnitStealthedOnField(b,this._realm.map.tiles[b.pos.x
		][b.pos.y
		].typeId)||c||Oc.hasUnitBlast(a)||Oc.hasUnitPowerShot(a)?!0:!1
	},isUnitStealthedOnField:function(a,b){return-1!=a.getIsStealthedOnFieldArray().indexOf(b)
	},getAttackables:function(a,b){for(var c=[],d=this._realm.state.unitsOrder,
e=d.length;0!=e--;){var g=d[e
			],k=g.pos;0>=g.getCurrentHitpoints()||0!=(g.teamFlag&b.teamFlag)||(k=Oc.calcHexDistance(a,k),k<=Oc.getUnitTypeRange(b.get_unitType())&&this.isUnitWithSpecialAbilitiesAttackable(b,g,k)&&c.push(g))
		}return c
	},calcAbilityBonuses:function(){this._resetLastStandAndChivalryBonus();this._initializeLastStandBonus();this._initializeChivalryBonus()
	},_getTilesOccupiedByOtherUnits:function(){var a=this._realm.state.unitsOrder,b=new Pb;if(null!=a)for(var c=0;c<a.length;){var d=a[c
			];
++c;var e=d.pos;0<d.getCurrentHitpoints()&&(d=this.toMapIndex(e.x,e.y),b.h[d
			]=!0)
		}return b
	},_resetLastStandAndChivalryBonus:function(){for(var a=0,b=this._realm.state.unitsOrder;a<b.length;){var c=b[a
			];++a;c.lastStandBonus=0;c.chivalryBonus=0
		}
	},_initializeLastStandBonus:function(){for(var a=0,b=this._realm.state.unitsOrder;a<b.length;){var c=b[a
			];++a;if(!(0<c.currentHitpoints)){var d=c.getAbilityByClass(c_);null!=d&&this._applyLastStandBonus(c.ownerId,d.value)
			}
		}
	},_applyLastStandBonus:function(a,b){for(var c=
0,d=this._realm.state.unitsOrder;c<d.length;){var e=d[c
			];++c;e.ownerId==a&&(e.lastStandBonus+=b)
		}
	},_initializeChivalryBonus:function(){var a=new Pb,b=this._realm.state.unitsOrder;if(null!=b)for(var c=0;c<b.length;){var d=b[c
			];++c;if(!(0>=d.currentHitpoints)){var e=d.getAbilityByClass(a_);null!=e&&(null!=a.h[d.ownerId
				]?a.h[d.ownerId
				].disableAbility():a.h[d.ownerId
				]=new gIb(d,e.value))
			}
		}for(a=a.iterator();a.hasNext();)a.next().apply()
	},__class__:Oc
};var lh=function(){};h[
	"de.innogames.strategycity.battle.utils.BattleTypeTools"
]=
lh;lh.__name__="de.innogames.strategycity.battle.utils.BattleTypeTools";lh.isPvPBattle=function(a){return a instanceof gT
};lh.isPvPArenaBattle=function(a){return a instanceof sF
};lh.isExpeditionBattle=function(a){return a instanceof g_
};lh.isQuestBattle=function(a){return a instanceof AC
};lh.isReplayBattle=function(a){return a instanceof zC
};lh.isBattlegroundBattle=function(a){return a instanceof BC
};lh.isCOPBattle=function(a){return a instanceof fT
};lh.isClanBattle=function(a){return a instanceof
Dq
};lh.isCampaignBattle=function(a){return a instanceof qF
};lh.isExplorationBattle=function(a){return a instanceof rF
};lh.isGuildRaidsBattle=function(a){return a instanceof CN
};var Fm=function(){};h[
	"de.innogames.strategycity.battle.utils.BattleUtils"
]=Fm;Fm.__name__="de.innogames.strategycity.battle.utils.BattleUtils";Fm.getHealCost=function(a){return 0==a?Qc.get_heal_dead_unit():(10-a)*Qc.get_heal_unit_hitpoint()|0
};Fm._dailyCalculationRunningTest=function(a,b,c){return a.isDailyCalculationRunning&&
b.battleType instanceof Dq?(c.dispatchEvent(new Qz("ServerUpdateEvent/DAILY_CALCULATION_RUNNING")),!0):!1
};Fm.unitHasActiveOnetimeArmor=function(a,b){a=a.getAbilityByClass(c8);return null==a?!1: 0<=a.used_at_step&&b<a.used_at_step?!0: 0<a.value
};Fm.getAnimationSpeedFactor=function(a){switch(a){case 1:return 3;case 2:return 9;default:return 1
	}
};var rXa=function(a){this._delayedRendererInit=!1;this._impactRenderers=[];L.call(this);this._landscapeRendererConfig=a
};h[
	"de.innogames.strategycity.battle.view.BattleView"
]=
rXa;rXa.__name__="de.innogames.strategycity.battle.view.BattleView";rXa.__super__=L;rXa.prototype=l(L.prototype,
{initialize:function(a){this.battleModel=a;a.realm!=this.realm&&(this.realm=a.realm,this._updateZoomLevelConfig(),null!=this._container&&(this.removeChild(this._container),this.removeChild(this._landscape),this.removeChild(this._hud)),this._hud=new yeb,this._container=new C,this._animationContainer=new C,this._landscape=veb.createConfigurableLandscapeRenderer(this.realm,this._landscapeRendererConfig),
this.addChild(this._landscape),this.addChild(this._hud),this.addChild(this._container),null!=this._battleAssets?this._finishInitialization():this._delayedRendererInit=!0)
	},handleSpecialAnimation:function(a){var b=a.unitPosition;switch(a.type){case "BattleSpecialAnimationEvent/CRITICAL_HIT":this._createCriticalHitAnimation(b);break;case "BattleSpecialAnimationEvent/POISON_DAMAGE":this._createPoisonDamageAnimation(b);break;case "BattleSpecialAnimationEvent/SPAWNING_GLITCH":this._createSpawningGlitchAnimation(b);
break;case "BattleSpecialAnimationEvent/SWARM_DECREASE":this._createSwarmBonusAnimation(b,!1);break;case "BattleSpecialAnimationEvent/SWARM_INCREASE":this._createSwarmBonusAnimation(b,!0);break;default:this._createImpactAnimation(a.type,b)
		}
	},_updateZoomLevel:function(){this._updateZoomLevelConfig();this._applyZoomLevel();this._drawBackground();this._centerContainer()
	},disposeBitmapData:function(){this._battlefield.dispose();for(var a=this._impactRenderers.length-1;0<=a;)this._removeImpactRenderer(this._impactRenderers[a--
		]);
a=this._landscape;(a instanceof pd?a:null).dispose();this._battlehexmap.dispose()
	},getBattlefield:function(){return this._battlefield
	},_onAddedToStage:function(a){L.prototype._onAddedToStage.call(this,a);var b=m(this,this._handleAssetsLoaded);yb.getInstance().load([
			"shared/tiles/generic_tiles",
			"battle/main/battle_main"
		]).handle(function(c){switch(c._hx_index){case 0:za.invoke(b,c.data);break;case 1:c=c.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+c.message))
			}
		});this.addEventListener("enterFrame",
m(this,this._onEnterFrame),!1,
		0,!0)
	},_onRemovedFromStage:function(a){L.prototype._onRemovedFromStage.call(this,a);this.removeEventListener("enterFrame",m(this,this._onEnterFrame))
	},_onResize:function(a){this.dispatchEvent(new D("resize"));this._updateZoomLevel()
	},_onEnterFrame:function(a){null!=this._battlehexmap&&this._battlehexmap.update();null!=this._battlefield&&this._battlefield.update()
	},_updateZoomLevelConfig:function(){this._battleZoom=HC.getZoom(new p(this.stage.stageWidth,this.stage.stageHeight),
new ln(this.realm.map.width,this.realm.map.height),this.battleModel.isLargeScaleBattle())
	},_applyZoomLevel:function(){this._landscape.set_scaleX(this._landscape.set_scaleY(1));this._battlehexmap.reinitHextiles(this._battleZoom);this._battlehexmap.update();this._landscape.set_scaleX(this._landscape.set_scaleY(this._battleZoom));this._battlehexmap.set_scaleX(this._battlehexmap.set_scaleY(this._battleZoom));this._battlefield.set_scaleX(this._battlefield.set_scaleY(this._battleZoom));this._animationContainer.set_scaleX(this._animationContainer.set_scaleY(this._battleZoom))
	},
_createImpactAnimation:function(a,b){var c=qn.createImpactRenderer(a);if(null!=c){var d=new AJ;d.callback=m(this,this._onGenericImpactFinished);d.direction=qn.getImpactDirection(a);c.setCurrentPosition(b);c.queueImpactAnimation(d);c.mouseEnabled=c.mouseChildren=!1;this._animationContainer.addChild(c);this._impactRenderers.push(c)
		}
	},_createSpawningGlitchAnimation:function(a){var b=qn.createImpactRenderer("BattleSpecialAnimationEvent/SPAWNING_GLITCH"),c=new AJ;c.callback=m(this,this._onGenericImpactFinished);
c.direction=qn.getImpactDirection("BattleSpecialAnimationEvent/SPAWNING_GLITCH");b.setCurrentPosition(a);b.queueImpactAnimation(c);b.mouseEnabled=b.mouseChildren=!1;b.set_scaleX(1.5);b.set_scaleY(1.5);this._animationContainer.addChild(b);this._impactRenderers.push(b)
	},_createCriticalHitAnimation:function(a){var b=new aa("icon_great_building_bonus_critical_hit_chance");this._animationContainer.addChild(b);a=Ef.calcHexScreenCenter(a.x,a.y);b.set_x(a.x-b.get_width()/2);b.set_y(a.y-b.get_height()-22.5);
O._to(b,
		3,
		{y:b.get_y()-30
		});var c=this._animationContainer;O._to(b,
		3,
		{alpha: 0,onComplete:function(){return c.removeChild(b)
			},ease:vF.easeIn
		})
	},_createPoisonDamageAnimation:function(a){var b=P.createArialTextfield(8772638,!1,
		13,
		3);b.set_autoSize(1);b.set_text("-1");this._animationContainer.addChild(b);a=Ef.calcHexScreenCenter(a.x,a.y);b.set_x(a.x-b.get_width()/2);b.set_y(a.y-b.get_height()-45);O._to(b,
		3,
		{y:b.get_y()-30
		});var c=this._animationContainer;O._to(b,
		3,
		{alpha: 0,onComplete:function(){return c.removeChild(b)
			},
ease:vF.easeIn
		})
	},_createSwarmBonusAnimation:function(a,b){var c=new C,d=new B(this._battleAssets.getImage("icon_overlay_swarm"));c.addChild(d);var e=P.createArialTextfield(b?8772638: 16012629,!0,
		24,
		3);e.set_autoSize(1);e.set_text(b?"+": "-");e.set_x(d.get_width());c.addChild(e);this._animationContainer.addChild(c);a=Ef.calcHexScreenCenter(a.x,a.y);c.set_x(a.x-c.get_width()/2);c.set_y(a.y-c.get_height()-45);O._to(c,
		3,
		{y:c.get_y()-30
		});var g=this._animationContainer;O._to(c,
		3,
		{alpha: 0,onComplete:function(){return g.removeChild(c)
			},
ease:vF.easeIn
		})
	},_removeImpactRenderer:function(a){null!=a&&(a.dispose(),a.set_visible(!1),null!=a.parent&&this._animationContainer.removeChild(a),Wa.remove(this._impactRenderers,a))
	},_onGenericImpactFinished:function(a,b){this._removeImpactRenderer(a)
	},_finishInitialization:function(){this._battlehexmap=new Ef(this.battleModel,this.parent,this._battleAssets,this._landscapeRendererConfig.hexGridTintColor);this._container.addChild(this._battlehexmap);this._battlefield=new YZ(this.battleModel,this._battleAssets);
this._container.addChild(this._battlefield);this._container.addChild(this._animationContainer);null!=this._hud&&(this.addChild(this._hud),this._hud.initialize(this.battleModel,this._battlehexmap));this._updateZoomLevel();this.dispatchEvent(new D("complete"))
	},_drawBackground:function(){null!=this._background&&this.removeChild(this._background);this._background=Ob.createBlackRectangle(this.stage.stageWidth,this.stage.stageHeight);this.addChildAt(this._background,
		0)
	},_centerContainer:function(){var a=
this._battlehexmap.getBattlefieldWidth()*this._battleZoom;this._container.set_x(Math.round((this.stage.stageWidth-a)/2));this._container.set_y(Math.round((this.stage.stageHeight-this._battlehexmap.get_height())/2));this._landscape.set_x(Math.round((this.stage.stageWidth-this._landscape.get_width())/2));this._landscape.set_y(Math.round((this.stage.stageHeight-this._landscape.get_height())/2))
	},_handleAssetsLoaded:function(a){var b=a.h[
			"shared/tiles/generic_tiles"
		];null==b&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "shared/tiles/generic_tiles" from LoadedReflibs.'));
this._sprites=b;b=a.h[
			"battle/main/battle_main"
		];null==b&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "battle/main/battle_main" from LoadedReflibs.'));this._battleAssets=b;this._delayedRendererInit&&this._finishInitialization()
	},get_battlefieldHexMap:function(){return this._battlehexmap
	},__class__:rXa,__properties__:l(L.prototype.__properties__,
	{get_battlefieldHexMap: "get_battlefieldHexMap"
	})
});var Pla=function(){};h[
	"de.innogames.strategycity.battle.view.BattleViewMediator"
]=
Pla;Pla.__name__="de.innogames.strategycity.battle.view.BattleViewMediator";Pla.__instantiate=function(a){return new Pla
};Pla.__super__=Ga;Pla.prototype=l(Ga.prototype,
{onRegister:function(){this.addModuleListener("BattleTurnModelEvent/AUTOBATTLE",m(this,this._onAutobattle));this.addContextListener("BattleRendererEvent/SPEED",m(this,this._onRenderSpeed));this.addContextListener("BattleSpecialAnimationEvent/UNIT_EXPLOSION",m(this,this._onSpecialAnimation));this.addContextListener("BattleSpecialAnimationEvent/UNIT_DRAGON_BREATH",
m(this,this._onSpecialAnimation));this.addContextListener("BattleSpecialAnimationEvent/UNIT_PLASMA_ARTILLERY",m(this,this._onSpecialAnimation));this.addContextListener("BattleSpecialAnimationEvent/UNIT_LASER",m(this,this._onSpecialAnimation));this.addContextListener("BattleSpecialAnimationEvent/CRITICAL_HIT",m(this,this._onSpecialAnimation));this.addContextListener("BattleSpecialAnimationEvent/POISON_DAMAGE",m(this,this._onSpecialAnimation));this.addContextListener("BattleSpecialAnimationEvent/SWARM_INCREASE",
m(this,this._onSpecialAnimation));this.addContextListener("BattleSpecialAnimationEvent/SWARM_DECREASE",m(this,this._onSpecialAnimation));this.addContextListener("BattleSpecialAnimationEvent/SPAWNING_GLITCH",m(this,this._onSpecialAnimation))
	},onRemove:function(){this._view.disposeBitmapData()
	},_onSpecialAnimation:function(a){this._view.handleSpecialAnimation(a)
	},_onRenderSpeed:function(a){this._view.getBattlefield().set_speed(Fm.getAnimationSpeedFactor(a.speedUp))
	},_onAutobattle:function(a){this.dispatch(new BJ("BattleRendererEvent/SPEED",
		2))
	},__construct:function(a){Ga.prototype.__construct.call(this,a);this._view=a.getInstanceForMapping("de.innogames.strategycity.battle.view.BattleView");return null
	},__class__:Pla
});var HC=function(){};h[
	"de.innogames.strategycity.battle.view.BattleZoomCalculator"
]=HC;HC.__name__="de.innogames.strategycity.battle.view.BattleZoomCalculator";HC.getZoom=function(a,b,c){a=HC._calculateScaleFactor(a,b);return a=fc.clamp(a,HC.MIN_SCALE_FACTOR,HC.MAX_SCALE_FACTOR)
};HC._calculateScaleFactor=function(a,b){a=
new p(a.x*HC.TOLERANCE,a.y*HC.TOLERANCE);return fc.clamp(Math.min(a.x/(79*(b.x+.5)),a.y/(45*b.y+210)),HC.MIN_SCALE_FACTOR,HC.MAX_SCALE_FACTOR)
};var Q7=function(a){La.call(this);this._showDelay=200;this.isGuildRaids=a
};h[
	"de.innogames.strategycity.battle.view.battlefield.components.TileTooltip"
]=Q7;Q7.__name__="de.innogames.strategycity.battle.view.battlefield.components.TileTooltip";Q7.__super__=La;Q7.prototype=l(La.prototype,
{addHeadline:function(a,b,c){null==c&&(c=0);a=new ig(a,
		280,!1,!0);a.set_textPaddingTop(6);
a.setIcon(b);this.addComponent(a,c)
	},addEntry:function(a,b,c,d){null==d&&(d=0);var e=new QZ;e.set_x(4);e.setBackgroundSize(272,
		30,
		200);e.addIcon(a);e.set_text(b);e.set_value(c);this.addComponent(e,d)
	},_show:function(a){null!=this.stage&&(this.set_x(this.parent.get_mouseX()),this.set_y(this.parent.get_mouseY()-15));La.prototype._show.call(this,a)
	},__class__:Q7
});var ZZ=function(){this._isShow=!0
};h[
	"de.innogames.strategycity.battle.view.battlefield.components.TileTooltipMediator"
]=ZZ;ZZ.__name__="de.innogames.strategycity.battle.view.battlefield.components.TileTooltipMediator";
ZZ.__instantiate=function(a){return new ZZ
};ZZ.__super__=V;ZZ.prototype=l(V.prototype,
{onRegister:function(){this._battleMapCalculator=new Oc(this.battleModel.realm);var a=K.__cast(this.view.data,Ydb);this._defenderTileTypeVO=a.get_defenderTile();this._defenderUnit=a.get_defender();this._attackerTileTypeVO=a.get_attackerTile();this._attackerUnit=a.get_attacker();this.view.setPadding(0,
		0,
		1,
		0);this._hasUnitAndGroundData()?this._isShow=this._addUnitAndGroundComponents():this._hasUnitData()?this._isShow=
this._addUnitComponents():this._hasGroundData()&&(this._isShow=this._addGroundComponents());this._addMovementCosts();this.view.show()
	},_addUnitAndGroundComponents:function(){return this._addUnitComponents()?!0:this._addGroundComponents(5)
	},_addMovementCosts:function(){var a=this._attackerUnit.getTerrainMovementCost(this._defenderTileTypeVO);16777215!=a?(a*=this.battleModel.realm.state.distance_scale_factor,this.view.addEntry(new aa("movement"),r.gettext("Movement Costs"),null==a?"null": ""+a,
		5)):this.view.addEntry(new aa("movement"),
r.gettext("Movement Costs"),
		"-",
		5)
	},_addUnitComponents:function(){var a=this.battleModel.getMinMaxAttackDamage(this._attackerUnit,this._defenderUnit,this._attackerTileTypeVO.typeId,this._defenderTileTypeVO.typeId),b=this.battleModel.getMinMaxRetaliationDamage(this._attackerUnit,this._defenderUnit,this._attackerTileTypeVO.typeId,this._defenderTileTypeVO.typeId,a);var c=Oc.calcHexDistance(this._attackerUnit.pos,this._defenderUnit.pos)<=Oc.getUnitTypeRange(this._attackerUnit.get_unitType())?r.gettext("%s - Click to attack"): "%s";this.view.addHeadline(U.printf(c,this._defenderUnit.get_unitType().name),new aa("military"));c=this.view.isGuildRaids?Yz.getGuildRaidsUnitClassIcon(this._defenderUnit.get_unitType().unitClass):this._defenderUnit.get_unitType().unitClass;this.view.addEntry(new aa(c),IXa.getClass(this._defenderUnit.get_unitType().unitClass),
		"",
		3);var d="rail_gun_unit"==this._attackerUnit.get_unitType().unitAssetName;c=this._battleMapCalculator.isUnitStealthedOnField(this._defenderUnit,this._defenderTileTypeVO.typeId);
var e=Oc.isAdjacent(this._attackerUnit.pos,this._defenderUnit.pos);if(!c||e||Oc.hasUnitBlast(this._attackerUnit)||d){d=this._attackerUnit.get_unitType().attackBonus.h.units;var g=this._defenderUnit.get_unitType().unitClass;g=d.h[g
			];d=null!=g?g: 0;g=this._attackerUnit.get_unitType().attackBonus.h.terrains.h[this._attackerTileTypeVO.typeId
			];d=d+(null!=g?g: 0)+this._attackerUnit.lastStandBonus;d+=this._attackerUnit.chivalryBonus;d+=this.battleModel.get_attackerRallyBonus();e&&(e=this._attackerUnit.getAbilityByClass(zN),
null!=e&&(d+=e.value));0!=d&&this.view.addEntry(new aa("attack"),r.gettext("Attack bonuses"),r.gettext("+")+(null==d?"null": ""+d),
			3);d=this._defenderUnit.get_unitType().defenseBonus.h.units;g=this._attackerUnit.get_unitType().unitClass;g=d.h[g
			];e=null!=g?g: 0;g=this._defenderUnit.get_unitType().defenseBonus.h.terrains.h[this._defenderTileTypeVO.typeId
			];e=e+(null!=g?g: 0)+Oc.calculateDugInBonus(this._attackerUnit,this._defenderUnit);e+=this._defenderUnit.lastStandBonus;e+=this._defenderUnit.chivalryBonus;
e+=this.battleModel.get_defenderRallyBonus();0!=e&&this.view.addEntry(new aa("defense"),r.gettext("Unit's defense bonuses"),r.gettext("+")+(null==e?"null": ""+e),
			3);this.view.addEntry(new aa("damage"),r.gettext("Expected damage"),a[
				0
			]+" - "+a[
				1
			],
			3);this.view.addEntry(new aa("damage"),r.gettext("Retaliation damage"),b[
				0
			]+" - "+b[
				1
			],
			3);c&&Oc.hasUnitBlast(this._attackerUnit)&&this.view.addEntry(new aa("blast"),r.gettext("Blast"),
			"",
			5)
		}else this.view.addEntry(new aa("stealth"),r.gettext("Immune to distance attacks"),
		"",
		5);return!0
	},_addGroundComponents:function(a){null==a&&(a=0);var b=this._getIconId(this._defenderTileTypeVO.typeId);this.view.addHeadline(this._defenderTileTypeVO.name,new aa(b),a);(a=this._battleMapCalculator.isUnitStealthedOnField(this._attackerUnit,this._defenderTileTypeVO.typeId))&&this.view.addEntry(new aa("stealth"),r.gettext("Immune to distance attacks"),
		"",
		5);var c=this._attackerUnit.get_unitType().attackBonus.h.terrains.h[this._defenderTileTypeVO.typeId
		];b=null!=c?c: 0;0!=b&&this.view.addEntry(new aa("attack"),
r.gettext("Terrain attack bonus"),r.gettext("+")+(null==b?"null": ""+b),
		3);c=this._attackerUnit.get_unitType().defenseBonus.h.terrains.h[this._defenderTileTypeVO.typeId
		];c=null!=c?c: 0;0!=c&&this.view.addEntry(new aa("defense"),r.gettext("Terrain defense bonus"),r.gettext("+")+(null==c?"null": ""+c),
		3);return 0!=b||0!=c||a?!0: "plain"!=this._defenderTileTypeVO.typeId
	},_getIconId:function(a){return-1!=a.indexOf("house_")?"house": -1!=a.indexOf("blockade_")?"barbwire":a
	},_hasUnitData:function(){return null!=
this._defenderUnit&&null!=this._attackerUnit?this._defenderUnit!=this._attackerUnit:!1
	},_hasGroundData:function(){return null!=this._defenderTileTypeVO?null!=this._attackerUnit:!1
	},_hasUnitAndGroundData:function(){return this._hasGroundData()?this._hasUnitData():!1
	},__construct:function(a){V.prototype.__construct.call(this,a);this.view=a.getInstanceForMapping("de.innogames.strategycity.battle.view.battlefield.components.TileTooltip");this.battleModel=a.getInstanceForMapping("de.innogames.strategycity.battle.model.BattleModel");
return null
	},__class__:ZZ
});var yeb=function(){L.call(this)
};h[
	"de.innogames.strategycity.battle.view.battlehud.BattleHudView"
]=yeb;yeb.__name__="de.innogames.strategycity.battle.view.battlehud.BattleHudView";yeb.__super__=L;yeb.prototype=l(L.prototype,
{_onAssetsLoaded:function(){L.prototype._onAssetsLoaded.call(this);this._menubar=new sk;this._repositionMenuBar();this._cancelReplayComp=new YS(this._assets);this.addChild(this._cancelReplayComp);var a=this._assets.h[
			"battle/main/battle_main"
		];null==
a&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "battle/main/battle_main" from LoadedReflibs.'));this._hexfieldAssets=a;this._menubar.initAssets(this._hexfieldAssets);null!=this._model&&(this._menubar.initModels(this._model),null!=this._battleLogComponent&&this._battleLogComponent.initModels(this._model));this.addChild(this._menubar)
	},_onAddedToStage:function(a){L.prototype._onAddedToStage.call(this,a);this.mouseEnabled=!1;this._requireAssets([
			"battle/main/battle_main",
			"shared/buttons/buttons",
			"shared/gui/window/window",
			"shared/gui/hud/hud"
		])
	},_onResize:function(a){L.prototype._onResize.call(this,a);this._repositionMenuBar()
	},initialize:function(a,b){this._model=a;this._hexcomponent=b;null!=this._menubar&&this._menubar.initModels(a);null!=this._battleLogComponent&&this._battleLogComponent.initModels(a)
	},_repositionMenuBar:function(){this._menubar.repositionTo(this.stage.stageHeight)
	},__class__:yeb
});var JXa=function(a,b){this._label=a;this._icon=b
};h[
	"de.innogames.strategycity.battle.view.battlehud.BattleLogItem"
]=
JXa;JXa.__name__="de.innogames.strategycity.battle.view.battlehud.BattleLogItem";JXa.prototype={get_label:function(){return this._label
	},get_icon:function(){return this._icon
	},set_label:function(a){return this._label=a
	},set_icon:function(a){return this._icon=a
	},__class__:JXa,__properties__: {set_icon: "set_icon",get_icon: "get_icon",set_label: "set_label",get_label: "get_label"
	}
};var Vr=function(){};h[
	"de.innogames.strategycity.shared.ui.components.lists.IListItemRenderer"
]=Vr;Vr.__name__="de.innogames.strategycity.shared.ui.components.lists.IListItemRenderer";
Vr.__isInterface__=!0;Vr.prototype={__class__:Vr,__properties__: {set_selected: "set_selected",get_selected: "get_selected",set_index: "set_index",get_index: "get_index",set_label: "set_label",get_label: "get_label",set_data: "set_data",get_data: "get_data"
	}
};var KXa=function(a){this._minHeight=30;L.call(this);this._libs=a;this._createIcon();this._createTextFields()
};h[
	"de.innogames.strategycity.battle.view.battlehud.BattleLogItemrenderer"
]=KXa;KXa.__name__="de.innogames.strategycity.battle.view.battlehud.BattleLogItemrenderer";
KXa.__interfaces__=[Vr
];KXa.__super__=L;KXa.prototype=l(L.prototype,
{get_data:function(){return this._data
	},set_data:function(a){this._data=a;this._update();return a
	},get_height:function(){return Math.max(this._minHeight,this._icon.get_height())
	},set_height:function(a){return a
	},get_width:function(){return 450
	},set_width:function(a){return a
	},_update:function(){this._stepText.set_text(this._data.get_label());null!=this._icon&&(this.removeChild(this._icon),this._icon=null);this._createIcon();this._stepText.set_x(this._icon.get_width()+
5);this._stepText.set_y(Math.max(this._minHeight/2,this._icon.get_height()/2)-this._stepText.get_height()/2);this.get_graphics().lineStyle(1,
		2364418,
		1,!0,
		1,
		2);this.get_graphics().moveTo(0,
		0);this.get_graphics().lineTo(this.get_width(),
		0);this.get_graphics().endFill();this.get_graphics().lineStyle(1,
		13079896,
		1,!0,
		1,
		2);this.get_graphics().moveTo(0,this.get_height());this.get_graphics().lineTo(this.get_width(),this.get_height());this.get_graphics().endFill()
	},_createTextFields:function(){this._stepText=
P.createArialTextfield(11704404,!0,
		12);this._stepText.set_autoSize(1);this._stepText.set_text("Unit starts");this.addChild(this._stepText)
	},_createIcon:function(){null!=this._data&&this._data.get_icon()&&(this._icon=new aa(this._data.get_icon()),this._icon.mouseEnabled=!1,this._icon.mouseChildren=!1,this.addChild(this._icon),this._icon.set_y(Math.max(this._minHeight/2,this._icon.get_height()/2)-this._icon.get_height()/2))
	},get_label:function(){return""
	},set_label:function(a){return a
	},get_index:function(){return 0
	},
set_index:function(a){return a
	},get_selected:function(){return!1
	},set_selected:function(a){return a
	},__class__:KXa,__properties__:l(L.prototype.__properties__,
	{set_selected: "set_selected",get_selected: "get_selected",set_index: "set_index",get_index: "get_index",set_label: "set_label",get_label: "get_label",set_data: "set_data",get_data: "get_data"
	})
});var sXa=function(a){L.call(this);this._assetLibs=a;this._createChildren();this.set_visible(!1)
};h[
	"de.innogames.strategycity.battle.view.battlehud.BattleLogListView"
]=
sXa;sXa.__name__="de.innogames.strategycity.battle.view.battlehud.BattleLogListView";sXa.__super__=L;sXa.prototype=l(L.prototype,
{initModels:function(a){this._model=a;this._model.addStepListener(m(this,this._onBattleStep));this._initOldSteps()
	},toggle:function(){this.set_visible(!this.get_visible())
	},_initOldSteps:function(){for(var a=this._model.realm.state.stepHistory,b=0;b<a.length;){var c=a[b
			];++b;this._onBattleStep(this._model,c,
			0);this._onBattleStep(this._model,c,
			1);this._onBattleStep(this._model,
c,
			2);this._onBattleStep(this._model,c,
			3)
		}
	},_createChildren:function(){this._createComboBox()
	},_onBattleStep:function(a,b,c){this._initEntries();a=this._getItemObjectText(this._model,b,c);null!=a&&this._entries.unshift(a);this._applyEntriesToCombobox()
	},_getItemObjectText:function(a,b,c){var d=Oc.findUnit(a.realm,b.unitId),e=Oc.findUnit(a.realm,b.attackedUnitId);a=null;switch(c){case 1:b=b.path;c=null!=b?b.length: 0;null!=b&&1<c&&(a=new JXa,a.set_label(d.get_unitType().name+" moved from "+this._getPosistionString(b[
				0
			])+
" to "+this._getPosistionString(b[c-1
			])+"."),a.set_icon("movement"));break;case 2: 0<b.dealtDamage&&(a=new JXa,a.set_label(d.get_unitType().name+" hits "+e.get_unitType().name+" for "+b.dealtDamage+" damage."),
			0>=e.getCurrentHitpoints()&&a.set_label(a.get_label()+"    ("+e.get_unitType().name+" dies)"),a.set_icon("attack"));break;case 3: 0<b.receivedDamage&&null!=e&&(a=new JXa,a.set_label(e.get_unitType().name+" retaliates against "+d.get_unitType().name+" for "+b.receivedDamage+" damage."),
			0>=d.getCurrentHitpoints()&&
a.set_label(a.get_label()+"    ("+d.get_unitType().name+" dies)"),a.set_icon("defense"))
		}return a
	},_applyEntriesToCombobox:function(){this._list.set_dataProvider(this._entries)
	},_getPosistionString:function(a){return"("+a.x+"/"+a.y+")"
	},_initEntries:function(){null==this._entries&&(this._entries=[])
	},_createComboBox:function(){this._inviteInlet=new fm;this._inviteInlet.setSize(450,
		300);this._inviteInlet.set_x(0);this._inviteInlet.set_y(40);this.addChild(this._inviteInlet);this._fillRectangle(this._inviteInlet,
		"background_wood");this._list=new Mi;this._list.set_x(4);this._list.set_y(3);var a=this._assetLibs;this._list.set_itemRenderer(function(){return new KXa(a)
		});this._list.set_width(450);this._list.set_height(300);this._list.set_snapping(!1);this._list.set_sameItemsHeight(!1);this._list.setScroll(new wC);this._list.setScrollOffsets(4,
		0,
		-3);this._inviteInlet.addChild(this._list)
	},_fillRectangle:function(a,b){var c=this._assetLibs.h[
			"shared/gui/window/window"
		];null==c&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "shared/gui/window/window" from LoadedReflibs.'));
b=c.getImage(b);c=new Eb(1,
		0,
		0,
		1,a.get_x(),a.get_y());a.get_graphics().beginBitmapFill(b,c,!0,!0);a.get_graphics().drawRect(0,
		0,
		0!=a.get_width()?a.get_width():b.width,
		0!=a.get_height()?a.get_height():b.height);a.get_graphics().endFill();return b
	},__class__:sXa
});var Tla=function(){};h[
	"de.innogames.strategycity.battle.view.battlehud.BattleLogListViewMediator"
]=Tla;Tla.__name__="de.innogames.strategycity.battle.view.battlehud.BattleLogListViewMediator";Tla.__instantiate=function(a){return new Tla
};
Tla.__super__=Ga;Tla.prototype=l(Ga.prototype,
{onRegister:function(){this.addModuleListener("ButtonEvent/clicked",m(this,this._onButtonClicked),yd)
	},_onButtonClicked:function(a){
		"BattleLog"==a.id&&this.view.toggle()
	},__construct:function(a){Ga.prototype.__construct.call(this,a);this.view=a.getInstanceForMapping("de.innogames.strategycity.battle.view.battlehud.BattleLogListView");return null
	},__class__:Tla
});var sk=function(){this._selectedUnitId=-1;this._selectedUnitPanel_toggle=!0;this._currentSpeed=
0;this._modelLock=null;this._initialized=!1;L.call(this)
};h[
	"de.innogames.strategycity.battle.view.battlehud.BattleMenuBar"
]=sk;sk.__name__="de.innogames.strategycity.battle.view.battlehud.BattleMenuBar";sk.__super__=L;sk.prototype=l(L.prototype,
{createChildren:function(){if(!this._initialized){this._unitsbar=new Jk(this._battleLib);this._unitsbar.initialize(this._model);this._addElement(this._unitsbar,
			191,
			0);this._menuBar=new B(this._battleLib.getImage("menubar"));this._selectedUnitRect=sk._selectedUnit;
this._unitPanelContainer=new C;var a=new C,b=new C;b.get_graphics().beginFill(16777215);b.get_graphics().drawCircle(50,
			45,
			50);b.get_graphics().drawRect(15,
			93,
			72,
			8);this._unitPanelContainer.set_mask(b);a.addChild(b);a.addChild(this._unitPanelContainer);this.addChild(a);a.set_x(100);a.set_y(20-this._menuBar.get_height());this._addElement(this._menuBar,
			0,
			0);a=sk._img_currentUnitFrame;this._unitFrameOpp=new B(this._battleLib.getImage("unit_frame_enemy"));this._addElement(this._unitFrameOpp,a.x|0,a.y-
this._menuBar.get_height()+this._unitFrameOpp.get_height()|0);this._unitFrameMy=new B(this._battleLib.getImage("unit_frame_player"));this._addElement(this._unitFrameMy,a.x|0,a.y-this._menuBar.get_height()+this._unitFrameMy.get_height()|0);this._unitFrameHover=new B(this._battleLib.getImage("unit_frame_hover"));this._addElement(this._unitFrameHover,a.x|0,a.y-this._menuBar.get_height()+this._unitFrameHover.get_height()|0);this._unitFrameMy.set_visible(!1);this._unitFrameOpp.set_visible(!1);this._unitFrameHover.set_visible(!1);
a=sk._img_transitionLeft;this._transitionLeft=new B(this._battleLib.getImage("transition_left"));this._addElement(this._transitionLeft,a.x|0,a.y-this._menuBar.get_height()+this._transitionLeft.get_height()|0);b=null!=this._model.realm&&this._model.realm.state.hasOutcome();a=sk._btn_skip;this._skipButton=new Oa(this._battleLib.getImage("btn_skip_normal"),this._battleLib.getImage("btn_skip_pressed"),this._battleLib.getImage("btn_skip_hover"));this._skipButton.setId("btn_skip");this._skipButton.set_tooltipText(r.gettext("Finish battle automatically"));
this._skipButton.set_enabled(!b);this._addElement(this._skipButton,a.x|0,a.y-this._menuBar.get_height()+this._skipButton.get_height()|0);a=sk._btn_surrender;this._surrenderButton=new Oa(this._battleLib.getImage("btn_surrender_normal"),this._battleLib.getImage("btn_surrender_pressed"),this._battleLib.getImage("btn_surrender_hover"));this._surrenderButton.setId("btn_surrender");this._surrenderButton.set_tooltipText(r.gettext("Surrender"));this._surrenderButton.set_enabled(!b);this._addElement(this._surrenderButton,
a.x|0,a.y-this._menuBar.get_height()+this._surrenderButton.get_height()|0);a=new B(this._battleLib.getImage("current_background"));this._addElement(a,
			110,
			35-this._menuBar.get_height()|0);this._currentTextField=P.createArialTextfield(15719334,!0,
			13,
			0);this._addElement(this._currentTextField,
			112,
			37-this._menuBar.get_height()|0);this._currentTextField.set_width(a.get_width()-4);this._currentTextField.set_height(a.get_height());this._currentTextField.set_text(r.gettext("#15|Current"));a=sk._btn_fullScreen;
b=new Oa(this._battleLib.getImage("btn_fullscreen_on_up"),this._battleLib.getImage("btn_fullscreen_on_down"),this._battleLib.getImage("btn_fullscreen_on_over"));b.set_tooltipText(r.gettext("Leave fullscreen mode"));var c=new Oa(this._battleLib.getImage("btn_fullscreen_off_up"),this._battleLib.getImage("btn_fullscreen_off_down"),this._battleLib.getImage("btn_fullscreen_off_over"));c.set_tooltipText(r.gettext("Switch to fullscreen mode"));this._fullScreenButton=new Gu(c,b);this._addElement(this._fullScreenButton,
a.x|0,a.y-this._menuBar.get_height()+22|0);a=sk._btn_muteMusic;b=new Oa(this._battleLib.getImage("sound_on_button_up"),this._battleLib.getImage("sound_on_button_down"),this._battleLib.getImage("sound_on_button_over"));b.set_tooltipText(r.gettext("Turn sound effects off"));c=new Oa(this._battleLib.getImage("sound_off_button_up"),this._battleLib.getImage("sound_off_button_down"),this._battleLib.getImage("sound_off_button_over"));c.set_tooltipText(r.gettext("Turn sound effects on"));this._soundEffectButton=
new Gu(b,c);this._addElement(this._soundEffectButton,a.x|0,a.y-this._menuBar.get_height()+22|0);a=sk._btn_speedUp;b=new Oa(this._battleLib.getImage("btn_speedup_0_up"),this._battleLib.getImage("btn_speedup_0_down"),this._battleLib.getImage("btn_speedup_0_over"));b.set_tooltipText(r.gettext("Switch to fast speed"));c=new Oa(this._battleLib.getImage("btn_speedup_1_up"),this._battleLib.getImage("btn_speedup_1_down"),this._battleLib.getImage("btn_speedup_1_over"));c.set_tooltipText(r.gettext("Switch to fastest speed"));
var d=new Oa(this._battleLib.getImage("btn_speedup_2_up"),this._battleLib.getImage("btn_speedup_2_down"),this._battleLib.getImage("btn_speedup_2_over"));d.set_tooltipText(r.gettext("Switch to normal speed"));this._speedUpButton=new uma(b,c,d);this._addElement(this._speedUpButton,a.x|0,a.y-this._menuBar.get_height()+22|0);a=sk._btn_muteSound;b=new Oa(this._battleLib.getImage("sound_effect_on_button_up"),this._battleLib.getImage("sound_effect_on_button_down"),this._battleLib.getImage("sound_effect_on_button_over"));
b.set_tooltipText(r.gettext("Turn music off"));c=new Oa(this._battleLib.getImage("sound_effect_off_button_up"),this._battleLib.getImage("sound_effect_off_button_down"),this._battleLib.getImage("sound_effect_off_button_over"));c.set_tooltipText(r.gettext("Turn music on"));this._soundButton=new Gu(b,c);this._addElement(this._soundButton,a.x|0,a.y-this._menuBar.get_height()+22|0);this._initialized=!0;this.dispatchEvent(new l8("BattleMenuBarEvent/INIT_COMPLETE"))
		}
	},initModels:function(a){this._model=
a;this._model.addStepListener(m(this,this._battleStep));this._unlockModel();null!=this._battleLib&&null!=this._model&&(this.createChildren(),a=this._model.getCurrentActiveUnit(),null!=a&&this._selectUnit(a,a.getCurrentHitpoints()));this.addEventListener("enterFrame",m(this,this._onEnterRender))
	},initAssets:function(a){this._battleLib=a;null!=this._battleLib&&null!=this._model&&(this.createChildren(),a=this._model.getCurrentActiveUnit(),null!=a&&this._selectUnit(a,a.getCurrentHitpoints()))
	},setCorrectButtonsStates:function(a){a=
a.get_settingsVO();this._currentSpeed=a.animationSpeedup;this.get_fullscreenButton().set_isToggled(2!=this.stage.get_displayState());this.get_speedUpButton().setToggleState(a.animationSpeedup);this.dispatchEvent(new BJ("BattleRendererEvent/SPEED",a.animationSpeedup))
	},_highlightCurrentUnit:function(a){O._to(this._unitFrameHover,.2,
		{autoAlpha:a?1: 0
		})
	},repositionTo:function(a){this.set_y(a)
	},set_battleLib:function(a){return this._battleLib=a
	},set_currentSpeed:function(a){return this._currentSpeed=a
	},
get_soundEffectButton:function(){return this._soundEffectButton
	},get_speedUpButton:function(){return this._speedUpButton
	},get_soundButton:function(){return this._soundButton
	},get_surrenderButton:function(){return this._surrenderButton
	},get_skipButton:function(){return this._skipButton
	},get_fullscreenButton:function(){return this._fullScreenButton
	},get_initialized:function(){return this._initialized
	},_onAddedToStage:function(a){L.prototype._onAddedToStage.call(this,a);this._requireAssets([
			"battle/main/battle_main"
		])
	},
_onRemovedFromStage:function(a){this.removeEventListener("enterFrame",m(this,this._onEnterRender));L.prototype._onRemovedFromStage.call(this,a);this._unlockModel()
	},_onEnterRender:function(a){null!=this._modelLock&&null!=this._getCurrentUnitPanel()&&this._getCurrentUnitPanel().hasReachedTarget()&&this._unlockModel();this._model.get_hasRemainingSteps()||(a=Oc.findUnit(this._model.realm,this._model.get_currentActiveUnitId()),this._selectUnit(a,a.getCurrentHitpoints()))
	},_battleStep:function(a,b,c){var d=
Oc.findUnit(a.realm,b.unitId),e=null;0!=b.attackedUnitId&&(e=Oc.findUnit(a.realm,b.attackedUnitId));switch(c){case 0:this._lockModel();this._selectUnit(d,b.unitHitpoints+Math.max(0,b.receivedDamage)|0);break;case 2:this._updateUnitHP(d,b.unitHitpoints+Math.max(0,b.receivedDamage)|0,e,b.attackedUnitHitpoints);break;case 3:this._updateUnitHP(d,b.unitHitpoints,e,b.attackedUnitHitpoints)
		}
	},_updateUnitHP:function(a,b,c,d){return this._selectedUnitId!=a.unitId||0!=this._getCurrentUnitPanel().get_hitpoints()&&
this._getCurrentUnitPanel().get_hitpoints()==b?this._selectedUnitId!=c.unitId||0!=this._getCurrentUnitPanel().get_hitpoints()&&this._getCurrentUnitPanel().get_hitpoints()==d?!1:(this._lockModel(),this._getCurrentUnitPanel().set_hitpoints(d),!0):(this._lockModel(),this._getCurrentUnitPanel().set_hitpoints(b),!0)
	},_selectUnit:function(a,b){null!=a&&this._selectedUnitId!=a.unitId&&(1==a.teamFlag?(this._unitFrameMy.set_visible(!0),this._unitFrameOpp.set_visible(!1),this._setCurrentColor(8772638)):(this._unitFrameMy.set_visible(!1),
this._unitFrameOpp.set_visible(!0),this._setCurrentColor(16012629)),this._selectedUnitPanel_toggle?this._selectedUnitPanel_1=this._initSelectedUnitPanel(this._selectedUnitPanel_1,this._selectedUnitPanel_2,a,b):this._selectedUnitPanel_2=this._initSelectedUnitPanel(this._selectedUnitPanel_2,this._selectedUnitPanel_1,a,b))
	},_setCurrentColor:function(a){var b=this._currentTextField.getTextFormat();b.color=a;this._currentTextField.setTextFormat(b)
	},_initSelectedUnitPanel:function(a,b,c,d){null!=b&&b.set_targetX(-this._selectedUnitRect.width-
20);null!=a&&this._unitPanelContainer.contains(a)&&this._unitPanelContainer.removeChild(a);a=new Lh(this._battleLib,c);this._selectedUnitId=c.unitId;a.setPos(this._selectedUnitRect.width+20,
		0);a.set_targetX(0);a.setIsBigImage();a.setHitpointsWithoutTransition(d);a.set_contextView(this);this._unitPanelContainer.addChild(a);0!=this._currentSpeed&&(a.setSpeed(this._currentSpeed),null!=b&&b.setSpeed(this._currentSpeed));this._selectedUnitPanel_toggle=!this._selectedUnitPanel_toggle;return a
	},_getCurrentUnitPanel:function(){return this._selectedUnitPanel_toggle?
this._selectedUnitPanel_2:this._selectedUnitPanel_1
	},_lockModel:function(){null==this._modelLock&&(this._modelLock=this._model.lockStepping())
	},_unlockModel:function(){if(null!=this._modelLock){var a=this._modelLock;null!=a&&a.cancel();this._modelLock=null
		}
	},_addElement:function(a,b,c){a.set_x(b);a.set_y(c-a.get_height());this.addChild(a)
	},__class__:sk,__properties__:l(L.prototype.__properties__,
	{get_initialized: "get_initialized",get_fullscreenButton: "get_fullscreenButton",get_skipButton: "get_skipButton",
get_surrenderButton: "get_surrenderButton",get_soundButton: "get_soundButton",get_speedUpButton: "get_speedUpButton",get_soundEffectButton: "get_soundEffectButton",set_currentSpeed: "set_currentSpeed",set_battleLib: "set_battleLib"
	})
});var Rla=function(){};h[
	"de.innogames.strategycity.battle.view.battlehud.BattleMenuBarMediator"
]=Rla;Rla.__name__="de.innogames.strategycity.battle.view.battlehud.BattleMenuBarMediator";Rla.__instantiate=function(a){return new Rla
};Rla.__super__=Ga;Rla.prototype=l(Ga.prototype,
{onRegister:function(){var a=m(this,this._handleAssetsLoaded);Va.instance.loadImageLibrary("battle/main/battle_main").handle(function(b){switch(b._hx_index){case 0:za.invoke(a,b.data);break;case 1:b=b.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+b.message))
			}
		});this.view.get_initialized()&&(this._addEventlisteners(),this.view.setCorrectButtonsStates(this.userDataModel));this.get_eventMap().mapListener(this.moduleDispatcher,
		"BattleTurnModelEvent/AUTOBATTLE",m(this,this._onAutoBattleStart),
tk);this.get_eventMap().mapListener(this.moduleDispatcher,
		"BattleTurnModelEvent/BATTLE_WINNER_DETERMINED",m(this,this._onWinnerDetermined),tk);this.get_eventMap().mapListener(this.get_eventDispatcher(),
		"BattleRendererEvent/SPEED",m(this,this._onBattleRendererSpeed),
		null,!1,
		0,!0);this.get_eventMap().mapListener(this.moduleDispatcher,
		"BattleTurnModelEvent/BATTLE_FINISHED",m(this,this._lockBattleMenuBarOptions),tk);this.get_eventMap().mapListener(this.moduleDispatcher,
		"BattleTurnModelEvent/SERVER_PROCESSING_START",
m(this,this._lockBattleMenuBarOptions),tk);this.get_eventMap().mapListener(this.moduleDispatcher,
		"BattleTurnModelEvent/SERVER_PROCESSING_FINISHED",m(this,this._unlockBattleMenuBarOptions),tk);this.get_eventMap().mapListener(this.get_eventDispatcher(),
		"BattleUnitsbarEvent/UNIT_PANEL_HOVER_OUT",m(this,this._onUnitbarPanelOut))
	},onRemove:function(){var a=this._soundSettingsBindingsLink;null!=a&&a.cancel()
	},_onWinnerDetermined:function(a){this._disableGUIforAutoBattle()
	},_onAutoBattleStart:function(a){this._disableGUIforAutoBattle()
	},
_onBattleRendererSpeed:function(a){this.view.get_speedUpButton().setToggleState(a.speedUp);this.view.set_currentSpeed(a.speedUp)
	},_handleAssetsLoaded:function(a){this.view.set_battleLib(a);this.view.get_initialized()?(this._addEventlisteners(),this.view.setCorrectButtonsStates(this.userDataModel),lh.isReplayBattle(this.battleModel.get_battleType())&&this._disableGUIforAutoBattle()):this.addViewListener("BattleMenuBarEvent/INIT_COMPLETE",m(this,this._onViewInitComplete),l8)
	},_onViewInitComplete:function(a){this._addEventlisteners();
null!=this.userDataModel&&this.view.setCorrectButtonsStates(this.userDataModel);lh.isReplayBattle(this.battleModel.get_battleType())&&this._disableGUIforAutoBattle()
	},_lockBattleMenuBarOptions:function(a){this._setMenuBarOptions(!1)
	},_unlockBattleMenuBarOptions:function(a){this._setMenuBarOptions(!0)
	},_onSurrenderClick:function(a){Fm._dailyCalculationRunningTest(this.updateModel,this.battleModel.realm,this._eventDispatcher)?this.dispatchToModules(new Qz("ServerUpdateEvent/DAILY_CALCULATION_RUNNING")):
this._showSurrenderConfirmation()
	},_onSkipFightClick:function(a){Fm._dailyCalculationRunningTest(this.updateModel,this.battleModel.realm,this._eventDispatcher)?this.dispatchToModules(new Qz("ServerUpdateEvent/DAILY_CALCULATION_RUNNING")):this.battleModel.playerSkip()
	},_onFullscreenClick:function(a){this.applicationModel.toggleFullscreen()
	},_onFullscreenChange:function(a){this.view.get_fullscreenButton().get_isToggled()&&!a.fullScreen&&this.view.get_fullscreenButton().toggle()
	},_onWindowedMode:function(a){this.applicationModel.exitFullscreen()
	},
_onSpeedUpButtonClick:function(a){a=(this.view.get_speedUpButton().getToggleState()+1)%3;this.dispatch(new BJ("BattleRendererEvent/SPEED",a));this.userDataModel.get_settingsVO().animationSpeedup=a;this.settingsService.updateSettings(this.userDataModel.get_settingsVO())
	},_onModuleUnloaded:function(a){this.view.setCorrectButtonsStates(this.userDataModel)
	},_isTutorialRunning:function(){return!this.contextBasedTutorialDataModel.isBattleTutorialFinished()
	},_addEventlisteners:function(){this._bindSoundButtons();
this.get_eventMap().mapListener(this.view.get_speedUpButton(),
		"click",m(this,this._onSpeedUpButtonClick));this.get_eventMap().mapListener(this.view.get_surrenderButton(),
		"click",m(this,this._onSurrenderClick));this.get_eventMap().mapListener(this.view.get_skipButton(),
		"click",m(this,this._onSkipFightClick));this.get_eventMap().mapListener(this.view.get_fullscreenButton(),
		"click",m(this,this._onFullscreenClick));this.get_eventMap().mapListener(this.get_eventDispatcher(),
		"ModuleLoaderEvent/MODULE_UNLOADED",
m(this,this._onModuleUnloaded));this.get_eventMap().mapListener(this.view.stage,
		"fullScreen",m(this,this._onFullscreenChange));this.get_eventMap().mapListener(this.view.stage,
		"CitySectorEvent/WINDOWED_MODE",m(this,this._onWindowedMode));this.get_eventMap().mapListener(this.get_eventDispatcher(),
		"BattleUnitEvent/HIGHLIGHT_HOVERED_UNIT",m(this,this._onHoveredUnit));this._mapActor("BATTLE_SURRENDER_BUTTON",this.view.get_surrenderButton());this._mapActor("BATTLE_SPEEDUP_BUTTON",this.view.get_speedUpButton());
this._mapActor("BATTLE_SKIP_BUTTON",this.view.get_skipButton())
	},_bindSoundButtons:function(){var a=this;if(null==this._soundSettingsBindingsLink){var b=ic.instance.settings;this._soundSettingsBindingsLink=zc.fromMany([F.bind(b.effectsEnabled,function(c){a.view.get_soundEffectButton().set_isToggled(!c)
				},
				null,null),F.bind(b.backgroundEnabled,function(c){a.view.get_soundButton().set_isToggled(!c)
				},
				null,null),hg.listen(this.view.get_soundEffectButton(),
				"change",function(c){I.set_value(b.effectsEnabled,
!a.view.get_soundEffectButton().get_isToggled())
				}),hg.listen(this.view.get_soundButton(),
				"change",function(c){I.set_value(b.backgroundEnabled,!a.view.get_soundButton().get_isToggled())
				})
			])
		}
	},_onHoveredUnit:function(a){a=a.get_battleUnit();a=null!=a?a.unitId: 0;a=this.battleModel.getCurrentActiveUnit().unitId==a;this.view._highlightCurrentUnit(a)
	},_onUnitbarPanelOut:function(a){a=a.get_unitID();a=this.battleModel.getCurrentActiveUnit().unitId==a;this.view._highlightCurrentUnit(a)
	},_disableGUIforAutoBattle:function(){this.view.get_surrenderButton().set_enabled(!1);
this.view.get_skipButton().set_enabled(!1)
	},_setMenuBarOptions:function(a){this._isTutorialRunning()||(this.view.get_soundButton().set_enabled(a),this.view.get_soundEffectButton().set_enabled(a),this.view.get_speedUpButton().set_enabled(a),this.view.get_surrenderButton().set_enabled(a),this.view.get_skipButton().set_enabled(a),this.view.get_fullscreenButton().set_enabled(a))
	},_showSurrenderConfirmation:function(){this.dispatchToModules(new ha("WindowEvent/ADD_WINDOW",new Ya({title:r.gettext("Surrender"),
closeable:hb.No,content:Ma.TextAndImage(r.gettext("Do you really want to surrender this battle? All of your units will leave the battlefield in their current state."),Dc.Url("/assets/shared/icons/dialog/surrender.png")),buttons:eb.TwoButtons({kind:Ia.Orange,text:r.gettext("Cancel")
			},
			{kind:Ia.Red,text:r.gettext("Surrender"),callback:Rb.fromSimple(m(this,this._surrenderConfirmed))
			})
		})))
	},_surrenderConfirmed:function(){this.battleModel.playerCommandSurrender()
	},_mapActor:function(a,b){this.dispatch(new Pg("TutorialActorMapperEvent/MAP_ACTOR",
a,b))
	},__construct:function(a){Ga.prototype.__construct.call(this,a);this.view=a.getInstanceForMapping("de.innogames.strategycity.battle.view.battlehud.BattleMenuBar");this.userDataModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.UserDataModel");this.battleModel=a.getInstanceForMapping("de.innogames.strategycity.battle.model.BattleModel");this.settingsService=a.getInstanceForMapping("de.innogames.strategycity.main.service.SettingsService");this.applicationModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationModel");
this.updateModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ServerUpdateModel");this.contextBasedTutorialDataModel=a.getInstanceForMapping("de.innogames.strategycity.shared.model.ContextBasedTutorialDataModel");return null
	},__class__:Rla
});var Lh=function(a,b){this._tooltipFrameDelay=0;this._inited=this._showUnattachedUnitsBadge=!1;this._targetX=this._x=this._accelx=this._y=0;this._moveSpeed=.4;this._accelSpeed=.015;this._currentHitpoints=this._startHitpoints=NaN;this._hpTransitionSpeed=
.94;this._rechargeBattleRound=0;this._hitpointsFull=[];this._retired=this._isBigImage=!1;this._hitpoints=10;this.targetY=0;C.call(this);this._socialBarReflib=a;this._battleUnitVo=b;this.addEventListener("addedToStage",m(this,this._onAddedToStage))
};h[
	"de.innogames.strategycity.battle.view.battlehud.BattleUnitPanel"
]=Lh;Lh.__name__="de.innogames.strategycity.battle.view.battlehud.BattleUnitPanel";Lh.__super__=C;Lh.prototype=l(C.prototype,
{setHitpointsWithoutTransition:function(a){a=Math.min(10,a);
this._hitpoints=a|0;this._startHitpoints=this._currentHitpoints=a
	},movePos:function(a,b){null==b&&(b=0);this._targetX+=a|0;this._x+=a;this.targetY+=b|0;this._y+=b;this.set_x(this.get_x()+a);this.set_y(this.get_y()+b)
	},update:function(a,b){this.setUnitVo(a)
	},setPos:function(a,b){this._targetX=a|0;this._x=a;this.set_x(a);this.targetY=b|0;this._y=b;this.set_y(b)
	},setUnitVo:function(a){this._battleUnitVo=null!=a?a:this._battleUnitVo
	},hasReachedTarget:function(){return.5>Math.abs(this._targetX-this._x)?
.02>Math.abs(this._hitpoints-this._currentHitpoints):!1
	},setSpeed:function(a){switch(a){case 0:this._accelSpeed=.015;this._hpTransitionSpeed=.94;break;case 1:this._accelSpeed=.06;this._hpTransitionSpeed=.6;break;case 2:this._accelSpeed=.08,this._hpTransitionSpeed=.3
		}
	},setIsBigImage:function(){this._isBigImage=!0
	},initModels:function(a){this._battleModel=a
	},loadImage:function(){var a=this._battleUnitVo.get_unitType().getIconUrl90x90(),b=m(this,this._onInnerImageLoaded);Va.instance.loadImage(a,Sc.NORMAL,
te.CHECKSUM_LIST).handle(function(c){switch(c._hx_index){case 0:za.invoke(b,c.data);break;case 1:c=c.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+c.message))
			}
		})
	},updateRechargeOverlay:function(a){null!=this._rechargeOverlayContainer&&this._rechargeOverlayContainer.set_visible(a)
	},updateUnitPanelHighlight:function(a){a=a?1: 0;null!=this._highlight&&O._to(this._highlight,.2,
		{autoAlpha:a
		});null!=this._frameHover&&O._to(this._frameHover,.2,
		{autoAlpha:a
		})
	},set_targetX:function(a){this._accelx=
0;this._targetX=a|0;return a
	},get_hitpoints:function(){return this._hitpoints
	},set_hitpoints:function(a){this._hitpoints=a|0;return a
	},get_unitId:function(){return this._battleUnitVo.unitId
	},set_contextView:function(a){return this._contextView=a
	},get_retired:function(){return this._retired
	},set_retired:function(a){return this._retired=a
	},set_showUnattachedUnitsBadge:function(a){return this._showUnattachedUnitsBadge=a
	},get_battleUnitVo:function(){return this._battleUnitVo
	},get_rechargeBattleRound:function(){return this._rechargeBattleRound
	},
set_rechargeBattleRound:function(a){return this._rechargeBattleRound=a
	},_handleAssetsLoaded:function(a){this._iconReflib=a;0!=this._battleUnitVo.get_totalDefenceBonus()&&this._addBuffIcon("buff_icon_def");0!=this._battleUnitVo.get_totalAttackBonus()&&this._addBuffIcon("buff_icon_att");1==this._battleUnitVo.teamFlag&&0==this._battleUnitVo.entity_id&&this._showUnattachedUnitsBadge&&null==this._unattachedBanderole&&this._addUnattachedBanderole()
	},_addUnattachedBanderole:function(){this._unattachedBanderole=
new B(this._iconReflib.getImage("unattached_banderole"));this._unattachedBanderole.set_x(2+this._unitPic.get_width()-this._unattachedBanderole.get_width());this._unattachedBanderole.set_y(0);this._buffsContainer.addChild(this._unattachedBanderole)
	},_onInnerImageLoaded:function(a){null!=this._unitPic&&null!=this._unitPic.parent&&this._unitPic.parent.parent==this&&(this._unitPic.parent.removeChild(this._unitPic),null!=this._highlight.parent&&this._highlight.parent.removeChild(this._highlight));this._unattachedBanderole=
null;this._unitPic=new C;this._unitPic.mouseChildren=this._unitPic.mouseEnabled=!1;this._createBlood(a);this._mainContainer.addChild(this._unitPic);this._unitPic.set_x(this._blood.set_x(Lh._bgimage.x));this._unitPic.set_y(this._blood.set_y(Lh._bgimage.y));this._battleUnitVo.hasUnitAbility(dT)&&this._createRechargeOverlay();this._createHighlight();this._inited?this._hitpointsFull=[]:(this._mainContainer.addChild(this._blood),this._blood.set_alpha(0),this._highlight.set_alpha(0),this._highlight.set_blendMode(11),
this._currentHitpoints=10);var b=m(this,this._handleAssetsLoaded);Va.instance.loadImageLibrary("shared/icons/icons").handle(function(c){switch(c._hx_index){case 0:za.invoke(b,c.data);break;case 1:c=c.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+c.message))
			}
		});this._createHitpointsBar();this._isBigImage||(this._buffsContainer.addChild(this._frame=new B(this._socialBarReflib.getImage(this._team))),this._frameHover=new B(this._socialBarReflib.getImage("panel_frame_hover")),this._frameHover.set_alpha(0),
this._frameHover.set_visible(!1),this._buffsContainer.addChild(this._frameHover));this._inited=!0
	},_createRechargeOverlay:function(){var a=this._isBigImage?Lh._bgimageBig:Lh._bgimage;this._rechargeOverlayContainer=new C;this._rechargeOverlayContainer.set_visible(!1);this._rechargeOverlayContainer.get_graphics().clear();this._rechargeOverlayContainer.get_graphics().beginFill(0,.5);this._rechargeOverlayContainer.get_graphics().drawRect(0,
		0,a.width,a.height);var b=new aa("recharge");b.set_x((a.width-
b.get_width())/2);b.set_y((a.height-b.get_height())/2-8);this._rechargeOverlayContainer.addChild(b);this._rechargeOverlayContainer.set_x(Lh._bgimage.x+1);this._rechargeOverlayContainer.set_y(Lh._bgimage.y+1);this._mainContainer.addChild(this._rechargeOverlayContainer)
	},_createHitpointsBar:function(){var a=this.getHPBarPosition();this._hpLightBlue=new B(this._socialBarReflib.getImage("hp_shield"));var b=this._socialBarReflib.getImage("hp_empty");var c=1!=this._battleUnitVo.teamFlag?this._socialBarReflib.getImage("hp_enemy"):
this._socialBarReflib.getImage("hp_player");for(var d,e,g=0;10>g;)d=new B(b),e=new B(c),e.set_x(d.set_x(a.x+this._unitPic.get_x()+g++*(d.get_width()-1))),e.set_y(d.set_y(a.y)),this._mainContainer.addChild(d),this._mainContainer.addChild(e),this._hitpointsFull.push(e);this._hpLightBlue.set_visible(!1);this._mainContainer.addChild(this._hpLightBlue);if(!isNaN(this._startHitpoints)&&0!=this._startHitpoints)for(this._currentHitpoints=this._startHitpoints,this._hitpointsFull[
			0
		].set_alpha(0),this._hitpointsFull[
			0
		].set_visible(!1),
this._hitpointsFull[
			1
		].set_alpha(0),this._hitpointsFull[
			1
		].set_visible(!1),this._hitpointsFull[
			2
		].set_alpha(0),this._hitpointsFull[
			2
		].set_visible(!1),this._hitpointsFull[
			3
		].set_alpha(0),this._hitpointsFull[
			3
		].set_visible(!1),this._hitpointsFull[
			4
		].set_alpha(0),this._hitpointsFull[
			4
		].set_visible(!1),this._hitpointsFull[
			5
		].set_alpha(0),this._hitpointsFull[
			5
		].set_visible(!1),this._hitpointsFull[
			6
		].set_alpha(0),this._hitpointsFull[
			6
		].set_visible(!1),this._hitpointsFull[
			7
		].set_alpha(0),this._hitpointsFull[
			7
		].set_visible(!1),
this._hitpointsFull[
			8
		].set_alpha(0),this._hitpointsFull[
			8
		].set_visible(!1),this._hitpointsFull[
			9
		].set_alpha(0),this._hitpointsFull[
			9
		].set_visible(!1),a=0;a<this._startHitpoints;)this._hitpointsFull[a
		].set_alpha(1),this._hitpointsFull[a
		].set_visible(!0),++a
	},_createBlood:function(a){this._blood=new B(this._socialBarReflib.getImage("blood"));this._isBigImage?(this._unitPic.addChild(new B(lj.scaleBitmapData(a,Lh._bgimageBig.width|0,Lh._bgimageBig.height|0,!1))),this._blood.set_width(Lh._bgimageBig.width),
this._blood.set_height(Lh._bgimageBig.height)):(this._unitPic.addChild(new B(lj.scaleBitmapData(a,Lh._bgimage.width|0,Lh._bgimage.height|0,!0))),this._blood.set_width(Lh._bgimage.width),this._blood.set_height(Lh._bgimage.height))
	},_createHighlight:function(){var a=this._isBigImage?Lh._bgimageBig:Lh._bgimage;null==this._highlight&&(this._highlight=new B(this._socialBarReflib.getImage("highlight")));this._highlight.set_width(a.width);this._highlight.set_height(a.height);this._highlight.set_x(Lh._bgimage.x+
1);this._highlight.set_y(Lh._bgimage.y+1);this._mainContainer.addChild(this._highlight)
	},getHPBarPosition:function(){return this._isBigImage?Lh._hpBarBig:Lh._hpBar
	},_addBuffIcon:function(a){var b=new C;a=this._iconReflib.getImage(a);this._buffsContainer.addChild(b);b.addChild(new B(a));this._isBigImage?(b.set_x(63),b.set_y(63)):(b.set_x(47),b.set_y(39))
	},_drawHitpoints:function(){this._currentHitpoints=this._currentHitpoints*this._hpTransitionSpeed+this._hitpoints*(1-this._hpTransitionSpeed);for(var a=
this._battleUnitVo.get_unitType().hitpoints,b=0;b<a;){var c=b++;this._hitpointsFull[c
			].set_alpha(Math.min(1,Math.max(0,this._currentHitpoints-c)));.1>this._hitpointsFull[c
			].get_alpha()&&this._hitpointsFull[c
			].set_visible(!1)
		}this._checkForOneTimeArmor();this.set_alpha(Math.min(1,this._currentHitpoints));this._blood.set_alpha(Math.min(1,this._currentHitpoints-this._hitpoints));a=this._targetX-this._x;this._accelx=this._accelx*(1-this._accelSpeed)+this._accelSpeed*Math.abs(a);this.set_x(Math.floor(this._x+=
Math.min(this._accelx,Math.max(-this._accelx,a*this._moveSpeed))));a=this._targetX-this._x;0<a&&this.set_alpha(.3*this.get_alpha()+.7*(1-Math.max(0,Math.min(1,a/this.get_width()))))
	},_checkForOneTimeArmor:function(){this.update(this._battleModel.getUnitByID(this._battleUnitVo.unitId),
		0);if(Fm.unitHasActiveOnetimeArmor(this._battleUnitVo,this._battleModel.get_currentHistoryPosition())){var a=Math.min(this._currentHitpoints,this._hitpointsFull.length-1)|0;this._hpLightBlue.set_x(this._hitpointsFull[a
			].get_x());
this._hpLightBlue.set_y(this._hitpointsFull[a
			].get_y());this._hpLightBlue.set_visible(!0)
		}else this._hpLightBlue.set_visible(!1)
	},_onAddedToStage:function(a){this._team=1==this._battleUnitVo.teamFlag?"panel_frame_player": "panel_frame_enemy";this.addEventListener("enterFrame",m(this,this._onEnterRender));this.addEventListener("removedFromStage",m(this,this._onRemovedFromStage));this.addEventListener("mouseLeave",m(this,this._onUnhighlight));this.addEventListener("mouseOut",m(this,this._onUnhighlight));
this.addEventListener("mouseOver",m(this,this._onHighlight));this._mainContainer=new C;this.addChild(this._mainContainer);this._buffsContainer=new C;this.addChild(this._buffsContainer);this._inited||this.loadImage()
	},_onRemovedFromStage:function(a){this.removeEventListener("enterFrame",m(this,this._onEnterRender));this.removeEventListener("removedFromStage",m(this,this._onRemovedFromStage));this.removeEventListener("mouseLeave",m(this,this._onUnhighlight));this.removeEventListener("mouseOut",m(this,
this._onUnhighlight));this.removeEventListener("mouseOver",m(this,this._onHighlight))
	},_onHighlight:function(a){this._tooltipFrameDelay=10;this.dispatchEvent(new l_("BattleUnitsbarEvent/UNIT_PANEL_HOVER_OVER",this._battleUnitVo.unitId))
	},_showTooltip:function(){if(this._isBigImage){var a=this.getRect(this.stage).x+this.get_width()/2;var b=-this.get_height()-20
		}else a=this.parent.get_x()+this.getRect(this.parent).x+this.get_width()/2,b=20;var c="guild_raids"==this._battleModel.get_battleType().type;
if(this._battleModel.realm.state.hasOutcome())this._tooltip=new wF(this._battleUnitVo,!1,
		0,!1,c);else{var d=Oc.findUnit(this._battleModel.realm,this._battleUnitVo.unitId),e=this._battleModel.getCurrentActiveUnit();d.dugInBonus=e.unitId!=d.unitId&&e.teamFlag!=d.teamFlag?Oc.calculateDugInBonus(e,d): 0;this._tooltip=new wF(d,!1,
			0,!1,c)
		}this._tooltip.set_id(this._battleUnitVo.get_unitType().unitTypeId);this._contextView.addChild(this._tooltip);this._tooltip.set_x(a);a=this._tooltip.get_height()|0;c=this.getBounds(this.stage).get_top()|
0;c<a&&(b=a-c+60,this._isBigImage&&(b-=120));this._tooltip.set_y(b);this._tooltip.show()
	},_onUnhighlight:function(a){null!=this._tooltip&&(this._tooltip.dispose(),this._tooltip=null);this._tooltipFrameDelay=-1;this.dispatchEvent(new l_("BattleUnitsbarEvent/UNIT_PANEL_HOVER_OUT"))
	},_onEnterRender:function(a){this._inited&&(-1!=this._tooltipFrameDelay&&0==--this._tooltipFrameDelay&&this._showTooltip(),this.hasReachedTarget()?(this._accelx=0,this._checkForOneTimeArmor(),
		0==this._hitpoints&&this.set_alpha(0),
this.get_cacheAsBitmap()||this.set_cacheAsBitmap(!0)):(this.get_cacheAsBitmap()&&this.set_cacheAsBitmap(!1),this._drawHitpoints()))
	},__class__:Lh,__properties__:l(C.prototype.__properties__,
	{set_rechargeBattleRound: "set_rechargeBattleRound",get_rechargeBattleRound: "get_rechargeBattleRound",get_battleUnitVo: "get_battleUnitVo",set_showUnattachedUnitsBadge: "set_showUnattachedUnitsBadge",set_retired: "set_retired",get_retired: "get_retired",set_contextView: "set_contextView",get_unitId: "get_unitId",set_hitpoints: "set_hitpoints",
get_hitpoints: "get_hitpoints",set_targetX: "set_targetX"
	})
});var ema=function(){};h[
	"de.innogames.strategycity.battle.view.battlehud.BattleUnitPanelMediator"
]=ema;ema.__name__="de.innogames.strategycity.battle.view.battlehud.BattleUnitPanelMediator";ema.__instantiate=function(a){return new ema
};ema.__super__=Ga;ema.prototype=l(Ga.prototype,
{onRegister:function(){this.addViewListener("BattleUnitsbarEvent/UNIT_PANEL_HOVER_OVER",m(this,this.dispatch));this.addViewListener("BattleUnitsbarEvent/UNIT_PANEL_HOVER_OUT",
m(this,this.dispatch));this.get_eventMap().mapListener(this.get_eventDispatcher(),
		"BattleRendererEvent/SPEED",m(this,this._onBattleRendererSpeed));this.addModuleListener("BattleRendererEvent/UNIT_CHANGED",m(this,this._onUnitChanged),BJ);this.view.setSpeed(this.userDataModel.get_settingsVO().animationSpeedup);this._checkUnattachedBadgeOption();this.view.initModels(this.battleModel)
	},_onBattleRendererSpeed:function(a){this.view.setSpeed(a.speedUp)
	},_onUnitChanged:function(a){a=a.unitVO;a=a instanceof
HJ?a:null;null!=a&&this.view.get_unitId()==a.unitId&&(this.view.setUnitVo(a),this.view.loadImage(),this.view.set_hitpoints(a.getCurrentHitpoints()))
	},_checkUnattachedBadgeOption:function(){this.userDataModel.get_settingsVO().highlightUnattachedUnits&&this.view.set_showUnattachedUnitsBadge(!0)
	},__construct:function(a){Ga.prototype.__construct.call(this,a);this.view=a.getInstanceForMapping("de.innogames.strategycity.battle.view.battlehud.BattleUnitPanel");this.userDataModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.UserDataModel");
this.battleModel=a.getInstanceForMapping("de.innogames.strategycity.battle.model.BattleModel");return null
	},__class__:ema
});var Jk=function(a){this._selectedUnitId=0;this._modelLock=null;this._queueScrollSpeed=.3;this._openX=this._closeX=this._queueScrollIndex=this._queueLength=0;C.call(this);this._reflib=a;this.addChild(new B(a.getImage("unitbar")));a=new B(this._reflib.getImage("next_background"));a.set_x(22);this.addChild(a);this._nextTextField=P.createArialTextfield(15719334,!0,
	13,
	0);this.addChild(this._nextTextField);
this._nextTextField.set_x(24);this._nextTextField.set_width(a.get_width()-4);this._nextTextField.set_height(a.get_height());this._nextTextField.set_text(r.gettext("#10|Next"));this._battleUnits=[];this.addChild(this._openButton=this._newButton("btn_show",Jk._btnclose).setClickCallback(m(this,this._onShowClick)));this.addChild(this._closeButton=this._newButton("btn_hide",Jk._btnclose).setClickCallback(m(this,this._onHideClick)));this._leftButton=this._newButton("btn_left",Jk._btnprev);this._leftButton.setClickCallback(m(this,
this._clickPrevUnit));this._leftButton.set_enabled(!1);this.addChild(this._leftButton);this._rightButton=this._newButton("btn_right",Jk._btnnext);this._rightButton.setClickCallback(m(this,this._clickNextUnit));this._rightButton.set_enabled(!1);this.addChild(this._rightButton);this._scrollClipArea=new C;this.addChild(this._scrollClipArea);a=new Od;a.get_graphics().beginFill(16777215);a.get_graphics().drawRect(Jk._scrollarea.x,Jk._scrollarea.y,Jk._scrollarea.width,Jk._scrollarea.height);a.get_graphics().endFill();
this.addChild(a);this._scrollClipArea.set_mask(a);this._scrollPane=new C;this._scrollClipArea.addChild(this._scrollPane);this.addEventListener("addedToStage",m(this,this._onAddedToStage));this.addEventListener("removedFromStage",m(this,this._onRemovedFromStage));this._openX=191;this._closeX=191-this.get_width()+53|0
};h[
	"de.innogames.strategycity.battle.view.battlehud.BattleUnitsBar"
]=Jk;Jk.__name__="de.innogames.strategycity.battle.view.battlehud.BattleUnitsBar";Jk.__super__=C;Jk.prototype=l(C.prototype,
{setSpeed:function(a){this._queueScrollSpeed=.3*a;this._queueScrollSpeed=Math.max(0,Math.min(1,this._queueScrollSpeed))
	},initialize:function(a){null==this._battleModel&&(this._battleModel=a,this._unlockModel(),this._initUnitPanels(a.realm.state.unitsOrder),a.addStepListener(m(this,this._battleStep)))
	},updateUnitHP:function(a,b,c,d){a=this._getPanelById(a.unitId);c=this._getPanelById(c.unitId);null!=a&&a.set_hitpoints(b);null!=c&&c.set_hitpoints(d)
	},updateUnitBarForRecharge:function(){for(var a=0,
b=this._battleUnits;a<b.length;)this.checkForRecharge(b[a++
		].get_battleUnitVo())
	},updateUnitPanelHighlight:function(a){for(var b=0,c=this._battleUnits;b<c.length;){var d=c[b
			];++b;d.updateUnitPanelHighlight(a==d.get_battleUnitVo().unitId)
		}
	},checkForRecharge:function(a){if(a.hasUnitAbility(dT)){var b=this._getPanelById(a.unitId);0<a.getAbilityByClass(dT).roundsToSkip?(b.updateRechargeOverlay(!0),b.set_rechargeBattleRound(this._battleModel.get_currentRound())):b.get_rechargeBattleRound()<this._battleModel.get_currentRound()&&
(b.updateRechargeOverlay(!1),b.set_rechargeBattleRound(-1))
		}
	},_lockModel:function(){null==this._modelLock&&(this._modelLock=this._battleModel.lockStepping())
	},_unlockModel:function(){if(null!=this._modelLock){var a=this._modelLock;null!=a&&a.cancel();this._modelLock=null
		}
	},_battleStep:function(a,b,c){var d=Oc.findUnit(a.realm,b.unitId);a=Oc.findUnit(a.realm,b.attackedUnitId);switch(c){case 0:this._performSubstepInit(d);break;case 2:this._performSubstepAttack(b,d,a);break;case 3:this._performSubstepRetaliate(b,
d,a);break;case 4:this._performSubstepFinished(b,d,a)
		}this._battleModel.get_currentHistoryPosition()==this._battleModel.realm.state.stepHistory.length&&this.updateUnitBarForRecharge()
	},_performSubstepFinished:function(a,b,c){a.tookPoisonDamage&&(a=this._getPanelById(b.unitId),null!=a&&a.set_hitpoints(b.currentHitpoints))
	},_performSubstepInit:function(a){this._lockModel();this._selectUnit(a);this.checkForRecharge(a)
	},_performSubstepAttack:function(a,b,c){this._lockModel();this.updateUnitHP(b,a.unitHitpoints+
Math.max(0,a.receivedDamage)|0,c,a.attackedUnitHitpoints)
	},_performSubstepRetaliate:function(a,b,c){this._lockModel();a.tookPoisonDamage||this.updateUnitHP(b,a.unitHitpoints,c,a.attackedUnitHitpoints)
	},_clickNextUnit:function(a){this._queueScrollIndex=Math.min(this._queueLength-10,this._queueScrollIndex+1)|0
	},_clickPrevUnit:function(a){this._queueScrollIndex=Math.max(0,this._queueScrollIndex-1)|0
	},_onHideClick:function(a){var b=this;O._to(this,.7,
		{x:this._closeX
		});O._to(this._closeButton,.7,
		{alpha: 0,
onComplete:function(){b.removeChild(b._closeButton)
			}
		});O._to(this._rightButton,.7,
		{alpha: 0,onComplete:function(){b.removeChild(b._rightButton)
			}
		});O._to(this._leftButton,.7,
		{alpha: 0,onComplete:function(){b.removeChild(b._leftButton)
			}
		});this.disableAllMouseChildren(!1)
	},_onShowClick:function(a){this.addChild(this._closeButton);this.addChild(this._rightButton);this.addChild(this._leftButton);O._to(this,.7,
		{x:this._openX
		});O._to(this._closeButton,.7,
		{alpha: 1
		});O._to(this._rightButton,.7,
		{alpha: 1
		});O._to(this._leftButton,
.7,
		{alpha: 1
		});this.disableAllMouseChildren(!0)
	},disableAllMouseChildren:function(a){for(var b=0,c=this._battleUnits;b<c.length;){var d=c[b
			];++b;d.mouseChildren=a;d.mouseEnabled=a
		}
	},_newButton:function(a,b){a=new Oa(this._reflib.getImage(a+"_normal"),this._reflib.getImage(a+"_pressed"),this._reflib.getImage(a+"_hover"));a.set_x(b.x);a.set_y(b.y);return a
	},_getPanelById:function(a){for(var b=0,c=this._battleUnits;b<c.length;){var d=c[b
			];++b;if(d.get_unitId()==a)return d
		}return null
	},_selectUnit:function(a){if(0!=
this._battleUnits.length&&this._selectedUnitId!=a.unitId){this._selectedUnitId=a.unitId;for(var b=0,c=0,d=this._battleModel.realm.state.retiredUnits,e=0,g=this._battleUnits;e<g.length;){var k=g[e
				];++e;if(null!=d)for(var t=0;t<d.length;)d[t++
				].unitId==k.get_unitId()&&k.set_retired(!0);k.get_unitId()==a.unitId&&(b=c);0<k.get_hitpoints()&&!k.get_retired()&&++c
			}e=a=0;for(g=this._battleUnits;e<g.length;)k=g[e
			],++e,
			0==k.get_hitpoints()||k.get_retired()||(d=(c+a-b)%c,
			0<d?(k.parent!=this._scrollPane&&d<c-
1&&(this._scrollClipArea.removeChild(k),this._scrollPane.addChild(k),k.movePos(-this._scrollPane.get_x())),d=(d-1)*(Jk._unit_1.width+5)+Jk._unit_1.x,d>k.get_x()&&this.checkForRecharge(k.get_battleUnitVo()),k.set_targetX(d)):(k.parent!=this._scrollClipArea&&(this._scrollPane.removeChild(k),this._scrollClipArea.addChild(k),k.movePos(this._scrollPane.get_x())),k.set_targetX(Jk._activeunit.x)),++a);this._queueLength=c;this._queueScrollIndex=0
		}
	},_initUnitPanels:function(a){var b=0;if(null!=a)for(var c=
0;c<a.length;){var d=a[c
			];++c;var e=new Lh(this._reflib,d);e.set_contextView(this);e.setPos(Jk._unit_1.x+b*(Jk._unit_1.width+5),Jk._unit_1.y);this._scrollPane.addChild(e);e.update(d,b);this._battleUnits.push(e);e.set_hitpoints(this._battleModel.get_playFromStart()?d.startHitpoints:d.getCurrentHitpoints());++b
		}this._selectUnit(this._battleModel.getCurrentActiveUnit())
	},_onAddedToStage:function(a){this.addEventListener("enterFrame",m(this,this._onEnterRender))
	},_onRemovedFromStage:function(a){this.removeEventListener("enterFrame",
m(this,this._onEnterRender));this._unlockModel()
	},_onEnterRender:function(a){
		0<this._battleUnits.length&&(a=(-(this._battleUnits[
			0
		].get_width()|0)-5)*this._queueScrollIndex,this._scrollPane.set_x(a*this._queueScrollSpeed+this._scrollPane.get_x()*(1-this._queueScrollSpeed)),this._rightButton.set_enabled(7<this._queueLength&&this._queueScrollIndex<this._queueLength-10),this._leftButton.set_enabled(0<this._queueScrollIndex));if(null!=this._modelLock){a=!1;for(var b=this._battleUnits.length;0!=b--;)if(!this._battleUnits[b
			].hasReachedTarget()){a=
!0;break
			}a||this._unlockModel()
		}this._battleModel.get_hasRemainingSteps()||this._selectUnit(Oc.findUnit(this._battleModel.realm,this._battleModel.get_currentActiveUnitId()))
	},__class__:Jk
});var Qla=function(){};h[
	"de.innogames.strategycity.battle.view.battlehud.BattleUnitsBarMediator"
]=Qla;Qla.__name__="de.innogames.strategycity.battle.view.battlehud.BattleUnitsBarMediator";Qla.__instantiate=function(a){return new Qla
};Qla.__super__=V;Qla.prototype=l(V.prototype,
{onRegister:function(){mh.get_instance().mapUIActor("BATTLEFIELD_UNITS_BAR",
this._view);this.get_eventMap().mapListener(this.get_eventDispatcher(),
		"BattleRendererEvent/SPEED",m(this,this._onBattleRendererSpeed));this.get_eventMap().mapListener(this.get_eventDispatcher(),
		"BattleUnitEvent/HIGHLIGHT_HOVERED_UNIT",m(this,this._onHoveredUnit));this._view.setSpeed(Fm.getAnimationSpeedFactor(this._userDataModel.get_settingsVO().animationSpeedup))
	},_onBattleRendererSpeed:function(a){this._view.setSpeed(Fm.getAnimationSpeedFactor(a.speedUp))
	},_onHoveredUnit:function(a){a=a.get_battleUnit();
this._view.updateUnitPanelHighlight(null!=a?a.unitId: 0)
	},__construct:function(a){V.prototype.__construct.call(this,a);this._view=a.getInstanceForMapping("de.innogames.strategycity.battle.view.battlehud.BattleUnitsBar");this._userDataModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.UserDataModel");return null
	},__class__:Qla
});var YS=function(a){L.call(this);a=a.h[
		"shared/gui/hud/hud"
	];null==a&&null!=y._reportError&&y._reportError(Error('[LOGGER
	] Failed to get library "shared/gui/hud/hud" from LoadedReflibs.'));
this._hudRefLib=a;this.set_y(-100)
};h[
	"de.innogames.strategycity.battle.view.battlehud.CancelReplayComponent"
]=YS;YS.__name__="de.innogames.strategycity.battle.view.battlehud.CancelReplayComponent";YS.__super__=L;YS.prototype=l(L.prototype,
{_onAddedToStage:function(a){L.prototype._onAddedToStage.call(this,a);this._requireAssets([
			"shared/gui/hud/hud"
		])
	},_onAssetsLoaded:function(){this.addChild(new B(this._hudRefLib.getImage("cancel_background")));this._cancelButton=new m8;this._cancelButton.setLabelText(r.gettext("Results"));
this._cancelButton.set_x(22);this._cancelButton.set_y(37);this._cancelButton.set_id("cancel");this.addChild(this._cancelButton);this.resize();this.addEventListener("mouseOver",m(this,this._onMouseOver),!0);this.addEventListener("mouseOut",m(this,this._onMouseOut),!0);this.addEventListener("click",m(this,this._onMouseClick),!0)
	},_onRemovedFromStage:function(a){L.prototype._onRemovedFromStage.call(this,a);this.removeEventListener("mouseOver",m(this,this._onMouseOver),!0);this.removeEventListener("mouseOut",
m(this,this._onMouseOut),!0);this.removeEventListener("click",m(this,this._onMouseClick),!0)
	},toggleMenu:function(a){O.killTweensOf(this);O._to(this,.75,
		{y:a?30: -100,ease:qd.easeInOut
		})
	},_onResize:function(a){L.prototype._onResize.call(this,a);this.resize()
	},resize:function(){this.set_x(this.stage.stageWidth/2-this.get_width()/2)
	},_onMouseClick:function(a){this.dispatchEvent(a)
	},_onMouseOut:function(a){null!=this._tooltip&&this._tooltip.hide()
	},_onMouseOver:function(a){null!=this._tooltip&&this._tooltip.dispose();
this._tooltip=new Gb;this._tooltip.set_text(r.gettext("Finish the battle immediately"));this._getTooltipContainer().addChild(this._tooltip);this._tooltip.show()
	},__class__:YS
});var Sla=function(){};h[
	"de.innogames.strategycity.battle.view.battlehud.CancelReplayComponentMediator"
]=Sla;Sla.__name__="de.innogames.strategycity.battle.view.battlehud.CancelReplayComponentMediator";Sla.__instantiate=function(a){return new Sla
};Sla.__super__=Ga;Sla.prototype=l(Ga.prototype,
{onRegister:function(){this.get_eventMap().mapListener(this.moduleDispatcher,
		"BattleTurnModelEvent/REPLAY_STARTED",m(this,this._onAutoBattleStart),tk);this.get_eventMap().mapListener(this.moduleDispatcher,
		"BattleTurnModelEvent/BATTLE_FINISHED",m(this,this._onAutoBattleStop),tk);this.addViewListener("click",m(this,this._onCancelButtonClicked),Cd,!0);lh.isReplayBattle(this.applicationBattleModel.battleType)&&this._toggleMenu(!0)
	},_onAutoBattleStart:function(a){this._toggleMenu(!0)
	},_onAutoBattleStop:function(a){this._toggleMenu(!1)
	},_toggleMenu:function(a){this.view.toggleMenu(a)
	},
_onCancelButtonClicked:function(a){this._toggleMenu(!1);this.dispatchToModules(new tk("BattleTurnModelEvent/BATTLE_FINISHED"))
	},__construct:function(a){Ga.prototype.__construct.call(this,a);this.view=a.getInstanceForMapping("de.innogames.strategycity.battle.view.battlehud.CancelReplayComponent");this.appModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationModel");this.applicationBattleModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationBattleModel");
return null
	},__class__:Sla
});var l8=function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);D.call(this,a,b,c)
};h[
	"de.innogames.strategycity.battle.view.events.BattleMenuBarEvent"
]=l8;l8.__name__="de.innogames.strategycity.battle.view.events.BattleMenuBarEvent";l8.__super__=D;l8.prototype=l(D.prototype,
{clone:function(){return new l8(this.type,this.bubbles,this.cancelable)
	},__class__:l8
});var BJ=function(a,b,c){null==b&&(b=1);this.speedUp=0;D.call(this,a,!1,!1);this.speedUp=b;this.unitVO=c
};h[
	"de.innogames.strategycity.battle.view.events.BattleRendererEvent"
]=
BJ;BJ.__name__="de.innogames.strategycity.battle.view.events.BattleRendererEvent";BJ.__super__=D;BJ.prototype=l(D.prototype,
{clone:function(){return new BJ(this.type,this.speedUp,this.unitVO)
	},__class__:BJ
});var Ur=function(a,b){D.call(this,a);this.unitPosition=b
};h[
	"de.innogames.strategycity.battle.view.events.BattleSpecialAnimationEvent"
]=Ur;Ur.__name__="de.innogames.strategycity.battle.view.events.BattleSpecialAnimationEvent";Ur.__super__=D;Ur.prototype=l(D.prototype,
{clone:function(){return new Ur(this.type,
this.unitPosition)
	},__class__:Ur
});var l_=function(a,b,c,d){null==d&&(d=!1);null==c&&(c=!1);null==b&&(b=-1);this._unitID=0;D.call(this,a,c,d);this._unitID=b
};h[
	"de.innogames.strategycity.battle.view.events.BattleUnitsbarEvent"
]=l_;l_.__name__="de.innogames.strategycity.battle.view.events.BattleUnitsbarEvent";l_.__super__=D;l_.prototype=l(D.prototype,
{clone:function(){return new l_(this.type,this._unitID,this.bubbles,this.cancelable)
	},get_unitID:function(){return this._unitID
	},__class__:l_,__properties__: {get_unitID: "get_unitID"
	}
});
var LXa=function(a){La.call(this);this._pointsDetailed=a;this._createTooltip()
};h[
	"de.innogames.strategycity.battle.view.summary.BattleResultDetailsTooltip"
]=LXa;LXa.__name__="de.innogames.strategycity.battle.view.summary.BattleResultDetailsTooltip";LXa.__super__=La;LXa.prototype=l(La.prototype,
{_createTooltip:function(){this._createHeadline(r.gettext("Point Breakdown"));this._addLabelWithBG(r.gettext("Damage dealt"),U.printf(r.gettext("+%d"),this._pointsDetailed.damageDealt),
		0,
		16446953,
		8772638);
0!=this._pointsDetailed.happinessModifier&&(0>this._pointsDetailed.happinessModifier?this._addLabelWithBG(r.gettext("Happiness modifier"),U.printf("%d",this._pointsDetailed.happinessModifier),
		3,
		16446953,
		16012629):this._addLabelWithBG(r.gettext("Happiness modifier"),U.printf(r.gettext("+%d"),this._pointsDetailed.happinessModifier),
		3,
		16446953,
		8772638));this._addLabelWithBG(r.gettext("Damage received"),U.printf(r.gettext("%d"),this._pointsDetailed.damageRecieved),
		3,
		16446953,
		16012629);this.addComponent(new ub(5,
		5));var a=this._pointsDetailed.waveModifier;0!=a&&(0>a?this._addLabelWithBG(r.gettext("Wave modifier"),U.printf("-%d%",
		100),
		3,
		16446953,
		16012629):this._addLabelWithBG(r.gettext("Wave modifier"),U.printf(r.gettext("+%d"),a),
		3,
		16446953,
		8772638))
	},_addLabelWithBG:function(a,b,c,d,e){null==e&&(e=16446953);null==d&&(d=16446953);null==c&&(c=0);null==b&&(b="");var g=new Fe;g.set_x(5);g.setBackgroundSize(270,
		30,
		160);g.set_text(a);g.set_value(b);g.set_textColor(d);g.set_valueColor(e);this.addComponent(g,c)
	},
invalidate:function(){this.set_x(this.stage.get_mouseX());this.set_y(this.stage.get_mouseY());La.prototype.invalidate.call(this)
	},__class__:LXa
});var IC=function(){};h[
	"de.innogames.strategycity.battle.view.summary.BattleSummaryHeaderConfig"
]=IC;IC.__name__="de.innogames.strategycity.battle.view.summary.BattleSummaryHeaderConfig";IC.getHeaderImageSuffix=function(a){if(null==a)return"default";null==IC._configs&&IC._initializeConfigs();var b="default";a=Qb.getIdByName(a);for(var c=0,d=IC._configs;c<
d.length;){var e=d[c
		];++c;if(a>=e.eraIndex)b=e.headerId;else break
	}return b
};IC.getFullHeaderImageId=function(a,b){return(b?"victory_": "defeat_")+a
};IC._initializeConfigs=function(){IC._configs=[
		{eraIndex: 8,headerId: "progressive"
		},
		{eraIndex: 13,headerId: "future"
		},
		{eraIndex: 15,headerId: "oceanic"
		},
		{eraIndex: 16,headerId: "virtual"
		},
		{eraIndex: 17,headerId: "mars"
		},
		{eraIndex: 18,headerId: "asteroidbelt"
		},
		{eraIndex: 19,headerId: "venus"
		},
		{eraIndex: 20,headerId: "jupitermoon"
		},
		{eraIndex: 21,headerId: "titan"
		},
		{eraIndex: 22,
headerId: "spaceagespacehub"
		}
	]
};var Al=function(a,b){null==b&&(b=0);this._rowCount=0;this._bottomLineAlpha=.4;this._topLineAlpha=1;this._alternateBackground=!1;this._rows=this._columns=this._itemWidth=this._itemHeight=0;C.call(this);this._columns=b;this._alternateBackground=a
};h[
	"de.innogames.strategycity.shared.ui.components.container.BaseTable"
]=Al;Al.__name__="de.innogames.strategycity.shared.ui.components.container.BaseTable";Al.__super__=C;Al.prototype=l(C.prototype,
{defineRows:function(a){this._rows=
a
	},defineColums:function(a){this._columns=a
	},defineDim:function(a,b){this._itemHeight=b;this._itemWidth=a
	},get_numberOfElements:function(){return null!=this._displayObjects?this._displayObjects.length: 0
	},addElement:function(a){null==this._displayObjects&&(this._displayObjects=[]);this._displayObjects.push(a);this._rowCount++
	},reset:function(){if(null!=this._displayObjects&&0!=this._displayObjects.length){for(;0!=this._displayObjects.length;)this.removeChild(this._displayObjects.pop());this.removeChild(this._linesContainer);
this.removeChild(this._rowBackground)
		}
	},drawTable:function(a){this._linesContainer=new C;0==this._columns&&ya.gt(this._rows,
		0)&&(this._columns=Math.floor(ya.toFloat(this._displayObjects.length)/ya.toFloat(this._rows)));this._createBackground();this.drawDisplayObjects(a);this.addChild(this._linesContainer)
	},drawDisplayObjects:function(a){if(null!=this._displayObjects)for(var b=0,c=0,d=0,e=this._displayObjects;d<e.length;){var g=e[d
			];++d;g.set_x(b*this._itemWidth);g.set_y(c*(this._itemHeight+2)+1);
if(0==b){var k=new B(Al.BOTTOM_LINE_BITMAPDATA);k.set_alpha(this._bottomLineAlpha);k.set_y(c*(this._itemHeight+2));k.set_width(ya.toFloat(this._columns*this._itemWidth));this._linesContainer.addChild(k);this._alternateBackground&&(null!=a&&a.h[c
				]?(k=new B(Al.TABLE_BG_RECTANGLE),k.set_alpha(.6)): 1==c%2?(k=new B(Al.TABLE_BG_RECTANGLE),k.set_alpha(.15)):k=new ub(1,
				1),k.set_x(0),k.set_y(c*(this._itemHeight+2)),k.set_width(ya.toFloat(this._columns*this._itemWidth)),k.set_height(this._itemHeight+1),this._rowBackground.addChild(k));
k=new B(Al.TOP_LINE_BITMAPDATA);k.set_alpha(this._topLineAlpha);k.set_y((c+1)*(this._itemHeight+2)-1);k.set_width(ya.toFloat(this._columns*this._itemWidth));this._linesContainer.addChild(k)
			}b==this._columns-1?(b=0,++c):++b;this.addChild(g)
		}
	},set_topLineAlpha:function(a){return this._topLineAlpha=a
	},set_bottomLineAlpha:function(a){return this._bottomLineAlpha=a
	},get_rows:function(){return this._rows
	},get_columns:function(){return this._columns
	},get_itemWidth:function(){return this._itemWidth
	},get_rowCount:function(){return this._rowCount
	},
_createBackground:function(){this._rowBackground=new C;this.addChild(this._rowBackground)
	},__class__:Al,__properties__:l(C.prototype.__properties__,
	{get_rowCount: "get_rowCount",get_itemWidth: "get_itemWidth",get_columns: "get_columns",get_rows: "get_rows",set_bottomLineAlpha: "set_bottomLineAlpha",set_topLineAlpha: "set_topLineAlpha",get_numberOfElements: "get_numberOfElements"
	})
});var MXa=function(a,b){Al.call(this,a,b);this.defineRows(1)
};h[
	"de.innogames.strategycity.battle.view.summary.BattleSummaryUnitsTable"
]=
MXa;MXa.__name__="de.innogames.strategycity.battle.view.summary.BattleSummaryUnitsTable";MXa.__super__=Al;MXa.prototype=l(Al.prototype,
{drawTable:function(a){this._linesContainer=new C;this._rowBackground=new C;this.addChild(this._rowBackground);a=0;for(var b=1;ya.gte(this.get_rows(),b);){var c=(b-1)*(this._itemHeight+2)+1,d=new B(Al.BOTTOM_LINE_BITMAPDATA);d.set_alpha(this._bottomLineAlpha);d.set_y((b-1)*(this._itemHeight+2));d.set_width(ya.toFloat(this._columns*this._itemWidth));this._linesContainer.addChild(d);
this._alternateBackground&&(1==b%2?(d=new B(Al.TABLE_BG_RECTANGLE),d.set_alpha(.15)):d=new ub(1,
			1),d.set_x(0),d.set_y((b-1)*(this._itemHeight+2)),d.set_width(ya.toFloat(this._columns*this._itemWidth)),d.set_height(this._itemHeight+1),this._rowBackground.addChild(d));d=new B(Al.TOP_LINE_BITMAPDATA);d.set_alpha(this._topLineAlpha);d.set_y(b*(this._itemHeight+2)-1);d.set_width(ya.toFloat(this._columns*this._itemWidth));this._linesContainer.addChild(d);for(d=1;ya.gte(this.get_columns(),d);){if(a<this._displayObjects.length){var e=
K.__cast(this._displayObjects[a
					],n8);e.set_x((d-1)*this._itemWidth);2==e.get_unitVo().teamFlag&&0==a%2&&e.set_x(e.get_x()+40);2==e.get_unitVo().teamFlag&&1==a%2&&e.set_x(e.get_x()+10);1==e.get_unitVo().teamFlag&&e.set_x(e.get_x()+5);e.set_y(c);this.addChild(e)
				}++a;++d
			}++b
		}
	},__class__:MXa
});var IJ=function(a,b,c){this._summaryUnitHealables=new $d;this._isVictory=this._isReplay=this._isClanBattle=this._disableRanking=!1;this._picWidth=this._picHeight=this._tableHeight=this._playerId=this._maxPoints=
0;this._ranking=[];ca.call(this);this.battleType=c;this.battleRealmState=a;this._isVictory=b;this._initComponents();this._shortcutContext=new xF(m(this,this._onShortcutPressed))
};h[
	"de.innogames.strategycity.battle.view.summary.BattleSummaryWindow"
]=IJ;IJ.__name__="de.innogames.strategycity.battle.view.summary.BattleSummaryWindow";IJ.__super__=ca;IJ.prototype=l(ca.prototype,
{onButtonWithShortcutInteracted:function(a,b){},addPlayerUnit:function(a,b,c,d,e){var g=new n8;this._summaryUnitHealables.set(a,
g);g.init(a,b,c,d,e);b?(this._opponentTable.addElement(g),g.set_x(20)):(this._isReplay?(g.get_healButton().set_visible(!1),g.get_healButton().set_width(0)):g.get_healButton().addEventListener("click",m(this,this._onHealButtonClick),!1,
		0,!0),this._playerTable.addElement(g))
	},addReplayButton:function(){var a=new Oa(this._buttonReflib.getImage("replayUp"),this._buttonReflib.getImage("replayDown"),this._buttonReflib.getImage("replayOver"));a.set_id("replay");a.setMargin(0,
		0,
		0,
		25);a.set_x(this._picWidth-
38);a.set_y(this._tableHeight+5);a.addEventListener("ButtonEvent/clicked",m(this,this._onButtonWithShortcutClicked));this._content.addChild(a)
	},addPlunderButtons:function(){var a=r.gettext("Back to city");this._backToCityButton=new JC("default");this._backToCityButton.set_x(.5*this._picWidth+5);this._backToCityButton.set_y(this._tableHeight+5);this._backToCityButton.set_id("close");this._backToCityButton.setText(a);this._backToCityButton.set_tooltipText(Je.makeTooltipText(a,
		27));this._backToCityButton.set_tooltipShowDelay(1E3);
this._backToCityButton.addEventListener("ButtonEvent/clicked",m(this,this._onButtonWithShortcutClicked));this._content.addChild(this._backToCityButton);this._finishButton.setText(r.gettext("Sabotage"));this._finishButton.set_x(.5*this._picWidth-176);this._finishButton.set_id("plunder")
	},finishDrawing:function(){var a=this.battleRealmState.hasNextWave();this._content=new C;this._setRanking();this._buildHeader();this._disableRanking||!this.battleRealmState.ranking_data.tournament_running||a?this.battleType instanceof
BC&&!a&&this.set_y(45):this._buildRankingOverview();this._buildUnitPanels();this._finishButton.set_y(this._tableHeight+5);!this._isReplay&&a?(a=r.gettext("Start Next Battle"),this._finishButton.set_x(10),this._finishButton.setText(a),this._finishButton.set_id("attack"),this._finishButton.set_tooltipText(Je.makeTooltipText(a,xF.KEY_ATTACK)),this._finishButton.set_tooltipShowDelay(1E3),this._addNextWaveButtons()):(this._finishButton.set_x(.5*this._picWidth-82|0),this._finishButton.setText(r.gettext("OK")),
this._finishButton.set_id("close"));this._content.addChild(this._finishButton);a=new Od;a.get_graphics().drawRect(0,
		0,
		100,
		22);a.set_x(this._finishButton.get_x());a.set_y(this._finishButton.get_y());this._addCastleSystemBannerIfNeeded();this._content.addChild(a);this.addContent(this._content);this.set_headline(this._getHeadline())
	},setData:function(a,b){var c=a.h[
			"battle/summary/battle_summary"
		];null==c&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "battle/summary/battle_summary" from LoadedReflibs.'));
this._summaryRefLib=c;c=a.h[
			"shared/buttons/buttons"
		];null==c&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "shared/buttons/buttons" from LoadedReflibs.'));this._buttonReflib=c;c=a.h[
			"shared/gui/pvp_arena/hud/pvp_arena_hud"
		];null==c&&null!=y._reportError&&y._reportError(Error('[LOGGER
		] Failed to get library "shared/gui/pvp_arena/hud/pvp_arena_hud" from LoadedReflibs.'));this._pvpArenaReflib=c;this._playerId=b
	},_onRemovedFromStage:function(a){null!=this._tooltip&&this._tooltip.dispose();
ca.prototype._onRemovedFromStage.call(this,a)
	},_onHealButtonClick:function(a){this.dispatchEvent(a)
	},_onResultMouseOver:function(a){null!=this._tooltip&&this._tooltip.show()
	},_onResultMouseOut:function(a){null!=this._tooltip&&this._tooltip.hide()
	},_initComponents:function(){this._isReplay=this.battleType instanceof zC;this._isClanBattle=this.battleType instanceof Dq;this._isPVPArena=this.battleType instanceof sF;this._finishButton=new JC("green");this._finishButton.set_clickDelayEnabled(!1);this._finishButton.addEventListener("ButtonEvent/clicked",
m(this,this._onButtonWithShortcutClicked));this._playerTable=new MXa(!0,
		2);this._playerTable.defineRows(4);this._playerTable.defineDim(160,
		50);var a=this._playerTable;a.set_x(a.get_x()+2);this._opponentTable=new MXa(!0,
		2);this._opponentTable.defineRows(4);this._opponentTable.defineDim(106,
		50);this._playerTable.set_y(this._opponentTable.set_y(28));this._closeButton.set_visible(!1)
	},_addNextWaveButtons:function(){var a=r.gettext("PME|Retreat");this._retreatButton=new JC("red");this._retreatButton.addEventListener("ButtonEvent/clicked",
m(this,this._onButtonWithShortcutClicked));this._retreatButton.set_id("retreat");this._retreatButton.setText(a);this._retreatButton.set_tooltipText(Je.makeTooltipText(a,
		27));this._retreatButton.set_tooltipShowDelay(1E3);this._retreatButton.set_x(376);this._retreatButton.set_y(this._tableHeight+5);this._content.addChild(this._retreatButton);a=r.gettext("Auto Battle");this._autoBattleButton=new JC("default");this._autoBattleButton.set_id("autobattle");this._autoBattleButton.set_clickDelayEnabled(!1);
this._autoBattleButton.addEventListener("ButtonEvent/clicked",m(this,this._onButtonWithShortcutClicked));this._autoBattleButton.setText(a);this._autoBattleButton.set_tooltipText(Je.makeTooltipText(a,xF.KEY_AUTO_BATTLE));this._autoBattleButton.set_tooltipShowDelay(1E3);this._autoBattleButton.set_x(193);this._autoBattleButton.set_y(this._tableHeight+5);this._content.addChild(this._autoBattleButton)
	},_setRanking:function(){for(var a=0,b=0,c=this.battleRealmState.ranking_data.ranking;b<c.length;){var d=
c[b
			];++b;null!=d.player&&d.player.player_id==this._playerId&&(this._playerCprVO=d);d.total_points>a&&(a=d.total_points);this._era=d.era;this._ranking.push(d)
		}this._maxPoints=a|0
	},_setTower:function(){this._towerContainer=new C;this._towerContainer.addChild(new B(this._summaryRefLib.getImage("tower_bg")));this._towerContainer.set_x(5);this._towerContainer.set_y(5);var a=new NXa(this._era);a.set_x(44);a.set_y(44);this._towerContainer.addChild(a)
	},_buildUnitPanels:function(){var a=new fm;a.addPadding(-9,
		-9);var b=P.createArialTextfield(8625337,!0);b.set_x(18);b.set_y(3);b.set_width(170);b.set_text(r.gettext("Your Army"));a.addContent(new B(this._summaryRefLib.getImage("headline_player")));a.addContent(b);a.addContent(this._playerTable);this._createHealAllButton(a);b=new fm;b.addPadding(-9,
		-9);var c=P.createArialTextfield(8625337,!0);c.set_x(16);c.set_y(3);c.set_width(170);c.set_text(r.gettext("Opponent's Army"));b.addContent(new B(this._summaryRefLib.getImage("headline_opponent")));b.addContent(c);
b.addContent(this._opponentTable);this._opponentTable.defineRows(4);this._playerTable.defineRows(4);this._playerTable.drawTable();this._opponentTable.drawTable();a.drawSkin();b.drawSkin();this._content.addChild(b);this._content.addChild(a);c=this.battleRealmState.hasNextWave();this._disableRanking||!this.battleRealmState.ranking_data.tournament_running||c?a.set_y(b.set_y(this._headerPanel.get_y()+this._headerPanel.get_height()+3)):a.set_y(b.set_y(this._overview.get_y()+103));this._isReplay?a.set_x(b.get_width()+
5):b.set_x(a.get_width()+5);this._tableHeight=(a.get_height()>b.get_height()?a.get_height()|0:b.get_height()|0)|0;this._tableHeight+=a.get_y()|0;c&&this._addNextWavePanel(this.battleRealmState.ranking_data.nextArmy)
	},_createHealAllButton:function(a){var b=new C;b.addChild(Ob.createTintedRectangle(212,
		30,.15,
		12156220,
		1));this.healAllButton=new si(this._buttonReflib.getImage("premiumUp"),this._buttonReflib.getImage("premiumDown"),this._buttonReflib.getImage("premiumOver"));var c=new aa("premium");c.set_x(2);
this.healAllButton.addCenteredIcon(c);this.healAllButton.setSize(177,
		26);this.healAllButton.setText(r.gettext("Heal all"),
		16777215);this.healAllButton.set_x(145);b.addChild(this.healAllButton);a.addContent(b)
	},_addNextWavePanel:function(a){var b=new fm;b.addPadding(-9,
		-9);var c=P.createArialTextfield(8625337,!0);c.set_x(18);c.set_y(3);c.set_width(532);c.set_text(r.gettext("PME|Second Wave Army"));var d=new ua(this._summaryRefLib.getImage("headline_opponent"),new Z(2,
		2,
		212,
		22));d.set_width(550);d.set_height(26);
b.addContent(d);b.addContent(c);c=new C;c.addChild(new ub(550,
		52));d=a.units.length;for(var e=275-d/2*60|0,g=0;g<d;){var k=g++,t=new n8;t.init(this._createIconBattleUnitVO(a.units[k
			]),!0);t.set_x(e+60*k);c.addChild(t)
		}c.set_y(28);b.addContent(c);b.set_y(this._tableHeight);this._tableHeight+=b.get_height()|0;this._content.addChild(b)
	},_createIconBattleUnitVO:function(a){var b=new HJ;b.unitId=a.unitId;b.ownerId=a.ownerId;b.abilities=a.abilities;b.bonuses=a.bonuses;b.unitTypeId=a.get_unitType().unitTypeId;
b.entity_id=a.entity_id;b.currentHitpoints=a.currentHitpoints;return b
	},_buildHeader:function(){this._headerPanel=this._createHeaderBackground();this._content.addChild(this._headerPanel);var a=P.createArialTextfield(0,!0,
		20,
		0),b=this._isClanBattle?r.gettext("GvG|Battle Aborted!"):r.gettext("Opponent retreated!");a.set_width(250);a.set_height(30);a.set_text(this._isVictory?this.battleRealmState.isSurrendered()?b:r.gettext("Victory!"):r.gettext("Defeat!"));a.set_x((this._content.get_width()-a.get_width())/
2);a.set_y(110);this._content.addChild(a);this._isReplay||(this._isPVPArena?(a.set_y(99),a=this._createPVPArenaRankingPoints(),a.set_y(128),this._content.addChild(a),this._isVictory?(b=this._createNormalRankingPoints(),b.set_x(317-b.get_width()-10),b.set_y(128),this._content.addChild(b),a.set_x(327)):a.set_x((this._content.get_width()-a.get_width())/2)):(this._isVictory&&a.set_y(96),a=this._createNormalRankingPoints(),a.set_x((this._content.get_width()-a.get_width())/2),a.set_y(123),this._content.addChild(a)))
	},
_createPVPArenaRankingPoints:function(){var a=new C,b=this.battleRealmState.ranking_data.pvpArenaRankingPoints,c=new B(this._pvpArenaReflib.getImage("pvp_arena_icon_ranking"));c.set_scaleX(c.set_scaleY(.5));c.smoothing=!0;c.set_y(2);a.addChild(c);var d=P.createArialTextfield(0,!0,
		15,
		3);d.set_autoSize(1);d.set_x(c.get_width()+3);d.set_text(0==b?null==b?"null": ""+b:this._isVictory?"+"+b:null==b?"null": ""+b);a.addChild(d);return a
	},_createNormalRankingPoints:function(){var a=new C,b=this._getHappinessBonus();
if(this._isVictory){this._getRankingPointsText();var c=P.createArialTextfield(0,!0,
			15,
			3);c.set_autoSize(1);c.set_text(this._getRankingPointsText()+" ("+b);a.addChild(c);var d=new aa("cup");c.set_x(d.get_width()+2);a.addChild(d);b=new aa("120%"==b?"happiness": "100%"==b?"smile": "angry");b.set_x(c.get_x()+c.get_width());c.appendText("       )");a.addChild(b)
		}c=this._getBattleResultDetails();null!=c&&(this._tooltip=new LXa(c),this._getTooltipContainer().addChild(this._tooltip),a.addEventListener("mouseOver",
m(this,this._onResultMouseOver)),a.addEventListener("mouseOut",m(this,this._onResultMouseOut)));return a
	},_getRankingPointsText:function(){return null!=this._playerCprVO?fa.string(this._playerCprVO.points):r.gettext("No Ranking")
	},_getBattleResultDetails:function(){return null!=this._playerCprVO?this._playerCprVO.battle_result_details: null
	},_createHeaderBackground:function(){var a=this.battleType instanceof BN?this.battleType.contentId:this._isPVPArena?"pvp_arena":this.battleType instanceof CN?IC.getHeaderImageSuffix("IronAge"):
IC.getHeaderImageSuffix(this._era);var b=IC.getFullHeaderImageId(a,this._isVictory);a=new fm;b=new B(this._summaryRefLib.getImage(b));a.set_panelPaddingX(4);a.set_panelPaddingY(4);this._picWidth=b.get_width()|0;a.setSize(b.get_width()+2|0,b.get_height()+2|0);this._picHeight=a.get_height()|0;a.addContent(b);return a
	},_buildRankingOverview:function(){this._overview=new fm;this._overview.setSize(this._picWidth+5,
		100);this._overview.set_y(this._picHeight+3);this._overview.addPadding(-14,
		-14);var a=new Pb,
b=new Al(!0,
		1);b.set_topLineAlpha(0);b.set_bottomLineAlpha(0);b.defineDim(this._picWidth-93,
		30);b.set_x(95);b.set_y(2);for(var c=this._ranking,d=0;d<c.length;){var e=c[d
			],g=d++,k=e.player.name,t=e.player.player_id==this.get_playerId();b.addElement(new o8(e.player.avatar,null==e.place?"null": ""+e.place,k,null==e.total_points?"null": ""+e.total_points,t,this._picWidth-93,this._maxPoints));a.h[g
			]=t
		}b.drawTable(a);this._overview.addContent(b);this._overview.get_graphics().lineStyle(1,
		2364418,
		1);this._overview.get_graphics().moveTo(b.get_x(),
		32);this._overview.get_graphics().lineTo(this._picWidth+4,
		32);this._overview.get_graphics().lineStyle(1,
		13079896,.4);this._overview.get_graphics().moveTo(b.get_x(),
		33);this._overview.get_graphics().lineTo(this._picWidth+4,
		33);this._overview.get_graphics().lineStyle(1,
		2364418,
		1);this._overview.get_graphics().moveTo(b.get_x(),
		64);this._overview.get_graphics().lineTo(this._picWidth+4,
		64);this._overview.get_graphics().lineStyle(1,
		13079896,.4);this._overview.get_graphics().moveTo(b.get_x(),
		65);this._overview.get_graphics().lineTo(this._picWidth+
4,
		65);this._overview.drawSkin();this._setTower();this._overview.addContent(this._towerContainer);this._content.addChild(this._overview)
	},_onButtonWithShortcutClicked:function(a){this.onButtonWithShortcutInteracted(a.id,p8.Click(a))
	},_onShortcutPressed:function(a){switch(a){case "BattleSummaryShortcutContext/ACTION_ATTACK":a="attack"==this._finishButton.get_id()?"attack":null;break;case "BattleSummaryShortcutContext/ACTION_AUTO_BATTLE":a=null!=this._autoBattleButton?"autobattle":null;break;case "WindowShortcutContext/ACTION_CLOSE_WINDOW":a=
"close"==this._finishButton.get_id()||null!=this._backToCityButton?"close":null!=this._retreatButton?"retreat":null;break;default:a=null
		}if(null!=a)this.onButtonWithShortcutInteracted(a,p8.KeyboardShortcut)
	},_addCastleSystemBannerIfNeeded:function(){if(!this._isReplay){var a=this.battleRealmState.ranking_data.castlePoints;0!=a&&(a=new EN(Zz.Battle(this._summaryRefLib),a),this._content.addChild(a))
		}
	},_getHappinessBonus:function(){return 0!=this.battleRealmState.ranking_data.mood_factor?this.battleRealmState.ranking_data.mood_factor+
"%": "100%"
	},_getHeadline:function(){return this._isClanBattle?this._isReplay?r.gettext("GvG|Guild Battle Result (Replay)"):r.gettext("GvG|Guild Battle Result"):this._isReplay?r.gettext("Battle Result (Replay)"):r.gettext("Battle Result")
	},get_playerId:function(){return this._playerId
	},get_finishButton:function(){return this._finishButton
	},set_disableRanking:function(a){return this._disableRanking=a
	},get_summaryUnitHealables:function(){return this._summaryUnitHealables
	},__class__:IJ,__properties__:l(ca.prototype.__properties__,
	{get_summaryUnitHealables: "get_summaryUnitHealables",set_disableRanking: "set_disableRanking",get_finishButton: "get_finishButton",get_playerId: "get_playerId"
	})
});var vma=function(){this._continueWithAutoBattle=this._showReplayOfTheLastBattle=this._hasNextWave=this._shouldPlunder=!1;this._watchedUnits=new $d
};h[
	"de.innogames.strategycity.battle.view.summary.BattleSummaryWindowMediator"
]=vma;vma.__name__="de.innogames.strategycity.battle.view.summary.BattleSummaryWindowMediator";vma.__instantiate=function(a){return new vma
};
vma.__super__=Ga;vma.prototype=l(Ga.prototype,
{onRegister:function(){this.addViewListener("click",m(this,this._onHealingClicked),Cd,!0);lh.isClanBattle(this._view.battleType)||(this._hasNextWave=this._view.battleRealmState.hasNextWave());var a=m(this,this._handleAssetsLoaded);yb.getInstance().load([
			"battle/summary/battle_summary",
			"shared/buttons/buttons",
			"shared/gui/pvp_arena/hud/pvp_arena_hud"
		]).handle(function(b){switch(b._hx_index){case 0:za.invoke(a,b.data);break;case 1:b=b.failure,null!=y._reportError&&
y._reportError(Error("[LOGGER] "+b.message))
			}
		});this._view.onButtonWithShortcutInteracted=m(this,this._onButtonClicked)
	},_onButtonClicked:function(a,b){switch(a){case "attack":case "close":switch(b._hx_index){case 0:if(b=b.buttonEvent,lh.isClanBattle(this._view.battleType)||lh.isBattlegroundBattle(this._view.battleType))this.dispatchToModules(new FN(new $z(b.mouseX,b.mouseY,
				"battle_result_close"))),
				"attack"==a&&lh.isBattlegroundBattle(this._view.battleType)&&(this.dispatchToModules(new ha("WindowEvent/CLOSE_ALL_WINDOW")),
this._applicationGuildBattlegroundModel.cachedOpenProvinceWindowId=K.__cast(this._view.battleType,BC).provinceId)
			}this._triggerFadeOut();break;case "autobattle":this._continueWithAutoBattle=!0;this._triggerFadeOut();break;case "plunder":this._shouldPlunder=!0;this._triggerFadeOut();break;case "replay":this._showReplayOfTheLastBattle=!0;this._triggerFadeOut();break;case "retreat":switch(b._hx_index){case 0:b.buttonEvent.stopPropagation()
			}this._showRetreatConfirmation()
		}
	},_triggerFadeOut:function(){
		"STATE/BATTLE"!=
I.get_value(this._applicationModel._currentState)||this._continueWithAutoBattle?this._transitionOutFinished():(this._view.mouseEnabled=this._view.mouseChildren=!1,O._to(this._view,.3,
		{alpha: 0,onComplete:m(this,this._transitionOutFinished)
		}))
	},_showRetreatConfirmation:function(){this.dispatchToModules(new ha("WindowEvent/ADD_WINDOW",new Ya({title:r.gettext("Surrender"),closeable:hb.No,content:Ma.TextAndImage(r.gettext("Do you really want to surrender this battle? All of your units will leave the battlefield in their current state."),
Dc.Url("/assets/shared/icons/dialog/surrender.png")),buttons:eb.TwoButtons({kind:Ia.Orange,text:r.gettext("Cancel")
			},
			{kind:Ia.Red,text:r.gettext("PME|Surrender"),callback:Rb.fromSimple(m(this,this._retreatFromBattle))
			})
		})))
	},_retreatFromBattle:function(){this._hasNextWave=!1;this._battlefieldDataService.surrenderWave();this._applicationBattleModel.clearRunningBattle();this._triggerFadeOut();lh.isExpeditionBattle(this._view.battleType)&&this.dispatchToModules(new XZ("GuildExpeditionReturnEvent/RETURN_FROM_BATTLE"))
	},
_onHealingClicked:function(a){a=qb.as(a.target,q8);if(null!=a){a=K.__cast(a.parent,n8);var b=this._battleToArmyUnitVO(a.get_unitVo());null!=b&&(this._healSingleUnit(b,a),this.dispatchToModules(new GN("HealUnitsEvent/HEAL",
			[b
			],this._view.battleType)))
		}
	},_onHealAllClicked:function(a){a=this._view.battleRealmState;a=a.unitsOrder.concat(a.retiredUnits);for(var b=[],c=0;c<a.length;){var d=a[c
			];++c;if(d.ownerId==this._userDataModel.get_player_id()&&d.getCurrentHitpoints()!=d.get_unitType().hitpoints){var e=
this._battleToArmyUnitVO(d);null!=e&&(this._healSingleUnit(e,this._view.get_summaryUnitHealables().h[d.__id__
				]),b.push(e))
			}
		}this.dispatchToModules(new GN("HealUnitsEvent/HEAL",b,this._view.battleType))
	},_healSingleUnit:function(a,b){a.setCurrentHitpoints(b.get_unitVo().getCurrentHitpoints());this._watchedUnits.set(a,b);$o.getInstance().listenTo(a.unitId,m(this,this._onArmyUnitChange))
	},_onArmyUnitChange:function(a){a=a instanceof ko?a:null;var b=this._watchedUnits.h[a.__id__
		];if(null!=b){$o.getInstance().removeListener(a.unitId);
b.get_unitVo().currentHitpoints=a.getCurrentHitpoints();var c=0==a.getCurrentHitpoints()?Qc.get_heal_dead_unit():(a.get_unitType().hitpoints-a.getCurrentHitpoints())*Qc.get_heal_unit_hitpoint();b.get_healButton().setHealCost(c);b.update();b.get_healButton().set_enabled(a.getCurrentHitpoints()!=a.get_unitType().hitpoints);this._updateHealAllCosts()
		}
	},_handleAssetsLoaded:function(a){this._view.setData(a,this._userDataModel.get_player_id());a=this._armyUnitModel.get_defendingUnitsPool();for(var b=this._view.battleRealmState,
c=b.unitsOrder.concat(b.retiredUnits),d=this._shouldShowUnattachedUnitsBadge(),e="guild_raids"==this._view.battleType.type,g=0;g<c.length;){var k=c[g
			];++g;var t=k.ownerId!=this._userDataModel.get_player_id();this._view.addPlayerUnit(k,t,
			-1!=a.indexOf(k.unitId),!t&&d,e)
		}lh.isExpeditionBattle(this._view.battleType)&&this._view.set_disableRanking(!0);this._view.finishDrawing();this._updateHealAllCosts();this._view.healAllButton.setClickCallback(m(this,this._onHealAllClicked));lh.isPvPBattle(this._view.battleType)&&
(this._view.addReplayButton(),b.isVictory()&&this._view.addPlunderButtons());mh.get_instance().mapUIActor("BATTLE_RESULT_BACK_TO_CITY",this._view.get_finishButton())
	},_updateHealAllCosts:function(){var a=this._view.battleRealmState;a=a.unitsOrder.concat(a.retiredUnits);for(var b=0,c=0;c<a.length;){var d=a[c
			];++c;d.ownerId==this._userDataModel.get_player_id()&&(b+=Fm.getHealCost(d.getCurrentHitpoints()))
		}this._view.healAllButton.set_cost(null==b?"null": ""+b);this._view.healAllButton.set_enabled(0<
b);this._view.healAllButton.set_visible(!lh.isReplayBattle(this._view.battleType))
	},_shouldShowUnattachedUnitsBadge:function(){return this._userDataModel.get_settingsVO().highlightUnattachedUnits?!(this._view.battleType instanceof CN):!1
	},_transitionOutFinished:function(){this._view.finalDispose();this.dispatchToModules(new gma({continueWithAutoBattle:this._continueWithAutoBattle,showReplay:this._showReplayOfTheLastBattle,hasNextWave:this._hasNextWave,shouldPlunder:this._shouldPlunder
		}))
	},_battleToArmyUnitVO:function(a){var b=
new ko;b.reset(a);return b
	},__construct:function(a){Ga.prototype.__construct.call(this,a);this._view=a.getInstanceForMapping("de.innogames.strategycity.battle.view.summary.BattleSummaryWindow");this._armyUnitModel=a.getInstanceForMapping("de.innogames.strategycity.shared.model.ArmyUnitModel");this._userDataModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.UserDataModel");this._applicationBattleModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationBattleModel");
this._battlefieldDataService=a.getInstanceForMapping("de.innogames.strategycity.battle.service.BattlefieldService");this._applicationGuildBattlegroundModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationGuildBattlegroundModel");this._applicationModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ApplicationModel");return null
	},__class__:vma
});var o8=function(a,b,c,d,e,g,k){this._maxPointsWidth=NaN;this._maxPoints=0;this._width=NaN;this._highlight=!1;C.call(this);
this._highlight=e;this._width=g;this._maxPoints=k;this._init(a,b,c,d)
};h[
	"de.innogames.strategycity.battle.view.summary.RankingItem"
]=o8;o8.__name__="de.innogames.strategycity.battle.view.summary.RankingItem";o8.__super__=C;o8.prototype=l(C.prototype,
{_init:function(a,b,c,d){var e=this._highlight?16446953: 15719334;this._placeText=P.createArialTextfield(e,!0,
		13,
		4);this._placeText.set_text("0"==b?"":b+".");this._placeText.set_y(5);this._placeText.set_x(3);this._placeText.set_width(25);this.addChild(this._placeText);
this._avatarId=a;this._createIcon();a=16>this._placeText.get_width()?16:this._placeText.get_width();this._avatarIcon.set_x(this._placeText.get_x()+(a+10|0));this._playerText=P.createArialTextfield(e,!0,
		13,
		3);this._playerText.set_y(5);this._playerText.set_x(this._avatarIcon.get_x()+28+10);this._playerText.set_text(c);this._playerText.set_width(290);this.addChild(this._playerText);this._pointsText=P.createArialTextfield(e,!0,
		13);this._pointsText.set_autoSize(3);this._pointsText.set_y(5);this._pointsText.set_text(fa.string(this._maxPoints));
this._maxPointsWidth=this._pointsText.get_width();this._pointsText.set_text(d);this._pointsText.set_x(this._width-this._pointsText.get_width()-10);this.addChild(this._pointsText);this.get_graphics().beginFill(0,.4);this.get_graphics().drawRect(this._width-this._maxPointsWidth-15,
		0,this._maxPointsWidth+10,
		28);this.get_graphics().endFill()
	},_createIcon:function(){this._avatarIcon=new Nh(this._avatarId,
		28,
		28);this.addChild(this._avatarIcon)
	},__class__:o8
});var n8=function(){this._showUnattachedUnitsBadge=
this._isGuildRaids=!1;this._healButton=new q8;L.call(this)
};h[
	"de.innogames.strategycity.battle.view.summary.SummaryUnitHealable"
]=n8;n8.__name__="de.innogames.strategycity.battle.view.summary.SummaryUnitHealable";n8.__super__=L;n8.prototype=l(L.prototype,
{init:function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=!1);null==c&&(c=!1);null==b&&(b=!1);this._unitVo=a;this._showUnattachedUnitsBadge=d;this._isGuildRaids=e;this._baseUnit=new HN(a,c);this.addChild(this._baseUnit);this._baseUnit.addEventListener("mouseOver",
m(this,this._onMouseOver));this._baseUnit.addEventListener("mouseOut",m(this,this._onMouseOut));0<a.ownerId&&!b&&(this._healButton.set_id("heal"),this._healButton.set_x(60),this._healButton.set_y(10),a=Fm.getHealCost(a.getCurrentHitpoints()),this._healButton.set_enabled(0<a),this._healButton.setHealCost(a|0),this.addChild(this._healButton));var g=m(this,this._handleAssetsLoaded);Va.instance.loadImageLibrary("shared/icons/icons").handle(function(k){switch(k._hx_index){case 0:za.invoke(g,k.data);break;
case 1:k=k.failure,null!=y._reportError&&y._reportError(Error("[LOGGER] "+k.message))
			}
		})
	},update:function(){this._baseUnit.updateHealth()
	},get_unitVo:function(){return this._unitVo
	},get_healButton:function(){return this._healButton
	},_handleAssetsLoaded:function(a){this._iconReflib=a;0!=this._unitVo.get_totalDefenceBonus()&&this._addBuffIcon("buff_icon_def");0!=this._unitVo.get_totalAttackBonus()&&this._addBuffIcon("buff_icon_att");1==this._unitVo.teamFlag&&0==this._unitVo.entity_id&&this._showUnattachedUnitsBadge&&
this._addUnattachedBanderole()
	},_addUnattachedBanderole:function(){null!=this._iconReflib&&null==this._unattachedBanderole&&(this._unattachedBanderole=new B(this._iconReflib.getImage("unattached_banderole")),this._unattachedBanderole.set_x(49-this._unattachedBanderole.get_width()-1),this._unattachedBanderole.set_y(0),this.addChild(this._unattachedBanderole))
	},_onMouseOut:function(a){this._tooltip.dispose()
	},_onMouseOver:function(a){this._tooltip=new wF(this._unitVo,!0,
		0,!0,this._isGuildRaids);a=this.getRect(this.stage);
this.contains(this._healButton)?this._tooltip.set_x(a.x+.5*a.width-.5*this._healButton.get_width()):this._tooltip.set_x(a.x+.5*a.width);this._tooltip.set_y(this.getRect(this.stage).get_top());this._getTooltipContainer().addChild(this._tooltip)
	},_addBuffIcon:function(a){if(null!=this._iconReflib){var b=new C;a=this._iconReflib.getImage(a);this.addChild(b);b.addChild(new B(a,
			1,!0));b.set_width(.7*a.width);b.set_height(.7*a.height);b.set_x(32);b.set_y(25)
		}
	},__class__:n8,__properties__:l(L.prototype.__properties__,
	{get_healButton: "get_healButton",get_unitVo: "get_unitVo"
	})
});var iT=function(a,b){this._scenarios=[];this._trackingService=b;this._initScenarios();a.addEventListener("TrackInteractionEvent/TYPE",m(this,this._onTrackingInteractionEvent))
};h[
	"de.innogames.strategycity.behaviourtracker.BehaviourTracker"
]=iT;iT.__name__="de.innogames.strategycity.behaviourtracker.BehaviourTracker";iT.__interfaces__=[kc
];iT.__instantiate=function(a){return new iT(a.getInstanceForMapping("org.robotlegs.utilities.modular.core.IModuleEventDispatcher"),
a.getInstanceForMapping("MarketingTrackingService"))
};iT.prototype={_initScenarios:function(){this._scenarios.push(new zeb("gvgAutoBattle",
		20,
		[
			"open_context_menu",
			"open_sector",
			"start_auto_battle",
			"battle_result_close"
		]));this._scenarios.push(new zeb("gbgAutoBattle",
		15,
		[
			"click_attack_button",
			"start_auto_battle",
			"battle_result_close"
		]))
	},_onTrackingInteractionEvent:function(a){if(sa.isFeatureEnabled("behaviour_tracking")){a.context.toString();for(var b=0,c=this._scenarios;b<c.length;){var d=c[b
				];++b;
d.processAction(a.context);if(d.hasReachedThreshold()){if(d.allSamePosition()){d.reset();d.toString();break
					}this._sendData(d)
				}d.toString()
			}
		}
	},_sendData:function(a){this._trackingService.trackBehaviour(a.toString());a.reset()
	},__construct:function(a){return null
	},__class__:iT
};var $z=function(a,b,c){this._x=a;this._y=b;this.type=c
};h[
	"de.innogames.strategycity.behaviourtracker.context.TrackingContext"
]=$z;$z.__name__="de.innogames.strategycity.behaviourtracker.context.TrackingContext";$z.prototype=
{isEqual:function(a){return this.type==a.type?this.isEqualPosition(a):!1
	},isEqualPosition:function(a){return this._x==a._x?this._y==a._y:!1
	},toString:function(){return""+this.type+"_"+this._x+"_"+this._y
	},__class__:$z
};var wma=function(a,b,c,d){$z.call(this,a,b,c);this._provinceId=d
};h[
	"de.innogames.strategycity.behaviourtracker.context.GBGProvinceTrackingContext"
]=wma;wma.__name__="de.innogames.strategycity.behaviourtracker.context.GBGProvinceTrackingContext";wma.__super__=$z;wma.prototype=l($z.prototype,
{isEqual:function(a){a=a instanceof wma?a:null;return null==a?!1:$z.prototype.isEqual.call(this,a)?this._provinceId==a._provinceId:!1
	},toString:function(){return""+this.type+"_"+this._provinceId+"_"+this._x+"_"+this._y
	},__class__:wma
});var m_=function(a,b,c,d){$z.call(this,a,b,c);this._sectorId=d
};h[
	"de.innogames.strategycity.behaviourtracker.context.GVGSectorTrackingContext"
]=m_;m_.__name__="de.innogames.strategycity.behaviourtracker.context.GVGSectorTrackingContext";m_.__super__=$z;m_.prototype=
l($z.prototype,
{isEqual:function(a){a=a instanceof m_?a:null;return null==a?!1:$z.prototype.isEqual.call(this,a)?this._sectorId==a._sectorId:!1
	},toString:function(){return""+this.type+"_"+this._sectorId+"_"+this._x+"_"+this._y
	},__class__:m_
});var FN=function(a){D.call(this,
	"TrackInteractionEvent/TYPE");this.context=a
};h[
	"de.innogames.strategycity.behaviourtracker.event.TrackInteractionEvent"
]=FN;FN.__name__="de.innogames.strategycity.behaviourtracker.event.TrackInteractionEvent";FN.__super__=D;FN.prototype=
l(D.prototype,
{clone:function(){return new FN(this.context)
	},__class__:FN
});var zeb=function(a,b,c){this._contexts=[];this.name=a;this._threshold=b;this._types=c
};h[
	"de.innogames.strategycity.behaviourtracker.scenario.Scenario"
]=zeb;zeb.__name__="de.innogames.strategycity.behaviourtracker.scenario.Scenario";zeb.prototype={processAction:function(a){var b=this._contexts.length%this._types.length;a.type==this._types[b
		]&&(this._contexts.length<this._types.length||this._contexts[b
		].isEqual(a)?this._contexts.push(a):
this.reset())
	},hasReachedThreshold:function(){return this._contexts.length>=this._threshold
	},reset:function(){this._contexts=[]
	},toString:function(){for(var a=[],b=0,c=this._contexts;b<c.length;)a.push(c[b++
		].toString());return this.name+";"+a.join("|")
	},allSamePosition:function(){for(var a=null,b=0,c=this._contexts;b<c.length;){var d=c[b
			];++b;if(null!=a&&!a.isEqualPosition(d))return!1;a=d
		}return!0
	},__class__:zeb
};var Aeb=function(){this.startedAt=this.endingAt=0;this.showTutorial=this.showInfoScreen=
!1;this.dailyRefreshTime=0;this.showAnimation=!1;this.playerPosition=this.diceRollCost=this.premiumDiceMinValue=this.premiumDiceMaxValue=0
};h[
	"de.innogames.strategycity.boardgame.model.vo.BoardOverviewVO"
]=Aeb;Aeb.__name__="de.innogames.strategycity.boardgame.model.vo.BoardOverviewVO";Aeb.__super__=G;Aeb.prototype=l(G.prototype,
{_getClassName:function(){return"BoardOverview"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.context=this.context;a.playerPosition=this.playerPosition;
a.boardLevel=this.boardLevel;a.backgroundAsset=this.backgroundAsset;a.diceResourceId=this.diceResourceId;a.diceRollCost=this.diceRollCost;a.premiumDiceResourceId=this.premiumDiceResourceId;a.premiumDiceMinValue=this.premiumDiceMinValue;a.premiumDiceMaxValue=this.premiumDiceMaxValue;a.showAnimation=this.showAnimation;a.dailyRefreshTime=this.dailyRefreshTime;a.showTutorial=this.showTutorial;a.showInfoScreen=this.showInfoScreen;a.startedAt=this.startedAt;a.endingAt=this.endingAt;a.tiles=q.arrayToJSONObject(this.tiles,
q.voToJSON);return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.context=q.normalizeString(a.context);this.playerPosition=q.normalizeInt(a.playerPosition);this.boardLevel=q.normalizeString(a.boardLevel);this.backgroundAsset=q.normalizeString(a.backgroundAsset);this.diceResourceId=q.normalizeString(a.diceResourceId);this.diceRollCost=q.normalizeInt(a.diceRollCost);this.premiumDiceResourceId=q.normalizeString(a.premiumDiceResourceId);this.premiumDiceMinValue=q.normalizeInt(a.premiumDiceMinValue);
this.premiumDiceMaxValue=q.normalizeInt(a.premiumDiceMaxValue);this.showAnimation=q.normalizeBool(a.showAnimation);this.dailyRefreshTime=q.normalizeInt(a.dailyRefreshTime);this.showTutorial=q.normalizeBool(a.showTutorial);this.showInfoScreen=q.normalizeBool(a.showInfoScreen);this.startedAt=q.normalizeInt(a.startedAt);this.endingAt=q.normalizeInt(a.endingAt);this.tiles=q.convertArray(a.tiles,q.convertObject,
		[])
	},__class__:Aeb
});var xma=function(){};h[
	"de.innogames.strategycity.boardgame.model.vo.BoardTileVO"
]=
xma;xma.__name__="de.innogames.strategycity.boardgame.model.vo.BoardTileVO";xma.__super__=G;xma.prototype=l(G.prototype,
{_getClassName:function(){return"BoardTile"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.type=this.type;null!=this.reward&&(a.reward=this.reward.toJSONObject());return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.type=q.normalizeString(a.type);this.reward=q.convertObject(a.reward)
	},__class__:xma
});var Beb=function(){this.newPlayerPosition=
0
};h[
	"de.innogames.strategycity.boardgame.model.vo.BoardUpdateVO"
]=Beb;Beb.__name__="de.innogames.strategycity.boardgame.model.vo.BoardUpdateVO";Beb.__super__=G;Beb.prototype=l(G.prototype,
{_getClassName:function(){return"BoardUpdate"
	},toJSONObject:function(){var a=G.prototype.toJSONObject.call(this);a.boardLevel=this.boardLevel;a.backgroundAsset=this.backgroundAsset;a.newPlayerPosition=this.newPlayerPosition;a.changedTiles=q.mapToJSONObject(this.changedTiles,q.voToJSON);a.levelModifiedTiles=q.mapToJSONObject(this.levelModifiedTiles,
q.voToJSON);return a
	},fromJSONObject:function(a){G.prototype.fromJSONObject.call(this,a);this.boardLevel=q.normalizeString(a.boardLevel);this.backgroundAsset=q.normalizeString(a.backgroundAsset);this.newPlayerPosition=q.normalizeInt(a.newPlayerPosition);this.changedTiles=q.convertIntMap(a.changedTiles,q.convertObject);this.levelModifiedTiles=q.convertIntMap(a.levelModifiedTiles,q.convertObject)
	},__class__:Beb
});var tcb=function(a,b){pn.call(this,a,!0,b)
};h[
	"de.innogames.strategycity.campaignmap.CampaignMapContext"
]=
tcb;tcb.__name__="de.innogames.strategycity.campaignmap.CampaignMapContext";tcb.__super__=pn;tcb.prototype=l(pn.prototype,
{startup:function(){pn.prototype.startup.call(this);this.get_commandMap().mapEvent("startup",yma);this.get_commandMap().mapEvent("shutdown",zma);this.dispatchEvent(new Bq("startup"))
	},__class__:tcb
});var Ama=function(){};h[
	"de.innogames.strategycity.campaignmap.controller.BuySectorCommand"
]=Ama;Ama.__name__="de.innogames.strategycity.campaignmap.controller.BuySectorCommand";Ama.__instantiate=
function(a){return new Ama
};Ama.__super__=Pa;Ama.prototype=l(Pa.prototype,
{execute:function(){Da.withGenericLoader(this._campaignDataService.buySector(this._event.provinceId,this._event.sectorId)).handle(m(this,this._onServerResponse))
	},_onServerResponse:function(a){this.dispatchToModules(new r8("ProvinceDataEvent/LOADED",a))
	},__construct:function(a){Pa.prototype.__construct.call(this,a);this._campaignDataService=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.service.CampaignDataService");
this._event=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.controller.events.BuySectorEvent");return null
	},__class__:Ama
});var zma=function(){};h[
	"de.innogames.strategycity.campaignmap.controller.CampaignShutDownCommand"
]=zma;zma.__name__="de.innogames.strategycity.campaignmap.controller.CampaignShutDownCommand";zma.__instantiate=function(a){return new zma
};zma.__super__=M;zma.prototype=l(M.prototype,
{execute:function(){this._campaignDataService.dispose();this._campainModel.clear()
	},
__construct:function(a){M.prototype.__construct.call(this,a);this._campaignDataService=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.service.CampaignDataService");this._campainModel=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.model.CampaignModel");return null
	},__class__:zma
});var s8=function(){};h[
	"de.innogames.strategycity.campaignmap.controller.CampaignTutorialMapperCommand"
]=s8;s8.__name__="de.innogames.strategycity.campaignmap.controller.CampaignTutorialMapperCommand";
s8.__instantiate=function(a){return new s8
};s8.__super__=Vz;s8.prototype=l(Vz.prototype,
{_mapBattleTutorialModuleInstructions:function(){this._tutorialMapper.mapInstructions(IOb.getInstructions(this.injector,this.eventDispatcher,this.moduleEventDispatcher))
	},__class__:s8
});var Bma=function(){};h[
	"de.innogames.strategycity.campaignmap.controller.InfiltrateSectorCommand"
]=Bma;Bma.__name__="de.innogames.strategycity.campaignmap.controller.InfiltrateSectorCommand";Bma.__instantiate=function(a){return new Bma
};
Bma.__super__=M;Bma.prototype=l(M.prototype,
{execute:function(){this.campaignDataService.infiltrate(this.campaignModel.currentProvinceId,this.campaignModel.currentSectorId);ic.instance.getLibrary("sounds/campaign/campaignsounds").playSound("Campaign_Provinces_Infiltrate");this._setSectorInfiltrated(!0);this.dispatch(new yF("SectorEvent/INFILTRATE_RESULT",this.campaignModel.currentSectorId))
	},_setSectorInfiltrated:function(a){JOb.setSectorInfiltrated(this.provinceModel,this.campaignModel,a);var b=
this.provinceModel.getInfiltrateCostsById(this.campaignModel.currentSectorId);a?this.resourcesModel.subtractResourceById("money",b):this.resourcesModel.addResourceById("money",b)
	},__construct:function(a){M.prototype.__construct.call(this,a);this.campaignDataService=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.service.CampaignDataService");this.event=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.controller.events.SectorEvent");this.campaignModel=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.model.CampaignModel");
this.provinceModel=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.model.ProvinceModel");this.resourcesModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ResourcesModel");return null
	},__class__:Bma
});var Cma=function(){};h[
	"de.innogames.strategycity.campaignmap.controller.InstantScoutCommand"
]=Cma;Cma.__name__="de.innogames.strategycity.campaignmap.controller.InstantScoutCommand";Cma.__instantiate=function(a){return new Cma
};Cma.__super__=M;Cma.prototype=l(M.prototype,
{execute:function(){this._currentScoutView=this.campaignModel.scoutView;O.killTweensOf(this._currentScoutView);this._scoutTargetProvince=this.event.province;O._to(this._currentScoutView,.1,
		{alpha: 0,yoyo:!0,repeat: -1
		});this.campaignDataService.buyInstantScout().handle(m(this,this._onServerResponse));this._updateCityResources();ic.instance.getLibrary("sounds/campaign/campaignsounds").playSound("Campaign_Provinces_Scout_vs1")
	},_onServerResponse:function(a){O.killTweensOf(this._currentScoutView);this._currentScoutView.set_alpha(1);
this.scoutModel.set_timeToTarget(0);a=a.province;var b=this.campaignModel.get_nodeLookup().h[this._scoutTargetProvince
		];this.campaignModel.provinceVOsLookup.h[this._scoutTargetProvince
		]=a;b.val=a;this.dispatch(new Jx("CampaignScoutEvent/INSTANT_SCOUT_FINISHED",this.scoutModel.currentProvince))
	},_updateCityResources:function(){var a=Fd.createResourceCollectionFromIdValuePair("premium",Qc.get_instant_scout());this.resourcesModel.subtractResources(a)
	},__construct:function(a){M.prototype.__construct.call(this,
a);this.campaignDataService=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.service.CampaignDataService");this.event=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.controller.events.CampaignScoutEvent");this.campaignModel=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.model.CampaignModel");this.resourcesModel=a.getInstanceForMapping("de.innogames.strategycity.main.model.ResourcesModel");this.scoutModel=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.model.CampaignScoutModel");
return null
	},__class__:Cma
});var Dma=function(){};h[
	"de.innogames.strategycity.campaignmap.controller.LoadProvinceDataCommand"
]=Dma;Dma.__name__="de.innogames.strategycity.campaignmap.controller.LoadProvinceDataCommand";Dma.__instantiate=function(a){return new Dma
};Dma.__super__=Pa;Dma.prototype=l(Pa.prototype,
{execute:function(){
		-1<this._provinceEvent.get_targetId()&&(this._provinceModel.currentProvince=this._provinceEvent.get_targetId());this._campaignDataService.getProvinceData(this._provinceModel.currentProvince).handle(m(this,
this._onServerResponse));ic.instance.getLibrary("sounds/campaign/campaignsounds").playSound("Campaign_ProvinceMap")
	},_onServerResponse:function(a){this.dispatchToModules(new r8("ProvinceDataEvent/LOADED",a))
	},__construct:function(a){Pa.prototype.__construct.call(this,a);this._campaignDataService=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.service.CampaignDataService");this._provinceEvent=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.controller.events.ProvinceEvent");
this._provinceModel=a.getInstanceForMapping("de.innogames.strategycity.campaignmap.model.ProvinceModel");return null
	},__class__:Dma
});var Ema=function(){this._provinceId=0
};h[
	"de.innogames.strategycity.campaignmap.controller.MoveScoutToProvinceCommand"
]=Ema;Ema.__name__="de.innogames.strategycity.campaignmap.controller.MoveScoutToProvinceCommand";Ema.__instantiate=function(a){return new Ema
};Ema.__super__=Pa;Ema.prototype=l(Pa.prototype,
{execute:function(){this._scoutView=this._campaignModel.scoutView;
this._provinceId=this._event.provinceId;this._armyPos=this._event.armyPos;this._startNode=this._campaignModel.get_nodeLookup().h[this._scoutModel.currentProvince
		];this._goalNode=this._campaignModel.get_nodeLookup().h[this._provinceId
		];if(this._startNode!=this._goalNode){var a=(new OXa(this._campaignModel.get_campaignGraph(),this._startNode,this._goalNode)).findPath(),b=0,c=[];c.push(this._startNode.val.id);for(var d=0;d<a.length-1;){var e=a[d
				].getArc(a[d+1
				]);b+=a[d+1
				].val.isPlayerOwned?600:e.cost;
c.push(a[d+1
				].val.id);++d
			}b=this._scoutModel.applyScoutT